{
  AzureBlobStorageTestAccount a1, a2, a3;
  a1=AzureBlobStorageTestAccount.createMock();
  assertEquals(0,getFilesCreated(a1));
  a2=AzureBlobStorageTestAccount.createMock();
  assertEquals(0,getFilesCreated(a2));
  a1.getFileSystem().create(new Path("/foo")).close();
  a1.getFileSystem().create(new Path("/bar")).close();
  a2.getFileSystem().create(new Path("/baz")).close();
  assertEquals(0,getFilesCreated(a1));
  assertEquals(0,getFilesCreated(a2));
  a1.closeFileSystem();
  a2.closeFileSystem();
  assertEquals(2,getFilesCreated(a1));
  assertEquals(1,getFilesCreated(a2));
  a3=AzureBlobStorageTestAccount.createMock();
  assertEquals(0,getFilesCreated(a3));
  a3.closeFileSystem();
  assertEquals(0,getFilesCreated(a3));
}
