{
  FSInputStream in=new MockFSInputStream();
  ByteArrayOutputStream os=new ByteArrayOutputStream();
{
    List<InclusiveByteRange> ranges=strToRanges("0-,10-300",500);
    HttpServletResponse response=Mockito.mock(HttpServletResponse.class);
    StreamFile.sendPartialData(in,os,response,500,ranges);
    Mockito.verify(response).setStatus(416);
  }
{
    os.reset();
    HttpServletResponse response=Mockito.mock(HttpServletResponse.class);
    StreamFile.sendPartialData(in,os,response,500,null);
    Mockito.verify(response).setStatus(416);
  }
{
    List<InclusiveByteRange> ranges=strToRanges("600-800",500);
    HttpServletResponse response=Mockito.mock(HttpServletResponse.class);
    StreamFile.sendPartialData(in,os,response,500,ranges);
    Mockito.verify(response).setStatus(416);
  }
{
    List<InclusiveByteRange> ranges=strToRanges("100-300",500);
    HttpServletResponse response=Mockito.mock(HttpServletResponse.class);
    StreamFile.sendPartialData(in,os,response,500,ranges);
    Mockito.verify(response).setStatus(206);
    assertArrayEquals("Byte range from 100-300",getOutputArray(100,201),os.toByteArray());
  }
}
