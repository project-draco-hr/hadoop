{
  int count=0;
  for (  String blockPoolID : source.getBlockPoolList()) {
    FsVolumeSpi.BlockIterator sourceIter=source.newBlockIterator(blockPoolID,"TestDiskBalancerSource");
    while (!sourceIter.atEnd()) {
      ExtendedBlock block=sourceIter.nextBlock();
      if (block != null) {
        count++;
      }
    }
  }
  return count;
}
