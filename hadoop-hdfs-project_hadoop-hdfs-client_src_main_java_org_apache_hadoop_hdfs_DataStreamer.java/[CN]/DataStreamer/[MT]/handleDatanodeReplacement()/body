{
  if (dfsClient.dtpReplaceDatanodeOnFailure.satisfy(stat.getReplication(),nodes,isAppend,isHflushed)) {
    try {
      addDatanode2ExistingPipeline();
    }
 catch (    IOException ioe) {
      if (!dfsClient.dtpReplaceDatanodeOnFailure.isBestEffort()) {
        throw ioe;
      }
      LOG.warn("Failed to replace datanode." + " Continue with the remaining datanodes since " + BlockWrite.ReplaceDatanodeOnFailure.BEST_EFFORT_KEY + " is set to true.",ioe);
    }
  }
}
