{
  if (favoredNodes == null) {
    return null;
  }
 else {
    boolean[] pinnings=new boolean[nodes.length];
    HashSet<String> favoredSet=new HashSet<String>(Arrays.asList(favoredNodes));
    for (int i=0; i < nodes.length; i++) {
      pinnings[i]=favoredSet.remove(nodes[i].getXferAddrWithHostname());
      LOG.debug("{} was chosen by name node (favored={}).",nodes[i].getXferAddrWithHostname(),pinnings[i]);
    }
    if (shouldLog && !favoredSet.isEmpty()) {
      LOG.warn("These favored nodes were specified but not chosen: " + favoredSet + " Specified favored nodes: "+ Arrays.toString(favoredNodes));
    }
    return pinnings;
  }
}
