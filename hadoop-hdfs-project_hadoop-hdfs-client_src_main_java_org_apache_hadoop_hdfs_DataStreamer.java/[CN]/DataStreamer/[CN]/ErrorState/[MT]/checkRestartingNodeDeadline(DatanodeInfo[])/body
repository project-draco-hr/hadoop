{
  if (restartingNodeIndex >= 0) {
    if (!error) {
      throw new IllegalStateException("error=false while checking" + " restarting node deadline");
    }
    if (badNodeIndex == restartingNodeIndex) {
      badNodeIndex=-1;
    }
    if (Time.monotonicNow() >= restartingNodeDeadline) {
      restartingNodeDeadline=0;
      final int i=restartingNodeIndex;
      restartingNodeIndex=-1;
      LOG.warn("Datanode " + i + " did not restart within "+ datanodeRestartTimeout+ "ms: "+ nodes[i]);
      if (badNodeIndex == -1) {
        badNodeIndex=i;
      }
    }
  }
}
