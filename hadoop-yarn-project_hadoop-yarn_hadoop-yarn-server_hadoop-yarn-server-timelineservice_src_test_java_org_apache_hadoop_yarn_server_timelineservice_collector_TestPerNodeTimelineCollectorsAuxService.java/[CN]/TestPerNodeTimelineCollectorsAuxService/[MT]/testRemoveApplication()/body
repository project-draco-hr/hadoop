{
  auxService=createCollectorAndAddApplication();
  assertTrue(auxService.hasApplication(appAttemptId.getApplicationId()));
  ContainerId containerId=getAMContainerId();
  ContainerTerminationContext context=mock(ContainerTerminationContext.class);
  when(context.getContainerId()).thenReturn(containerId);
  when(context.getContainerType()).thenReturn(ContainerType.APPLICATION_MASTER);
  auxService.stopContainer(context);
  assertFalse(auxService.hasApplication(appAttemptId.getApplicationId()));
  auxService.close();
}
