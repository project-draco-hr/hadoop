{
  final ExtendedBlock blk=constructInternalBlock(bg.getBlock(),cellSize,dataBlkNum,idxInBlockGroup);
  if (idxInReturnedLocs < bg.getLocations().length) {
    return new LocatedBlock(blk,new DatanodeInfo[]{bg.getLocations()[idxInReturnedLocs]},new String[]{bg.getStorageIDs()[idxInReturnedLocs]},new StorageType[]{bg.getStorageTypes()[idxInReturnedLocs]},bg.getStartOffset(),bg.isCorrupt(),null);
  }
 else {
    return new LocatedBlock(blk,null,null,null,bg.getStartOffset(),bg.isCorrupt(),null);
  }
}
