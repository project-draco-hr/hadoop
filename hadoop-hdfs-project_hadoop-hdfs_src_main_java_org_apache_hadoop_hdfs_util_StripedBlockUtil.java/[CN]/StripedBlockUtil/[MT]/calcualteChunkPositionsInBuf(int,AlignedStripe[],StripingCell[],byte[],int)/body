{
  int done=0;
  for (  StripingCell cell : cells) {
    long cellStart=cell.idxInInternalBlk * cellSize + cell.offset;
    long cellEnd=cellStart + cell.size - 1;
    for (    AlignedStripe s : stripes) {
      long stripeEnd=s.getOffsetInBlock() + s.getSpanInBlock() - 1;
      long overlapStart=Math.max(cellStart,s.getOffsetInBlock());
      long overlapEnd=Math.min(cellEnd,stripeEnd);
      int overLapLen=(int)(overlapEnd - overlapStart + 1);
      if (overLapLen <= 0) {
        continue;
      }
      if (s.chunks[cell.idxInStripe] == null) {
        s.chunks[cell.idxInStripe]=new StripingChunk(buf);
      }
      s.chunks[cell.idxInStripe].addByteArraySlice((int)(offsetInBuf + done + overlapStart - cellStart),overLapLen);
    }
    done+=cell.size;
  }
}
