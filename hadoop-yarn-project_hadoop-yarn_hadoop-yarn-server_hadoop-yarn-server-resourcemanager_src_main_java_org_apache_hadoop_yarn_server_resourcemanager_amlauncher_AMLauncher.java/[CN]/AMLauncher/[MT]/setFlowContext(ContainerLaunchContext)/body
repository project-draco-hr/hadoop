{
  if (YarnConfiguration.timelineServiceV2Enabled(conf)) {
    Map<String,String> environment=container.getEnvironment();
    ApplicationId applicationId=application.getAppAttemptId().getApplicationId();
    RMApp app=rmContext.getRMApps().get(applicationId);
    setFlowTags(environment,TimelineUtils.FLOW_NAME_TAG_PREFIX,TimelineUtils.generateDefaultFlowName(app.getName(),applicationId));
    setFlowTags(environment,TimelineUtils.FLOW_VERSION_TAG_PREFIX,TimelineUtils.DEFAULT_FLOW_VERSION);
    setFlowTags(environment,TimelineUtils.FLOW_RUN_ID_TAG_PREFIX,String.valueOf(app.getStartTime()));
    for (    String tag : app.getApplicationTags()) {
      String[] parts=tag.split(":",2);
      if (parts.length != 2 || parts[1].isEmpty()) {
        continue;
      }
switch (parts[0].toUpperCase()) {
case TimelineUtils.FLOW_NAME_TAG_PREFIX:
        setFlowTags(environment,TimelineUtils.FLOW_NAME_TAG_PREFIX,parts[1]);
      break;
case TimelineUtils.FLOW_VERSION_TAG_PREFIX:
    setFlowTags(environment,TimelineUtils.FLOW_VERSION_TAG_PREFIX,parts[1]);
  break;
case TimelineUtils.FLOW_RUN_ID_TAG_PREFIX:
setFlowTags(environment,TimelineUtils.FLOW_RUN_ID_TAG_PREFIX,parts[1]);
break;
default :
break;
}
}
}
}
