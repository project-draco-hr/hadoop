{
  final Path foo=new Path("/foo");
  DFSTestUtil.createFile(dfs,foo,BLOCKSIZE,REPLICATION,0);
  cluster.restartNameNode(true);
  dfs.delete(foo,true);
  Assert.assertEquals(0,cluster.getNamesystem().getBlocksTotal());
  Assert.assertEquals(REPLICATION,cluster.getNamesystem().getPendingDeletionBlocks());
  Thread.sleep(6000);
  Assert.assertEquals(0,cluster.getNamesystem().getBlocksTotal());
  Assert.assertEquals(0,cluster.getNamesystem().getPendingDeletionBlocks());
}
