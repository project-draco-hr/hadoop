{
  DatanodeInfo[] newNodes=new DatanodeInfo[2];
  newNodes[0]=nodes[0];
  newNodes[1]=nodes[1];
  String[] storageIDs={"s0","s1"};
  client.getNamenode().updatePipeline(client.getClientName(),oldBlock,newBlock,newNodes,storageIDs);
  DFSTestUtil.abortStream((DFSOutputStream)out.getWrappedStream());
}
