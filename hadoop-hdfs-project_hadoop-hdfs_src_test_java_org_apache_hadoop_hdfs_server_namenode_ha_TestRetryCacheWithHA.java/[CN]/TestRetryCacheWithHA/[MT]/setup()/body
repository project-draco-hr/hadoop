{
  conf.setLong(DFSConfigKeys.DFS_BLOCK_SIZE_KEY,BlockSize);
  conf.setInt(DFSConfigKeys.DFS_NAMENODE_LIST_CACHE_DIRECTIVES_NUM_RESPONSES,ResponseSize);
  conf.setInt(DFSConfigKeys.DFS_NAMENODE_LIST_CACHE_POOLS_NUM_RESPONSES,ResponseSize);
  conf.setBoolean(DFSConfigKeys.DFS_NAMENODE_ACLS_ENABLED_KEY,true);
  conf.setBoolean(DFSConfigKeys.DFS_NAMENODE_XATTRS_ENABLED_KEY,true);
  cluster=new MiniDFSCluster.Builder(conf).nnTopology(MiniDFSNNTopology.simpleHATopology()).numDataNodes(DataNodes).build();
  cluster.waitActive();
  cluster.transitionToActive(0);
  HATestUtil.setFailoverConfigurations(cluster,conf);
  dfs=(DistributedFileSystem)HATestUtil.configureFailoverFs(cluster,conf);
}
