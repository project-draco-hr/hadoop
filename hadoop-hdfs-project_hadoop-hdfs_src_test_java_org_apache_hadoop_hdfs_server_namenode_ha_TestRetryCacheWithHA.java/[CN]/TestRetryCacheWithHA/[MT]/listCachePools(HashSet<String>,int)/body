{
  HashSet<String> tmpNames=(HashSet<String>)poolNames.clone();
  RemoteIterator<CachePoolEntry> pools=dfs.listCachePools();
  int poolCount=poolNames.size();
  for (int i=0; i < poolCount; i++) {
    CachePoolEntry pool=pools.next();
    String pollName=pool.getInfo().getPoolName();
    assertTrue("The pool name should be expected",tmpNames.remove(pollName));
    if (i % 2 == 0) {
      int standby=active;
      active=(standby == 0) ? 1 : 0;
      cluster.transitionToStandby(standby);
      cluster.transitionToActive(active);
      cluster.waitActive(active);
    }
  }
  assertTrue("All pools must be found",tmpNames.isEmpty());
}
