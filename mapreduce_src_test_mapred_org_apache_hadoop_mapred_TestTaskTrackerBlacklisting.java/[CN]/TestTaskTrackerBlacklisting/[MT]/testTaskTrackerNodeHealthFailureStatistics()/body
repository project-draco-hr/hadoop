{
  int failureCount=getFailureCountSinceStart(jobTracker,trackers[0]);
  sendHeartBeat(null,false);
  for (  String tracker : trackers) {
    assertEquals("Failure count updated wrongly for tracker : " + tracker,failureCount,getFailureCountSinceStart(jobTracker,tracker));
  }
  TaskTrackerHealthStatus status=getUnhealthyNodeStatus("ERROR");
  sendHeartBeat(status,false);
  failureCount++;
  for (  String tracker : trackers) {
    assertEquals("Failure count updated wrongly for tracker : " + tracker,failureCount,getFailureCountSinceStart(jobTracker,tracker));
  }
  sendHeartBeat(status,false);
  for (  String tracker : trackers) {
    assertEquals("Failure count updated wrongly for tracker : " + tracker,failureCount,getFailureCountSinceStart(jobTracker,tracker));
  }
  sendHeartBeat(null,false);
  for (  String tracker : trackers) {
    assertEquals("Failure count updated wrongly for tracker : " + tracker,failureCount,getFailureCountSinceStart(jobTracker,tracker));
  }
}
