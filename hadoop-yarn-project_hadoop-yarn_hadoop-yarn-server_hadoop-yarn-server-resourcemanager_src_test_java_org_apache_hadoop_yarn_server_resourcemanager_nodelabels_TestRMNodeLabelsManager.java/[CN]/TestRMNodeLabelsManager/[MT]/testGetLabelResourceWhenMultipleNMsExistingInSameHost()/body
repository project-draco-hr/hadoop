{
  mgr.activateNode(NodeId.newInstance("n1",1),SMALL_RESOURCE);
  mgr.activateNode(NodeId.newInstance("n1",2),SMALL_RESOURCE);
  mgr.activateNode(NodeId.newInstance("n1",3),SMALL_RESOURCE);
  mgr.activateNode(NodeId.newInstance("n1",4),SMALL_RESOURCE);
  Assert.assertEquals(mgr.getResourceByLabel(CommonNodeLabelsManager.NO_LABEL,null),Resources.multiply(SMALL_RESOURCE,4));
  mgr.addToCluserNodeLabels(toSet("p1"));
  mgr.addLabelsToNode(ImmutableMap.of(toNodeId("n1:1"),toSet("p1"),toNodeId("n1:2"),toSet("p1")));
  Assert.assertEquals(mgr.getResourceByLabel(CommonNodeLabelsManager.NO_LABEL,null),Resources.multiply(SMALL_RESOURCE,2));
  Assert.assertEquals(mgr.getResourceByLabel("p1",null),Resources.multiply(SMALL_RESOURCE,2));
}
