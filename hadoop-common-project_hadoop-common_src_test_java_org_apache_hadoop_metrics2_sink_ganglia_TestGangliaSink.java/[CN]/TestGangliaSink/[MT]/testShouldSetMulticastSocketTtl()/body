{
  SubsetConfiguration conf=new ConfigBuilder().add("test.sink.ganglia.multicast",true).add("test.sink.ganglia.multicast.ttl",3).subset("test.sink.ganglia");
  GangliaSink30 gangliaSink=new GangliaSink30();
  gangliaSink.init(conf);
  DatagramSocket socket=gangliaSink.getDatagramSocket();
  assertTrue("Did not create MulticastSocket",socket != null && socket instanceof MulticastSocket);
  int ttl=((MulticastSocket)socket).getTimeToLive();
  assertEquals("Did not set TTL",3,ttl);
}
