{
  if (buffer.position() > 0 && buffer.remaining() < length) {
    flush();
  }
}
