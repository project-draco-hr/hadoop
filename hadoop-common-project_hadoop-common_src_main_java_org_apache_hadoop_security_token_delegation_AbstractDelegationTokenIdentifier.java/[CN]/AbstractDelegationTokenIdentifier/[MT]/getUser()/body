{
  if ((owner == null) || ("".equals(owner.toString()))) {
    return null;
  }
  final UserGroupInformation realUgi;
  final UserGroupInformation ugi;
  if ((realUser == null) || ("".equals(realUser.toString())) || realUser.equals(owner)) {
    ugi=realUgi=UserGroupInformation.createRemoteUser(owner.toString());
  }
 else {
    realUgi=UserGroupInformation.createRemoteUser(realUser.toString());
    ugi=UserGroupInformation.createProxyUser(owner.toString(),realUgi);
  }
  realUgi.setAuthenticationMethod(AuthenticationMethod.TOKEN);
  return ugi;
}
