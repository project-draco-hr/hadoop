{
  TaskLogAppender appender=new TaskLogAppender();
  System.setProperty(TaskLogAppender.TASKID_PROPERTY,"attempt_01_02_m03_04_001");
  System.setProperty(TaskLogAppender.LOGSIZE_PROPERTY,"1003");
  appender.activateOptions();
  assertEquals(appender.getTaskId(),"attempt_01_02_m03_04_001");
  assertEquals(appender.getTotalLogFileSize(),1000);
  assertEquals(appender.getIsCleanup(),false);
  Writer writer=new StringWriter();
  appender.setWriter(writer);
  Layout layout=new PatternLayout("%-5p [%t]: %m%n");
  appender.setLayout(layout);
  Category logger=Logger.getLogger(getClass().getName());
  LoggingEvent event=new LoggingEvent("fqnOfCategoryClass",logger,Priority.INFO,"message",new Throwable());
  appender.append(event);
  appender.flush();
  appender.close();
  assertTrue(writer.toString().length() > 0);
  appender=new TaskLogAppender();
  appender.setIsCleanup(true);
  appender.activateOptions();
  assertEquals(appender.getIsCleanup(),true);
}
