{
  if (LOG.isTraceEnabled()) {
    LOG.trace("GOT EXCEPITION",e);
  }
  final Response.Status s;
  if (e instanceof SecurityException) {
    s=Response.Status.UNAUTHORIZED;
  }
 else   if (e instanceof FileNotFoundException) {
    s=Response.Status.NOT_FOUND;
  }
 else   if (e instanceof IOException) {
    s=Response.Status.FORBIDDEN;
  }
 else   if (e instanceof UnsupportedOperationException) {
    s=Response.Status.BAD_REQUEST;
  }
 else {
    s=Response.Status.INTERNAL_SERVER_ERROR;
  }
  final String js=JsonUtil.toJsonString(e);
  return Response.status(s).type(MediaType.APPLICATION_JSON).entity(js).build();
}
