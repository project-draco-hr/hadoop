{
  this.delSrvc=new DeletionService(createContainerExecutor());
  delSrvc=spy(delSrvc);
  this.delSrvc.init(conf);
  this.conf.set(YarnConfiguration.NM_LOG_DIRS,localLogDir.getAbsolutePath());
  this.conf.set(YarnConfiguration.NM_REMOTE_APP_LOG_DIR,this.remoteRootLogDir.getAbsolutePath());
  List<String> logDirs=super.dirsHandler.getLogDirs();
  LocalDirsHandlerService dirsHandler=spy(super.dirsHandler);
  when(dirsHandler.getLogDirs()).thenReturn(new ArrayList<String>());
  when(dirsHandler.getLogDirsForRead()).thenReturn(logDirs);
  LogAggregationService logAggregationService=spy(new LogAggregationService(dispatcher,this.context,this.delSrvc,dirsHandler));
  verifyLocalFileDeletion(logAggregationService);
}
