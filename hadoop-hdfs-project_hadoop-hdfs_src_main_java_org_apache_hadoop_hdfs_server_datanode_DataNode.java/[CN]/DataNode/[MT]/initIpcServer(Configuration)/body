{
  InetSocketAddress ipcAddr=NetUtils.createSocketAddr(conf.get("dfs.datanode.ipc.address"));
  ipcServer=RPC.getServer(DataNode.class,this,ipcAddr.getHostName(),ipcAddr.getPort(),conf.getInt(DFS_DATANODE_HANDLER_COUNT_KEY,DFS_DATANODE_HANDLER_COUNT_DEFAULT),false,conf,blockPoolTokenSecretManager);
  if (conf.getBoolean(CommonConfigurationKeys.HADOOP_SECURITY_AUTHORIZATION,false)) {
    ipcServer.refreshServiceAcl(conf,new HDFSPolicyProvider());
  }
}
