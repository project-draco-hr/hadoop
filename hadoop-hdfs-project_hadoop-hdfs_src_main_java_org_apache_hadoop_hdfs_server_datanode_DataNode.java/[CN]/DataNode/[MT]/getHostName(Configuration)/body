{
  String name=config.get(DFS_DATANODE_HOST_NAME_KEY);
  if (name == null) {
    String dnsInterface=config.get(CommonConfigurationKeys.HADOOP_SECURITY_DNS_INTERFACE_KEY);
    String nameServer=config.get(CommonConfigurationKeys.HADOOP_SECURITY_DNS_NAMESERVER_KEY);
    boolean fallbackToHosts=false;
    if (dnsInterface == null) {
      dnsInterface=config.get(DFS_DATANODE_DNS_INTERFACE_KEY);
      nameServer=config.get(DFS_DATANODE_DNS_NAMESERVER_KEY);
    }
 else {
      fallbackToHosts=true;
    }
    name=DNS.getDefaultHost(dnsInterface,nameServer,fallbackToHosts);
  }
  return name;
}
