{
  return new DataEncryptionKeyFactory(){
    @Override public DataEncryptionKey newDataEncryptionKey(){
      return dnConf.encryptDataTransfer ? blockPoolTokenSecretManager.generateDataEncryptionKey(block.getBlockPoolId()) : null;
    }
  }
;
}
