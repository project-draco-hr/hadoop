{
  DistCpOptions option;
  Path targetPath;
  List<Path> sourcePaths=new ArrayList<Path>();
  String[] leftOverArgs=command.getArgs();
  if (leftOverArgs == null || leftOverArgs.length < 1) {
    throw new IllegalArgumentException("Target path not specified");
  }
  targetPath=new Path(leftOverArgs[leftOverArgs.length - 1].trim());
  for (int index=0; index < leftOverArgs.length - 1; index++) {
    sourcePaths.add(new Path(leftOverArgs[index].trim()));
  }
  if (command.hasOption(DistCpOptionSwitch.SOURCE_FILE_LISTING.getSwitch())) {
    if (!sourcePaths.isEmpty()) {
      throw new IllegalArgumentException("Both source file listing and " + "source paths present");
    }
    option=new DistCpOptions(new Path(getVal(command,DistCpOptionSwitch.SOURCE_FILE_LISTING.getSwitch())),targetPath);
  }
 else {
    if (sourcePaths.isEmpty()) {
      throw new IllegalArgumentException("Neither source file listing nor " + "source paths present");
    }
    option=new DistCpOptions(sourcePaths,targetPath);
  }
  return option;
}
