{
  Path file=new Path(testBaseDir1(),"file");
  Path dir=new Path(testBaseDir2());
  Path linkToFile=new Path(testBaseDir1(),"linkToFile");
  Path linkToDir=new Path(testBaseDir1(),"linkToDir");
  createAndWriteFile(file);
  fc.createSymlink(file,linkToFile,false);
  fc.createSymlink(dir,linkToDir,false);
  FsPermission perms=fc.getFileLinkStatus(linkToFile).getPermission();
  fc.setPermission(linkToFile,new FsPermission((short)0664));
  fc.setOwner(linkToFile,"user","group");
  assertEquals(perms,fc.getFileLinkStatus(linkToFile).getPermission());
  FileStatus stat=fc.getFileStatus(file);
  assertEquals(0664,stat.getPermission().toShort());
  assertEquals("user",stat.getOwner());
  assertEquals("group",stat.getGroup());
  assertEquals(stat.getPermission(),fc.getFileStatus(linkToFile).getPermission());
  perms=fc.getFileLinkStatus(linkToDir).getPermission();
  fc.setPermission(linkToDir,new FsPermission((short)0664));
  fc.setOwner(linkToDir,"user","group");
  assertEquals(perms,fc.getFileLinkStatus(linkToDir).getPermission());
  stat=fc.getFileStatus(dir);
  assertEquals(0664,stat.getPermission().toShort());
  assertEquals("user",stat.getOwner());
  assertEquals("group",stat.getGroup());
  assertEquals(stat.getPermission(),fc.getFileStatus(linkToDir).getPermission());
}
