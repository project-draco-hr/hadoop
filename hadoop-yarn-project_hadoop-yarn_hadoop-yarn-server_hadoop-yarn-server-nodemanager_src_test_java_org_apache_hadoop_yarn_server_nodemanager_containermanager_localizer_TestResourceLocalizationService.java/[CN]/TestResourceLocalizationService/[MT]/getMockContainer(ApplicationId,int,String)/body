{
  Container c=mock(Container.class);
  ApplicationAttemptId appAttemptId=BuilderUtils.newApplicationAttemptId(appId,1);
  ContainerId cId=BuilderUtils.newContainerId(appAttemptId,id);
  when(c.getUser()).thenReturn(user);
  when(c.getContainerId()).thenReturn(cId);
  Credentials creds=new Credentials();
  Token<? extends TokenIdentifier> tk=getToken(id);
  String fingerprint=ResourceLocalizationService.buildTokenFingerprint(tk);
  assertNotNull(fingerprint);
  assertTrue("Expected token fingerprint of 10 hex bytes delimited by space.",fingerprint.matches("^(([0-9a-f]){2} ){9}([0-9a-f]){2}$"));
  creds.addToken(new Text("tok" + id),tk);
  when(c.getCredentials()).thenReturn(creds);
  when(c.toString()).thenReturn(cId.toString());
  when(c.getContainerState()).thenReturn(ContainerState.LOCALIZING);
  return c;
}
