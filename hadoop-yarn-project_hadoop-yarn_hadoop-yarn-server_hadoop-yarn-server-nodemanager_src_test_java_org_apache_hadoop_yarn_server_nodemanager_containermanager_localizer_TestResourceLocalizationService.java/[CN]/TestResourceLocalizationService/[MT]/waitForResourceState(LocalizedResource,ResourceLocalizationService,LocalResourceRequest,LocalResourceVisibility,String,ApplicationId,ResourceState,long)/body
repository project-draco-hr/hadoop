{
  LocalResourcesTracker tracker=null;
  do {
    if (tracker == null) {
      tracker=service.getLocalResourcesTracker(vis,user,appId);
    }
    if (tracker != null && lr == null) {
      lr=tracker.getLocalizedResource(req);
    }
    if (lr != null) {
      break;
    }
 else {
      try {
        maxWaitTime-=20;
        Thread.sleep(20);
      }
 catch (      InterruptedException e) {
      }
    }
  }
 while (maxWaitTime > 0);
  if (lr == null) {
    return false;
  }
  do {
    if (!lr.getState().equals(resourceState)) {
      try {
        maxWaitTime-=50;
        Thread.sleep(50);
      }
 catch (      InterruptedException e) {
      }
    }
 else {
      break;
    }
  }
 while (maxWaitTime > 0);
  return lr.getState().equals(resourceState);
}
