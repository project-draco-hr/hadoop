{
  Path path=new Path("target",TestDiskChecker.class.getSimpleName());
  File localDir=new File(path.toUri().getRawPath());
  localDir.mkdir();
  File localFile=new File(localDir,"test");
  localFile.createNewFile();
  File spyLocalDir=spy(localDir);
  doReturn(localFile.toPath()).when(spyLocalDir).toPath();
  try {
    DiskChecker.checkDirs(spyLocalDir);
    fail("Expected exception for I/O error");
  }
 catch (  DiskErrorException e) {
    GenericTestUtils.assertExceptionContains("I/O error",e);
    assertTrue(e.getCause() instanceof IOException);
  }
 finally {
    localFile.delete();
    localDir.delete();
  }
}
