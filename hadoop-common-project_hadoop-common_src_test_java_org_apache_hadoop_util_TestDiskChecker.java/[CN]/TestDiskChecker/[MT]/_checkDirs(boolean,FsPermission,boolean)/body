{
  File localDir=File.createTempFile("test","tmp");
  if (isDir) {
    localDir.delete();
    localDir.mkdir();
  }
  Shell.execCommand(Shell.getSetPermissionCommand(String.format("%04o",perm.toShort()),false,localDir.getAbsolutePath()));
  try {
    DiskChecker.checkDir(FileSystem.getLocal(new Configuration()),new Path(localDir.getAbsolutePath()),perm);
    assertTrue("checkDir success",success);
  }
 catch (  DiskErrorException e) {
    assertFalse("checkDir success",success);
  }
  localDir.delete();
}
