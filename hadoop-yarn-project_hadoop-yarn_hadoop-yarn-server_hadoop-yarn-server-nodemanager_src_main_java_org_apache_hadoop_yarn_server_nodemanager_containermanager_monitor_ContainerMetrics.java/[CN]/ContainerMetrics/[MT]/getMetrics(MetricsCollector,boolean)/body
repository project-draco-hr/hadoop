{
  if (unregister) {
    metricsSystem.unregisterSource(recordInfo.name());
    usageMetrics.remove(containerId);
    return;
  }
  if (finished || flushOnPeriod) {
    registry.snapshot(collector.addRecord(registry.info()),all);
  }
  if (finished) {
    this.unregister=true;
  }
 else   if (flushOnPeriod) {
    flushOnPeriod=false;
    scheduleTimerTaskIfRequired();
  }
}
