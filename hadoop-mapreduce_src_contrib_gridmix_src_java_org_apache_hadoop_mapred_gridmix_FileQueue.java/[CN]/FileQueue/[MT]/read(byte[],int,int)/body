{
  int kvread=0;
  while (kvread < len) {
    if (curlen <= 0) {
      nextSource();
      continue;
    }
    final int srcRead=(int)Math.min(len - kvread,curlen);
    IOUtils.readFully(input,b,kvread,srcRead);
    curlen-=srcRead;
    kvread+=srcRead;
  }
  return kvread;
}
