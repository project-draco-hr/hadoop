{
  for (int i=0; i < numLevels; i++) {
    double averageResponseTime=0;
    long totalResponseTime=responseTimeTotalInCurrWindow.get(i);
    long responseTimeCount=responseTimeCountInCurrWindow.get(i);
    if (responseTimeCount > 0) {
      averageResponseTime=(double)totalResponseTime / responseTimeCount;
    }
    final double lastAvg=responseTimeAvgInLastWindow.get(i);
    if (enableDecay && lastAvg > 0.0) {
      final double decayed=decayFactor * lastAvg + averageResponseTime;
      responseTimeAvgInLastWindow.set(i,decayed);
    }
 else {
      responseTimeAvgInLastWindow.set(i,averageResponseTime);
    }
    responseTimeCountInLastWindow.set(i,responseTimeCount);
    if (LOG.isDebugEnabled()) {
      LOG.debug("updateAverageResponseTime queue: {} Average: {} Count: {}",i,averageResponseTime,responseTimeCount);
    }
    responseTimeTotalInCurrWindow.set(i,0);
    responseTimeCountInCurrWindow.set(i,0);
  }
}
