{
  ReplicaInfo info=volumeMap.get(bpid,blockId);
  if (info == null) {
    LOG.warn("Failed to cache replica in block pool " + bpid + " with block id "+ blockId+ ": ReplicaInfo not found.");
    return false;
  }
  FsVolumeImpl volume=(FsVolumeImpl)info.getVolume();
  if (volume == null) {
    LOG.warn("Failed to cache block with id " + blockId + ": Volume not found.");
    return false;
  }
  if (info.getState() != ReplicaState.FINALIZED) {
    LOG.warn("Failed to block with id " + blockId + ": Replica is not finalized.");
    return false;
  }
  return true;
}
