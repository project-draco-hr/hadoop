{
  while (true) {
    try {
      try (AutoCloseableLock lock=map.getLock().acquire()){
        return initReplicaRecoveryImpl(bpid,map,block,recoveryId);
      }
     }
 catch (    MustStopExistingWriter e) {
      e.getReplicaInPipeline().stopWriter(xceiverStopTimeout);
    }
  }
}
