{
  ReplicaInfo info=volumeMap.get(bpid,blk);
  if (info == null) {
    LOG.warn("Failed to cache replica " + blk + ": ReplicaInfo not found.");
    return false;
  }
  FsVolumeImpl volume=(FsVolumeImpl)info.getVolume();
  if (volume == null) {
    LOG.warn("Failed to cache replica " + blk + ": Volume not found.");
    return false;
  }
  if (info.getState() != ReplicaState.FINALIZED) {
    LOG.warn("Failed to cache replica " + blk + ": Replica is not"+ " finalized.");
    return false;
  }
  return true;
}
