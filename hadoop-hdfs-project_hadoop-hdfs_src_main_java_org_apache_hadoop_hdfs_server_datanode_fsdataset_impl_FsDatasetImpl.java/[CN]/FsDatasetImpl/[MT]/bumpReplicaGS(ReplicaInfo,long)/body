{
  long oldGS=replicaInfo.getGenerationStamp();
  File oldmeta=replicaInfo.getMetaFile();
  replicaInfo.setGenerationStamp(newGS);
  File newmeta=replicaInfo.getMetaFile();
  if (LOG.isDebugEnabled()) {
    LOG.debug("Renaming " + oldmeta + " to "+ newmeta);
  }
  try {
    NativeIO.renameTo(oldmeta,newmeta);
  }
 catch (  IOException e) {
    replicaInfo.setGenerationStamp(oldGS);
    throw new IOException("Block " + replicaInfo + " reopen failed. "+ " Unable to move meta file  "+ oldmeta+ " to "+ newmeta,e);
  }
}
