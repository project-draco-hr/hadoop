{
  final Replica replica=getReplicaInfo(block.getBlockPoolId(),block.getBlockId());
  if (replica.getGenerationStamp() < block.getGenerationStamp()) {
    throw new IOException("replica.getGenerationStamp() < block.getGenerationStamp(), block=" + block + ", replica="+ replica);
  }
  return replica.getVisibleLength();
}
