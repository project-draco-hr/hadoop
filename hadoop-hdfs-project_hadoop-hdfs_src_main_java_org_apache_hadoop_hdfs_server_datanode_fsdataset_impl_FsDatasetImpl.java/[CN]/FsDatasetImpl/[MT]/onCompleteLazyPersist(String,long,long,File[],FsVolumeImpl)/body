{
synchronized (FsDatasetImpl.this) {
    ramDiskReplicaTracker.recordEndLazyPersist(bpId,blockId,savedFiles);
    targetVolume.incDfsUsedAndNumBlocks(bpId,savedFiles[0].length() + savedFiles[1].length());
    datanode.getMetrics().incrRamDiskBlocksLazyPersisted();
    datanode.getMetrics().incrRamDiskBytesLazyPersisted(savedFiles[1].length());
    datanode.getMetrics().addRamDiskBlocksLazyPersistWindowMs(Time.monotonicNow() - creationTime);
    if (LOG.isDebugEnabled()) {
      LOG.debug("LazyWriter: Finish persisting RamDisk block: " + " block pool Id: " + bpId + " block id: "+ blockId+ " to block file "+ savedFiles[1]+ " and meta file "+ savedFiles[0]+ " on target volume "+ targetVolume);
    }
  }
}
