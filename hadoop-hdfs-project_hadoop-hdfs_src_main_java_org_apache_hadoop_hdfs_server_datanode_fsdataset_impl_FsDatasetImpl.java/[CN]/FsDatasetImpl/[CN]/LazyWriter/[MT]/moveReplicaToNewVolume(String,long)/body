{
  FsVolumeImpl targetVolume;
  ReplicaInfo replicaInfo;
synchronized (FsDatasetImpl.this) {
    replicaInfo=volumeMap.get(bpid,blockId);
    if (replicaInfo == null || !replicaInfo.getVolume().isTransientStorage()) {
      return;
    }
    targetVolume=volumes.getNextVolume(StorageType.DEFAULT,replicaInfo.getNumBytes());
    if (LOG.isDebugEnabled()) {
      LOG.debug("LazyWriter starting to save blockId=" + blockId + "; bpid="+ bpid);
    }
    lazyWriteReplicaTracker.recordStartLazyPersist(bpid,blockId,targetVolume);
    File[] savedFiles=targetVolume.getBlockPoolSlice(bpid).lazyPersistReplica(replicaInfo);
    lazyWriteReplicaTracker.recordEndLazyPersist(bpid,blockId,savedFiles[0],savedFiles[1]);
    if (LOG.isDebugEnabled()) {
      LOG.debug("LazyWriter finished saving blockId=" + blockId + "; bpid="+ bpid+ " to file "+ savedFiles[1]);
    }
  }
}
