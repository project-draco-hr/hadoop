{
  if (datum == null) {
    datum=new TaskAttemptUnsuccessfulCompletion();
    datum.taskid=new Utf8(attemptId.getTaskID().toString());
    datum.taskType=new Utf8(taskType.name());
    datum.attemptId=new Utf8(attemptId.toString());
    datum.finishTime=finishTime;
    datum.hostname=new Utf8(hostname);
    if (rackName != null) {
      datum.rackname=new Utf8(rackName);
    }
    datum.port=port;
    datum.error=new Utf8(error);
    datum.status=new Utf8(status);
    datum.counters=EventWriter.toAvro(counters);
    datum.clockSplits=AvroArrayUtils.toAvro(ProgressSplitsBlock.arrayGetWallclockTime(allSplits));
    datum.cpuUsages=AvroArrayUtils.toAvro(ProgressSplitsBlock.arrayGetCPUTime(allSplits));
    datum.vMemKbytes=AvroArrayUtils.toAvro(ProgressSplitsBlock.arrayGetVMemKbytes(allSplits));
    datum.physMemKbytes=AvroArrayUtils.toAvro(ProgressSplitsBlock.arrayGetPhysMemKbytes(allSplits));
  }
  return datum;
}
