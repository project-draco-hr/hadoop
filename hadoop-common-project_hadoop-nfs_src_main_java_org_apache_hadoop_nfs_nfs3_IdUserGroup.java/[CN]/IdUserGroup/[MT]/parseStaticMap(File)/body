{
  Map<Integer,Integer> uidMapping=new HashMap<Integer,Integer>();
  Map<Integer,Integer> gidMapping=new HashMap<Integer,Integer>();
  BufferedReader in=new BufferedReader(new InputStreamReader(new FileInputStream(staticMapFile)));
  try {
    String line=null;
    while ((line=in.readLine()) != null) {
      if (EMPTY_LINE.matcher(line).matches() || COMMENT_LINE.matcher(line).matches()) {
        continue;
      }
      Matcher lineMatcher=MAPPING_LINE.matcher(line);
      if (!lineMatcher.matches()) {
        LOG.warn("Could not parse line '" + line + "'. Lines should be of "+ "the form '[uid|gid] [remote id] [local id]'. Blank lines and "+ "everything following a '#' on a line will be ignored.");
        continue;
      }
      String firstComponent=lineMatcher.group(1);
      int remoteId=Integer.parseInt(lineMatcher.group(2));
      int localId=Integer.parseInt(lineMatcher.group(3));
      if (firstComponent.equals("uid")) {
        uidMapping.put(localId,remoteId);
      }
 else {
        gidMapping.put(localId,remoteId);
      }
    }
  }
  finally {
    in.close();
  }
  return new StaticMapping(uidMapping,gidMapping);
}
