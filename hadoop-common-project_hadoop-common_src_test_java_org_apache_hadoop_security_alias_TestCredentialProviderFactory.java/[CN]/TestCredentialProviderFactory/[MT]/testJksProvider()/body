{
  Configuration conf=new Configuration();
  final String ourUrl=JavaKeyStoreProvider.SCHEME_NAME + "://file" + tmpDir+ "/test.jks";
  File file=new File(tmpDir,"test.jks");
  file.delete();
  conf.set(CredentialProviderFactory.CREDENTIAL_PROVIDER_PATH,ourUrl);
  checkSpecificProvider(conf,ourUrl);
  Path path=ProviderUtils.unnestUri(new URI(ourUrl));
  FileSystem fs=path.getFileSystem(conf);
  FileStatus s=fs.getFileStatus(path);
  assertTrue(s.getPermission().toString().equals("rwx------"));
  assertTrue(file + " should exist",file.isFile());
  fs.setPermission(path,new FsPermission("777"));
  checkPermissionRetention(conf,ourUrl,path);
}
