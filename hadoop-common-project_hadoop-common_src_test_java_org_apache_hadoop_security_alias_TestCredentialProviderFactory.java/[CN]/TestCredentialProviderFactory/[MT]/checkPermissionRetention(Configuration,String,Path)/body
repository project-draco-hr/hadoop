{
  CredentialProvider provider=CredentialProviderFactory.getProviders(conf).get(0);
  char[] cred=new char[32];
  for (int i=0; i < cred.length; ++i) {
    cred[i]=(char)i;
  }
  try {
    provider.createCredentialEntry("key5",cred);
  }
 catch (  Exception e) {
    e.printStackTrace();
    throw e;
  }
  provider.flush();
  provider=CredentialProviderFactory.getProviders(conf).get(0);
  assertArrayEquals(cred,provider.getCredentialEntry("key5").getCredential());
  FileSystem fs=path.getFileSystem(conf);
  FileStatus s=fs.getFileStatus(path);
  assertTrue("Permissions should have been retained from the preexisting " + "keystore.",s.getPermission().toString().equals("rwxrwxrwx"));
}
