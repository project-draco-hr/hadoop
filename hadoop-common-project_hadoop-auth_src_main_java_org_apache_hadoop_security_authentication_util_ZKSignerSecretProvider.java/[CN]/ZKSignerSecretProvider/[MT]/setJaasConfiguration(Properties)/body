{
  String keytabFile=config.getProperty(ZOOKEEPER_KERBEROS_KEYTAB).trim();
  if (keytabFile == null || keytabFile.length() == 0) {
    throw new IllegalArgumentException(ZOOKEEPER_KERBEROS_KEYTAB + " must be specified");
  }
  String principal=config.getProperty(ZOOKEEPER_KERBEROS_PRINCIPAL).trim();
  if (principal == null || principal.length() == 0) {
    throw new IllegalArgumentException(ZOOKEEPER_KERBEROS_PRINCIPAL + " must be specified");
  }
  JaasConfiguration jConf=new JaasConfiguration(JAAS_LOGIN_ENTRY_NAME,principal,keytabFile);
  Configuration.setConfiguration(jConf);
  return principal.split("[/@]")[0];
}
