{
  if (blockInFd != null && ((dropCacheBehindAllReads) || (dropCacheBehindLargeReads && isLongRead()))) {
    try {
      NativeIO.POSIX.getCacheManipulator().posixFadviseIfPossible(block.getBlockName(),blockInFd,lastCacheDropOffset,offset - lastCacheDropOffset,POSIX_FADV_DONTNEED);
    }
 catch (    Exception e) {
      LOG.warn("Unable to drop cache on file close",e);
    }
  }
  if (curReadahead != null) {
    curReadahead.cancel();
  }
  IOException ioe=null;
  if (checksumIn != null) {
    try {
      checksumIn.close();
    }
 catch (    IOException e) {
      ioe=e;
    }
    checksumIn=null;
  }
  if (blockIn != null) {
    try {
      blockIn.close();
    }
 catch (    IOException e) {
      ioe=e;
    }
    blockIn=null;
    blockInFd=null;
  }
  if (volumeRef != null) {
    IOUtils.cleanup(null,volumeRef);
    volumeRef=null;
  }
  if (ioe != null) {
    throw ioe;
  }
}
