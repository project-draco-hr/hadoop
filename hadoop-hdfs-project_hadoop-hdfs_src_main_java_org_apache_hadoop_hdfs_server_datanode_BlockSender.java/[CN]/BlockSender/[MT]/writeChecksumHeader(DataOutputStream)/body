{
  try {
    checksum.writeHeader(out);
    if (chunkOffsetOK) {
      out.writeLong(offset);
    }
    out.flush();
  }
 catch (  IOException e) {
    throw ioeToSocketException(e);
  }
}
