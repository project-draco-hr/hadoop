{
  JobStatus status=clientCache.getClient(arg0).getJobStatus(arg0);
  if (status.getState() != JobStatus.State.RUNNING) {
    try {
      resMgrDelegate.killApplication(TypeConverter.toYarn(arg0).getAppId());
    }
 catch (    YarnRemoteException e) {
      throw new IOException(e);
    }
    return;
  }
  try {
    clientCache.getClient(arg0).killJob(arg0);
    long currentTimeMillis=System.currentTimeMillis();
    long timeKillIssued=currentTimeMillis;
    while ((currentTimeMillis < timeKillIssued + 10000L) && (status.getState() != JobStatus.State.KILLED)) {
      try {
        Thread.sleep(1000L);
      }
 catch (      InterruptedException ie) {
        break;
      }
      currentTimeMillis=System.currentTimeMillis();
      status=clientCache.getClient(arg0).getJobStatus(arg0);
    }
  }
 catch (  IOException io) {
    LOG.debug("Error when checking for application status",io);
  }
  if (status.getState() != JobStatus.State.KILLED) {
    try {
      resMgrDelegate.killApplication(TypeConverter.toYarn(arg0).getAppId());
    }
 catch (    YarnRemoteException e) {
      throw new IOException(e);
    }
  }
}
