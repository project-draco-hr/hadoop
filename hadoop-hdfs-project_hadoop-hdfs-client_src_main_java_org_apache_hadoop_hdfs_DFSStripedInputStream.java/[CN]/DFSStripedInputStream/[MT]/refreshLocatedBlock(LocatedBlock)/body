{
  int idx=StripedBlockUtil.getBlockIndex(block.getBlock().getLocalBlock());
  LocatedBlock lb=getBlockGroupAt(block.getStartOffset());
  LocatedStripedBlock lsb=(LocatedStripedBlock)lb;
  int i=0;
  for (; i < lsb.getBlockIndices().length; i++) {
    if (lsb.getBlockIndices()[i] == idx) {
      break;
    }
  }
  if (DFSClient.LOG.isDebugEnabled()) {
    DFSClient.LOG.debug("refreshLocatedBlock for striped blocks, offset=" + block.getStartOffset() + ". Obtained block "+ lb+ ", idx="+ idx);
  }
  return StripedBlockUtil.constructInternalBlock(lsb,i,cellSize,dataBlkNum,idx);
}
