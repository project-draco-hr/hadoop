{
  DataOutputBuffer out=new DataOutputBuffer();
  DataInputBuffer in=new DataInputBuffer();
  for (int i=0; i < 10; i++) {
    String before=getTestString();
    out.reset();
    UTF8.writeString(out,before);
    in.reset(out.getData(),out.getLength());
    String after=UTF8.readString(in);
    assertTrue(before.equals(after));
    in.reset(out.getData(),out.getLength());
    String after2=in.readUTF();
    assertTrue(before.equals(after2));
    String after3=new String(out.getData(),2,out.getLength() - 2,"UTF-8");
    assertTrue(before.equals(after3));
  }
}
