{
  byte[][] bytesArr=new byte[chunks.length][];
  ByteBuffer buffer;
  ECChunk chunk;
  for (int i=0; i < chunks.length; i++) {
    chunk=chunks[i];
    if (chunk == null) {
      bytesArr[i]=null;
      continue;
    }
    buffer=chunk.getBuffer();
    if (buffer.hasArray()) {
      bytesArr[i]=buffer.array();
    }
 else {
      bytesArr[i]=new byte[buffer.remaining()];
      buffer.mark();
      buffer.get(bytesArr[i]);
      buffer.reset();
    }
  }
  return bytesArr;
}
