{
  YarnConfiguration conf=new YarnConfiguration();
  conf.set(MRConfig.MASTER_USER_NAME,"foo");
  conf.set(YarnConfiguration.RM_PRINCIPAL,"bar");
  assertEquals(Master.getMasterUserName(conf),"bar");
  conf.set(MRConfig.FRAMEWORK_NAME,MRConfig.CLASSIC_FRAMEWORK_NAME);
  assertEquals(Master.getMasterUserName(conf),"foo");
  conf.set(MRConfig.FRAMEWORK_NAME,MRConfig.YARN_FRAMEWORK_NAME);
  assertEquals(Master.getMasterUserName(conf),"bar");
}
