{
  executor=new MockExecutor();
  dispatcher=new AsyncDispatcher();
  context=Mockito.mock(Context.class);
  Mockito.doReturn(new ConcurrentSkipListMap<ContainerId,Container>()).when(context).getContainers();
  conf=new Configuration();
  conf.set(YarnConfiguration.NM_CONTAINER_MON_RESOURCE_CALCULATOR,MockResourceCalculatorPlugin.class.getCanonicalName());
  conf.set(YarnConfiguration.NM_CONTAINER_MON_PROCESS_TREE,MockResourceCalculatorProcessTree.class.getCanonicalName());
  dispatcher.init(conf);
  dispatcher.start();
  containerEventHandler=new MockContainerEventHandler();
  dispatcher.register(ContainerEventType.class,containerEventHandler);
}
