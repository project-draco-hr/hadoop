{
  if (reader != null && !this.contains(reader)) {
    Node nodeGroup=getNode(reader.getNetworkLocation());
    if (nodeGroup != null && nodeGroup instanceof InnerNode) {
      InnerNode parentNode=(InnerNode)nodeGroup;
      reader=parentNode.getLeaf(0,null);
    }
 else {
      return;
    }
  }
  int tempIndex=0;
  int localRackNode=-1;
  int localNodeGroupNode=-1;
  if (reader != null) {
    for (int i=0; i < nodes.length; i++) {
      if (tempIndex == 0 && reader == nodes[i]) {
        if (i != 0) {
          swap(nodes,tempIndex,i);
        }
        tempIndex=1;
        if (localRackNode != -1 && (localNodeGroupNode != -1)) {
          if (localRackNode == 0) {
            localRackNode=i;
          }
          if (localNodeGroupNode == 0) {
            localNodeGroupNode=i;
          }
          break;
        }
      }
 else       if (localNodeGroupNode == -1 && isOnSameNodeGroup(reader,nodes[i])) {
        localNodeGroupNode=i;
        if (tempIndex != 0 && localRackNode != -1)         break;
      }
 else       if (localRackNode == -1 && isOnSameRack(reader,nodes[i])) {
        localRackNode=i;
        if (tempIndex != 0 && localNodeGroupNode != -1)         break;
      }
    }
    if (localNodeGroupNode != -1 && localNodeGroupNode != tempIndex) {
      swap(nodes,tempIndex,localNodeGroupNode);
      if (localRackNode == tempIndex) {
        localRackNode=localNodeGroupNode;
      }
      tempIndex++;
    }
    if (localRackNode != -1 && localRackNode != tempIndex) {
      swap(nodes,tempIndex,localRackNode);
      tempIndex++;
    }
  }
  if (tempIndex == 0 && localNodeGroupNode == -1 && localRackNode == -1 && nodes.length != 0) {
    swap(nodes,0,r.nextInt(nodes.length));
  }
}
