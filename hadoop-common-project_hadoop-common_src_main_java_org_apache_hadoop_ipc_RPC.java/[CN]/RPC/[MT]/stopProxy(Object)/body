{
  InvocationHandler invocationHandler=null;
  try {
    invocationHandler=Proxy.getInvocationHandler(proxy);
  }
 catch (  IllegalArgumentException e) {
    LOG.error("Tried to call RPC.stopProxy on an object that is not a proxy.",e);
  }
  if (proxy != null && invocationHandler != null && invocationHandler instanceof Closeable) {
    try {
      ((Closeable)invocationHandler).close();
    }
 catch (    IOException e) {
      LOG.error("Stopping RPC invocation handler caused exception",e);
    }
  }
 else {
    LOG.error("Could not get invocation handler " + invocationHandler + " for proxy class "+ (proxy == null ? null : proxy.getClass())+ ", or invocation handler is not closeable.");
  }
}
