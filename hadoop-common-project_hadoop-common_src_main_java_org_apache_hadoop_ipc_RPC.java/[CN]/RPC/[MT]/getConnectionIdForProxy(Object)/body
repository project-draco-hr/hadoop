{
  if (proxy instanceof ProtocolTranslator) {
    proxy=((ProtocolTranslator)proxy).getUnderlyingProxyObject();
  }
  RpcInvocationHandler inv=(RpcInvocationHandler)Proxy.getInvocationHandler(proxy);
  return inv.getConnectionId();
}
