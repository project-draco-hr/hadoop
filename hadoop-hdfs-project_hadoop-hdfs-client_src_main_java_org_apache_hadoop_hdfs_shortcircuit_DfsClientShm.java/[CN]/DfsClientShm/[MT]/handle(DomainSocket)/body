{
  manager.unregisterShm(getShmId());
synchronized (this) {
    Preconditions.checkState(!disconnected);
    disconnected=true;
    boolean hadSlots=false;
    for (Iterator<Slot> iter=slotIterator(); iter.hasNext(); ) {
      Slot slot=iter.next();
      slot.makeInvalid();
      hadSlots=true;
    }
    if (!hadSlots) {
      free();
    }
  }
  return true;
}
