{
  WrappedContainer wc=null;
  try {
    int retryTimes=0;
    wc=new WrappedContainer(24,314159265358979L,4344,"yak",containerRetryContext);
    wc.initContainer();
    wc.localizeResources();
    wc.launchContainer();
    while (true) {
      wc.containerFailed(exitCode);
      if (wc.c.getContainerState() == ContainerState.RUNNING) {
        retryTimes++;
      }
 else {
        break;
      }
    }
    Assert.assertEquals(expectedRetries,retryTimes);
  }
  finally {
    if (wc != null) {
      wc.finished();
    }
  }
}
