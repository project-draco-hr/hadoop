{
  WrappedContainer wc=null;
  try {
    wc=new WrappedContainer(13,314159265358979L,4344,"yak");
    assertEquals(ContainerState.NEW,wc.c.getContainerState());
    int killed=metrics.getKilledContainers();
    wc.killContainer();
    assertEquals(ContainerState.DONE,wc.c.getContainerState());
    verifyOutofBandHeartBeat(wc);
    assertEquals(ContainerExitStatus.KILLED_BY_RESOURCEMANAGER,wc.c.cloneAndGetContainerStatus().getExitStatus());
    assertTrue(wc.c.cloneAndGetContainerStatus().getDiagnostics().contains("KillRequest"));
    assertEquals(killed + 1,metrics.getKilledContainers());
    ContainerMetrics containerMetrics=ContainerMetrics.forContainer(wc.cId,1,5000);
    Assert.assertEquals(ContainerExitStatus.KILLED_BY_RESOURCEMANAGER,containerMetrics.exitCode.value());
    Assert.assertTrue(containerMetrics.startTime.value() > 0);
    Assert.assertTrue(containerMetrics.finishTime.value() > containerMetrics.startTime.value());
  }
  finally {
    if (wc != null) {
      wc.finished();
    }
  }
}
