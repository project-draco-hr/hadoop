{
  TaskReporter mockTaskReporter=mock(TaskReporter.class);
  Counters.Counter outCounter=new Counters.Counter();
  Writer<String,Integer> mockWriter=mock(Writer.class);
  Configuration conf=new Configuration();
  conf.set("mapred.combine.recordsBeforeProgress","2");
  coc=new CombineOutputCollector<String,Integer>(outCounter,mockTaskReporter,conf);
  coc.setWriter(mockWriter);
  verify(mockTaskReporter,never()).progress();
  coc.collect("dummy",1);
  verify(mockTaskReporter,never()).progress();
  coc.collect("dummy",2);
  verify(mockTaskReporter,times(1)).progress();
}
