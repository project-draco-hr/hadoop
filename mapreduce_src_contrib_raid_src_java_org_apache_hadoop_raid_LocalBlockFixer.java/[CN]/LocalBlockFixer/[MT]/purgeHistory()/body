{
  java.util.Date cutOff=new java.util.Date(System.currentTimeMillis() - historyInterval);
  List<String> toRemove=new java.util.ArrayList<String>();
  for (  String key : history.keySet()) {
    java.util.Date item=history.get(key);
    if (item.before(cutOff)) {
      toRemove.add(key);
    }
  }
  for (  String key : toRemove) {
    LOG.info("Removing " + key + " from history");
    history.remove(key);
  }
}
