{
  this.applicationId=applicationId;
  this.name=name;
  this.rmContext=rmContext;
  this.dispatcher=rmContext.getDispatcher();
  this.handler=dispatcher.getEventHandler();
  this.conf=config;
  this.user=user;
  this.queue=queue;
  this.submissionContext=submissionContext;
  this.clientTokenStr=clientTokenStr;
  this.appStore=appStore;
  this.scheduler=scheduler;
  this.masterService=masterService;
  this.submitTime=submitTime;
  this.startTime=System.currentTimeMillis();
  this.maxRetries=conf.getInt(YarnConfiguration.RM_AM_MAX_RETRIES,YarnConfiguration.DEFAULT_RM_AM_MAX_RETRIES);
  ReentrantReadWriteLock lock=new ReentrantReadWriteLock();
  this.readLock=lock.readLock();
  this.writeLock=lock.writeLock();
  this.stateMachine=stateMachineFactory.make(this);
}
