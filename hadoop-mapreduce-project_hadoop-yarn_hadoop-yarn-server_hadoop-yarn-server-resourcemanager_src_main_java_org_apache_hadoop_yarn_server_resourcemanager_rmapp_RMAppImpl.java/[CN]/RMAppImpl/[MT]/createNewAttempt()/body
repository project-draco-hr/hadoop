{
  ApplicationAttemptId appAttemptId=Records.newRecord(ApplicationAttemptId.class);
  appAttemptId.setApplicationId(applicationId);
  appAttemptId.setAttemptId(attempts.size() + 1);
  RMAppAttempt attempt=new RMAppAttemptImpl(appAttemptId,clientTokenStr,rmContext,scheduler,masterService,submissionContext,YarnConfiguration.getProxyHostAndPort(conf));
  attempts.put(appAttemptId,attempt);
  currentAttempt=attempt;
  handler.handle(new RMAppAttemptEvent(appAttemptId,RMAppAttemptEventType.START));
}
