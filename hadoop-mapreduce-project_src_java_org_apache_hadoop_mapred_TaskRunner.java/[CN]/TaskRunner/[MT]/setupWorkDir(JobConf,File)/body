{
  if (LOG.isDebugEnabled()) {
    LOG.debug("Fully deleting contents of " + workDir);
  }
  FileUtil.fullyDeleteContents(workDir);
  if (DistributedCache.getSymlink(conf)) {
    URI[] archives=DistributedCache.getCacheArchives(conf);
    URI[] files=DistributedCache.getCacheFiles(conf);
    Path[] localArchives=DistributedCache.getLocalCacheArchives(conf);
    Path[] localFiles=DistributedCache.getLocalCacheFiles(conf);
    if (archives != null) {
      for (int i=0; i < archives.length; i++) {
        String link=archives[i].getFragment();
        String target=localArchives[i].toString();
        symlink(workDir,target,link);
      }
    }
    if (files != null) {
      for (int i=0; i < files.length; i++) {
        String link=files[i].getFragment();
        String target=localFiles[i].toString();
        symlink(workDir,target,link);
      }
    }
  }
  if (conf.getJar() != null) {
    File jobCacheDir=new File(new Path(conf.getJar()).getParent().toString());
    try {
      TrackerDistributedCacheManager.createAllSymlink(conf,jobCacheDir,workDir);
    }
 catch (    IOException ie) {
      LOG.warn(StringUtils.stringifyException(ie));
    }
  }
  createChildTmpDir(workDir,conf);
}
