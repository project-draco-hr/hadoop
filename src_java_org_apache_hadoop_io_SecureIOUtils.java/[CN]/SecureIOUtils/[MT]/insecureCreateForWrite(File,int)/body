{
  if (f.exists()) {
    throw new AlreadyExistsException("File " + f + " already exists");
  }
  FileOutputStream fos=new FileOutputStream(f);
  boolean success=false;
  try {
    rawFilesystem.setPermission(new Path(f.getAbsolutePath()),new FsPermission((short)permissions));
    success=true;
    return fos;
  }
  finally {
    if (!success) {
      fos.close();
    }
  }
}
