{
  Properties kdcConf=MiniKdc.createConf();
  kdc=new MiniKdc(kdcConf,methodDir);
  kdc.start();
  File sinkKeytabFile=new File(methodDir,"sink.keytab");
  sinkKeytab=sinkKeytabFile.getAbsolutePath();
  kdc.createPrincipal(sinkKeytabFile,"sink/localhost");
  sinkPrincipal="sink/localhost@" + kdc.getRealm();
  File hdfsKeytabFile=new File(methodDir,"hdfs.keytab");
  hdfsKeytab=hdfsKeytabFile.getAbsolutePath();
  kdc.createPrincipal(hdfsKeytabFile,"hdfs/localhost","HTTP/localhost");
  hdfsPrincipal="hdfs/localhost@" + kdc.getRealm();
  spnegoPrincipal="HTTP/localhost@" + kdc.getRealm();
}
