{
  path=path.trim();
  if (path.charAt(0) != Path.SEPARATOR_CHAR) {
    throw new IllegalArgumentException("It must be an absolute path: " + path);
  }
  int numOfElements=StringUtils.countMatches(path,Path.SEPARATOR);
  if (path.length() > 1 && path.endsWith(Path.SEPARATOR)) {
    numOfElements--;
  }
  String[] pathElements=new String[numOfElements];
  int elementIdx=0;
  int idx=0;
  int found=path.indexOf(Path.SEPARATOR_CHAR,idx);
  while (found > -1) {
    if (found > idx) {
      pathElements[elementIdx++]=path.substring(idx,found);
    }
    idx=found + 1;
    found=path.indexOf(Path.SEPARATOR_CHAR,idx);
  }
  if (idx < path.length()) {
    pathElements[elementIdx]=path.substring(idx);
  }
  return pathElements;
}
