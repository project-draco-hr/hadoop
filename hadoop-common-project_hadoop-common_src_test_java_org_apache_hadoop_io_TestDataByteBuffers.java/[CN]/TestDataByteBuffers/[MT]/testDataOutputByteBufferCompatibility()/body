{
  DataOutputBuffer dob=new DataOutputBuffer();
  DataOutputByteBuffer dobb=new DataOutputByteBuffer();
  Random r=new Random();
  long seed=r.nextLong();
  r.setSeed(seed);
  System.out.println("SEED: " + seed);
  writeJunk(dob,r,seed,1000);
  writeJunk(dobb,r,seed,1000);
  byte[] check=toBytes(dobb.getData(),dobb.getLength());
  assertEquals(check.length,dob.getLength());
  assertArrayEquals(check,Arrays.copyOf(dob.getData(),dob.getLength()));
  dob.reset();
  dobb.reset();
  writeJunk(dob,r,seed,3000);
  writeJunk(dobb,r,seed,3000);
  check=toBytes(dobb.getData(),dobb.getLength());
  assertEquals(check.length,dob.getLength());
  assertArrayEquals(check,Arrays.copyOf(dob.getData(),dob.getLength()));
  dob.reset();
  dobb.reset();
  writeJunk(dob,r,seed,1000);
  writeJunk(dobb,r,seed,1000);
  check=toBytes(dobb.getData(),dobb.getLength());
  assertEquals("Failed Checking length = " + check.length,check.length,dob.getLength());
  assertArrayEquals(check,Arrays.copyOf(dob.getData(),dob.getLength()));
}
