{
  final TimelineEntity entity=new TimelineEntity();
  entity.setEntityId(appAttemptId);
  entity.setEntityType(DSEntity.DS_APP_ATTEMPT.toString());
  entity.setDomainId(domainId);
  entity.addPrimaryFilter(USER_TIMELINE_FILTER_NAME,ugi.getShortUserName());
  TimelineEvent event=new TimelineEvent();
  event.setEventType(appEvent.toString());
  event.setTimestamp(System.currentTimeMillis());
  entity.addEvent(event);
  try {
    TimelinePutResponse response=timelineClient.putEntities(entity);
    processTimelineResponseErrors(response);
  }
 catch (  YarnException|IOException|ClientHandlerException e) {
    LOG.error("App Attempt " + (appEvent.equals(DSEvent.DS_APP_ATTEMPT_START) ? "start" : "end") + " event could not be published for "+ appAttemptId.toString(),e);
  }
}
