{
  Map<String,String> params=new HashMap<>();
  List<String> proxies=WebAppUtils.getProxyHostsAndPortsForAmFilter(conf);
  StringBuilder sb=new StringBuilder();
  for (  String proxy : proxies) {
    sb.append(proxy.split(":")[0]).append(AmIpFilter.PROXY_HOSTS_DELIMITER);
  }
  sb.setLength(sb.length() - 1);
  params.put(AmIpFilter.PROXY_HOSTS,sb.toString());
  String prefix=WebAppUtils.getHttpSchemePrefix(conf);
  String proxyBase=getApplicationWebProxyBase();
  sb=new StringBuilder();
  for (  String proxy : proxies) {
    sb.append(prefix).append(proxy).append(proxyBase).append(AmIpFilter.PROXY_HOSTS_DELIMITER);
  }
  sb.setLength(sb.length() - 1);
  params.put(AmIpFilter.PROXY_URI_BASES,sb.toString());
  container.addFilter(FILTER_NAME,FILTER_CLASS,params);
}
