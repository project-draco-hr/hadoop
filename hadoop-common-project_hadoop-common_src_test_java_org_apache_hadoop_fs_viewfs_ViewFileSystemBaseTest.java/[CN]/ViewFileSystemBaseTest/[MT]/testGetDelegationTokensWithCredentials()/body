{
  Credentials credentials=new Credentials();
  List<Token<?>> delTokens=fsView.getDelegationTokens("sanjay",credentials);
  int expectedTokenCount=getExpectedDelegationTokenCountWithCredentials();
  Assert.assertEquals(expectedTokenCount,delTokens.size());
  for (int i=0; i < expectedTokenCount / 2; i++) {
    Token<?> token=delTokens.get(i);
    credentials.addToken(token.getService(),token);
  }
  List<Token<?>> delTokens2=fsView.getDelegationTokens("sanjay",credentials);
  Assert.assertEquals(expectedTokenCount,delTokens2.size());
  for (int i=0; i < delTokens2.size(); i++) {
    for (int j=0; j < delTokens.size(); j++) {
      if (delTokens.get(j) == delTokens2.get(i)) {
        delTokens.remove(j);
        break;
      }
    }
  }
  Assert.assertEquals(expectedTokenCount / 2,delTokens.size());
}
