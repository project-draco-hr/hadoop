{
  if (isStaleClient(ctx))   return;
  LOG.debug("StatNode result: " + rc + " for path: "+ path+ " connectionState: "+ zkConnectionState);
  Code code=Code.get(rc);
  if (isSuccess(code)) {
    if (stat.getEphemeralOwner() == zkClient.getSessionId()) {
      becomeActive();
    }
 else {
      becomeStandby();
    }
    return;
  }
  if (isNodeDoesNotExist(code)) {
    enterNeutralMode();
    joinElectionInternal();
    return;
  }
  String errorMessage="Received stat error from Zookeeper. code:" + code.toString();
  LOG.debug(errorMessage);
  if (shouldRetry(code)) {
    if (statRetryCount < NUM_RETRIES) {
      ++statRetryCount;
      monitorLockNodeAsync();
      return;
    }
    errorMessage=errorMessage + ". Not retrying further znode monitoring connection errors.";
  }
 else   if (isSessionExpired(code)) {
    LOG.warn("Lock monitoring failed because session was lost");
    return;
  }
  fatalError(errorMessage);
}
