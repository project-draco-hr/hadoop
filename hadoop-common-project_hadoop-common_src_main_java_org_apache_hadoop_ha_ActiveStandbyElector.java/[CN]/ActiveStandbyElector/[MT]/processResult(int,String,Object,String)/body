{
  if (isStaleClient(ctx))   return;
  if (LOG.isDebugEnabled()) {
    LOG.debug("CreateNode result: " + rc + " for path: "+ path+ " connectionState: "+ zkConnectionState+ "  for "+ this);
  }
  Code code=Code.get(rc);
  if (isSuccess(code)) {
    if (becomeActive()) {
      monitorActiveStatus();
    }
 else {
      reJoinElectionAfterFailureToBecomeActive();
    }
    return;
  }
  if (isNodeExists(code)) {
    if (createRetryCount == 0) {
      becomeStandby();
    }
    monitorActiveStatus();
    return;
  }
  String errorMessage="Received create error from Zookeeper. code:" + code.toString() + " for path "+ path;
  LOG.debug(errorMessage);
  if (shouldRetry(code)) {
    if (createRetryCount < maxRetryNum) {
      LOG.debug("Retrying createNode createRetryCount: " + createRetryCount);
      ++createRetryCount;
      createLockNodeAsync();
      return;
    }
    errorMessage=errorMessage + ". Not retrying further znode create connection errors.";
  }
 else   if (isSessionExpired(code)) {
    LOG.warn("Lock acquisition failed because session was lost");
    return;
  }
  fatalError(errorMessage);
}
