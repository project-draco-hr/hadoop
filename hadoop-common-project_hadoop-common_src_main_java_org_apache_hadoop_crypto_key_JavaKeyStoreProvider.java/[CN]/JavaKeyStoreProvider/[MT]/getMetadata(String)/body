{
  readLock.lock();
  try {
    if (cache.containsKey(name)) {
      return cache.get(name);
    }
    try {
      if (!keyStore.containsAlias(name)) {
        return null;
      }
      Metadata meta=((KeyMetadata)keyStore.getKey(name,password)).metadata;
      cache.put(name,meta);
      return meta;
    }
 catch (    ClassCastException e) {
      throw new IOException("Can't cast key for " + name + " in keystore "+ path+ " to a KeyMetadata. Key may have been added using "+ " keytool or some other non-Hadoop method.",e);
    }
catch (    KeyStoreException e) {
      throw new IOException("Can't get metadata for " + name + " from keystore "+ path,e);
    }
catch (    NoSuchAlgorithmException e) {
      throw new IOException("Can't get algorithm for " + name + " from keystore "+ path,e);
    }
catch (    UnrecoverableKeyException e) {
      throw new IOException("Can't recover key for " + name + " from keystore "+ path,e);
    }
  }
  finally {
    readLock.unlock();
  }
}
