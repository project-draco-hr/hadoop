{
  String protocolName=RPC.getProtocolName(protocolClass);
  VersionedProtocol vp=(VersionedProtocol)protocolImpl;
  long version;
  try {
    version=vp.getProtocolVersion(protocolName,0);
  }
 catch (  Exception ex) {
    LOG.warn("Protocol " + protocolClass + " NOT registered as getProtocolVersion throws exception ");
    return;
  }
  protocolImplMap.put(new ProtoNameVer(protocolName,version),new ProtoClassProtoImpl(protocolClass,protocolImpl));
  LOG.info("Protocol Name = " + protocolName + " version="+ version+ " ProtocolImpl="+ protocolImpl.getClass().getName()+ " protocolClass="+ protocolClass.getName());
}
