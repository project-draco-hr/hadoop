{
  Map<String,String> saslProps=createSaslPropertiesForEncryption(encryptionKey.encryptionAlgorithm);
  LOG.debug("Client using encryption algorithm {}",encryptionKey.encryptionAlgorithm);
  String userName=getUserNameFromEncryptionKey(encryptionKey);
  char[] password=encryptionKeyToPassword(encryptionKey.encryptionKey);
  CallbackHandler callbackHandler=new SaslClientCallbackHandler(userName,password);
  return doSaslHandshake(addr,underlyingOut,underlyingIn,userName,saslProps,callbackHandler);
}
