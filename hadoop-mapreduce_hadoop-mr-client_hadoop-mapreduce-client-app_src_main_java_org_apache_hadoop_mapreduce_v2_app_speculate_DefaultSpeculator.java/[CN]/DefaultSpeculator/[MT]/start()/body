{
  Runnable speculationBackgroundCore=new Runnable(){
    @Override public void run(){
      while (!Thread.currentThread().isInterrupted()) {
        long backgroundRunStartTime=clock.getTime();
        try {
          int speculations=computeSpeculations();
          long mininumRecomp=speculations > 0 ? SOONEST_RETRY_AFTER_SPECULATE : SOONEST_RETRY_AFTER_NO_SPECULATE;
          long wait=Math.max(mininumRecomp,clock.getTime() - backgroundRunStartTime);
          if (speculations > 0) {
            LOG.info("We launched " + speculations + " speculations.  Sleeping "+ wait+ " milliseconds.");
          }
          Object pollResult=scanControl.poll(wait,TimeUnit.MILLISECONDS);
        }
 catch (        InterruptedException e) {
          LOG.error("Background thread returning, interrupted : " + e);
          e.printStackTrace(System.out);
          return;
        }
      }
    }
  }
;
  speculationBackgroundThread=new Thread(speculationBackgroundCore,"DefaultSpeculator background processing");
  speculationBackgroundThread.start();
  super.start();
}
