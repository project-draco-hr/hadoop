{
  byte[] row=new byte[100];
  Unsigned16 recordNumber=new Unsigned16(firstRecordNumber);
  Unsigned16 lastRecordNumber=new Unsigned16(firstRecordNumber);
  Checksum crc=new PureJavaCrc32();
  Unsigned16 tmp=new Unsigned16();
  lastRecordNumber.add(recordsToGenerate);
  Unsigned16 ONE=new Unsigned16(1);
  Unsigned16 rand=Random16.skipAhead(firstRecordNumber);
  while (!recordNumber.equals(lastRecordNumber)) {
    Random16.nextRand(rand);
    if (useAscii) {
      generateAsciiRecord(row,rand,recordNumber);
    }
 else {
      generateRecord(row,rand,recordNumber);
    }
    if (checksum != null) {
      crc.reset();
      crc.update(row,0,row.length);
      tmp.set(crc.getValue());
      checksum.add(tmp);
    }
    recordNumber.add(ONE);
    out.write(row);
  }
}
