{
  while (true) {
    final FsVolumeImpl[] curVolumes=volumes.get();
    final List<FsVolumeImpl> volumeList=Lists.newArrayList(curVolumes);
    volumeList.add(newVolume);
    if (volumes.compareAndSet(curVolumes,volumeList.toArray(new FsVolumeImpl[volumeList.size()]))) {
      break;
    }
 else {
      if (FsDatasetImpl.LOG.isDebugEnabled()) {
        FsDatasetImpl.LOG.debug("The volume list has been changed concurrently, " + "retry to remove volume: " + newVolume);
      }
    }
  }
  FsDatasetImpl.LOG.info("Added new volume: " + newVolume.toString());
}
