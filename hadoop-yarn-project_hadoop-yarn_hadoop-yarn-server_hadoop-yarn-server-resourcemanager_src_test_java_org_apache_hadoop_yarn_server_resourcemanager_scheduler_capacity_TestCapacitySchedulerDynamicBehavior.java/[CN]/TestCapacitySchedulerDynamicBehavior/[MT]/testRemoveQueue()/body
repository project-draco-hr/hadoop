{
  CapacityScheduler cs=(CapacityScheduler)rm.getResourceScheduler();
  ReservationQueue a1=new ReservationQueue(cs,"a1",(PlanQueue)cs.getQueue("a"));
  cs.addQueue(a1);
  a1.setEntitlement(new QueueEntitlement(A1_CAPACITY / 100,1f));
  RMApp app=rm.submitApp(GB,"test-move-1","user_0",null,"a1");
  List<ApplicationAttemptId> appsInA1=cs.getAppsInQueue("a1");
  assertEquals(1,appsInA1.size());
  try {
    cs.removeQueue("a1");
    fail();
  }
 catch (  SchedulerDynamicEditException s) {
  }
  cs.killAllAppsInQueue("a1");
  rm.waitForState(app.getApplicationId(),RMAppState.KILLED);
  try {
    cs.removeQueue("a1");
    fail();
  }
 catch (  SchedulerDynamicEditException s) {
  }
  cs.setEntitlement("a1",new QueueEntitlement(0f,0f));
  cs.removeQueue("a1");
  assertTrue(cs.getQueue("a1") == null);
  rm.stop();
}
