{
  AuthenticationMethod auth=SecurityUtil.getAuthenticationMethod(conf);
  if (auth == AuthenticationMethod.SIMPLE) {
    useKerberos=false;
  }
 else   if (auth == AuthenticationMethod.KERBEROS) {
    useKerberos=true;
  }
 else {
    throw new IllegalArgumentException("Invalid attribute value for " + HADOOP_SECURITY_AUTHENTICATION + " of "+ auth);
  }
  try {
    kerberosMinSecondsBeforeRelogin=1000L * conf.getLong(HADOOP_KERBEROS_MIN_SECONDS_BEFORE_RELOGIN,HADOOP_KERBEROS_MIN_SECONDS_BEFORE_RELOGIN_DEFAULT);
  }
 catch (  NumberFormatException nfe) {
    throw new IllegalArgumentException("Invalid attribute value for " + HADOOP_KERBEROS_MIN_SECONDS_BEFORE_RELOGIN + " of "+ conf.get(HADOOP_KERBEROS_MIN_SECONDS_BEFORE_RELOGIN));
  }
  if (!(groups instanceof TestingGroups)) {
    groups=Groups.getUserToGroupsMappingService(conf);
  }
  isInitialized=true;
  UserGroupInformation.conf=conf;
}
