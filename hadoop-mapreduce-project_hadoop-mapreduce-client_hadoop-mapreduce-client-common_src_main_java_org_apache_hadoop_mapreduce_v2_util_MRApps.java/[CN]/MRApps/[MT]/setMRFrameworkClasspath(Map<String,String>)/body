{
  InputStream classpathFileStream=null;
  BufferedReader reader=null;
  try {
    ClassLoader thisClassLoader=Thread.currentThread().getContextClassLoader();
    String mrAppGeneratedClasspathFile="mrapp-generated-classpath";
    classpathFileStream=thisClassLoader.getResourceAsStream(mrAppGeneratedClasspathFile);
    reader=new BufferedReader(new InputStreamReader(classpathFileStream));
    String cp=reader.readLine();
    if (cp != null) {
      Apps.addToEnvironment(environment,Environment.CLASSPATH.name(),cp.trim());
    }
    Apps.addToEnvironment(environment,Environment.CLASSPATH.name(),thisClassLoader.getResource(mrAppGeneratedClasspathFile).getFile().split("!")[0]);
    for (    String c : ApplicationConstants.APPLICATION_CLASSPATH) {
      Apps.addToEnvironment(environment,Environment.CLASSPATH.name(),c);
    }
  }
  finally {
    if (classpathFileStream != null) {
      classpathFileStream.close();
    }
    if (reader != null) {
      reader.close();
    }
  }
}
