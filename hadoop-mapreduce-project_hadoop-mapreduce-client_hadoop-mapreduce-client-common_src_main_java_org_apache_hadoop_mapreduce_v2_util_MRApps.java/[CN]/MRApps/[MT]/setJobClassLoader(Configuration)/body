{
  if (conf.getBoolean(MRJobConfig.MAPREDUCE_JOB_CLASSLOADER,false)) {
    String appClasspath=System.getenv(Environment.APP_CLASSPATH.key());
    if (appClasspath == null) {
      LOG.warn("Not using job classloader since APP_CLASSPATH is not set.");
    }
 else {
      LOG.info("Using job classloader");
      if (LOG.isDebugEnabled()) {
        LOG.debug("APP_CLASSPATH=" + appClasspath);
      }
      String[] systemClasses=conf.getStrings(MRJobConfig.MAPREDUCE_JOB_CLASSLOADER_SYSTEM_CLASSES);
      ClassLoader jobClassLoader=createJobClassLoader(appClasspath,systemClasses);
      if (jobClassLoader != null) {
        conf.setClassLoader(jobClassLoader);
        Thread.currentThread().setContextClassLoader(jobClassLoader);
      }
    }
  }
}
