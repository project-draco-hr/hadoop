{
  ApplicationSubmissionContext context=recordFactory.newRecordInstance(ApplicationSubmissionContext.class);
  context.setApplicationId(this.applicationId);
  context.setQueue(this.queue);
  ContainerLaunchContext amContainer=Records.newRecord(ContainerLaunchContext.class);
  context.setAMContainerSpec(amContainer);
  context.setResource(Resources.createResource(YarnConfiguration.DEFAULT_RM_SCHEDULER_MINIMUM_ALLOCATION_MB));
  SubmitApplicationRequest request=recordFactory.newRecordInstance(SubmitApplicationRequest.class);
  request.setApplicationSubmissionContext(context);
  final ResourceScheduler scheduler=resourceManager.getResourceScheduler();
  resourceManager.getClientRMService().submitApplication(request);
  AppAddedSchedulerEvent appAddedEvent1=new AppAddedSchedulerEvent(this.applicationAttemptId,this.queue,this.user);
  scheduler.handle(appAddedEvent1);
}
