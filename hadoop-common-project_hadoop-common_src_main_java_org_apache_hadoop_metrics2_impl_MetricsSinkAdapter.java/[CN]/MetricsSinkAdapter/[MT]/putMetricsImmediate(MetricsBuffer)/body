{
  WaitableMetricsBuffer waitableBuffer=new WaitableMetricsBuffer(buffer);
  if (!queue.enqueue(waitableBuffer)) {
    LOG.warn(name + " has a full queue and can't consume the given metrics.");
    dropped.incr();
    return false;
  }
  if (!waitableBuffer.waitTillNotified(oobPutTimeout)) {
    LOG.warn(name + " couldn't fulfill an immediate putMetrics request in time." + " Abandoning.");
    return false;
  }
  return true;
}
