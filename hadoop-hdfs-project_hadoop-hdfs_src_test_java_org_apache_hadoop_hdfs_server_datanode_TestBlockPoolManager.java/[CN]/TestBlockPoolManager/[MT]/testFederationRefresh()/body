{
  Configuration conf=new Configuration();
  conf.set(DFSConfigKeys.DFS_NAMESERVICES,"ns1,ns2");
  addNN(conf,"ns1","mock1:8020");
  addNN(conf,"ns2","mock1:8020");
  bpm.refreshNamenodes(conf);
  assertEquals("create #1\n" + "create #2\n",log.toString());
  log.setLength(0);
  conf.set(DFSConfigKeys.DFS_NAMESERVICES,"ns2");
  bpm.refreshNamenodes(conf);
  assertEquals("stop #1\n" + "refresh #2\n",log.toString());
  log.setLength(0);
  conf.set(DFSConfigKeys.DFS_NAMESERVICES,"ns1,ns2");
  bpm.refreshNamenodes(conf);
  assertEquals("create #3\n" + "refresh #2\n",log.toString());
}
