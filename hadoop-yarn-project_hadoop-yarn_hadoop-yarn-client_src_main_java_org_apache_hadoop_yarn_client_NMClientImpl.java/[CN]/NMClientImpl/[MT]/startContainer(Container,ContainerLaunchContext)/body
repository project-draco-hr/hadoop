{
synchronized (addStartedContainer(container)) {
    Map<String,ByteBuffer> allServiceResponse;
    NMCommunicator nmCommunicator=null;
    try {
      nmCommunicator=new NMCommunicator(container.getId(),container.getNodeId(),container.getContainerToken());
      nmCommunicator.init(getConfig());
      nmCommunicator.start();
      allServiceResponse=nmCommunicator.startContainer(container,containerLaunchContext);
    }
 catch (    YarnRemoteException e) {
      removeStartedContainer(container.getId());
      throw e;
    }
catch (    IOException e) {
      removeStartedContainer(container.getId());
      throw e;
    }
catch (    Throwable t) {
      removeStartedContainer(container.getId());
      throw RPCUtil.getRemoteException(t);
    }
 finally {
      if (nmCommunicator != null) {
        nmCommunicator.stop();
      }
    }
    return allServiceResponse;
  }
}
