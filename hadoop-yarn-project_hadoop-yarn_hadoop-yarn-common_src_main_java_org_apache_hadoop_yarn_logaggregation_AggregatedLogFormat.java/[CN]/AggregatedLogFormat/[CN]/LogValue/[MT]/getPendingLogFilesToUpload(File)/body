{
  Set<File> candidates=new HashSet<File>(Arrays.asList(containerLogDir.listFiles()));
  for (  File logFile : candidates) {
    this.allExistingFileMeta.add(getLogFileMetaData(logFile));
  }
  if (logRetentionContext != null && !logRetentionContext.shouldRetainLog()) {
    obseleteRetentionLogFiles.addAll(candidates);
    candidates.clear();
    return candidates;
  }
  Set<File> fileCandidates=new HashSet<File>(candidates);
  if (this.logAggregationContext != null && candidates.size() > 0) {
    fileCandidates=getFileCandidates(fileCandidates,this.appFinished);
    if (!this.appFinished && this.containerFinished) {
      Set<File> addition=new HashSet<File>(candidates);
      addition=getFileCandidates(addition,true);
      fileCandidates.addAll(addition);
    }
  }
  return fileCandidates;
}
