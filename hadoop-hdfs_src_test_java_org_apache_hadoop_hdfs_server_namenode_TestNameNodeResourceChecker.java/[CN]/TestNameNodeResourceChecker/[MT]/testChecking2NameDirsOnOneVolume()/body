{
  Configuration conf=new Configuration();
  File nameDir1=new File(conf.get("hadoop.tmp.dir","name-dir1"));
  File nameDir2=new File(conf.get("hadoop.tmp.dir","name-dir2"));
  nameDir1.mkdirs();
  nameDir2.mkdirs();
  conf.set(DFSConfigKeys.DFS_NAMENODE_NAME_DIR_KEY,nameDir1.getAbsolutePath() + "," + nameDir2.getAbsolutePath());
  conf.setLong(DFSConfigKeys.DFS_NAMENODE_DU_RESERVED_KEY,Long.MAX_VALUE);
  NameNodeResourceChecker nb=new NameNodeResourceChecker(conf);
  assertEquals("Should not check the same volume more than once.",1,nb.getVolumesLowOnSpace().size());
}
