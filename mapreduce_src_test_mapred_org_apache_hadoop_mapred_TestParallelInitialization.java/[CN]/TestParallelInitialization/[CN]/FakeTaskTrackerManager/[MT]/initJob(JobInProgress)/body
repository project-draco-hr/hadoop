{
  try {
    JobStatus prevStatus=(JobStatus)job.getStatus().clone();
    job.initTasks();
    if (job.isJobEmpty()) {
      completeEmptyJob(job);
    }
 else     if (!job.isSetupCleanupRequired()) {
      job.completeSetup();
    }
    JobStatus newStatus=(JobStatus)job.getStatus().clone();
    if (prevStatus.getRunState() != newStatus.getRunState()) {
      JobStatusChangeEvent event=new JobStatusChangeEvent(job,EventType.RUN_STATE_CHANGED,prevStatus,newStatus);
      for (      JobInProgressListener listener : listeners) {
        listener.jobUpdated(event);
      }
    }
  }
 catch (  KillInterruptedException kie) {
    killJob(job.getJobID());
  }
catch (  IOException ioe) {
    failJob(job);
  }
}
