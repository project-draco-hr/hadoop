{
  boolean sent=true;
  for (int i=0; i < 100; i++) {
    sent=true;
    for (int j=0; j < numTT; j++) {
      if (mr.getTaskTrackerRunner(j).getTaskTracker().getRunningJob(org.apache.hadoop.mapred.JobID.downgrade(jobid)) != null) {
        sent=false;
        break;
      }
    }
    if (!sent) {
      UtilsForTests.waitFor(100);
    }
 else {
      break;
    }
  }
  assertTrue("KillJobAction not sent for all trackers",sent);
  String user=UserGroupInformation.getCurrentUser().getShortUserName();
  String jobDirStr=TaskTracker.getLocalJobDir(user,jobid.toString());
  for (int i=0; i < numTT; ++i) {
    for (    String localDir : mr.getTaskTrackerLocalDirs(i)) {
      File jobDir=new File(localDir,jobDirStr);
      assertFalse(jobDir + " is not cleaned up.",jobDir.exists());
    }
  }
}
