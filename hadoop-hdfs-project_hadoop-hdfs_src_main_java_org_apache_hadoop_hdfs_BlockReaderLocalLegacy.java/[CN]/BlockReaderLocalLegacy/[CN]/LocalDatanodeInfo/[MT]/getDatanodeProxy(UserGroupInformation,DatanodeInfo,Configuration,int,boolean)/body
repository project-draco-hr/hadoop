{
  if (proxy == null) {
    try {
      proxy=ugi.doAs(new PrivilegedExceptionAction<ClientDatanodeProtocol>(){
        @Override public ClientDatanodeProtocol run() throws Exception {
          return DFSUtil.createClientDatanodeProtocolProxy(node,conf,socketTimeout,connectToDnViaHostname);
        }
      }
);
    }
 catch (    InterruptedException e) {
      LOG.warn("encountered exception ",e);
    }
  }
  return proxy;
}
