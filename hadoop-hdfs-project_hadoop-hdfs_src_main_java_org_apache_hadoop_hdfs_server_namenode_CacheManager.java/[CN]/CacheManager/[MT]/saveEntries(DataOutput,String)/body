{
  StartupProgress prog=NameNode.getStartupProgress();
  Step step=new Step(StepType.CACHE_ENTRIES,sdPath);
  prog.beginStep(Phase.SAVING_CHECKPOINT,step);
  prog.setTotal(Phase.SAVING_CHECKPOINT,step,entriesById.size());
  Counter counter=prog.getCounter(Phase.SAVING_CHECKPOINT,step);
  out.writeInt(entriesById.size());
  for (  PathBasedCacheEntry entry : entriesById.values()) {
    out.writeLong(entry.getEntryId());
    Text.writeString(out,entry.getPath());
    out.writeShort(entry.getReplication());
    Text.writeString(out,entry.getPool().getPoolName());
    counter.increment();
  }
  prog.endStep(Phase.SAVING_CHECKPOINT,step);
}
