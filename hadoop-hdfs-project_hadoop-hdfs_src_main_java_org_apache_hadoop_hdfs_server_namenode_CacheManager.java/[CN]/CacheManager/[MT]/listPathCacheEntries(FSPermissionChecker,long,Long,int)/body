{
  final int MAX_PRE_ALLOCATED_ENTRIES=16;
  ArrayList<PathCacheEntry> replies=new ArrayList<PathCacheEntry>(Math.min(MAX_PRE_ALLOCATED_ENTRIES,maxReplies));
  int numReplies=0;
  SortedMap<Long,PathCacheEntry> tailMap=entriesById.tailMap(prevId + 1);
  for (  PathCacheEntry entry : tailMap.values()) {
    if (numReplies >= maxReplies) {
      return replies;
    }
    long entryPoolId=entry.getDirective().getPoolId();
    if (poolId == null || poolId <= 0 || entryPoolId == poolId) {
      if (pc.checkPermission(cachePoolsById.get(entryPoolId),FsAction.EXECUTE)) {
        replies.add(entry);
        numReplies++;
      }
    }
  }
  return replies;
}
