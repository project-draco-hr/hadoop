{
  final int NUM_PRE_ALLOCATED_ENTRIES=16;
  ArrayList<PathCacheEntry> replies=new ArrayList<PathCacheEntry>(NUM_PRE_ALLOCATED_ENTRIES);
  int numReplies=0;
  SortedMap<Long,PathCacheEntry> tailMap=entriesById.tailMap(prevId + 1);
  for (  Entry<Long,PathCacheEntry> cur : tailMap.entrySet()) {
    if (numReplies >= maxListCacheDirectivesResponses) {
      return new BatchedListEntries<PathCacheEntry>(replies,true);
    }
    PathCacheEntry curEntry=cur.getValue();
    if (!filterPool.isEmpty() && !cur.getValue().getDirective().getPool().equals(filterPool)) {
      continue;
    }
    CachePool pool=cachePools.get(curEntry.getDirective().getPool());
    if (pool == null) {
      LOG.error("invalid pool for PathCacheEntry " + curEntry);
      continue;
    }
    if (pc.checkPermission(pool,FsAction.EXECUTE)) {
      replies.add(cur.getValue());
      numReplies++;
    }
  }
  return new BatchedListEntries<PathCacheEntry>(replies,false);
}
