{
  if (poolId <= 0) {
    throw new IOException("invalid pool id " + poolId);
  }
  if (!cachePoolsById.containsKey(poolId)) {
    throw new IOException("cache pool id " + poolId + " does not exist.");
  }
  CachePool pool=cachePoolsById.get(poolId);
  removeCachePool(poolId);
  CachePoolInfo.Builder newInfo=CachePoolInfo.newBuilder(pool.getInfo());
  StringBuilder bld=new StringBuilder();
  String prefix="";
  if (info.getPoolName() != null) {
    newInfo.setPoolName(info.getPoolName());
    bld.append(prefix).append("set name to ").append(info.getOwnerName());
    prefix="; ";
  }
  if (info.getOwnerName() != null) {
    newInfo.setOwnerName(info.getOwnerName());
    bld.append(prefix).append("set owner to ").append(info.getOwnerName());
    prefix="; ";
  }
  if (info.getGroupName() != null) {
    newInfo.setGroupName(info.getGroupName());
    bld.append(prefix).append("set group to ").append(info.getGroupName());
    prefix="; ";
  }
  if (info.getMode() != null) {
    newInfo.setMode(info.getMode());
    bld.append(prefix).append(String.format("set mode to ",info.getMode()));
    prefix="; ";
  }
  if (info.getWeight() != null) {
    newInfo.setWeight(info.getWeight());
    bld.append(prefix).append("set weight to ").append(info.getWeight());
    prefix="; ";
  }
  if (prefix.isEmpty()) {
    bld.append("no changes.");
  }
 else {
    pool.setInfo(newInfo.build());
  }
  cachePoolsById.put(poolId,pool);
  cachePoolsByName.put(info.getPoolName(),pool);
  LOG.info("modified pool id " + pool.getId() + " ("+ pool.getInfo().getPoolName()+ "); "+ bld.toString());
}
