{
  CachedBlock cachedBlock=new CachedBlock(block.getBlock().getBlockId(),(short)0,false);
  cachedBlock=cachedBlocks.get(cachedBlock);
  if (cachedBlock == null) {
    return;
  }
  List<DatanodeDescriptor> cachedDNs=cachedBlock.getDatanodes(Type.CACHED);
  for (  DatanodeDescriptor datanode : cachedDNs) {
    boolean found=false;
    for (    DatanodeInfo loc : block.getLocations()) {
      if (loc.equals(datanode)) {
        block.addCachedLoc(loc);
        found=true;
        break;
      }
    }
    if (!found) {
      LOG.warn("Datanode {} is not a valid cache location for block {} " + "because that node does not have a backing replica!",datanode,block.getBlock().getBlockName());
    }
  }
}
