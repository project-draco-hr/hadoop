{
  QueueManager queueMgr=scheduler.getQueueManager();
  FSLeafQueue oldQueue=queueMgr.getLeafQueue("queue1",true);
  FSLeafQueue targetQueue=queueMgr.getLeafQueue("queue2",true);
  oldQueue.setMaxRunningApps(0);
  ApplicationAttemptId appAttId=createSchedulingRequest(1024,1,"queue1","user1",3);
  FSAppAttempt app=scheduler.getSchedulerApp(appAttId);
  assertTrue(oldQueue.isNonRunnableApp(app));
  scheduler.moveApplication(appAttId.getApplicationId(),"queue2");
  assertFalse(oldQueue.isNonRunnableApp(app));
  assertFalse(targetQueue.isNonRunnableApp(app));
  assertTrue(targetQueue.isRunnableApp(app));
  assertEquals(1,targetQueue.getNumRunnableApps());
  assertEquals(1,queueMgr.getRootQueue().getNumRunnableApps());
}
