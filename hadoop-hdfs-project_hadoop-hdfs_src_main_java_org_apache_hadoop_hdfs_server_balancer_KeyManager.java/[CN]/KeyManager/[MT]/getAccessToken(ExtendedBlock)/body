{
  if (!isBlockTokenEnabled) {
    return BlockTokenSecretManager.DUMMY_TOKEN;
  }
 else {
    if (!shouldRun) {
      throw new IOException("Cannot get access token since BlockKeyUpdater is not running");
    }
    return blockTokenSecretManager.generateToken(null,eb,EnumSet.of(BlockTokenIdentifier.AccessMode.REPLACE,BlockTokenIdentifier.AccessMode.COPY));
  }
}
