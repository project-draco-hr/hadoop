{
  TaskCompletionEvent[] events=EMPTY_TASK_COMPLETION_EVENTS;
  readLock.lock();
  try {
    if (mapAttemptCompletionEvents.size() > startIndex) {
      int actualMax=Math.min(maxEvents,(mapAttemptCompletionEvents.size() - startIndex));
      events=mapAttemptCompletionEvents.subList(startIndex,actualMax + startIndex).toArray(events);
    }
    return events;
  }
  finally {
    readLock.unlock();
  }
}
