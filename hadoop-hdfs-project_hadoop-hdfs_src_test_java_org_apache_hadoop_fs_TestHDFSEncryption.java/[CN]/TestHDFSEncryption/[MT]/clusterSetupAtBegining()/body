{
  tmpDir=new File(System.getProperty("test.build.data","target"),UUID.randomUUID().toString()).getAbsoluteFile();
  tmpDir.mkdirs();
  CONF.set(KeyProviderFactory.KEY_PROVIDER_PATH,JavaKeyStoreProvider.SCHEME_NAME + "://file" + tmpDir+ "/test.jks");
  initializeKeyProvider(CONF);
  try {
    createOneKey();
    KeyVersion blort=provider.getCurrentKey("blort");
  }
 catch (  java.security.NoSuchAlgorithmException e) {
    throw new RuntimeException(e);
  }
  cluster=new MiniDFSCluster.Builder(CONF).numDataNodes(1).build();
  cluster.waitClusterUp();
  URI uri0=cluster.getURI(0);
  fc=FileContext.getFileContext(uri0,CONF);
  defaultWorkingDirectory=fc.makeQualified(new Path("/user/" + UserGroupInformation.getCurrentUser().getShortUserName()));
  fc.mkdir(defaultWorkingDirectory,FileContext.DEFAULT_PERM,true);
}
