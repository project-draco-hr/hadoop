{
  ArrayList<DatanodeInfo> decommissionedNodes=Lists.newArrayList();
  for (  DataNode d : cluster.getDataNodes()) {
    DatanodeInfo dn=decommissionNode(0,d.getDatanodeUuid(),decommissionedNodes,AdminStates.DECOMMISSION_INPROGRESS);
    decommissionedNodes.add(dn);
  }
  BlockManagerTestUtil.recheckDecommissionState(datanodeManager);
  assertEquals("Unexpected # of nodes checked",expectedNumCheckedNodes,decomManager.getNumNodesChecked());
  for (  DatanodeInfo dn : decommissionedNodes) {
    recommissionNode(0,dn);
  }
}
