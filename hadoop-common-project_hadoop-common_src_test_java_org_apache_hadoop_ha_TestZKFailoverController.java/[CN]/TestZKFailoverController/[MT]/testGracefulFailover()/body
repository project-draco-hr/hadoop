{
  try {
    cluster.start();
    cluster.waitForActiveLockHolder(0);
    cluster.getService(1).getZKFCProxy(conf,5000).gracefulFailover();
    cluster.waitForActiveLockHolder(1);
    cluster.getService(0).getZKFCProxy(conf,5000).gracefulFailover();
    cluster.waitForActiveLockHolder(0);
    assertEquals(0,cluster.getService(0).fenceCount);
    assertEquals(0,cluster.getService(1).fenceCount);
  }
  finally {
    cluster.stop();
  }
}
