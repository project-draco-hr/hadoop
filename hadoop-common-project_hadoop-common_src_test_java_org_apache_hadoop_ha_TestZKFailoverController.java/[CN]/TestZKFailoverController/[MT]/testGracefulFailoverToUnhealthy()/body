{
  try {
    cluster.start();
    cluster.waitForActiveLockHolder(0);
    cluster.setHealthy(1,false);
    cluster.waitForElectorState(1,ActiveStandbyElector.State.INIT);
    try {
      cluster.getService(1).getZKFCProxy(conf,5000).gracefulFailover();
      fail("Did not fail to graceful failover to unhealthy service!");
    }
 catch (    ServiceFailedException sfe) {
      GenericTestUtils.assertExceptionContains(cluster.getService(1).toString() + " is not currently healthy.",sfe);
    }
  }
  finally {
    cluster.stop();
  }
}
