{
  conf=new YarnConfiguration();
  resourceManager=new ResourceManager(){
    @Override protected void doSecureLogin() throws IOException {
    }
  }
;
  resourceManager.init(conf);
  new Thread(){
    public void run(){
      resourceManager.start();
    }
  }
.start();
  int waitCount=0;
  while (resourceManager.getServiceState() == STATE.INITED && waitCount++ < 10) {
    LOG.info("Waiting for RM to start...");
    Thread.sleep(1000);
  }
  if (resourceManager.getServiceState() != STATE.STARTED) {
    throw new IOException("ResourceManager failed to start. Final state is " + resourceManager.getServiceState());
  }
  LOG.info("ResourceManager RMAdmin address: " + conf.get(YarnConfiguration.RM_ADMIN_ADDRESS));
}
