{
  while (keepRunning) {
    AllocateResponse response;
    try {
      response=responseQueue.take();
    }
 catch (    InterruptedException ex) {
      LOG.info("Interrupted while waiting for queue");
      continue;
    }
    if (response.getReboot()) {
      handler.onRebootRequest();
    }
    List<NodeReport> updatedNodes=response.getUpdatedNodes();
    if (!updatedNodes.isEmpty()) {
      handler.onNodesUpdated(updatedNodes);
    }
    List<ContainerStatus> completed=response.getCompletedContainersStatuses();
    if (!completed.isEmpty()) {
      handler.onContainersCompleted(completed);
    }
    List<Container> allocated=response.getAllocatedContainers();
    if (!allocated.isEmpty()) {
      handler.onContainersAllocated(allocated);
    }
  }
}
