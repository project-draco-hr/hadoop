{
  Set<ApplicationId> userApps=usersApplications.get(user);
  if (userApps != null) {
    if (userApps.remove(applicationId)) {
      metrics.deactivateApp(user);
    }
    if (userApps.isEmpty()) {
      usersApplications.remove(user);
      --activeUsers;
      metrics.decrActiveUsers();
      LOG.debug("User " + user + " removed from activeUsers, currently: "+ activeUsers);
    }
  }
}
