{
  Configuration conf=setupCommonConfig();
  conf.set(DFSConfigKeys.DFS_NAMENODE_SHARED_EDITS_DIR_KEY,BKJMUtil.createJournalURI("/checkpointing" + journalCount++).toString());
  BKJMUtil.addJournalManagerDefinition(conf);
  MiniDFSNNTopology topology=new MiniDFSNNTopology().addNameservice(new MiniDFSNNTopology.NSConf("ns1").addNN(new MiniDFSNNTopology.NNConf("nn1").setHttpPort(10001)).addNN(new MiniDFSNNTopology.NNConf("nn2").setHttpPort(10002)));
  cluster=new MiniDFSCluster.Builder(conf).nnTopology(topology).numDataNodes(0).manageNameDfsSharedDirs(false).build();
  cluster.waitActive();
  nn0=cluster.getNameNode(0);
  nn1=cluster.getNameNode(1);
  fs=HATestUtil.configureFailoverFs(cluster,conf);
  cluster.transitionToActive(0);
}
