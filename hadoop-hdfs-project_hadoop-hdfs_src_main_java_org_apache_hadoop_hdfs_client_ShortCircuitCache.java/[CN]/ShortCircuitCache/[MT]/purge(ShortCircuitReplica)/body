{
  boolean removedFromInfoMap=false;
  String evictionMapName=null;
  Preconditions.checkArgument(!replica.purged);
  replica.purged=true;
  Waitable<ShortCircuitReplicaInfo> val=replicaInfoMap.get(replica.key);
  if (val != null) {
    ShortCircuitReplicaInfo info=val.getVal();
    if ((info != null) && (info.getReplica() == replica)) {
      replicaInfoMap.remove(replica.key);
      removedFromInfoMap=true;
    }
  }
  Long evictableTimeNs=replica.getEvictableTimeNs();
  if (evictableTimeNs != null) {
    evictionMapName=removeEvictable(replica);
  }
  if (LOG.isTraceEnabled()) {
    StringBuilder builder=new StringBuilder();
    builder.append(this).append(": ").append(": removed ").append(replica).append(" from the cache.");
    if (removedFromInfoMap) {
      builder.append("  Removed from the replicaInfoMap.");
    }
    if (evictionMapName != null) {
      builder.append("  Removed from ").append(evictionMapName);
    }
    LOG.trace(builder.toString());
  }
  unref(replica);
}
