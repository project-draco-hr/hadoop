{
  String userName=application.getUser();
  ApplicationId appId=application.getAppId();
  String appIDStr=application.toString();
  LocalResourcesTracker appLocalRsrcsTracker=appRsrc.remove(ConverterUtils.toString(appId));
  if (appLocalRsrcsTracker != null) {
    for (    LocalizedResource rsrc : appLocalRsrcsTracker) {
      Path localPath=rsrc.getLocalPath();
      if (localPath != null) {
        try {
          stateStore.removeLocalizedResource(userName,appId,localPath);
        }
 catch (        IOException e) {
          LOG.error("Unable to remove resource " + rsrc + " for "+ appIDStr+ " from state store",e);
        }
      }
    }
  }
 else {
    LOG.warn("Removing uninitialized application " + application);
  }
  for (  String localDir : dirsHandler.getLocalDirs()) {
    Path usersdir=new Path(localDir,ContainerLocalizer.USERCACHE);
    Path userdir=new Path(usersdir,userName);
    Path allAppsdir=new Path(userdir,ContainerLocalizer.APPCACHE);
    Path appDir=new Path(allAppsdir,appIDStr);
    delService.delete(userName,appDir,new Path[]{});
    Path sysDir=new Path(localDir,NM_PRIVATE_DIR);
    Path appSysDir=new Path(sysDir,appIDStr);
    delService.delete(null,appSysDir,new Path[]{});
  }
  dispatcher.getEventHandler().handle(new ApplicationEvent(application.getAppId(),ApplicationEventType.APPLICATION_RESOURCES_CLEANEDUP));
}
