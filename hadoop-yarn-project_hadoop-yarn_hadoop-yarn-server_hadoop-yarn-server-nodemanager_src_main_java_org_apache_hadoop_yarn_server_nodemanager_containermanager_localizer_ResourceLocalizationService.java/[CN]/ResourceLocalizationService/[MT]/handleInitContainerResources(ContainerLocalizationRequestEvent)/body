{
  Container c=rsrcReqs.getContainer();
  EnumSet<ContainerState> set=EnumSet.of(ContainerState.LOCALIZING,ContainerState.RUNNING);
  if (!set.contains(c.getContainerState())) {
    LOG.warn(c.getContainerId() + " is at " + c.getContainerState()+ " state, do not localize resources.");
    return;
  }
  LoadingCache<Path,Future<FileStatus>> statCache=CacheBuilder.newBuilder().build(FSDownload.createStatusCacheLoader(getConfig()));
  LocalizerContext ctxt=new LocalizerContext(c.getUser(),c.getContainerId(),c.getCredentials(),statCache);
  Map<LocalResourceVisibility,Collection<LocalResourceRequest>> rsrcs=rsrcReqs.getRequestedResources();
  for (  Map.Entry<LocalResourceVisibility,Collection<LocalResourceRequest>> e : rsrcs.entrySet()) {
    LocalResourcesTracker tracker=getLocalResourcesTracker(e.getKey(),c.getUser(),c.getContainerId().getApplicationAttemptId().getApplicationId());
    for (    LocalResourceRequest req : e.getValue()) {
      tracker.handle(new ResourceRequestEvent(req,e.getKey(),ctxt));
      if (LOG.isDebugEnabled()) {
        LOG.debug("Localizing " + req.getPath() + " for container "+ c.getContainerId());
      }
    }
  }
}
