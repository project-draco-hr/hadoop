{
  List<String> dirs=dirsHandler.getLocalDirs();
  List<String> checkFailedDirs=new ArrayList<String>();
  for (  String dir : dirs) {
    try {
      checkLocalDir(dir);
    }
 catch (    YarnRuntimeException e) {
      checkFailedDirs.add(dir);
    }
  }
  for (  String dir : checkFailedDirs) {
    LOG.info("Attempting to initialize " + dir);
    initializeLocalDir(lfs,dir);
    try {
      checkLocalDir(dir);
    }
 catch (    YarnRuntimeException e) {
      String msg="Failed to setup local dir " + dir + ", which was marked as good.";
      LOG.warn(msg,e);
      throw new YarnRuntimeException(msg,e);
    }
  }
  return dirs;
}
