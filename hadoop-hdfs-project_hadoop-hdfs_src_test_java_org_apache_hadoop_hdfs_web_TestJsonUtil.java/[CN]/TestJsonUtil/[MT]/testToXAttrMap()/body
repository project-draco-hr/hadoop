{
  String jsonString="{\"XAttrs\":[{\"name\":\"user.a1\",\"value\":\"0x313233\"}," + "{\"name\":\"user.a2\",\"value\":\"0x313131\"}]}";
  ObjectReader reader=new ObjectMapper().reader(Map.class);
  Map<?,?> json=reader.readValue(jsonString);
  XAttr xAttr1=(new XAttr.Builder()).setNameSpace(XAttr.NameSpace.USER).setName("a1").setValue(XAttrCodec.decodeValue("0x313233")).build();
  XAttr xAttr2=(new XAttr.Builder()).setNameSpace(XAttr.NameSpace.USER).setName("a2").setValue(XAttrCodec.decodeValue("0x313131")).build();
  List<XAttr> xAttrs=Lists.newArrayList();
  xAttrs.add(xAttr1);
  xAttrs.add(xAttr2);
  Map<String,byte[]> xAttrMap=XAttrHelper.buildXAttrMap(xAttrs);
  Map<String,byte[]> parsedXAttrMap=JsonUtil.toXAttrs(json);
  Assert.assertEquals(xAttrMap.size(),parsedXAttrMap.size());
  Iterator<Entry<String,byte[]>> iter=xAttrMap.entrySet().iterator();
  while (iter.hasNext()) {
    Entry<String,byte[]> entry=iter.next();
    Assert.assertArrayEquals(entry.getValue(),parsedXAttrMap.get(entry.getKey()));
  }
}
