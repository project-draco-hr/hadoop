{
  Configuration conf=new Configuration();
  Server server=new RPC.Builder(conf).setProtocol(TestProtocol.class).setInstance(new MyTestRPCServer()).setBindAddress("0.0.0.0").setPort(0).build();
  server.start();
  InetSocketAddress addr=NetUtils.getConnectAddress(server);
  TestProtocol proxy=(TestProtocol)RPC.getProxy(TestProtocol.class,TestProtocol.versionID,addr,conf);
  proxy.ping();
  server.stop();
}
