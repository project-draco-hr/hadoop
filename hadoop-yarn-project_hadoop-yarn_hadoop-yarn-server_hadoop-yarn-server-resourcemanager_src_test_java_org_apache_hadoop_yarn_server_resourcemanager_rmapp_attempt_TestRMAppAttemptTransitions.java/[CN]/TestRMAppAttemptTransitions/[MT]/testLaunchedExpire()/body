{
  Container amContainer=allocateApplicationAttempt();
  launchApplicationAttempt(amContainer);
  applicationAttempt.handle(new RMAppAttemptEvent(applicationAttempt.getAppAttemptId(),RMAppAttemptEventType.EXPIRE));
  assertEquals(RMAppAttemptState.FAILED,applicationAttempt.getAppAttemptState());
  assertTrue("expire diagnostics missing",applicationAttempt.getDiagnostics().contains("timed out"));
  String rmAppPageUrl=pjoin(RM_WEBAPP_ADDR,"cluster","app",applicationAttempt.getAppAttemptId().getApplicationId());
  assertEquals(rmAppPageUrl,applicationAttempt.getOriginalTrackingUrl());
  assertEquals(rmAppPageUrl,applicationAttempt.getTrackingUrl());
  verifyTokenCount(applicationAttempt.getAppAttemptId(),1);
}
