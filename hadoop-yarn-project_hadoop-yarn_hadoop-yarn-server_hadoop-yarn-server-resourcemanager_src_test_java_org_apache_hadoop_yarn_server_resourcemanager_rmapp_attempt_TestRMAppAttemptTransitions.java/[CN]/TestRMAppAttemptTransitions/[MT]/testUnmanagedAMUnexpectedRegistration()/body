{
  unmanagedAM=true;
  when(submissionContext.getUnmanagedAM()).thenReturn(true);
  submitApplicationAttempt();
  assertEquals(RMAppAttemptState.SUBMITTED,applicationAttempt.getAppAttemptState());
  applicationAttempt.handle(new RMAppAttemptRegistrationEvent(applicationAttempt.getAppAttemptId(),"host",8042,"oldtrackingurl"));
  assertEquals(YarnApplicationAttemptState.SUBMITTED,applicationAttempt.createApplicationAttemptState());
  testAppAttemptSubmittedToFailedState("Unmanaged AM must register after AM attempt reaches LAUNCHED state.");
}
