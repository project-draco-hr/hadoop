{
  UserGroupInformation user=UserGroupInformation.getCurrentUser();
synchronized (this.clientCache) {
    if (this.clientCache.containsKey(containerID)) {
      return this.clientCache.get(containerID);
    }
    this.allNodes.add(containerManagerBindAddr);
    if (UserGroupInformation.isSecurityEnabled()) {
      Token<ContainerTokenIdentifier> token=new Token<ContainerTokenIdentifier>(containerToken.getIdentifier().array(),containerToken.getPassword().array(),new Text(containerToken.getKind()),new Text(containerToken.getService()));
      user=UserGroupInformation.createRemoteUser(containerID.toString());
      user.addToken(token);
    }
    ContainerManager proxy=user.doAs(new PrivilegedAction<ContainerManager>(){
      @Override public ContainerManager run(){
        YarnRPC rpc=YarnRPC.create(getConfig());
        return (ContainerManager)rpc.getProxy(ContainerManager.class,NetUtils.createSocketAddr(containerManagerBindAddr),getConfig());
      }
    }
);
    this.clientCache.put(containerID,proxy);
    return proxy;
  }
}
