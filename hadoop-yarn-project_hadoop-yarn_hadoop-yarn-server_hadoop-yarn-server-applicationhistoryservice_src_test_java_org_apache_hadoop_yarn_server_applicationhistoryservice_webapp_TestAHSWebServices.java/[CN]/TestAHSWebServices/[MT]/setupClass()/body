{
  Configuration conf=new YarnConfiguration();
  TimelineStore store=TestApplicationHistoryManagerOnTimelineStore.createStore(MAX_APPS);
  TimelineACLsManager aclsManager=new TimelineACLsManager(conf);
  TimelineDataManager dataManager=new TimelineDataManager(store,aclsManager);
  conf.setBoolean(YarnConfiguration.YARN_ACL_ENABLE,true);
  conf.set(YarnConfiguration.YARN_ADMIN_ACL,"foo");
  dataManager.init(conf);
  ApplicationACLsManager appAclsManager=new ApplicationACLsManager(conf);
  ApplicationHistoryManagerOnTimelineStore historyManager=new ApplicationHistoryManagerOnTimelineStore(dataManager,appAclsManager);
  historyManager.init(conf);
  historyClientService=new ApplicationHistoryClientService(historyManager){
    @Override protected void serviceStart() throws Exception {
    }
  }
;
  historyClientService.init(conf);
  historyClientService.start();
}
