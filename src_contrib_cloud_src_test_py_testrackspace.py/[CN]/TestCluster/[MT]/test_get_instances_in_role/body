def test_get_instances_in_role(self):
    cluster = RackspaceCluster('cluster1', None, TestCluster.DriverStub())
    instances = cluster.get_instances_in_role('nn')
    self.assertEquals(1, len(instances))
    self.assertEquals('cluster1-nj-000', instances[0].id)
    instances = cluster.get_instances_in_role('tt')
    self.assertEquals(2, len(instances))
    self.assertEquals(set(['cluster1-dt-000', 'cluster1-dt-001']), set([i.id for i in instances]))
