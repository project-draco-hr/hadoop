{
  List<XAttr> xAttrs=getXAttrList(path);
  List<XAttr> filtered;
  if (names == null || names.size() == 0) {
    filtered=xAttrs;
  }
 else {
    filtered=Lists.newArrayListWithCapacity(names.size());
    for (    String name : names) {
      XAttr search=XAttrHelper.buildXAttr(name);
      boolean found=false;
      for (      XAttr aXAttr : xAttrs) {
        if (aXAttr.getNameSpace() == search.getNameSpace() && aXAttr.getName().equals(search.getName())) {
          filtered.add(aXAttr);
          found=true;
          break;
        }
      }
      if (!found) {
        throw new IOException("At least one of the attributes provided was not found.");
      }
    }
  }
  return JsonUtil.toJsonString(filtered,new XAttrEncodingParam(encoder).getEncoding());
}
