{
  long size=0;
  if (f.hasStripedBlocks()) {
    List<StripedBlockProto> blocksList=f.getStripedBlocks().getBlocksList();
    for (    StripedBlockProto p : blocksList) {
      size+=StripedBlockUtil.spaceConsumedByStripedBlock(p.getBlock().getNumBytes(),p.getDataBlockNum(),p.getParityBlockNum(),HdfsConstants.BLOCK_STRIPED_CELL_SIZE);
    }
  }
 else {
    for (    HdfsProtos.BlockProto p : f.getBlocksList()) {
      size+=p.getNumBytes();
    }
  }
  return size;
}
