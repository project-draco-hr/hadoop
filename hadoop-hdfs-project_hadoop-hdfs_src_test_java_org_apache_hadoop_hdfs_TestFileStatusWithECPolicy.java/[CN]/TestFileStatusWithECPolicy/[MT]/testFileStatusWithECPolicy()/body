{
  final Path dir=new Path("/foo");
  assertTrue(fs.mkdir(dir,FsPermission.getDirDefault()));
  assertNull(client.getFileInfo(dir.toString()).getErasureCodingPolicy());
  final Path file=new Path(dir,"foo");
  fs.create(file).close();
  assertNull(client.getFileInfo(file.toString()).getErasureCodingPolicy());
  fs.delete(file,true);
  final ErasureCodingPolicy ecPolicy1=ErasureCodingPolicyManager.getSystemDefaultPolicy();
  fs.setErasureCodingPolicy(dir,ecPolicy1);
  final ErasureCodingPolicy ecPolicy2=client.getFileInfo(dir.toUri().getPath()).getErasureCodingPolicy();
  assertNotNull(ecPolicy2);
  assertTrue(ecPolicy1.equals(ecPolicy2));
  fs.create(file).close();
  final ErasureCodingPolicy ecPolicy3=fs.getClient().getFileInfo(file.toUri().getPath()).getErasureCodingPolicy();
  assertNotNull(ecPolicy3);
  assertTrue(ecPolicy1.equals(ecPolicy3));
}
