{
  conf.set(DFSConfigKeys.DFS_NAMENODE_SHARED_EDITS_DIR_KEY,journalURI.toString());
  String address1="127.0.0.1:" + basePort;
  String address2="127.0.0.1:" + (basePort + 2);
  conf.set(DFSUtil.addKeySuffixes(DFS_NAMENODE_RPC_ADDRESS_KEY,NAMESERVICE,NN1),address1);
  conf.set(DFSUtil.addKeySuffixes(DFS_NAMENODE_RPC_ADDRESS_KEY,NAMESERVICE,NN2),address2);
  conf.set(DFSConfigKeys.DFS_NAMESERVICES,NAMESERVICE);
  conf.set(DFSUtil.addKeySuffixes(DFS_HA_NAMENODES_KEY_PREFIX,NAMESERVICE),NN1 + "," + NN2);
  conf.set(DFS_CLIENT_FAILOVER_PROXY_PROVIDER_KEY_PREFIX + "." + NAMESERVICE,ConfiguredFailoverProxyProvider.class.getName());
  conf.set("fs.defaultFS","hdfs://" + NAMESERVICE);
  return conf;
}
