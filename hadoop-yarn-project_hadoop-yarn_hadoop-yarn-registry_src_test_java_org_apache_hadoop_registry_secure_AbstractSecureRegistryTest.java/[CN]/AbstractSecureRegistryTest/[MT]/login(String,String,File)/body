{
  LOG.info("Logging in as {} in context {} with keytab {}",principal,context,keytab);
  if (!keytab.exists()) {
    throw new FileNotFoundException(keytab.getAbsolutePath());
  }
  Set<Principal> principals=new HashSet<Principal>();
  principals.add(new KerberosPrincipal(principal));
  Subject subject=new Subject(false,principals,new HashSet<Object>(),new HashSet<Object>());
  LoginContext login;
  login=new LoginContext(context,subject,null,KerberosConfiguration.createClientConfig(principal,keytab));
  login.login();
  return login;
}
