{
  setupCluster();
  try {
    String file1="/dir/file1";
    String file2="/dir/file2";
    DFSTestUtil.createFile(fs,new Path(file1),3,(short)1,0L);
    DFSTestUtil.createFile(fs,new Path(file2),4,(short)1,0L);
    CachedFullPathNames cachedFullPathNames=new CachedFullPathNames(namesystem);
    final BlockCollection[] bcs=NameNodeRaidTestUtil.getBlockCollections(namesystem,file1,file2);
    verifyCachedFullPathNameResult(cachedFullPathNames,bcs[0]);
    verifyCachedFullPathNameResult(cachedFullPathNames,bcs[0]);
    verifyCachedFullPathNameResult(cachedFullPathNames,bcs[1]);
    verifyCachedFullPathNameResult(cachedFullPathNames,bcs[1]);
    try {
      Thread.sleep(1200L);
    }
 catch (    InterruptedException e) {
    }
    verifyCachedFullPathNameResult(cachedFullPathNames,bcs[1]);
    verifyCachedFullPathNameResult(cachedFullPathNames,bcs[0]);
  }
  finally {
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}
