{
  LocatedBlocks blocks=createFileGetBlocks(GenericTestUtils.getMethodName());
  assertThat(cluster.getDataNodes().size(),is(1));
  DataNode dn=cluster.getDataNodes().get(0);
  for (  LocatedBlock block : blocks.getLocatedBlocks()) {
    dn.notifyNamenodeDeletedBlock(block.getBlock(),block.getStorageIDs()[0]);
  }
  LOG.info("Triggering report after deleting blocks");
  long ops=getLongCounter("BlockReceivedAndDeletedOps",getMetrics(NN_METRICS));
  DataNodeTestUtils.triggerBlockReport(dn);
  Thread.sleep(5000);
  assertCounter("BlockReceivedAndDeletedOps",ops + 1,getMetrics(NN_METRICS));
}
