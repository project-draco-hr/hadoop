{
  Resource resourceCouldBeUnReserved=getCurrentReservation();
  if (!getCSLeafQueue().getReservationContinueLooking() || !node.getPartition().equals(RMNodeLabelsManager.NO_LABEL)) {
    resourceCouldBeUnReserved=Resources.none();
  }
  return Resources.greaterThanOrEqual(rc,clusterResource,Resources.add(currentResourceLimits.getHeadroom(),resourceCouldBeUnReserved),required);
}
