{
  super(applicationAttemptId,user,queue,activeUsersManager,rmContext);
  RMApp rmApp=rmContext.getRMApps().get(getApplicationId());
  Resource amResource;
  if (rmApp == null || rmApp.getAMResourceRequest() == null) {
    amResource=rmContext.getScheduler().getMinimumResourceCapability();
  }
 else {
    amResource=rmApp.getAMResourceRequest().getCapability();
  }
  setAMResource(amResource);
  setPriority(appPriority);
  scheduler=rmContext.getScheduler();
  if (scheduler.getResourceCalculator() != null) {
    rc=scheduler.getResourceCalculator();
  }
  containerAllocator=new ContainerAllocator(this,rc,rmContext);
}
