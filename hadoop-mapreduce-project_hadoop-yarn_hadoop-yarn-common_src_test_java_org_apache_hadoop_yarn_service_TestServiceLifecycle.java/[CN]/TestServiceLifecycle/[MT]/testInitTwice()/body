{
  BreakableService svc=new BreakableService();
  Configuration conf=new Configuration();
  conf.set("test.init","t");
  svc.init(conf);
  try {
    svc.init(new Configuration());
    fail("Expected a failure, got " + svc);
  }
 catch (  IllegalStateException e) {
  }
  assertStateCount(svc,Service.STATE.INITED,2);
  assertServiceConfigurationContains(svc,"test.init");
}
