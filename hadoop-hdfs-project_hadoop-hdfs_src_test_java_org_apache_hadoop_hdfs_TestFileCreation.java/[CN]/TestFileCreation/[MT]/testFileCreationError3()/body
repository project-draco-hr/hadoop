{
  System.out.println("testFileCreationError3 start");
  Configuration conf=new HdfsConfiguration();
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(0).build();
  DistributedFileSystem dfs=null;
  try {
    cluster.waitActive();
    dfs=cluster.getFileSystem();
    DFSClient client=dfs.dfs;
    final Path f=new Path("/foo.txt");
    createFile(dfs,f,3);
    try {
      cluster.getNameNodeRpc().addBlock(f.toString(),client.clientName,null,null,INodeId.GRANDFATHER_INODE_ID,null);
      fail();
    }
 catch (    IOException ioe) {
      FileSystem.LOG.info("GOOD!",ioe);
    }
    System.out.println("testFileCreationError3 successful");
  }
  finally {
    IOUtils.closeStream(dfs);
    cluster.shutdown();
  }
}
