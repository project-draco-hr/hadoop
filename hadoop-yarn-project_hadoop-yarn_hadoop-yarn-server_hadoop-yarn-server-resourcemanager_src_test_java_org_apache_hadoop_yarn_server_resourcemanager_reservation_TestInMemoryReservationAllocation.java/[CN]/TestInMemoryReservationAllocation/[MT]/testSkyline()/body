{
  ReservationId reservationID=ReservationId.newInstance(rand.nextLong(),rand.nextLong());
  int[] alloc={0,5,10,10,5,0};
  int start=100;
  ReservationDefinition rDef=ReservationSystemTestUtil.createSimpleReservationDefinition(start,start + alloc.length + 1,alloc.length);
  Map<ReservationInterval,Resource> allocations=generateAllocation(start,alloc,true,false);
  ReservationAllocation rAllocation=new InMemoryReservationAllocation(reservationID,rDef,user,planName,start,start + alloc.length + 1,allocations,resCalc,minAlloc);
  doAssertions(rAllocation,reservationID,rDef,allocations,start,alloc);
  Assert.assertFalse(rAllocation.containsGangs());
  for (int i=0; i < alloc.length; i++) {
    Assert.assertEquals(Resource.newInstance(1024 * (alloc[i] + i),(alloc[i] + i)),rAllocation.getResourcesAtTime(start + i));
  }
}
