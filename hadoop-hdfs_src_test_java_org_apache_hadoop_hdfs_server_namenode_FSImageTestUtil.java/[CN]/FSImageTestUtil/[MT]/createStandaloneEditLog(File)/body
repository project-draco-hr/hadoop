{
  assertTrue(logDir.mkdirs() || logDir.exists());
  Files.deleteDirectoryContents(logDir);
  NNStorage storage=Mockito.mock(NNStorage.class);
  List<StorageDirectory> sds=Lists.newArrayList(FSImageTestUtil.mockStorageDirectory(logDir,NameNodeDirType.EDITS));
  Mockito.doReturn(sds).when(storage).dirIterable(NameNodeDirType.EDITS);
  return new FSEditLog(storage);
}
