{
  File tmpFile=File.createTempFile("hadoop_imagefile_tmp","fsimage");
  tmpFile.deleteOnExit();
  try {
    Files.copy(imageFile,tmpFile);
    RandomAccessFile raf=new RandomAccessFile(tmpFile,"rw");
    try {
      raf.seek(IMAGE_TXID_POS);
      raf.writeLong(0);
    }
  finally {
      IOUtils.closeStream(raf);
    }
    return getFileMD5(tmpFile);
  }
  finally {
    tmpFile.delete();
  }
}
