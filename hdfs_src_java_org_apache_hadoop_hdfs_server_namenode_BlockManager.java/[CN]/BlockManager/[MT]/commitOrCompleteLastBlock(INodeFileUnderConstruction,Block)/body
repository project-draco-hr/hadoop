{
  if (commitBlock == null)   return;
  BlockInfo lastBlock=fileINode.getLastBlock();
  if (lastBlock == null)   return;
  if (lastBlock.isComplete())   return;
  commitBlock(fileINode,(BlockInfoUnderConstruction)lastBlock,commitBlock);
  if (countNodes(lastBlock).liveReplicas() >= minReplication)   completeBlock(fileINode,fileINode.numBlocks() - 1);
}
