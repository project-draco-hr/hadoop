{
switch (reportedState) {
case FINALIZED:
switch (ucState) {
case COMPLETE:
case COMMITTED:
      return (storedBlock.getGenerationStamp() != iblk.getGenerationStamp() || storedBlock.getNumBytes() != iblk.getNumBytes());
default :
    return false;
}
case RBW:
case RWR:
return storedBlock.isComplete();
case RUR:
case TEMPORARY:
default :
FSNamesystem.LOG.warn("Unexpected replica state " + reportedState + " for block: "+ storedBlock+ " on "+ dn.getName()+ " size "+ storedBlock.getNumBytes());
return true;
}
}
