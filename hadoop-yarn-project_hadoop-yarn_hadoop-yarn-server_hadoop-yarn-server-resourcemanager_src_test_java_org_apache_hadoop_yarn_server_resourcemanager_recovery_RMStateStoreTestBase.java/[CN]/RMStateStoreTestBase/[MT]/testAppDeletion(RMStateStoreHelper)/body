{
  RMStateStore store=stateStoreHelper.getRMStateStore();
  store.setRMDispatcher(new TestDispatcher());
  ArrayList<RMApp> appList=new ArrayList<RMApp>();
  int NUM_APPS=5;
  for (int i=0; i < NUM_APPS; i++) {
    ApplicationId appId=ApplicationId.newInstance(1383183338,i);
    RMApp app=storeApp(store,appId,123456789,987654321);
    appList.add(app);
  }
  Assert.assertEquals(NUM_APPS,appList.size());
  for (  RMApp app : appList) {
    while (true) {
      if (stateStoreHelper.appExists(app)) {
        break;
      }
 else {
        Thread.sleep(100);
      }
    }
  }
  for (  RMApp app : appList) {
    store.removeApplication(app);
    while (true) {
      if (!stateStoreHelper.appExists(app)) {
        break;
      }
 else {
        Thread.sleep(100);
      }
    }
  }
}
