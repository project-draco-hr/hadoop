{
  verifyRequest(registration);
  if (!nn.isRole(NamenodeRole.NAMENODE))   throw new IOException("Only an ACTIVE node can invoke endCheckpoint.");
  namesystem.endCheckpoint(registration,sig);
}
