{
  NameNode nn=null;
  try {
    nn=startNameNode();
    Configuration backup_config=new HdfsConfiguration(config);
    backup_config.set(DFSConfigKeys.DFS_NAMENODE_BACKUP_ADDRESS_KEY,THIS_HOST);
    backup_config.set(DFSConfigKeys.DFS_NAMENODE_BACKUP_HTTP_ADDRESS_KEY,backup_config.get(DFSConfigKeys.DFS_NAMENODE_HTTP_ADDRESS_KEY));
    LOG.info("= Starting 1 on: " + backup_config.get(DFSConfigKeys.DFS_NAMENODE_BACKUP_HTTP_ADDRESS_KEY));
    assertFalse("Backup started on same port as Namenode",canStartBackupNode(backup_config));
    backup_config.set(DFSConfigKeys.DFS_NAMENODE_BACKUP_HTTP_ADDRESS_KEY,THIS_HOST);
    LOG.info("= Starting 2 on: " + backup_config.get(DFSConfigKeys.DFS_NAMENODE_BACKUP_HTTP_ADDRESS_KEY));
    boolean started=canStartBackupNode(backup_config);
    assertTrue("Backup Namenode should've started",started);
  }
  finally {
    stopNameNode(nn);
  }
}
