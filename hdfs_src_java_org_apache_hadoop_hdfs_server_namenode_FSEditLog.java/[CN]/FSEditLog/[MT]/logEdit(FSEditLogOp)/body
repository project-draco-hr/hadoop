{
synchronized (this) {
    waitIfAutoSyncScheduled();
    if (getNumEditStreams() == 0)     throw new java.lang.IllegalStateException(NO_JOURNAL_STREAMS_WARNING);
    ArrayList<EditLogOutputStream> errorStreams=null;
    long start=now();
    for (    EditLogOutputStream eStream : editStreams) {
      if (!eStream.isOperationSupported(op.opCode.getOpCode()))       continue;
      try {
        eStream.write(op);
      }
 catch (      IOException ie) {
        LOG.error("logEdit: removing " + eStream.getName(),ie);
        if (errorStreams == null)         errorStreams=new ArrayList<EditLogOutputStream>(1);
        errorStreams.add(eStream);
      }
    }
    disableAndReportErrorOnStreams(errorStreams);
    recordTransaction(start);
    if (!shouldForceSync()) {
      return;
    }
    isAutoSyncScheduled=true;
  }
  logSync();
}
