{
  numTransactions=totalTimeTransactions=numTransactionsBatchedInSync=0;
  if (editStreams == null)   editStreams=new ArrayList<EditLogOutputStream>();
  ArrayList<StorageDirectory> al=null;
  for (Iterator<StorageDirectory> it=storage.dirIterator(NameNodeDirType.EDITS); it.hasNext(); ) {
    StorageDirectory sd=it.next();
    File eFile=getEditFile(sd);
    try {
      addNewEditLogStream(eFile);
    }
 catch (    IOException e) {
      LOG.warn("Unable to open edit log file " + eFile);
      if (al == null)       al=new ArrayList<StorageDirectory>(1);
      al.add(sd);
    }
  }
  if (al != null)   storage.reportErrorsOnDirectories(al);
  if (storage.getNumStorageDirs(NameNodeDirType.EDITS) == 0) {
    throw new IOException("Failed to initialize edits log in any storage directory.");
  }
}
