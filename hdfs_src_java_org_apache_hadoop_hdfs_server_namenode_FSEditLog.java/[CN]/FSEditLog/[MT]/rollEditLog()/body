{
  waitForSyncToFinish();
  Iterator<StorageDirectory> it=storage.dirIterator(NameNodeDirType.EDITS);
  if (!it.hasNext())   return;
  boolean alreadyExists=existsNew(it.next());
  while (it.hasNext()) {
    StorageDirectory sd=it.next();
    if (alreadyExists != existsNew(sd))     throw new IOException(getEditNewFile(sd) + "should " + (alreadyExists ? "" : "not ")+ "exist.");
  }
  if (alreadyExists)   return;
  storage.attemptRestoreRemovedStorage();
  divertFileStreams(Storage.STORAGE_DIR_CURRENT + "/" + NameNodeFile.EDITS_NEW.getName());
}
