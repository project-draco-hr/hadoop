{
  long numEdits=-1;
  for (  StorageDirectory sd : fsimage.getStorage().dirIterable(NameNodeDirType.EDITS)) {
    File editFile=new File(sd.getCurrentDir(),logFileName);
    System.out.println("Verifying file: " + editFile);
    FSEditLogLoader loader=new FSEditLogLoader(namesystem,startTxId);
    long numEditsThisLog=loader.loadFSEdits(new EditLogFileInputStream(editFile),startTxId);
    System.out.println("Number of edits: " + numEditsThisLog);
    assertTrue(numEdits == -1 || numEditsThisLog == numEdits);
    numEdits=numEditsThisLog;
  }
  assertTrue(numEdits != -1);
  return numEdits;
}
