{
  RegisterNodeManagerRequest request=recordFactory.newRecordInstance(RegisterNodeManagerRequest.class);
  assertNotNull(client.registerNodeManager(request));
  ResourceTrackerTestImpl.exception=true;
  try {
    client.registerNodeManager(request);
    fail("there  should be YarnException");
  }
 catch (  YarnException e) {
    assertTrue(e.getMessage().startsWith("testMessage"));
  }
 finally {
    ResourceTrackerTestImpl.exception=false;
  }
}
