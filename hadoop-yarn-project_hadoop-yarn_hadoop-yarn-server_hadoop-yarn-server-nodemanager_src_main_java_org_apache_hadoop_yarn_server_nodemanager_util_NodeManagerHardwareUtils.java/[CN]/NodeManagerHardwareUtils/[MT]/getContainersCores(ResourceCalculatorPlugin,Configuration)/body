{
  int numProcessors=plugin.getNumProcessors();
  int nodeCpuPercentage=Math.min(conf.getInt(YarnConfiguration.NM_RESOURCE_PERCENTAGE_PHYSICAL_CPU_LIMIT,YarnConfiguration.DEFAULT_NM_RESOURCE_PERCENTAGE_PHYSICAL_CPU_LIMIT),100);
  nodeCpuPercentage=Math.max(0,nodeCpuPercentage);
  if (nodeCpuPercentage == 0) {
    String message="Illegal value for " + YarnConfiguration.NM_RESOURCE_PERCENTAGE_PHYSICAL_CPU_LIMIT + ". Value cannot be less than or equal to 0.";
    throw new IllegalArgumentException(message);
  }
  return (nodeCpuPercentage * numProcessors) / 100.0f;
}
