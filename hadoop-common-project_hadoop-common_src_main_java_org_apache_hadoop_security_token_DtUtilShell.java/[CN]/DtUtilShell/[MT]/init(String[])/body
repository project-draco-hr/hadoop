{
  if (0 == args.length) {
    return 1;
  }
  tokenFiles=new ArrayList<File>();
  args=maybeDoLoginFromKeytabAndPrincipal(args);
  for (int i=0; i < args.length; i++) {
    if (i == 0) {
      String command=args[0];
      if (command.equals(HELP)) {
        return 1;
      }
 else       if (command.equals(PRINT)) {
        setSubCommand(new Print());
      }
 else       if (command.equals(GET)) {
        setSubCommand(new Get(args[++i]));
      }
 else       if (command.equals(EDIT)) {
        setSubCommand(new Edit());
      }
 else       if (command.equals(APPEND)) {
        setSubCommand(new Append());
      }
 else       if (command.equals(CANCEL)) {
        setSubCommand(new Remove(true));
      }
 else       if (command.equals(REMOVE)) {
        setSubCommand(new Remove(false));
      }
 else       if (command.equals(RENEW)) {
        setSubCommand(new Renew());
      }
    }
 else     if (args[i].equals(ALIAS)) {
      alias=new Text(args[++i]);
    }
 else     if (args[i].equals(SERVICE)) {
      service=new Text(args[++i]);
    }
 else     if (args[i].equals(RENEWER)) {
      renewer=args[++i];
    }
 else     if (args[i].equals(FORMAT)) {
      format=args[++i];
      if (!format.equals(DtFileOperations.FORMAT_JAVA) && !format.equals(DtFileOperations.FORMAT_PB)) {
        LOG.error("-format must be '" + DtFileOperations.FORMAT_JAVA + "' or '"+ DtFileOperations.FORMAT_PB+ "' not '"+ format+ "'");
        return 1;
      }
    }
 else {
      for (; i < args.length; i++) {
        File f=new File(args[i]);
        if (f.exists()) {
          tokenFiles.add(f);
        }
        if (firstFile == null) {
          firstFile=f;
        }
      }
      if (tokenFiles.size() == 0 && firstFile == null) {
        LOG.error("Must provide a filename to all commands.");
        return 1;
      }
    }
  }
  return 0;
}
