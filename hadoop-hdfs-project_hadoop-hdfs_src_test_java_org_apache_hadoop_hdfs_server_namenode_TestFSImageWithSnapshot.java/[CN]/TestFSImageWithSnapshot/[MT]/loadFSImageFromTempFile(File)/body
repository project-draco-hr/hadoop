{
  FSImageFormat.LoaderDelegator loader=FSImageFormat.newLoader(conf,fsn);
  fsn.writeLock();
  fsn.getFSDirectory().writeLock();
  try {
    loader.load(imageFile,false);
    FSImage.updateCountForQuota(fsn.getBlockManager().getStoragePolicySuite(),INodeDirectory.valueOf(fsn.getFSDirectory().getINode("/"),"/"));
  }
  finally {
    fsn.getFSDirectory().writeUnlock();
    fsn.writeUnlock();
  }
}
