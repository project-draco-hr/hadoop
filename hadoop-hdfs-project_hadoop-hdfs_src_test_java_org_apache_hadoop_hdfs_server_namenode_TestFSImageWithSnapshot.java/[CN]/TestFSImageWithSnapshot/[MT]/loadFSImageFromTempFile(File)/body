{
  FSImageFormat.Loader loader=new FSImageFormat.Loader(conf,fsn);
  fsn.writeLock();
  fsn.getFSDirectory().writeLock();
  try {
    loader.load(imageFile);
    FSImage.updateCountForQuota((INodeDirectoryWithQuota)fsn.getFSDirectory().getINode("/"));
  }
  finally {
    fsn.getFSDirectory().writeUnlock();
    fsn.writeUnlock();
  }
}
