{
  List<ContainerId> list=new ArrayList<ContainerId>();
  list.add(containerID);
  GetContainerStatusesRequest request=GetContainerStatusesRequest.newInstance(list);
  ContainerStatus containerStatus=containerManager.getContainerStatuses(request).getContainerStatuses().get(0);
  int timeoutSecs=0;
  while (!containerStatus.getState().equals(finalState) && timeoutSecs++ < timeOutMax) {
    Thread.sleep(1000);
    LOG.info("Waiting for container to get into state " + finalState + ". Current state is "+ containerStatus.getState());
    containerStatus=containerManager.getContainerStatuses(request).getContainerStatuses().get(0);
  }
  LOG.info("Container state is " + containerStatus.getState());
  Assert.assertEquals("ContainerState is not correct (timedout)",finalState,containerStatus.getState());
}
