{
  GetContainerStatusRequest request=recordFactory.newRecordInstance(GetContainerStatusRequest.class);
  request.setContainerId(containerID);
  ContainerStatus containerStatus=containerManager.getContainerStatus(request).getStatus();
  int timeoutSecs=0;
  while (!containerStatus.getState().equals(finalState) && timeoutSecs++ < timeOutMax) {
    Thread.sleep(1000);
    LOG.info("Waiting for container to get into state " + finalState + ". Current state is "+ containerStatus.getState());
    containerStatus=containerManager.getContainerStatus(request).getStatus();
  }
  LOG.info("Container state is " + containerStatus.getState());
  Assert.assertEquals("ContainerState is not correct (timedout)",finalState,containerStatus.getState());
}
