{
  IpcConnectionContextProto.Builder result=IpcConnectionContextProto.newBuilder();
  if (protocol != null) {
    result.setProtocol(protocol);
  }
  UserInformationProto.Builder ugiProto=UserInformationProto.newBuilder();
  if (ugi != null) {
    if (authMethod == AuthMethod.KERBEROS) {
      ugiProto.setEffectiveUser(ugi.getUserName());
    }
 else     if (authMethod == AuthMethod.TOKEN) {
    }
 else {
      ugiProto.setEffectiveUser(ugi.getUserName());
      if (ugi.getRealUser() != null) {
        ugiProto.setRealUser(ugi.getRealUser().getUserName());
      }
    }
  }
  result.setUserInfo(ugiProto);
  return result.build();
}
