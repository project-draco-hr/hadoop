{
  super.initializePipeline(applicationAttemptId,user,amrmToken,localToken);
  RequestInterceptor rt=getPipelines().get(applicationAttemptId.getApplicationId()).getRootInterceptor();
  while (rt.getNextInterceptor() != null) {
    rt=rt.getNextInterceptor();
  }
  if (rt instanceof DefaultRequestInterceptor) {
    ((DefaultRequestInterceptor)rt).setRMClient(getResourceManager().getApplicationMasterService());
  }
}
