{
  new Thread(){
    public void run(){
      appHistoryServer.start();
    }
  }
.start();
  int waitCount=0;
  while (appHistoryServer.getServiceState() == STATE.INITED && waitCount++ < 60) {
    LOG.info("Waiting for Timeline Server to start...");
    Thread.sleep(1500);
  }
  if (appHistoryServer.getServiceState() != STATE.STARTED) {
    IOException ioe=new IOException("ApplicationHistoryServer failed to start. Final state is " + appHistoryServer.getServiceState());
    ioe.initCause(appHistoryServer.getFailureCause());
    throw ioe;
  }
  LOG.info("MiniYARN ApplicationHistoryServer address: " + getConfig().get(YarnConfiguration.TIMELINE_SERVICE_ADDRESS));
  LOG.info("MiniYARN ApplicationHistoryServer web address: " + getConfig().get(YarnConfiguration.TIMELINE_SERVICE_WEBAPP_ADDRESS));
  super.serviceStart();
}
