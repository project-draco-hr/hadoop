{
  if (resourceManagers[index] != null) {
    waitForAppMastersToFinish(5000);
    resourceManagers[index].stop();
  }
  if (Shell.WINDOWS) {
    String testWorkDirPath=testWorkDir.getAbsolutePath();
    try {
      FileContext.getLocalFSFileContext().delete(new Path(testWorkDirPath),true);
    }
 catch (    IOException e) {
      LOG.warn("could not cleanup symlink: " + testWorkDir.getAbsolutePath());
    }
  }
  super.serviceStop();
}
