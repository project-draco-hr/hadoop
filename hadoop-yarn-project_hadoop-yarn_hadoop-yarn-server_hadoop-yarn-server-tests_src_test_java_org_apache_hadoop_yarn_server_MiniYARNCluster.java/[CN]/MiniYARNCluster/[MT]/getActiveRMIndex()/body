{
  if (resourceManagers.length == 1) {
    return 0;
  }
  int numRetriesForRMBecomingActive=failoverTimeout / 100;
  while (numRetriesForRMBecomingActive-- > 0) {
    for (int i=0; i < resourceManagers.length; i++) {
      if (resourceManagers[i] == null) {
        continue;
      }
      try {
        if (HAServiceProtocol.HAServiceState.ACTIVE == resourceManagers[i].getRMContext().getRMAdminService().getServiceStatus().getState()) {
          return i;
        }
      }
 catch (      IOException e) {
        throw new YarnRuntimeException("Couldn't read the status of " + "a ResourceManger in the HA ensemble.",e);
      }
    }
    try {
      Thread.sleep(100);
    }
 catch (    InterruptedException e) {
      throw new YarnRuntimeException("Interrupted while waiting for one " + "of the ResourceManagers to become active");
    }
  }
  return -1;
}
