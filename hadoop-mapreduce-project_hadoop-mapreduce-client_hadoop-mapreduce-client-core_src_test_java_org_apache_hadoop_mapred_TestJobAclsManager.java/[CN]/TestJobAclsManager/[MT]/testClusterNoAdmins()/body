{
  Map<JobACL,AccessControlList> tmpJobACLs=new HashMap<JobACL,AccessControlList>();
  Configuration conf=new Configuration();
  String jobOwner="testuser";
  conf.set(JobACL.VIEW_JOB.getAclName(),"");
  conf.setBoolean(MRConfig.MR_ACLS_ENABLED,true);
  String noAdminUser="testuser2";
  JobACLsManager aclsManager=new JobACLsManager(conf);
  tmpJobACLs=aclsManager.constructJobACLs(conf);
  final Map<JobACL,AccessControlList> jobACLs=tmpJobACLs;
  UserGroupInformation callerUGI=UserGroupInformation.createUserForTesting(noAdminUser,new String[]{});
  boolean val=aclsManager.checkAccess(callerUGI,JobACL.VIEW_JOB,jobOwner,jobACLs.get(JobACL.VIEW_JOB));
  assertFalse("random user should not have view access",val);
  val=aclsManager.checkAccess(callerUGI,JobACL.MODIFY_JOB,jobOwner,jobACLs.get(JobACL.MODIFY_JOB));
  assertFalse("random user should not have modify access",val);
  callerUGI=UserGroupInformation.createUserForTesting(jobOwner,new String[]{});
  val=aclsManager.checkAccess(callerUGI,JobACL.VIEW_JOB,jobOwner,jobACLs.get(JobACL.VIEW_JOB));
  assertTrue("owner should have view access",val);
  val=aclsManager.checkAccess(callerUGI,JobACL.MODIFY_JOB,jobOwner,jobACLs.get(JobACL.MODIFY_JOB));
  assertTrue("owner should have modify access",val);
}
