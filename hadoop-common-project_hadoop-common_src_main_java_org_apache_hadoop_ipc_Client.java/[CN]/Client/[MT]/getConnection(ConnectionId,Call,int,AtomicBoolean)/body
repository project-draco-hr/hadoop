{
  if (!running.get()) {
    throw new IOException("The client is stopped");
  }
  Connection connection;
  do {
synchronized (connections) {
      connection=connections.get(remoteId);
      if (connection == null) {
        connection=new Connection(remoteId,serviceClass);
        connections.put(remoteId,connection);
      }
    }
  }
 while (!connection.addCall(call));
  connection.setupIOstreams(fallbackToSimpleAuth);
  return connection;
}
