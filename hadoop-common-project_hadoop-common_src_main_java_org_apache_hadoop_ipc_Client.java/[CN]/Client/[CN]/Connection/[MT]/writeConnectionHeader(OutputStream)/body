{
  DataOutputStream out=new DataOutputStream(new BufferedOutputStream(outStream));
  out.write(RpcConstants.HEADER.array());
  out.write(RpcConstants.CURRENT_VERSION);
  out.write(serviceClass);
  final AuthProtocol authProtocol;
switch (authMethod) {
case SIMPLE:
    authProtocol=AuthProtocol.NONE;
  break;
default :
authProtocol=AuthProtocol.SASL;
}
out.write(authProtocol.callId);
out.flush();
}
