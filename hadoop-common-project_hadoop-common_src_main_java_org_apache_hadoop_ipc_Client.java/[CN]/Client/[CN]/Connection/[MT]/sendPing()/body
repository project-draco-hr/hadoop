{
  long curTime=Time.now();
  if (curTime - lastActivity.get() >= pingInterval) {
    lastActivity.set(curTime);
synchronized (out) {
      out.writeInt(pingRequest.size());
      pingRequest.writeTo(out);
      out.flush();
    }
  }
}
