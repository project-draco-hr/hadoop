{
  if (!allocation.isNull("children")) {
    Object object=allocation.get("children");
    if (object.getClass() == JSONObject.class) {
      return 1 + getNumberOfNodes((JSONObject)object);
    }
 else {
      int count=0;
      for (int i=0; i < ((JSONArray)object).length(); i++) {
        count+=(1 + getNumberOfNodes(((JSONArray)object).getJSONObject(i)));
      }
      return count;
    }
  }
 else {
    return 0;
  }
}
