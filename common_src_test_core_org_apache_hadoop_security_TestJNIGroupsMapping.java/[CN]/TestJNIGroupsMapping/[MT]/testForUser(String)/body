{
  GroupMappingServiceProvider g=new ShellBasedUnixGroupsMapping();
  List<String> shellBasedGroups=g.getGroups(user);
  g=new JniBasedUnixGroupsMapping();
  List<String> jniBasedGroups=g.getGroups(user);
  String[] shellBasedGroupsArray=shellBasedGroups.toArray(new String[0]);
  Arrays.sort(shellBasedGroupsArray);
  String[] jniBasedGroupsArray=jniBasedGroups.toArray(new String[0]);
  Arrays.sort(jniBasedGroupsArray);
  if (!Arrays.equals(shellBasedGroupsArray,jniBasedGroupsArray)) {
    fail("Groups returned by " + ShellBasedUnixGroupsMapping.class.getCanonicalName() + " and "+ JniBasedUnixGroupsMapping.class.getCanonicalName()+ " didn't match for "+ user);
  }
}
