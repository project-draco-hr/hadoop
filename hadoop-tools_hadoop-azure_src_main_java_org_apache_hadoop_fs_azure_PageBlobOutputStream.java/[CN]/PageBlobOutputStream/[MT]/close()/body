{
  LOG.debug("Closing page blob output stream.");
  flush();
  checkStreamState();
  ioThreadPool.shutdown();
  try {
    LOG.debug(ioThreadPool.toString());
    if (!ioThreadPool.awaitTermination(10,TimeUnit.MINUTES)) {
      LOG.debug("Timed out after 10 minutes waiting for IO requests to finish");
      logAllStackTraces();
      LOG.debug(ioThreadPool.toString());
      throw new IOException("Timed out waiting for IO requests to finish");
    }
  }
 catch (  InterruptedException e) {
    LOG.debug("Caught InterruptedException");
    Thread.currentThread().interrupt();
  }
  this.lastError=new IOException("Stream is already closed.");
}
