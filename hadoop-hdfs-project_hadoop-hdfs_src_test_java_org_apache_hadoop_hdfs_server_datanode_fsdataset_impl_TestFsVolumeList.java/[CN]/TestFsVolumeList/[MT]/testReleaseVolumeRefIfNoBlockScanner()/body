{
  FsVolumeList volumeList=new FsVolumeList(Collections.<VolumeFailureInfo>emptyList(),null,blockChooser);
  File volDir=new File(baseDir,"volume-0");
  volDir.mkdirs();
  FsVolumeImpl volume=new FsVolumeImpl(dataset,"storage-id",volDir,conf,StorageType.DEFAULT);
  FsVolumeReference ref=volume.obtainReference();
  volumeList.addVolume(ref);
  try {
    ref.close();
    fail("Should throw exception because the reference is closed in " + "VolumeList#addVolume().");
  }
 catch (  IllegalStateException e) {
  }
}
