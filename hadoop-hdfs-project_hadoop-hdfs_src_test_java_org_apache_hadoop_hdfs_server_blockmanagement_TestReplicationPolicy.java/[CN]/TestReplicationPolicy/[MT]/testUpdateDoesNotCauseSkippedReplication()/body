{
  UnderReplicatedBlocks underReplicatedBlocks=new UnderReplicatedBlocks();
  Block block1=new Block(random.nextLong());
  Block block2=new Block(random.nextLong());
  Block block3=new Block(random.nextLong());
  final int block1CurReplicas=2;
  final int block1ExpectedReplicas=7;
  underReplicatedBlocks.add(block1,block1CurReplicas,0,block1ExpectedReplicas);
  underReplicatedBlocks.add(block2,2,0,7);
  underReplicatedBlocks.add(block3,2,0,6);
  List<List<Block>> chosenBlocks;
  chosenBlocks=underReplicatedBlocks.chooseUnderReplicatedBlocks(1);
  assertTheChosenBlocks(chosenBlocks,0,1,0,0,0);
  underReplicatedBlocks.update(block1,block1CurReplicas + 1,0,block1ExpectedReplicas,1,0);
  chosenBlocks=underReplicatedBlocks.chooseUnderReplicatedBlocks(1);
  assertTheChosenBlocks(chosenBlocks,0,1,0,0,0);
  chosenBlocks=underReplicatedBlocks.chooseUnderReplicatedBlocks(1);
  assertTheChosenBlocks(chosenBlocks,0,0,1,0,0);
}
