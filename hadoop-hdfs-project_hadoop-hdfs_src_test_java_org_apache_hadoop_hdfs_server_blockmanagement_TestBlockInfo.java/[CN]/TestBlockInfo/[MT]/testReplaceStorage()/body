{
  final DatanodeStorageInfo storage1=DFSTestUtil.createDatanodeStorageInfo("storageID1","127.0.0.1");
  final DatanodeStorageInfo storage2=new DatanodeStorageInfo(storage1.getDatanodeDescriptor(),new DatanodeStorage("storageID2"));
  final int NUM_BLOCKS=10;
  BlockInfo[] blockInfos=new BlockInfo[NUM_BLOCKS];
  for (int i=0; i < NUM_BLOCKS; ++i) {
    blockInfos[i]=new BlockInfo(3);
    storage1.addBlock(blockInfos[i]);
  }
  boolean added=storage2.addBlock(blockInfos[NUM_BLOCKS / 2]);
  Assert.assertThat(added,is(false));
  Assert.assertThat(blockInfos[NUM_BLOCKS / 2].getStorageInfo(0),is(storage2));
}
