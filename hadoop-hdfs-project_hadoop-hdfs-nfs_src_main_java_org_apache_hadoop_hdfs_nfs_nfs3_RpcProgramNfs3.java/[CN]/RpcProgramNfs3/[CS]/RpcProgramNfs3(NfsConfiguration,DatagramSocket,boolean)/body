{
  super("NFS3","localhost",config.getInt(NfsConfigKeys.DFS_NFS_SERVER_PORT_KEY,NfsConfigKeys.DFS_NFS_SERVER_PORT_DEFAULT),Nfs3Constant.PROGRAM,Nfs3Constant.VERSION,Nfs3Constant.VERSION,registrationSocket,allowInsecurePorts);
  this.config=config;
  config.set(FsPermission.UMASK_LABEL,"000");
  iug=new IdUserGroup(config);
  aixCompatMode=config.getBoolean(NfsConfigKeys.AIX_COMPAT_MODE_KEY,NfsConfigKeys.AIX_COMPAT_MODE_DEFAULT);
  exports=NfsExports.getInstance(config);
  writeManager=new WriteManager(iug,config,aixCompatMode);
  clientCache=new DFSClientCache(config);
  replication=(short)config.getInt(DFSConfigKeys.DFS_REPLICATION_KEY,DFSConfigKeys.DFS_REPLICATION_DEFAULT);
  blockSize=config.getLong(DFSConfigKeys.DFS_BLOCK_SIZE_KEY,DFSConfigKeys.DFS_BLOCK_SIZE_DEFAULT);
  bufferSize=config.getInt(CommonConfigurationKeysPublic.IO_FILE_BUFFER_SIZE_KEY,CommonConfigurationKeysPublic.IO_FILE_BUFFER_SIZE_DEFAULT);
  writeDumpDir=config.get(NfsConfigKeys.DFS_NFS_FILE_DUMP_DIR_KEY,NfsConfigKeys.DFS_NFS_FILE_DUMP_DIR_DEFAULT);
  boolean enableDump=config.getBoolean(NfsConfigKeys.DFS_NFS_FILE_DUMP_KEY,NfsConfigKeys.DFS_NFS_FILE_DUMP_DEFAULT);
  UserGroupInformation.setConfiguration(config);
  SecurityUtil.login(config,NfsConfigKeys.DFS_NFS_KEYTAB_FILE_KEY,NfsConfigKeys.DFS_NFS_KERBEROS_PRINCIPAL_KEY);
  if (!enableDump) {
    writeDumpDir=null;
  }
 else {
    clearDirectory(writeDumpDir);
  }
  rpcCallCache=new RpcCallCache("NFS3",256);
}
