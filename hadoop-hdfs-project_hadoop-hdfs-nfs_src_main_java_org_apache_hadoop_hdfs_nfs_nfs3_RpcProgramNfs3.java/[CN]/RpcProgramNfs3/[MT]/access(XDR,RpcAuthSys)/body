{
  ACCESS3Response response=new ACCESS3Response(Nfs3Status.NFS3_OK);
  String uname=authSysCheck(authSys);
  DFSClient dfsClient=clientCache.get(uname);
  if (dfsClient == null) {
    response.setStatus(Nfs3Status.NFS3ERR_SERVERFAULT);
    return response;
  }
  ACCESS3Request request=null;
  try {
    request=new ACCESS3Request(xdr);
  }
 catch (  IOException e) {
    LOG.error("Invalid ACCESS request");
    return new ACCESS3Response(Nfs3Status.NFS3ERR_INVAL);
  }
  FileHandle handle=request.getHandle();
  Nfs3FileAttributes attrs;
  if (LOG.isDebugEnabled()) {
    LOG.debug("NFS ACCESS fileId: " + handle.getFileId());
  }
  try {
    attrs=writeManager.getFileAttr(superUserClient,handle,iug);
    if (attrs == null) {
      LOG.error("Can't get path for fileId:" + handle.getFileId());
      return new ACCESS3Response(Nfs3Status.NFS3ERR_STALE);
    }
    int access=Nfs3Utils.getAccessRightsForUserGroup(authSys.getUid(),authSys.getGid(),attrs);
    return new ACCESS3Response(Nfs3Status.NFS3_OK,attrs,access);
  }
 catch (  IOException e) {
    LOG.warn("Exception ",e);
    return new ACCESS3Response(Nfs3Status.NFS3ERR_IO);
  }
}
