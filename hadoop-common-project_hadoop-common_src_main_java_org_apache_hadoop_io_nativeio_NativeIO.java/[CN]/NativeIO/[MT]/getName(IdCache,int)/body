{
  Map<Integer,CachedName> idNameCache=(domain == IdCache.USER) ? USER_ID_NAME_CACHE : GROUP_ID_NAME_CACHE;
  String name;
  CachedName cachedName=idNameCache.get(id);
  long now=System.currentTimeMillis();
  if (cachedName != null && (cachedName.timestamp + cacheTimeout) > now) {
    name=cachedName.name;
  }
 else {
    name=(domain == IdCache.USER) ? getUserName(id) : getGroupName(id);
    if (LOG.isDebugEnabled()) {
      String type=(domain == IdCache.USER) ? "UserName" : "GroupName";
      LOG.debug("Got " + type + " "+ name+ " for ID "+ id+ " from the native implementation");
    }
    cachedName=new CachedName(name,now);
    idNameCache.put(id,cachedName);
  }
  return name;
}
