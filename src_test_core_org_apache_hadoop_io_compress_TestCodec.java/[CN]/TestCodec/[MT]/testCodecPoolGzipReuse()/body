{
  Configuration conf=new Configuration();
  conf.setBoolean(CommonConfigurationKeys.IO_NATIVE_LIB_AVAILABLE_KEY,true);
  if (!ZlibFactory.isNativeZlibLoaded(conf)) {
    LOG.warn("testCodecPoolGzipReuse skipped: native libs not loaded");
    return;
  }
  GzipCodec gzc=ReflectionUtils.newInstance(GzipCodec.class,conf);
  DefaultCodec dfc=ReflectionUtils.newInstance(DefaultCodec.class,conf);
  Compressor c1=CodecPool.getCompressor(gzc);
  Compressor c2=CodecPool.getCompressor(dfc);
  CodecPool.returnCompressor(c1);
  CodecPool.returnCompressor(c2);
  assertTrue("Got mismatched ZlibCompressor",c2 != CodecPool.getCompressor(gzc));
}
