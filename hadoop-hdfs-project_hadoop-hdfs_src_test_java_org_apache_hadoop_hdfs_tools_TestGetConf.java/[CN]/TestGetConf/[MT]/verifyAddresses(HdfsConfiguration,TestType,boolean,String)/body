{
  Map<String,Map<String,InetSocketAddress>> map=getAddressListFromConf(type,conf);
  List<ConfiguredNNAddress> list=DFSUtil.flattenAddressMap(map);
  String[] actual=toStringArray(list);
  Arrays.sort(actual);
  Arrays.sort(expected);
  assertTrue(Arrays.equals(expected,actual));
  getAddressListFromTool(type,conf,checkPort,list);
}
