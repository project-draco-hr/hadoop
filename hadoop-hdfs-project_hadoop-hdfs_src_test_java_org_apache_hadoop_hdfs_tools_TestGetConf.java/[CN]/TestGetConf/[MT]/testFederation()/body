{
  final int nsCount=10;
  HdfsConfiguration conf=new HdfsConfiguration(false);
  setupNameServices(conf,nsCount);
  String[] nnAddresses=setupAddress(conf,DFS_NAMENODE_SERVICE_RPC_ADDRESS_KEY,nsCount,1000);
  setupAddress(conf,DFS_NAMENODE_RPC_ADDRESS_KEY,nsCount,1500);
  setupStaticHostResolution(nsCount);
  String[] backupAddresses=setupAddress(conf,DFS_NAMENODE_BACKUP_ADDRESS_KEY,nsCount,2000);
  String[] secondaryAddresses=setupAddress(conf,DFS_NAMENODE_SECONDARY_HTTP_ADDRESS_KEY,nsCount,3000);
  verifyAddresses(conf,TestType.NAMENODE,false,nnAddresses);
  verifyAddresses(conf,TestType.BACKUP,false,backupAddresses);
  verifyAddresses(conf,TestType.SECONDARY,false,secondaryAddresses);
  verifyAddresses(conf,TestType.NNRPCADDRESSES,true,nnAddresses);
  conf=new HdfsConfiguration(false);
  setupNameServices(conf,nsCount);
  nnAddresses=setupAddress(conf,DFS_NAMENODE_RPC_ADDRESS_KEY,nsCount,1000);
  backupAddresses=setupAddress(conf,DFS_NAMENODE_BACKUP_ADDRESS_KEY,nsCount,2000);
  secondaryAddresses=setupAddress(conf,DFS_NAMENODE_SECONDARY_HTTP_ADDRESS_KEY,nsCount,3000);
  verifyAddresses(conf,TestType.NAMENODE,false,nnAddresses);
  verifyAddresses(conf,TestType.BACKUP,false,backupAddresses);
  verifyAddresses(conf,TestType.SECONDARY,false,secondaryAddresses);
  verifyAddresses(conf,TestType.NNRPCADDRESSES,true,nnAddresses);
}
