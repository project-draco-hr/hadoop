{
  if (hasChannel) {
    ((SocketInputStream)in).setTimeout(timeoutMs);
  }
 else {
    socket.setSoTimeout((int)timeoutMs);
  }
}
