{
  FSDirectory fsd=fsn.getFSDirectory();
  INodesInPath iip=fsd.resolvePathForWrite(pc,src);
  final EncryptionZone zone=FSDirEncryptionZoneOp.getEZForPath(fsd,iip);
  if (zone == null) {
    return null;
  }
  CryptoProtocolVersion protocolVersion=fsn.chooseProtocolVersion(zone,supportedVersions);
  CipherSuite suite=zone.getSuite();
  String ezKeyName=zone.getKeyName();
  Preconditions.checkNotNull(protocolVersion);
  Preconditions.checkNotNull(suite);
  Preconditions.checkArgument(!suite.equals(CipherSuite.UNKNOWN),"Chose an UNKNOWN CipherSuite!");
  Preconditions.checkNotNull(ezKeyName);
  return new EncryptionKeyInfo(protocolVersion,suite,ezKeyName);
}
