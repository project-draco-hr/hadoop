{
  KeyFieldHelper helper=new KeyFieldHelper();
  helper.setKeyFieldSeparator("\t");
  helper.setKeyFieldSpec(1,2);
  String input="hi\thello";
  String expectedOutput=input;
  testKeySpecs(input,expectedOutput,helper);
  helper=new KeyFieldHelper();
  helper.setKeyFieldSeparator("\t");
  helper.parseOption("-k1.0,0");
  testKeySpecs(input,null,helper);
  helper=new KeyFieldHelper();
  helper.setKeyFieldSeparator("\t");
  helper.parseOption("-k1,0");
  expectedOutput=input;
  testKeySpecs(input,expectedOutput,helper);
  helper=new KeyFieldHelper();
  helper.setKeyFieldSeparator("\t");
  helper.parseOption("-k1.2,0");
  expectedOutput="i\thello";
  testKeySpecs(input,expectedOutput,helper);
  helper=new KeyFieldHelper();
  helper.setKeyFieldSeparator("\t");
  helper.parseOption("-k1.1,2.3");
  expectedOutput="hi\thel";
  testKeySpecs(input,expectedOutput,helper);
  helper=new KeyFieldHelper();
  helper.setKeyFieldSeparator("\t");
  helper.parseOption("-k1.2,2.3");
  expectedOutput="i\thel";
  testKeySpecs(input,expectedOutput,helper);
  helper=new KeyFieldHelper();
  helper.setKeyFieldSeparator("\t");
  helper.parseOption("-k1.2,3.0");
  expectedOutput="i\thello";
  testKeySpecs(input,expectedOutput,helper);
  helper=new KeyFieldHelper();
  helper.setKeyFieldSeparator("\t");
  helper.parseOption("-k2,2");
  expectedOutput="hello";
  testKeySpecs(input,expectedOutput,helper);
  helper=new KeyFieldHelper();
  helper.setKeyFieldSeparator("\t");
  helper.parseOption("-k3.1,4.0");
  testKeySpecs(input,null,helper);
  helper=new KeyFieldHelper();
  input="123123123123123hi\thello\thow";
  helper.setKeyFieldSeparator("\t");
  helper.parseOption("-k2.1");
  expectedOutput="hello\thow";
  testKeySpecs(input,expectedOutput,helper,15,input.length());
  helper=new KeyFieldHelper();
  input="123123123123123hi\thello\t\thow\tare";
  helper.setKeyFieldSeparator("\t");
  helper.parseOption("-k2.1,3");
  expectedOutput="hello\t";
  testKeySpecs(input,expectedOutput,helper,17,input.length());
  helper=new KeyFieldHelper();
  input="123123123123123hi\thello\thow\tare";
  helper.setKeyFieldSeparator("\t");
  helper.parseOption("-k2.1");
  expectedOutput="hello\thow\t";
  testKeySpecs(input,expectedOutput,helper,17,28);
  helper=new KeyFieldHelper();
  input="123123123123123hi\thello\thow";
  helper.setKeyFieldSeparator("\t");
  helper.parseOption("-k2.1,3");
  expectedOutput="hello";
  testKeySpecs(input,expectedOutput,helper,15,23);
}
