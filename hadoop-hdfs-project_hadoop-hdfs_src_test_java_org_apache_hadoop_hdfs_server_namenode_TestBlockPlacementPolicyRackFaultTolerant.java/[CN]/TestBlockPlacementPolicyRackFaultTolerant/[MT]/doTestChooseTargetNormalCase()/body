{
  String clientMachine="client.foo.com";
  short[][] testSuite={{3,2},{3,7},{3,8},{3,10},{9,1},{10,1},{10,6},{11,6},{11,9}};
  int fileCount=0;
  for (int i=0; i < 5; i++) {
    for (    short[] testCase : testSuite) {
      short replication=testCase[0];
      short additionalReplication=testCase[1];
      String src="/testfile" + (fileCount++);
      HdfsFileStatus fileStatus=namesystem.startFile(src,perm,clientMachine,clientMachine,EnumSet.of(CreateFlag.CREATE),true,replication,DEFAULT_BLOCK_SIZE,null,false);
      LocatedBlock locatedBlock=nameNodeRpc.addBlock(src,clientMachine,null,null,fileStatus.getFileId(),null,null);
      doTestLocatedBlock(replication,locatedBlock);
      LocatedBlock additionalLocatedBlock=nameNodeRpc.getAdditionalDatanode(src,fileStatus.getFileId(),locatedBlock.getBlock(),locatedBlock.getLocations(),locatedBlock.getStorageIDs(),new DatanodeInfo[0],additionalReplication,clientMachine);
      doTestLocatedBlock(replication + additionalReplication,additionalLocatedBlock);
    }
  }
}
