{
  if (!isCachingEnabled) {
    LOG.warn("Attempted to set cache replication for " + src + " but caching"+ " is disabled ("+ DFSConfigKeys.DFS_NAMENODE_CACHING_ENABLED_KEY+ "), ignoring");
    return;
  }
  if (newRepl == oldRepl) {
    return;
  }
  for (  Block b : blocks) {
    updateNeededCaching(b,0,newRepl - oldRepl);
  }
  if (oldRepl > newRepl) {
    LOG.info("Decreasing cache replication from " + oldRepl + " to "+ newRepl+ " for "+ src);
    for (    Block b : blocks) {
      processOverCachedBlock(b,newRepl);
    }
  }
 else {
    LOG.info("Increasing cache replication from " + oldRepl + " to "+ newRepl+ " for "+ src);
  }
}
