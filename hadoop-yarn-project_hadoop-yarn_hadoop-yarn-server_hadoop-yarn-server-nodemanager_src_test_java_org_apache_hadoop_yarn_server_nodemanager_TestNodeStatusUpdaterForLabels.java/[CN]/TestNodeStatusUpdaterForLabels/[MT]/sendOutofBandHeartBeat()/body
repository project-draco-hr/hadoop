{
  int i=0;
  do {
    State statusUpdaterThreadState=((NodeStatusUpdaterImpl)nm.getNodeStatusUpdater()).getStatusUpdaterThreadState();
    if (statusUpdaterThreadState.equals(Thread.State.TIMED_WAITING) || statusUpdaterThreadState.equals(Thread.State.WAITING)) {
      nm.getNodeStatusUpdater().sendOutofBandHeartBeat();
      break;
    }
    if (++i <= 10) {
      Thread.sleep(50);
    }
 else {
      throw new IOException("Waited for 500 ms but NodeStatusUpdaterThread not in waiting state");
    }
  }
 while (true);
}
