{
  if (state.getAMRMTokenSecretManagerState() != null) {
    MasterKey currentKey=state.getAMRMTokenSecretManagerState().getCurrentMasterKey();
    this.currentMasterKey=new MasterKeyData(currentKey,createSecretKey(currentKey.getBytes().array()));
    MasterKey nextKey=state.getAMRMTokenSecretManagerState().getNextMasterKey();
    if (nextKey != null) {
      this.nextMasterKey=new MasterKeyData(nextKey,createSecretKey(nextKey.getBytes().array()));
      this.timer.schedule(new NextKeyActivator(),this.activationDelay);
    }
  }
}
