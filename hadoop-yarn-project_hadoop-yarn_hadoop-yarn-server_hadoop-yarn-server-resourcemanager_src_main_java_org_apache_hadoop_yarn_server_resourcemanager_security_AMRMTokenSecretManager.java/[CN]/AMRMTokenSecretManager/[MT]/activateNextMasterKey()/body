{
  this.writeLock.lock();
  try {
    LOG.info("Activating next master key with id: " + this.nextMasterKey.getMasterKey().getKeyId());
    this.currentMasterKey=this.nextMasterKey;
    this.nextMasterKey=null;
    AMRMTokenSecretManagerState state=AMRMTokenSecretManagerState.newInstance(this.currentMasterKey.getMasterKey(),null);
    rmContext.getStateStore().storeOrUpdateAMRMTokenSecretManagerState(state,true);
  }
  finally {
    this.writeLock.unlock();
  }
}
