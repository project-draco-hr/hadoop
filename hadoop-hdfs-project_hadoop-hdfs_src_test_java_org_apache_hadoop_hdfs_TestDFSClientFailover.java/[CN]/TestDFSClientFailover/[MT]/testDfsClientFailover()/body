{
  FileSystem fs=HATestUtil.configureFailoverFs(cluster,conf);
  DFSTestUtil.createFile(fs,TEST_FILE,FILE_LENGTH_TO_VERIFY,(short)1,1L);
  assertEquals(fs.getFileStatus(TEST_FILE).getLen(),FILE_LENGTH_TO_VERIFY);
  cluster.shutdownNameNode(0);
  cluster.transitionToActive(1);
  assertEquals(fs.getFileStatus(TEST_FILE).getLen(),FILE_LENGTH_TO_VERIFY);
  Path withPort=new Path("hdfs://" + HATestUtil.getLogicalHostname(cluster) + ":"+ HdfsClientConfigKeys.DFS_NAMENODE_RPC_PORT_DEFAULT+ "/"+ TEST_FILE.toUri().getPath());
  FileSystem fs2=withPort.getFileSystem(fs.getConf());
  assertTrue(fs2.exists(withPort));
  fs.close();
}
