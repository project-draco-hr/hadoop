{
  Socket spy=Mockito.spy(defaultFactory.createSocket());
  Mockito.doReturn(null).when(spy).getChannel();
  Mockito.doThrow(new ConnectTimeoutException("injected")).when(spy).connect(Mockito.argThat(new MatchesPort()),Mockito.anyInt());
  return spy;
}
