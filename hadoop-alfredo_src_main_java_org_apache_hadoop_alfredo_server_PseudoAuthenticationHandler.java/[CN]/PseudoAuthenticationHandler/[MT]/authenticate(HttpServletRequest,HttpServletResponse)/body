{
  AuthenticationToken token;
  String userName=request.getParameter(PseudoAuthenticator.USER_NAME);
  if (userName == null) {
    if (getAcceptAnonymous()) {
      token=AuthenticationToken.ANONYMOUS;
    }
 else {
      throw new AuthenticationException("Anonymous requests are disallowed");
    }
  }
 else {
    token=new AuthenticationToken(userName,userName,TYPE);
  }
  return token;
}
