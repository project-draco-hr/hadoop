{
  List<Container> returnContainerList=new ArrayList<Container>(newlyAllocatedContainers.size());
  for (Iterator<RMContainer> i=newlyAllocatedContainers.iterator(); i.hasNext(); ) {
    RMContainer rmContainer=i.next();
    Container updatedContainer=updateContainerAndNMToken(rmContainer,true,false);
    if (updatedContainer != null) {
      returnContainerList.add(updatedContainer);
      i.remove();
    }
  }
  return returnContainerList;
}
