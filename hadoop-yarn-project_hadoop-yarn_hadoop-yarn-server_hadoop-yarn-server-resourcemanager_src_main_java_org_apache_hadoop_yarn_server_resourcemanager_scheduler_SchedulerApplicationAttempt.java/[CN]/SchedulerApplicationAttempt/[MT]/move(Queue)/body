{
  QueueMetrics oldMetrics=queue.getMetrics();
  QueueMetrics newMetrics=newQueue.getMetrics();
  String user=getUser();
  for (  RMContainer liveContainer : liveContainers.values()) {
    Resource resource=liveContainer.getContainer().getResource();
    oldMetrics.releaseResources(user,1,resource);
    newMetrics.allocateResources(user,1,resource,false);
  }
  for (  Map<NodeId,RMContainer> map : reservedContainers.values()) {
    for (    RMContainer reservedContainer : map.values()) {
      Resource resource=reservedContainer.getReservedResource();
      oldMetrics.unreserveResource(user,resource);
      newMetrics.reserveResource(user,resource);
    }
  }
  appSchedulingInfo.move(newQueue);
  this.queue=newQueue;
}
