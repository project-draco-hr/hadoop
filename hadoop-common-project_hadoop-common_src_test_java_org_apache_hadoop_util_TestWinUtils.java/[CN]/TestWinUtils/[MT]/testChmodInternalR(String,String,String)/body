{
  File a=new File(TEST_DIR,"a");
  assertTrue(a.mkdir());
  chmod("700",a);
  File aa=new File(a,"a");
  assertTrue(aa.createNewFile());
  chmod("600",aa);
  File ab=new File(a,"b");
  assertTrue(ab.mkdir());
  chmod("700",ab);
  File aba=new File(ab,"a");
  assertTrue(aba.mkdir());
  chmod("700",aba);
  File abb=new File(ab,"b");
  assertTrue(abb.createNewFile());
  chmod("600",abb);
  File abx=new File(ab,"x");
  assertTrue(abx.createNewFile());
  chmod("u+x",abx);
  chmodR(mode,a);
  assertPermissions(a,"d" + expectedPermx);
  assertPermissions(aa,"-" + expectedPerm);
  assertPermissions(ab,"d" + expectedPermx);
  assertPermissions(aba,"d" + expectedPermx);
  assertPermissions(abb,"-" + expectedPerm);
  assertPermissions(abx,"-" + expectedPermx);
  assertTrue(FileUtil.fullyDelete(a));
}
