{
  File a=new File(TEST_DIR,"a");
  File b=new File(a,"b");
  a.mkdirs();
  assertTrue(b.createNewFile());
  chmod("300",a);
  String[] files=a.list();
  assertTrue("Listing a directory without read permission should fail",null == files);
  chmod("700",a);
  files=a.list();
  assertEquals("b",files[0]);
  chmod("500",a);
  File c=new File(a,"c");
  try {
    c.createNewFile();
    assertFalse("writeFile should have failed!",true);
  }
 catch (  IOException ex) {
    LOG.info("Expected: Failed to create a file when directory " + "permissions are 577");
  }
  assertTrue("Special behavior: deleting a file will succeed on Windows " + "even if a user does not have write permissions on the parent dir",b.delete());
  assertFalse("Renaming a file should fail on the dir where a user does " + "not have write permissions",b.renameTo(new File(a,"d")));
  chmod("700",a);
  assertTrue(c.createNewFile());
  File d=new File(a,"d");
  assertTrue(c.renameTo(d));
  chmod("600",a);
  files=a.list();
  assertEquals("d",files[0]);
  assertTrue(d.delete());
  File e=new File(a,"e");
  assertTrue(e.createNewFile());
  assertTrue(e.renameTo(new File(a,"f")));
  chmod("700",a);
}
