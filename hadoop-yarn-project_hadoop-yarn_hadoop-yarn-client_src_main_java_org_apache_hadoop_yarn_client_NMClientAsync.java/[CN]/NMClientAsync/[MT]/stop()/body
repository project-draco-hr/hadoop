{
  if (stopped.getAndSet(true)) {
    return;
  }
  eventDispatcherThread.interrupt();
  try {
    eventDispatcherThread.join();
  }
 catch (  InterruptedException e) {
    LOG.error("The thread of " + eventDispatcherThread.getName() + " didn't finish normally.",e);
  }
  threadPool.shutdownNow();
  if (!(client instanceof NMClientImpl) || ((NMClientImpl)client).cleanupRunningContainers.get()) {
    containers.clear();
  }
  client.stop();
  super.stop();
}
