{
  Configuration conf=new Configuration();
  conf.set(LdapGroupsMapping.LDAP_URL_KEY,"ldap://test");
  conf.set(LdapGroupsMapping.GROUP_SEARCH_FILTER_KEY,"(objectClass=posixGroup)(cn={0})");
  conf.set(LdapGroupsMapping.USER_SEARCH_FILTER_KEY,"(objectClass=posixAccount)");
  conf.set(LdapGroupsMapping.GROUP_MEMBERSHIP_ATTR_KEY,"memberUid");
  conf.set(LdapGroupsMapping.GROUP_NAME_ATTR_KEY,"cn");
  mappingSpy.setConf(conf);
  List<String> groups=mappingSpy.getGroups("some_user");
  Assert.assertEquals(expectedGroups,groups);
  verify(mockContext,times(searchTimes)).search(anyString(),anyString(),any(Object[].class),any(SearchControls.class));
}
