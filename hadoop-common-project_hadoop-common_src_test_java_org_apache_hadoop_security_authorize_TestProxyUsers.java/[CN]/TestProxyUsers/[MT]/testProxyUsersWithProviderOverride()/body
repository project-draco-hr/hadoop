{
  Configuration conf=new Configuration();
  conf.set(CommonConfigurationKeysPublic.HADOOP_SECURITY_IMPERSONATION_PROVIDER_CLASS,"org.apache.hadoop.security.authorize.TestProxyUsers$TestDummyImpersonationProvider");
  ProxyUsers.refreshSuperUserGroupsConfiguration(conf);
  UserGroupInformation realUserUgi=UserGroupInformation.createUserForTesting(REAL_USER_NAME,SUDO_GROUP_NAMES);
  UserGroupInformation proxyUserUgi=UserGroupInformation.createProxyUserForTesting(PROXY_USER_NAME,realUserUgi,GROUP_NAMES);
  assertAuthorized(proxyUserUgi,"1.2.3.4");
  assertAuthorized(proxyUserUgi,"1.2.3.5");
  realUserUgi=UserGroupInformation.createUserForTesting(REAL_USER_NAME,GROUP_NAMES);
  proxyUserUgi=UserGroupInformation.createProxyUserForTesting(PROXY_USER_NAME,realUserUgi,GROUP_NAMES);
  assertNotAuthorized(proxyUserUgi,"1.2.3.4");
  assertNotAuthorized(proxyUserUgi,"1.2.3.5");
}
