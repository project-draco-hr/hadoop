{
  Configuration conf=new Configuration();
  conf.set(DefaultImpersonationProvider.getProxySuperuserGroupConfKey(REAL_USER_NAME),StringUtils.join(",",Arrays.asList(GROUP_NAMES,GROUP_NAMES)));
  conf.set(DefaultImpersonationProvider.getProxySuperuserIpConfKey(REAL_USER_NAME),PROXY_IP);
  ProxyUsers.refreshSuperUserGroupsConfiguration(conf);
  Collection<String> groupsToBeProxied=ProxyUsers.getDefaultImpersonationProvider().getProxyGroups().get(DefaultImpersonationProvider.getProxySuperuserGroupConfKey(REAL_USER_NAME));
  assertEquals(1,groupsToBeProxied.size());
}
