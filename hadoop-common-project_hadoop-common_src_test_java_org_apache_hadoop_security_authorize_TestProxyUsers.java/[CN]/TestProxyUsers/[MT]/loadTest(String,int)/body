{
  Configuration conf=new Configuration();
  conf.set(DefaultImpersonationProvider.getTestProvider().getProxySuperuserGroupConfKey(REAL_USER_NAME),StringUtils.join(",",Arrays.asList(GROUP_NAMES)));
  conf.set(DefaultImpersonationProvider.getTestProvider().getProxySuperuserIpConfKey(REAL_USER_NAME),ipString);
  ProxyUsers.refreshSuperUserGroupsConfiguration(conf);
  UserGroupInformation realUserUgi=UserGroupInformation.createRemoteUser(REAL_USER_NAME);
  UserGroupInformation proxyUserUgi=UserGroupInformation.createProxyUserForTesting(PROXY_USER_NAME,realUserUgi,GROUP_NAMES);
  long startTime=System.nanoTime();
  SecureRandom sr=new SecureRandom();
  for (int i=1; i < 1000000; i++) {
    try {
      ProxyUsers.authorize(proxyUserUgi,"1.2.3." + sr.nextInt(testRange));
    }
 catch (    AuthorizationException e) {
    }
  }
  long stopTime=System.nanoTime();
  long elapsedTime=stopTime - startTime;
  System.out.println(elapsedTime / 1000000 + " ms");
}
