{
  StaticMapping mapping=newInstance();
  Configuration conf=new Configuration();
  conf.set(StaticMapping.KEY_HADOOP_CONFIGURED_NODE_MAPPING,"n1=r1,n2=r2");
  mapping.setConf(conf);
  List<String> l1=new ArrayList<String>(3);
  l1.add("n1");
  l1.add("unknown");
  l1.add("n2");
  List<String> mappings=mapping.resolve(l1);
  assertEquals(3,mappings.size());
  assertEquals("r1",mappings.get(0));
  assertEquals(NetworkTopology.DEFAULT_RACK,mappings.get(1));
  assertEquals("r2",mappings.get(2));
  assertFalse("Expected to be multi switch",AbstractDNSToSwitchMapping.isMappingSingleSwitch(mapping));
}
