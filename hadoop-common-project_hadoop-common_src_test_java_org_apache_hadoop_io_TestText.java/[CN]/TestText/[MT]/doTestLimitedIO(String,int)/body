{
  DataOutputBuffer out=new DataOutputBuffer();
  DataInputBuffer in=new DataInputBuffer();
  out.reset();
  try {
    Text.writeString(out,str,strLen);
    fail("expected writeString to fail when told to write a string " + "that was too long!  The string was '" + str + "'");
  }
 catch (  IOException e) {
  }
  Text.writeString(out,str,strLen + 1);
  in.reset(out.getData(),out.getLength());
  in.mark(strLen);
  String after;
  try {
    after=Text.readString(in,strLen);
    fail("expected readString to fail when told to read a string " + "that was too long!  The string was '" + str + "'");
  }
 catch (  IOException e) {
  }
  in.reset();
  after=Text.readString(in,strLen + 1);
  assertTrue(str.equals(after));
}
