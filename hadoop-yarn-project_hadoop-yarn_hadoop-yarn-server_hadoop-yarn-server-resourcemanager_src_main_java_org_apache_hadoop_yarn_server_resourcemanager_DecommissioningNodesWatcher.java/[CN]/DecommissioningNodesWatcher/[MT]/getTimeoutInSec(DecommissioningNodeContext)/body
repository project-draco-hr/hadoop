{
  if (context.nodeState == NodeState.DECOMMISSIONED) {
    return 0;
  }
 else   if (context.nodeState != NodeState.DECOMMISSIONING) {
    return -1;
  }
  if (context.appIds.size() == 0 && context.numActiveContainers == 0) {
    return 0;
  }
  if (context.timeoutMs < 0) {
    return -1;
  }
  long now=mclock.getTime();
  long timeout=context.decommissioningStartTime + context.timeoutMs - now;
  return Math.max(0,(int)(timeout / 1000));
}
