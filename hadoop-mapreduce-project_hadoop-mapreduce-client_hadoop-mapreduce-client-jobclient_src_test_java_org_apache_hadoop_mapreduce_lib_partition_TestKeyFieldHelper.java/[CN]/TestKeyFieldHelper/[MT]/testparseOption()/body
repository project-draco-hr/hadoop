{
  KeyFieldHelper helper=new KeyFieldHelper();
  helper.setKeyFieldSeparator("\t");
  String keySpecs="-k1.2,3.4";
  String eKeySpecs=keySpecs;
  helper.parseOption(keySpecs);
  String actKeySpecs=helper.keySpecs().get(0).toString();
  assertEquals("KeyFieldHelper's parsing is garbled",eKeySpecs,actKeySpecs);
  keySpecs="-k 1.2";
  eKeySpecs="-k1.2,0.0";
  helper=new KeyFieldHelper();
  helper.parseOption(keySpecs);
  actKeySpecs=helper.keySpecs().get(0).toString();
  assertEquals("KeyFieldHelper's parsing is garbled",eKeySpecs,actKeySpecs);
  keySpecs="-nr -k1.2,3.4";
  eKeySpecs="-k1.2,3.4nr";
  helper=new KeyFieldHelper();
  helper.parseOption(keySpecs);
  actKeySpecs=helper.keySpecs().get(0).toString();
  assertEquals("KeyFieldHelper's parsing is garbled",eKeySpecs,actKeySpecs);
  keySpecs="-nr -k1.2,3.4n";
  eKeySpecs="-k1.2,3.4n";
  helper=new KeyFieldHelper();
  helper.parseOption(keySpecs);
  actKeySpecs=helper.keySpecs().get(0).toString();
  assertEquals("KeyFieldHelper's parsing is garbled",eKeySpecs,actKeySpecs);
  keySpecs="-nr -k1.2,3.4r";
  eKeySpecs="-k1.2,3.4r";
  helper=new KeyFieldHelper();
  helper.parseOption(keySpecs);
  actKeySpecs=helper.keySpecs().get(0).toString();
  assertEquals("KeyFieldHelper's parsing is garbled",eKeySpecs,actKeySpecs);
  keySpecs="-nr -k1.2,3.4 -k5.6,7.8n -k9.10,11.12r -k13.14,15.16nr";
  eKeySpecs="-k1.2,3.4nr";
  helper=new KeyFieldHelper();
  helper.parseOption(keySpecs);
  actKeySpecs=helper.keySpecs().get(0).toString();
  assertEquals("KeyFieldHelper's parsing is garbled",eKeySpecs,actKeySpecs);
  eKeySpecs="-k5.6,7.8n";
  actKeySpecs=helper.keySpecs().get(1).toString();
  assertEquals("KeyFieldHelper's parsing is garbled",eKeySpecs,actKeySpecs);
  eKeySpecs="-k9.10,11.12r";
  actKeySpecs=helper.keySpecs().get(2).toString();
  assertEquals("KeyFieldHelper's parsing is garbled",eKeySpecs,actKeySpecs);
  eKeySpecs="-k13.14,15.16nr";
  actKeySpecs=helper.keySpecs().get(3).toString();
  assertEquals("KeyFieldHelper's parsing is garbled",eKeySpecs,actKeySpecs);
  keySpecs="-k1.2n,3.4";
  eKeySpecs="-k1.2,3.4n";
  helper=new KeyFieldHelper();
  helper.parseOption(keySpecs);
  actKeySpecs=helper.keySpecs().get(0).toString();
  assertEquals("KeyFieldHelper's parsing is garbled",eKeySpecs,actKeySpecs);
  keySpecs="-k1.2r,3.4";
  eKeySpecs="-k1.2,3.4r";
  helper=new KeyFieldHelper();
  helper.parseOption(keySpecs);
  actKeySpecs=helper.keySpecs().get(0).toString();
  assertEquals("KeyFieldHelper's parsing is garbled",eKeySpecs,actKeySpecs);
  keySpecs="-k1.2nr,3.4";
  eKeySpecs="-k1.2,3.4nr";
  helper=new KeyFieldHelper();
  helper.parseOption(keySpecs);
  actKeySpecs=helper.keySpecs().get(0).toString();
  assertEquals("KeyFieldHelper's parsing is garbled",eKeySpecs,actKeySpecs);
  keySpecs="-k1.2,3.4n";
  eKeySpecs="-k1.2,3.4n";
  helper=new KeyFieldHelper();
  helper.parseOption(keySpecs);
  actKeySpecs=helper.keySpecs().get(0).toString();
  assertEquals("KeyFieldHelper's parsing is garbled",eKeySpecs,actKeySpecs);
  keySpecs="-k1.2,3.4r";
  eKeySpecs="-k1.2,3.4r";
  helper=new KeyFieldHelper();
  helper.parseOption(keySpecs);
  actKeySpecs=helper.keySpecs().get(0).toString();
  assertEquals("KeyFieldHelper's parsing is garbled",eKeySpecs,actKeySpecs);
  keySpecs="-k1.2,3.4nr";
  eKeySpecs="-k1.2,3.4nr";
  helper=new KeyFieldHelper();
  helper.parseOption(keySpecs);
  actKeySpecs=helper.keySpecs().get(0).toString();
  assertEquals("KeyFieldHelper's parsing is garbled",eKeySpecs,actKeySpecs);
  keySpecs="-nr -k1.2,3.4 -k5.6,7.8";
  eKeySpecs="-k1.2,3.4nr";
  helper=new KeyFieldHelper();
  helper.parseOption(keySpecs);
  actKeySpecs=helper.keySpecs().get(0).toString();
  assertEquals("KeyFieldHelper's parsing is garbled",eKeySpecs,actKeySpecs);
  eKeySpecs="-k5.6,7.8nr";
  actKeySpecs=helper.keySpecs().get(1).toString();
  assertEquals("KeyFieldHelper's parsing is garbled",eKeySpecs,actKeySpecs);
  keySpecs="-n -k1.2,3.4 -k5.6,7.8";
  eKeySpecs="-k1.2,3.4n";
  helper=new KeyFieldHelper();
  helper.parseOption(keySpecs);
  actKeySpecs=helper.keySpecs().get(0).toString();
  assertEquals("KeyFieldHelper's parsing is garbled",eKeySpecs,actKeySpecs);
  eKeySpecs="-k5.6,7.8n";
  actKeySpecs=helper.keySpecs().get(1).toString();
  assertEquals("KeyFieldHelper's parsing is garbled",eKeySpecs,actKeySpecs);
  keySpecs="-r -k1.2,3.4 -k5.6,7.8";
  eKeySpecs="-k1.2,3.4r";
  helper=new KeyFieldHelper();
  helper.parseOption(keySpecs);
  actKeySpecs=helper.keySpecs().get(0).toString();
  assertEquals("KeyFieldHelper's parsing is garbled",eKeySpecs,actKeySpecs);
  eKeySpecs="-k5.6,7.8r";
  actKeySpecs=helper.keySpecs().get(1).toString();
  assertEquals("KeyFieldHelper's parsing is garbled",eKeySpecs,actKeySpecs);
  keySpecs="-k1.2,3.4n -k5.6,7.8";
  eKeySpecs="-k1.2,3.4n";
  helper=new KeyFieldHelper();
  helper.parseOption(keySpecs);
  actKeySpecs=helper.keySpecs().get(0).toString();
  assertEquals("KeyFieldHelper's parsing is garbled",eKeySpecs,actKeySpecs);
  eKeySpecs="-k5.6,7.8";
  actKeySpecs=helper.keySpecs().get(1).toString();
  assertEquals("KeyFieldHelper's parsing is garbled",eKeySpecs,actKeySpecs);
  keySpecs="-k1.2,3.4r -k5.6,7.8";
  eKeySpecs="-k1.2,3.4r";
  helper=new KeyFieldHelper();
  helper.parseOption(keySpecs);
  actKeySpecs=helper.keySpecs().get(0).toString();
  assertEquals("KeyFieldHelper's parsing is garbled",eKeySpecs,actKeySpecs);
  eKeySpecs="-k5.6,7.8";
  actKeySpecs=helper.keySpecs().get(1).toString();
  assertEquals("KeyFieldHelper's parsing is garbled",eKeySpecs,actKeySpecs);
  keySpecs="-k1.2,3.4nr -k5.6,7.8";
  eKeySpecs="-k1.2,3.4nr";
  helper=new KeyFieldHelper();
  helper.parseOption(keySpecs);
  actKeySpecs=helper.keySpecs().get(0).toString();
  assertEquals("KeyFieldHelper's parsing is garbled",eKeySpecs,actKeySpecs);
  eKeySpecs="-k5.6,7.8";
  actKeySpecs=helper.keySpecs().get(1).toString();
  assertEquals("KeyFieldHelper's parsing is garbled",eKeySpecs,actKeySpecs);
  keySpecs="-n";
  eKeySpecs="-k1.1,0.0n";
  helper=new KeyFieldHelper();
  helper.parseOption(keySpecs);
  actKeySpecs=helper.keySpecs().get(0).toString();
  assertEquals("KeyFieldHelper's parsing is garbled",eKeySpecs,actKeySpecs);
  keySpecs="-r";
  eKeySpecs="-k1.1,0.0r";
  helper=new KeyFieldHelper();
  helper.parseOption(keySpecs);
  actKeySpecs=helper.keySpecs().get(0).toString();
  assertEquals("KeyFieldHelper's parsing is garbled",eKeySpecs,actKeySpecs);
  keySpecs="-nr";
  eKeySpecs="-k1.1,0.0nr";
  helper=new KeyFieldHelper();
  helper.parseOption(keySpecs);
  actKeySpecs=helper.keySpecs().get(0).toString();
  assertEquals("KeyFieldHelper's parsing is garbled",eKeySpecs,actKeySpecs);
}
