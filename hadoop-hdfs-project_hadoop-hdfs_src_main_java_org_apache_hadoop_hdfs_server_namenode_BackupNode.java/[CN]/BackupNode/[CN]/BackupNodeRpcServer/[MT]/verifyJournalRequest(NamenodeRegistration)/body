{
  verifyVersion(reg.getLayoutVersion());
  String errorMsg=null;
  int expectedNamespaceID=namesystem.getNamespaceInfo().getNamespaceID();
  if (reg.getNamespaceID() != expectedNamespaceID) {
    errorMsg="Invalid namespaceID in journal request - expected " + expectedNamespaceID + " actual "+ reg.getNamespaceID();
    LOG.warn(errorMsg);
    throw new UnregisteredNodeException(reg);
  }
  if (!reg.getClusterID().equals(namesystem.getClusterId())) {
    errorMsg="Invalid clusterId in journal request - expected " + reg.getClusterID() + " actual "+ namesystem.getClusterId();
    LOG.warn(errorMsg);
    throw new UnregisteredNodeException(reg);
  }
}
