{
  FsAction user=permission.getUserAction();
  FsAction group=permission.getGroupAction();
  FsAction other=permission.getOtherAction();
  if (group != other || NativeIO.isAvailable() || Shell.WINDOWS) {
    execSetPermission(f,permission);
    return;
  }
  boolean rv=true;
  rv=f.setReadable(group.implies(FsAction.READ),false);
  checkReturnValue(rv,f,permission);
  if (group.implies(FsAction.READ) != user.implies(FsAction.READ)) {
    rv=f.setReadable(user.implies(FsAction.READ),true);
    checkReturnValue(rv,f,permission);
  }
  rv=f.setWritable(group.implies(FsAction.WRITE),false);
  checkReturnValue(rv,f,permission);
  if (group.implies(FsAction.WRITE) != user.implies(FsAction.WRITE)) {
    rv=f.setWritable(user.implies(FsAction.WRITE),true);
    checkReturnValue(rv,f,permission);
  }
  rv=f.setExecutable(group.implies(FsAction.EXECUTE),false);
  checkReturnValue(rv,f,permission);
  if (group.implies(FsAction.EXECUTE) != user.implies(FsAction.EXECUTE)) {
    rv=f.setExecutable(user.implies(FsAction.EXECUTE),true);
    checkReturnValue(rv,f,permission);
  }
}
