{
  if (tryGrantPermissions) {
    File parent=dir.getParentFile();
    grantPermissions(parent);
  }
  if (deleteImpl(dir,false)) {
    return true;
  }
  if (!fullyDeleteContents(dir,tryGrantPermissions)) {
    return false;
  }
  return deleteImpl(dir,true);
}
