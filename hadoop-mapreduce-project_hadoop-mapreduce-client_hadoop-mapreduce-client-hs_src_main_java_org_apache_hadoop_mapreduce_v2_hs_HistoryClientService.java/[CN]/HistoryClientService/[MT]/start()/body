{
  YarnRPC rpc=YarnRPC.create(getConfig());
  Configuration conf=new Configuration(getConfig());
  conf.setClass(YarnConfiguration.YARN_SECURITY_INFO,ClientHSSecurityInfo.class,SecurityInfo.class);
  initializeWebApp(getConfig());
  String serviceAddr=conf.get(JHAdminConfig.MR_HISTORY_ADDRESS,JHAdminConfig.DEFAULT_MR_HISTORY_ADDRESS);
  InetSocketAddress address=NetUtils.createSocketAddr(serviceAddr);
  InetAddress hostNameResolved=null;
  try {
    hostNameResolved=InetAddress.getLocalHost();
  }
 catch (  UnknownHostException e) {
    throw new YarnException(e);
  }
  server=rpc.getServer(MRClientProtocol.class,protocolHandler,address,conf,null,conf.getInt(JHAdminConfig.MR_HISTORY_CLIENT_THREAD_COUNT,JHAdminConfig.DEFAULT_MR_HISTORY_CLIENT_THREAD_COUNT));
  server.start();
  this.bindAddress=NetUtils.createSocketAddr(hostNameResolved.getHostAddress() + ":" + server.getPort());
  LOG.info("Instantiated MRClientService at " + this.bindAddress);
  super.start();
}
