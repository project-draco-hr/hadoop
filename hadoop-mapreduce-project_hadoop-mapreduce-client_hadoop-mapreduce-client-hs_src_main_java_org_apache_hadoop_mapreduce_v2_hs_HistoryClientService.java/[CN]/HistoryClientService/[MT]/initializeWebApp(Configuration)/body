{
  webApp=new HsWebApp(history);
  InetSocketAddress bindAddress=MRWebAppUtil.getJHSWebBindAddress(conf);
  WebApps.$for("jobhistory",HistoryClientService.class,this,"ws").with(conf).withHttpSpnegoKeytabKey(JHAdminConfig.MR_WEBAPP_SPNEGO_KEYTAB_FILE_KEY).withHttpSpnegoPrincipalKey(JHAdminConfig.MR_WEBAPP_SPNEGO_USER_NAME_KEY).withCSRFProtection(JHAdminConfig.MR_HISTORY_CSRF_PREFIX).withXFSProtection(JHAdminConfig.MR_HISTORY_XFS_PREFIX).at(NetUtils.getHostPortString(bindAddress)).start(webApp);
  String connectHost=MRWebAppUtil.getJHSWebappURLWithoutScheme(conf).split(":")[0];
  MRWebAppUtil.setJHSWebappURLWithoutScheme(conf,connectHost + ":" + webApp.getListenerAddress().getPort());
}
