{
  webApp=new HsWebApp(history);
  InetSocketAddress bindAddress=conf.getSocketAddr(JHAdminConfig.MR_HISTORY_WEBAPP_ADDRESS,JHAdminConfig.DEFAULT_MR_HISTORY_WEBAPP_ADDRESS,JHAdminConfig.DEFAULT_MR_HISTORY_WEBAPP_PORT);
  WebApps.$for("jobhistory",HistoryClientService.class,this,"ws").with(conf).withHttpSpnegoKeytabKey(YarnConfiguration.JHS_WEBAPP_SPNEGO_KEYTAB_FILE_KEY).withHttpSpnegoPrincipalKey(YarnConfiguration.JHS_WEBAPP_SPNEGO_USER_NAME_KEY).at(NetUtils.getHostPortString(bindAddress)).start(webApp);
  conf.updateConnectAddr(JHAdminConfig.MR_HISTORY_WEBAPP_ADDRESS,webApp.getListenerAddress());
}
