{
  FiCaSchedulerApp application=getApplication(applicationAttemptId);
  if (application == null) {
    throw new IOException("Unknown application " + applicationAttemptId + " has completed!");
  }
  for (  RMContainer container : application.getLiveContainers()) {
    containerCompleted(container,SchedulerUtils.createAbnormalContainerStatus(container.getContainerId(),SchedulerUtils.COMPLETED_APPLICATION),RMContainerEventType.KILL);
  }
synchronized (application) {
    activeUsersManager.deactivateApplication(application.getUser(),application.getApplicationId());
  }
  application.stop(rmAppAttemptFinalState);
  applications.remove(applicationAttemptId);
}
