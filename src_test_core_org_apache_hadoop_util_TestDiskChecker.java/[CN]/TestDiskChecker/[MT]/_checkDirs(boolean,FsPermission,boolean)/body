{
  File localDir=make(stub(File.class).returning(true).from.exists());
  when(localDir.mkdir()).thenReturn(true);
  Path dir=mock(Path.class);
  LocalFileSystem fs=make(stub(LocalFileSystem.class).returning(localDir).from.pathToFile(dir));
  FileStatus stat=make(stub(FileStatus.class).returning(perm).from.getPermission());
  when(stat.isDir()).thenReturn(isDir);
  when(fs.getFileStatus(dir)).thenReturn(stat);
  try {
    DiskChecker.checkDir(fs,dir,perm);
    verify(stat).isDir();
    verify(fs,times(2)).getFileStatus(dir);
    verify(stat,times(2)).getPermission();
    assertTrue("checkDir success",success);
  }
 catch (  DiskErrorException e) {
    assertFalse("checkDir success",success);
    e.printStackTrace();
  }
  System.out.println("checkDir success: " + success);
}
