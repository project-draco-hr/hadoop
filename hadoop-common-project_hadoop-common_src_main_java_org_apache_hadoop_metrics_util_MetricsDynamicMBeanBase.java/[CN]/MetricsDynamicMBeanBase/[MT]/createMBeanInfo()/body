{
  boolean needsMinMaxResetOperation=false;
  List<MBeanAttributeInfo> attributesInfo=new ArrayList<MBeanAttributeInfo>();
  MBeanOperationInfo[] operationsInfo=null;
  numEntriesInRegistry=metricsRegistry.size();
  for (  MetricsBase o : metricsRegistry.getMetricsList()) {
    if (MetricsTimeVaryingRate.class.isInstance(o)) {
      attributesInfo.add(new MBeanAttributeInfo(o.getName() + NUM_OPS,"java.lang.Integer",o.getDescription(),true,false,false));
      attributesInfo.add(new MBeanAttributeInfo(o.getName() + AVG_TIME,"java.lang.Long",o.getDescription(),true,false,false));
      attributesInfo.add(new MBeanAttributeInfo(o.getName() + MIN_TIME,"java.lang.Long",o.getDescription(),true,false,false));
      attributesInfo.add(new MBeanAttributeInfo(o.getName() + MAX_TIME,"java.lang.Long",o.getDescription(),true,false,false));
      needsMinMaxResetOperation=true;
      metricsRateAttributeMod.put(o.getName() + NUM_OPS,o);
      metricsRateAttributeMod.put(o.getName() + AVG_TIME,o);
      metricsRateAttributeMod.put(o.getName() + MIN_TIME,o);
      metricsRateAttributeMod.put(o.getName() + MAX_TIME,o);
    }
 else     if (MetricsIntValue.class.isInstance(o) || MetricsTimeVaryingInt.class.isInstance(o)) {
      attributesInfo.add(new MBeanAttributeInfo(o.getName(),"java.lang.Integer",o.getDescription(),true,false,false));
    }
 else     if (MetricsLongValue.class.isInstance(o) || MetricsTimeVaryingLong.class.isInstance(o)) {
      attributesInfo.add(new MBeanAttributeInfo(o.getName(),"java.lang.Long",o.getDescription(),true,false,false));
    }
 else {
      MetricsUtil.LOG.error("unknown metrics type: " + o.getClass().getName());
    }
    if (needsMinMaxResetOperation) {
      operationsInfo=new MBeanOperationInfo[]{new MBeanOperationInfo(RESET_ALL_MIN_MAX_OP,"Reset (zero) All Min Max",null,"void",MBeanOperationInfo.ACTION)};
    }
  }
  MBeanAttributeInfo[] attrArray=new MBeanAttributeInfo[attributesInfo.size()];
  mbeanInfo=new MBeanInfo(this.getClass().getName(),mbeanDescription,attributesInfo.toArray(attrArray),null,operationsInfo,null);
}
