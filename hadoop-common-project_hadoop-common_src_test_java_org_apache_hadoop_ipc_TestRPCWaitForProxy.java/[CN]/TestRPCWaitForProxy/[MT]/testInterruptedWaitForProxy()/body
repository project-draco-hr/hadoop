{
  RpcThread worker=new RpcThread(100);
  worker.start();
  Thread.sleep(1000);
  Assert.assertTrue("worker hasn't started",worker.waitStarted);
  worker.interrupt();
  worker.join();
  Throwable caught=worker.getCaught();
  Assert.assertNotNull("No exception was raised",caught);
  Throwable cause=caught.getCause();
  if (cause == null) {
    cause=caught;
  }
 else   if (cause.getCause() != null) {
    cause=cause.getCause();
  }
  if (!(cause instanceof InterruptedIOException) && !(cause instanceof ClosedByInterruptException)) {
    throw caught;
  }
}
