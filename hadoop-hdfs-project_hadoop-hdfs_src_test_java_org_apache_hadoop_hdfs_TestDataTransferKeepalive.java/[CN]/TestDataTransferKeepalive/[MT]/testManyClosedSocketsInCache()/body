{
  DistributedFileSystem fs=cluster.getFileSystem();
  DFSTestUtil.createFile(fs,TEST_FILE,1L,(short)1,0L);
  InputStream[] stms=new InputStream[5];
  try {
    for (int i=0; i < stms.length; i++) {
      stms[i]=fs.open(TEST_FILE);
    }
    for (    InputStream stm : stms) {
      IOUtils.copyBytes(stm,new NullOutputStream(),1024);
    }
  }
  finally {
    IOUtils.cleanup(null,stms);
  }
  DFSClient client=((DistributedFileSystem)fs).dfs;
  assertEquals(5,client.peerCache.size());
  Thread.sleep(1500);
  assertXceiverCount(0);
  assertEquals(5,client.peerCache.size());
  DFSTestUtil.readFile(fs,TEST_FILE);
}
