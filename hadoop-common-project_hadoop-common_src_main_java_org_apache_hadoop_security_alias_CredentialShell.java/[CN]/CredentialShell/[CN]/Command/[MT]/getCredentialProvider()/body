{
  CredentialProvider prov=null;
  List<CredentialProvider> providers;
  try {
    providers=CredentialProviderFactory.getProviders(getConf());
    if (userSuppliedProvider) {
      prov=providers.get(0);
    }
 else {
      for (      CredentialProvider p : providers) {
        if (!p.isTransient()) {
          prov=p;
          break;
        }
      }
    }
  }
 catch (  IOException e) {
    e.printStackTrace(getErr());
  }
  if (prov == null) {
    getOut().println(NO_VALID_PROVIDERS);
  }
  return prov;
}
