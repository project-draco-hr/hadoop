{
  RMNode node=getRMContext().getRMNodes().get(nodeid);
  Assert.assertNotNull("node shouldn't be null",node);
  int timeoutSecs=0;
  while (!finalState.equals(node.getState()) && timeoutSecs++ < 20) {
    System.out.println("Node State is : " + node.getState() + " Waiting for state : "+ finalState);
    Thread.sleep(500);
  }
  System.out.println("Node State is : " + node.getState());
  Assert.assertEquals("Node state is not correct (timedout)",finalState,node.getState());
}
