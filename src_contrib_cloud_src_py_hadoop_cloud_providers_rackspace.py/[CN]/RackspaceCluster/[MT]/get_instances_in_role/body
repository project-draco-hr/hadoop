def get_instances_in_role(self, role, state_filter=None):
    '\n    Get all the instances in a role, filtered by state.\n\n    @param role: the name of the role\n    @param state_filter: the state that the instance should be in\n      (e.g. "running"), or None for all states\n    '
    return [self._to_instance(node) for node in self._get_nodes_in_role(role, state_filter)]
