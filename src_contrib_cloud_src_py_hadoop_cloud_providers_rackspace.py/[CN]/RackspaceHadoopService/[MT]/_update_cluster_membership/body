def _update_cluster_membership(self, public_key, private_key):
    '\n    Creates a cluster-wide hosts file and copies it across the cluster.\n    This is a stop gap until DNS is configured on the cluster. \n    '
    ssh_options = '-o StrictHostKeyChecking=no'
    time.sleep(30)
    nodes = self.cluster._get_nodes('running')
    hosts_file = 'hosts'
    with open(hosts_file, 'w') as f:
        f.write('127.0.0.1 localhost localhost.localdomain\n')
        for node in nodes:
            f.write((((node.public_ip[0] + '\t') + node.name) + '\n'))
    for node in nodes:
        self._call(('scp -i %s %s %s root@%s:/etc/hosts' % (private_key, ssh_options, hosts_file, node.public_ip[0])))
    os.remove(hosts_file)
