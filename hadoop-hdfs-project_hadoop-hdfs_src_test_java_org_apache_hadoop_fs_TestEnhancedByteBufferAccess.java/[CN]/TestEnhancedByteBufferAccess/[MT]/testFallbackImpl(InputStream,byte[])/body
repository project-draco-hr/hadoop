{
  RestrictedAllocatingByteBufferPool bufferPool=new RestrictedAllocatingByteBufferPool(stream instanceof ByteBufferReadable);
  ByteBuffer result=ByteBufferUtil.fallbackRead(stream,bufferPool,10);
  Assert.assertEquals(10,result.remaining());
  Assert.assertArrayEquals(Arrays.copyOfRange(original,0,10),byteBufferToArray(result));
  result=ByteBufferUtil.fallbackRead(stream,bufferPool,5000);
  Assert.assertEquals(5000,result.remaining());
  Assert.assertArrayEquals(Arrays.copyOfRange(original,10,5010),byteBufferToArray(result));
  result=ByteBufferUtil.fallbackRead(stream,bufferPool,9999999);
  Assert.assertEquals(11375,result.remaining());
  Assert.assertArrayEquals(Arrays.copyOfRange(original,5010,16385),byteBufferToArray(result));
  result=ByteBufferUtil.fallbackRead(stream,bufferPool,10);
  Assert.assertNull(result);
}
