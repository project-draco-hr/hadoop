{
  if (reservedContainer != null) {
    if (reservedContainer.getState() == RMContainerState.RESERVED) {
      return regularContainerAllocator.assignContainers(clusterResource,node,schedulingMode,resourceLimits,reservedContainer);
    }
 else {
      return increaseContainerAllocator.assignContainers(clusterResource,node,schedulingMode,resourceLimits,reservedContainer);
    }
  }
 else {
    CSAssignment assign=increaseContainerAllocator.assignContainers(clusterResource,node,schedulingMode,resourceLimits,null);
    if (Resources.greaterThan(rc,clusterResource,assign.getResource(),Resources.none())) {
      return assign;
    }
    return regularContainerAllocator.assignContainers(clusterResource,node,schedulingMode,resourceLimits,null);
  }
}
