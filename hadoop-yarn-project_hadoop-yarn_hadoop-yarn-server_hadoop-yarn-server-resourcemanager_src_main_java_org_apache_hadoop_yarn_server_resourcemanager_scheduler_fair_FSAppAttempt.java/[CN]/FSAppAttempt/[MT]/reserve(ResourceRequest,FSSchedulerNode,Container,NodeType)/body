{
  Priority priority=request.getPriority();
  if (!reservationExceedsThreshold(node,type)) {
    LOG.info("Making reservation: node=" + node.getNodeName() + " app_id="+ getApplicationId());
    if (reservedContainer == null) {
      reservedContainer=createContainer(node,request.getCapability(),request.getPriority());
      getMetrics().reserveResource(getUser(),reservedContainer.getResource());
      RMContainer rmContainer=super.reserve(node,priority,null,reservedContainer);
      node.reserveResource(this,priority,rmContainer);
      setReservation(node);
    }
 else {
      RMContainer rmContainer=node.getReservedContainer();
      super.reserve(node,priority,rmContainer,reservedContainer);
      node.reserveResource(this,priority,rmContainer);
      setReservation(node);
    }
    return true;
  }
  return false;
}
