{
  for (; shouldRunMonitor && fsnamesystem.isRunning(); ) {
    boolean needSync=false;
    try {
      fsnamesystem.writeLockInterruptibly();
      try {
        if (!fsnamesystem.isInSafeMode()) {
          needSync=checkLeases();
        }
      }
  finally {
        fsnamesystem.writeUnlock();
        if (needSync) {
          fsnamesystem.getEditLog().logSync();
        }
      }
      Thread.sleep(fsnamesystem.getLeaseRecheckIntervalMs());
    }
 catch (    InterruptedException ie) {
      if (LOG.isDebugEnabled()) {
        LOG.debug(name + " is interrupted",ie);
      }
    }
catch (    Throwable e) {
      LOG.warn("Unexpected throwable: ",e);
    }
  }
}
