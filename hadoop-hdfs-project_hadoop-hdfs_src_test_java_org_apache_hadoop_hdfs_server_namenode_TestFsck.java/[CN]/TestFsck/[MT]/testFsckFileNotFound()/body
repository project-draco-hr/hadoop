{
  final short NUM_REPLICAS=1;
  Configuration conf=new Configuration();
  NameNode namenode=mock(NameNode.class);
  NetworkTopology nettop=mock(NetworkTopology.class);
  Map<String,String[]> pmap=new HashMap<>();
  Writer result=new StringWriter();
  PrintWriter out=new PrintWriter(result,true);
  InetAddress remoteAddress=InetAddress.getLocalHost();
  FSNamesystem fsName=mock(FSNamesystem.class);
  FSDirectory fsd=mock(FSDirectory.class);
  BlockManager blockManager=mock(BlockManager.class);
  DatanodeManager dnManager=mock(DatanodeManager.class);
  INodesInPath iip=mock(INodesInPath.class);
  when(namenode.getNamesystem()).thenReturn(fsName);
  when(fsName.getBlockManager()).thenReturn(blockManager);
  when(fsName.getFSDirectory()).thenReturn(fsd);
  when(fsd.getFSNamesystem()).thenReturn(fsName);
  when(fsd.resolvePath(anyObject(),anyString())).thenReturn(iip);
  when(blockManager.getDatanodeManager()).thenReturn(dnManager);
  NamenodeFsck fsck=new NamenodeFsck(conf,namenode,nettop,pmap,out,NUM_REPLICAS,remoteAddress);
  String pathString="/tmp/testFile";
  long length=123L;
  boolean isDir=false;
  int blockReplication=1;
  long blockSize=128 * 1024L;
  long modTime=123123123L;
  long accessTime=123123120L;
  FsPermission perms=FsPermission.getDefault();
  String owner="foo";
  String group="bar";
  byte[] symlink=null;
  byte[] path=DFSUtil.string2Bytes(pathString);
  long fileId=312321L;
  int numChildren=1;
  byte storagePolicy=0;
  HdfsFileStatus file=new HdfsFileStatus(length,isDir,blockReplication,blockSize,modTime,accessTime,perms,owner,group,symlink,path,fileId,numChildren,null,storagePolicy,null);
  Result replRes=new ReplicationResult(conf);
  Result ecRes=new ErasureCodingResult(conf);
  try {
    fsck.check(pathString,file,replRes,ecRes);
  }
 catch (  Exception e) {
    fail("Unexpected exception " + e.getMessage());
  }
  assertTrue(replRes.isHealthy());
}
