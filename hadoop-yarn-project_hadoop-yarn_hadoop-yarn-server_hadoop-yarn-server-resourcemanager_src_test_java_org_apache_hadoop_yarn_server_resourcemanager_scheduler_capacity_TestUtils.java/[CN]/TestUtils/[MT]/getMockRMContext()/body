{
  Dispatcher nullDispatcher=new Dispatcher(){
    private final EventHandler handler=new EventHandler(){
      @Override public void handle(      Event event){
      }
    }
;
    @Override public void register(    Class<? extends Enum> eventType,    EventHandler handler){
    }
    @Override public EventHandler getEventHandler(){
      return handler;
    }
  }
;
  ContainerAllocationExpirer cae=new ContainerAllocationExpirer(nullDispatcher);
  Configuration conf=new Configuration();
  RMApplicationHistoryWriter writer=mock(RMApplicationHistoryWriter.class);
  RMContextImpl rmContext=new RMContextImpl(nullDispatcher,cae,null,null,null,new AMRMTokenSecretManager(conf,null),new RMContainerTokenSecretManager(conf),new NMTokenSecretManagerInRM(conf),new ClientToAMTokenSecretManagerInRM(),writer);
  RMNodeLabelsManager nlm=mock(RMNodeLabelsManager.class);
  when(nlm.getQueueResource(any(String.class),any(Set.class),any(Resource.class))).thenAnswer(new Answer<Resource>(){
    @Override public Resource answer(    InvocationOnMock invocation) throws Throwable {
      Object[] args=invocation.getArguments();
      return (Resource)args[2];
    }
  }
);
  when(nlm.getResourceByLabel(any(String.class),any(Resource.class))).thenAnswer(new Answer<Resource>(){
    @Override public Resource answer(    InvocationOnMock invocation) throws Throwable {
      Object[] args=invocation.getArguments();
      return (Resource)args[1];
    }
  }
);
  rmContext.setNodeLabelManager(nlm);
  rmContext.setSystemMetricsPublisher(mock(SystemMetricsPublisher.class));
  ResourceScheduler mockScheduler=mock(ResourceScheduler.class);
  when(mockScheduler.getResourceCalculator()).thenReturn(new DefaultResourceCalculator());
  rmContext.setScheduler(mockScheduler);
  return rmContext;
}
