{
  if (conf.getBoolean(YarnConfiguration.TIMELINE_SERVICE_RECOVERY_ENABLED,YarnConfiguration.DEFAULT_TIMELINE_SERVICE_RECOVERY_ENABLED)) {
    stateStore=createStateStore(conf);
    stateStore.init(conf);
  }
  long secretKeyInterval=conf.getLong(YarnConfiguration.DELEGATION_KEY_UPDATE_INTERVAL_KEY,YarnConfiguration.DELEGATION_KEY_UPDATE_INTERVAL_DEFAULT);
  long tokenMaxLifetime=conf.getLong(YarnConfiguration.DELEGATION_TOKEN_MAX_LIFETIME_KEY,YarnConfiguration.DELEGATION_TOKEN_MAX_LIFETIME_DEFAULT);
  long tokenRenewInterval=conf.getLong(YarnConfiguration.DELEGATION_TOKEN_RENEW_INTERVAL_KEY,YarnConfiguration.DELEGATION_TOKEN_RENEW_INTERVAL_DEFAULT);
  secretManager=new TimelineDelegationTokenSecretManager(secretKeyInterval,tokenMaxLifetime,tokenRenewInterval,3600000,stateStore);
  super.init(conf);
}
