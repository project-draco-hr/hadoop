{
  fs.connectionFactory=URLConnectionFactory.DEFAULT_CONNECTION_FACTORY;
  IOUtils.cleanup(LOG,clients.toArray(new SocketChannel[clients.size()]));
  IOUtils.cleanup(LOG,fs);
  if (serverSocket != null) {
    try {
      serverSocket.close();
    }
 catch (    IOException e) {
      LOG.debug("Exception in closing " + serverSocket,e);
    }
  }
  if (serverThread != null) {
    serverThread.join();
  }
}
