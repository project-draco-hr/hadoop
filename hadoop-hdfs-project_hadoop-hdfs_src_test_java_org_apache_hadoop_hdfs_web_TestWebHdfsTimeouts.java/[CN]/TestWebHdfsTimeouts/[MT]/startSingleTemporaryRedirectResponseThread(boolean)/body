{
  URLUtils.SOCKET_TIMEOUT=INITIAL_SOCKET_TIMEOUT;
  serverThread=new Thread(){
    @Override public void run(){
      Socket clientSocket=null;
      OutputStream out=null;
      InputStream in=null;
      InputStreamReader isr=null;
      BufferedReader br=null;
      try {
        clientSocket=serverSocket.accept();
        URLUtils.SOCKET_TIMEOUT=SHORT_SOCKET_TIMEOUT;
        if (consumeConnectionBacklog) {
          consumeConnectionBacklog();
        }
        in=clientSocket.getInputStream();
        isr=new InputStreamReader(in);
        br=new BufferedReader(isr);
        for (; ; ) {
          String line=br.readLine();
          if (line == null || line.isEmpty()) {
            break;
          }
        }
        out=clientSocket.getOutputStream();
        out.write(temporaryRedirect().getBytes("UTF-8"));
      }
 catch (      IOException e) {
        LOG.error("unexpected IOException in server thread",e);
        fail("unexpected IOException in server thread: " + e);
      }
 finally {
        IOUtils.cleanup(LOG,br,isr,in,out);
        IOUtils.closeSocket(clientSocket);
      }
    }
  }
;
  serverThread.start();
}
