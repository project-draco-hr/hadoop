{
  AsyncLogger.Factory spyFactory=new AsyncLogger.Factory(){
    @Override public AsyncLogger createLogger(    Configuration conf,    NamespaceInfo nsInfo,    String journalId,    InetSocketAddress addr){
      AsyncLogger logger=new IPCLoggerChannel(conf,nsInfo,journalId,addr){
        protected ExecutorService createSingleThreadExecutor(){
          return MoreExecutors.sameThreadExecutor();
        }
      }
;
      return Mockito.spy(logger);
    }
  }
;
  return closeLater(new QuorumJournalManager(conf,cluster.getQuorumJournalURI(JID),FAKE_NSINFO,spyFactory));
}
