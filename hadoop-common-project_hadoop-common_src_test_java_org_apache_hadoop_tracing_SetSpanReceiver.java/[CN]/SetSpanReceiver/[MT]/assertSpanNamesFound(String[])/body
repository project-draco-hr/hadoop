{
  try {
    GenericTestUtils.waitFor(new Supplier<Boolean>(){
      @Override public Boolean get(){
        Map<String,List<Span>> map=SetSpanReceiver.SetHolder.getMap();
        for (        String spanName : expectedSpanNames) {
          if (!map.containsKey(spanName)) {
            return false;
          }
        }
        return true;
      }
    }
,100,1000);
  }
 catch (  TimeoutException e) {
    Assert.fail("timed out to get expected spans: " + e.getMessage());
  }
catch (  InterruptedException e) {
    Assert.fail("interrupted while waiting spans: " + e.getMessage());
  }
}
