{
  setBlockUCState(BlockUCState.UNDER_RECOVERY);
  blockRecoveryId=recoveryId;
  if (replicas.size() == 0) {
    NameNode.blockStateChangeLog.warn("BLOCK*" + " BlockInfoUnderConstruction.initLeaseRecovery:" + " No blocks found, lease removed.");
  }
  int previous=primaryNodeIndex;
  for (int i=1; i <= replicas.size(); i++) {
    int j=(previous + i) % replicas.size();
    if (replicas.get(j).isAlive()) {
      primaryNodeIndex=j;
      DatanodeDescriptor primary=replicas.get(j).getExpectedLocation();
      primary.addBlockToBeRecovered(this);
      NameNode.blockStateChangeLog.info("BLOCK* " + this + " recovery started, primary="+ primary);
      return;
    }
  }
}
