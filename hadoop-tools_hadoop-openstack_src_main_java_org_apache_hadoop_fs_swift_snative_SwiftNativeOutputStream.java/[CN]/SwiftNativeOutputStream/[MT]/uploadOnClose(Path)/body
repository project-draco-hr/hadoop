{
  boolean uploadSuccess=false;
  int attempt=0;
  while (!uploadSuccess) {
    try {
      ++attempt;
      bytesUploaded+=uploadFileAttempt(keypath,attempt);
      uploadSuccess=true;
    }
 catch (    IOException e) {
      LOG.info("Upload failed " + e,e);
      if (attempt > ATTEMPT_LIMIT) {
        throw e;
      }
    }
  }
}
