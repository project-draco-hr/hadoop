{
  GetApplicationReportResponse response=null;
  try {
    GetApplicationReportRequest request=Records.newRecord(GetApplicationReportRequest.class);
    request.setApplicationId(appId);
    response=rmClient.getApplicationReport(request);
  }
 catch (  YarnException e) {
    if (!historyServiceEnabled) {
      throw e;
    }
    if (!(e.getClass() == ApplicationNotFoundException.class)) {
      throw e;
    }
    return historyClient.getApplicationReport(appId);
  }
  return response.getApplicationReport();
}
