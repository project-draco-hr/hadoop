{
  try {
    GetContainerReportRequest request=Records.newRecord(GetContainerReportRequest.class);
    request.setContainerId(containerId);
    GetContainerReportResponse response=rmClient.getContainerReport(request);
    return response.getContainerReport();
  }
 catch (  YarnException e) {
    if (!historyServiceEnabled) {
      throw e;
    }
    if (e.getClass() != ApplicationNotFoundException.class && e.getClass() != ContainerNotFoundException.class) {
      throw e;
    }
    return historyClient.getContainerReport(containerId);
  }
}
