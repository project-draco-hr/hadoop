{
  try {
    GetContainersRequest request=Records.newRecord(GetContainersRequest.class);
    request.setApplicationAttemptId(applicationAttemptId);
    GetContainersResponse response=rmClient.getContainers(request);
    return response.getContainerList();
  }
 catch (  YarnException e) {
    if (!historyServiceEnabled) {
      throw e;
    }
    if (e.getClass() != ApplicationNotFoundException.class) {
      throw e;
    }
    return historyClient.getContainers(applicationAttemptId);
  }
}
