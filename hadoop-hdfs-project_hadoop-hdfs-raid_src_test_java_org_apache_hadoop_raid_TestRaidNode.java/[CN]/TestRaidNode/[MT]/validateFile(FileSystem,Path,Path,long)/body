{
  FileStatus stat1=fileSys.getFileStatus(name1);
  FileStatus stat2=fileSys.getFileStatus(name2);
  assertTrue(" Length of file " + name1 + " is "+ stat1.getLen()+ " is different from length of file "+ name1+ " "+ stat2.getLen(),stat1.getLen() == stat2.getLen());
  CRC32 newcrc=new CRC32();
  FSDataInputStream stm=fileSys.open(name2);
  final byte[] b=new byte[4192];
  int num=0;
  while (num >= 0) {
    num=stm.read(b);
    if (num < 0) {
      break;
    }
    newcrc.update(b,0,num);
  }
  stm.close();
  if (newcrc.getValue() != crc) {
    fail("CRC mismatch of files " + name1 + " with file "+ name2);
  }
}
