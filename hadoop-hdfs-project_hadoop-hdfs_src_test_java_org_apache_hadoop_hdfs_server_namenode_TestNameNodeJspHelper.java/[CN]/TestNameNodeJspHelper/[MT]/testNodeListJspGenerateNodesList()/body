{
  String output;
  NameNode nameNode=cluster.getNameNode();
  ServletContext context=mock(ServletContext.class);
  when(context.getAttribute("name.node")).thenReturn(nameNode);
  when(context.getAttribute(NameNodeHttpServer.NAMENODE_ADDRESS_ATTRIBUTE_KEY)).thenReturn(cluster.getNameNode().getHttpAddress());
  checkDeadLiveNodes(nameNode,0,DATA_NODES_AMOUNT);
  output=getOutputFromGeneratedNodesList(context,DataNodeStatus.LIVE);
  assertCounts(DataNodeStatus.LIVE,output,DATA_NODES_AMOUNT);
  output=getOutputFromGeneratedNodesList(context,DataNodeStatus.DEAD);
  assertCounts(DataNodeStatus.DEAD,output,0);
}
