{
  cluster.waitClusterUp();
  NamenodeJspHelper.HealthJsp jsp=new NamenodeJspHelper.HealthJsp();
  StartupProgress prog=NameNode.getStartupProgress();
  JspWriter out=mock(JspWriter.class);
  jsp.generateStartupProgress(out,prog);
  ArgumentCaptor<String> captor=ArgumentCaptor.forClass(String.class);
  verify(out,atLeastOnce()).println(captor.capture());
  List<String> contents=captor.getAllValues();
  Assert.assertTrue(containsMatch(contents,"Elapsed Time\\:"));
  Assert.assertTrue(containsMatch(contents,"Percent Complete\\:.*?100\\.00%"));
  Assert.assertTrue(containsMatch(contents,LOADING_FSIMAGE.getDescription()));
  Assert.assertTrue(containsMatch(contents,LOADING_EDITS.getDescription()));
  Assert.assertTrue(containsMatch(contents,SAVING_CHECKPOINT.getDescription()));
  Assert.assertTrue(containsMatch(contents,SAFEMODE.getDescription()));
}
