{
  if (reservedContainer != null) {
    application.unreserve(priority,node,reservedContainer);
  }
  RMContainer allocatedContainer=application.allocate(allocationResult.containerNodeType,node,priority,lastResourceRequest,container);
  if (allocatedContainer == null) {
    ContainerAllocation ret=new ContainerAllocation(allocationResult.containerToBeUnreserved,null,AllocationState.QUEUE_SKIPPED);
    ret.state=AllocationState.APP_SKIPPED;
    return ret;
  }
  node.allocateContainer(allocatedContainer);
  application.incNumAllocatedContainers(allocationResult.containerNodeType,allocationResult.requestNodeType);
  return allocationResult;
}
