{
  isSyncRunning=false;
  this.storage=storage;
  metrics=NameNode.getNameNodeMetrics();
  lastPrintTime=now();
  if (editsDirs.isEmpty()) {
    try {
      editsDirs=Lists.newArrayList(storage.getEditsDirectories());
    }
 catch (    IOException ioe) {
    }
    this.editsDirs=editsDirs;
  }
 else {
    this.editsDirs=Lists.newArrayList(editsDirs);
  }
  this.journalSet=new JournalSet();
  for (  URI u : this.editsDirs) {
    StorageDirectory sd=storage.getStorageDirectory(u);
    if (sd != null) {
      journalSet.add(new FileJournalManager(sd));
    }
  }
  if (journalSet.isEmpty()) {
    LOG.error("No edits directories configured!");
  }
  state=State.BETWEEN_LOG_SEGMENTS;
}
