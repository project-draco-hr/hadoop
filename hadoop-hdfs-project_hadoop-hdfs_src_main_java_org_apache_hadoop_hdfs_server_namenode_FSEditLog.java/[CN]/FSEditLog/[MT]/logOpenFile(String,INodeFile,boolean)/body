{
  Preconditions.checkArgument(newNode.isUnderConstruction());
  PermissionStatus permissions=newNode.getPermissionStatus();
  AddOp op=AddOp.getInstance(cache.get()).setInodeId(newNode.getId()).setPath(path).setReplication(newNode.getFileReplication()).setModificationTime(newNode.getModificationTime()).setAccessTime(newNode.getAccessTime()).setBlockSize(newNode.getPreferredBlockSize()).setBlocks(newNode.getBlocks()).setPermissionStatus(permissions).setAclEntries(permissions.getPermission().getAclBit() ? AclStorage.readINodeLogicalAcl(newNode) : null).setClientName(newNode.getFileUnderConstructionFeature().getClientName()).setClientMachine(newNode.getFileUnderConstructionFeature().getClientMachine());
  logRpcIds(op,toLogRpcIds);
  logEdit(op);
}
