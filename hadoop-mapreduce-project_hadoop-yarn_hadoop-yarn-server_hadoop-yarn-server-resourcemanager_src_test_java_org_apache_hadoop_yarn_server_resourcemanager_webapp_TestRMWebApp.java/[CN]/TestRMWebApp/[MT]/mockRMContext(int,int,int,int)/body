{
  final List<RMApp> apps=MockAsm.newApplications(numApps);
  final ConcurrentMap<ApplicationId,RMApp> applicationsMaps=Maps.newConcurrentMap();
  for (  RMApp app : apps) {
    applicationsMaps.put(app.getApplicationId(),app);
  }
  final List<RMNode> nodes=MockNodes.newNodes(racks,numNodes,newResource(mbsPerNode));
  final ConcurrentMap<NodeId,RMNode> nodesMap=Maps.newConcurrentMap();
  for (  RMNode node : nodes) {
    nodesMap.put(node.getNodeID(),node);
  }
  final List<RMNode> lostNodes=MockNodes.lostNodes(racks,numNodes,newResource(mbsPerNode));
  final ConcurrentMap<String,RMNode> lostNodesMap=Maps.newConcurrentMap();
  for (  RMNode node : lostNodes) {
    lostNodesMap.put(node.getHostName(),node);
  }
  return new RMContextImpl(new MemStore(),null,null,null,null){
    @Override public ConcurrentMap<ApplicationId,RMApp> getRMApps(){
      return applicationsMaps;
    }
    @Override public ConcurrentMap<String,RMNode> getInactiveRMNodes(){
      return lostNodesMap;
    }
    @Override public ConcurrentMap<NodeId,RMNode> getRMNodes(){
      return nodesMap;
    }
  }
;
}
