{
  conf=getConf();
  cluster=new MiniDFSCluster.Builder(conf).numDataNodes(numDNs).build();
  cluster.getFileSystem().getClient().setErasureCodingPolicy("/",null);
  try {
    cluster.waitActive();
    doTestRead(conf,cluster,true);
  }
  finally {
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}
