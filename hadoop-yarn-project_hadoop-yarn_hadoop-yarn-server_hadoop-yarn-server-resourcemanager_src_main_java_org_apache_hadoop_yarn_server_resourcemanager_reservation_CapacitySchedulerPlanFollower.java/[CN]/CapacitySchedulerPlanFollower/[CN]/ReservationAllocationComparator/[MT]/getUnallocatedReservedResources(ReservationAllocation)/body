{
  Resource resResource;
  CSQueue resQueue=scheduler.getQueue(reservation.getReservationId().toString());
  if (resQueue != null) {
    resResource=Resources.subtract(reservation.getResourcesAtTime(now),Resources.multiply(scheduler.getClusterResource(),resQueue.getAbsoluteCapacity()));
  }
 else {
    resResource=reservation.getResourcesAtTime(now);
  }
  return resResource;
}
