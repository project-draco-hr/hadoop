{
  DataTransferProtos.PipelineAckProto proto=DataTransferProtos.PipelineAckProto.newBuilder().setSeqno(0).addReply(Status.CHECKSUM_OK).build();
  DataTransferProtos.PipelineAckProto newProto=DataTransferProtos.PipelineAckProto.newBuilder().mergeFrom(proto).addFlag(PipelineAck.combineHeader(PipelineAck.ECN.SUPPORTED,Status.CHECKSUM_OK)).build();
  ByteArrayOutputStream oldAckBytes=new ByteArrayOutputStream();
  proto.writeDelimitedTo(oldAckBytes);
  PipelineAck oldAck=new PipelineAck();
  oldAck.readFields(new ByteArrayInputStream(oldAckBytes.toByteArray()));
  assertEquals(PipelineAck.combineHeader(PipelineAck.ECN.DISABLED,Status.CHECKSUM_OK),oldAck.getHeaderFlag(0));
  PipelineAck newAck=new PipelineAck();
  ByteArrayOutputStream newAckBytes=new ByteArrayOutputStream();
  newProto.writeDelimitedTo(newAckBytes);
  newAck.readFields(new ByteArrayInputStream(newAckBytes.toByteArray()));
  assertEquals(PipelineAck.combineHeader(PipelineAck.ECN.SUPPORTED,Status.CHECKSUM_OK),newAck.getHeaderFlag(0));
}
