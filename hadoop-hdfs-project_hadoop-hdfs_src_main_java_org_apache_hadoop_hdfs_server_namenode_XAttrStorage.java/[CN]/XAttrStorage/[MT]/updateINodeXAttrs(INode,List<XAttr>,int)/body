{
  if (xAttrs == null || xAttrs.isEmpty()) {
    if (inode.getXAttrFeature() != null) {
      inode.removeXAttrFeature(snapshotId);
    }
    return;
  }
  List<XAttr> internedXAttrs=Lists.newArrayListWithCapacity(xAttrs.size());
  for (  XAttr xAttr : xAttrs) {
    final String name=xAttr.getName();
    String internedName=internedNames.get(name);
    if (internedName == null) {
      internedName=name;
      internedNames.put(internedName,internedName);
    }
    XAttr internedXAttr=new XAttr.Builder().setName(internedName).setNameSpace(xAttr.getNameSpace()).setValue(xAttr.getValue()).build();
    internedXAttrs.add(internedXAttr);
  }
  ImmutableList<XAttr> newXAttrs=ImmutableList.copyOf(internedXAttrs);
  if (inode.getXAttrFeature() != null) {
    inode.removeXAttrFeature(snapshotId);
  }
  inode.addXAttrFeature(new XAttrFeature(newXAttrs),snapshotId);
}
