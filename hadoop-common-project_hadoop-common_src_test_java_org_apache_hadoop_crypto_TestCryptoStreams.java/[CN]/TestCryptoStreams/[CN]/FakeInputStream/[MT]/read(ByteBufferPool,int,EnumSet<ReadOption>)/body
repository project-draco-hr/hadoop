{
  if (bufferPool == null) {
    throw new IOException("Please specify buffer pool.");
  }
  ByteBuffer buffer=bufferPool.getBuffer(true,maxLength);
  int pos=buffer.position();
  int n=read(buffer);
  if (n >= 0) {
    buffer.position(pos);
    return buffer;
  }
  return null;
}
