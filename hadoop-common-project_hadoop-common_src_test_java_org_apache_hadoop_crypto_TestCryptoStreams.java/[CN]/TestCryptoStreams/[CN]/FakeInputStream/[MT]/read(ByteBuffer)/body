{
  checkStream();
  if (pos < length) {
    int n=(int)Math.min(buf.remaining(),length - pos);
    if (n > 0) {
      buf.put(data,pos,n);
    }
    pos+=n;
    return n;
  }
  return -1;
}
