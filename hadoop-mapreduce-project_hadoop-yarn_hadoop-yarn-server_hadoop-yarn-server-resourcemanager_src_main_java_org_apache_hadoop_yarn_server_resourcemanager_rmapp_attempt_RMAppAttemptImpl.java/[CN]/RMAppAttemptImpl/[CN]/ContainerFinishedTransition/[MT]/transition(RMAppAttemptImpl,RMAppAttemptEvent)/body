{
  RMAppAttemptContainerFinishedEvent containerFinishedEvent=(RMAppAttemptContainerFinishedEvent)event;
  ContainerStatus containerStatus=containerFinishedEvent.getContainerStatus();
  if (appAttempt.masterContainer.getId().equals(containerStatus.getContainerId())) {
    appAttempt.diagnostics.append("AM Container for " + appAttempt.getAppAttemptId() + " exited with "+ " exitCode: "+ containerStatus.getExitStatus()+ " due to: "+ containerStatus.getDiagnostics()+ "."+ "Failing this attempt.");
    appAttempt.trackingUrl="";
    new FinalTransition(RMAppAttemptState.FAILED).transition(appAttempt,containerFinishedEvent);
    return RMAppAttemptState.FAILED;
  }
  appAttempt.justFinishedContainers.add(containerStatus);
  return RMAppAttemptState.RUNNING;
}
