{
  appAttempt.masterService.unregisterAttempt(appAttempt.applicationAttemptId);
  RMAppEventType eventToApp=null;
switch (finalAttemptState) {
case FINISHED:
    eventToApp=RMAppEventType.ATTEMPT_FINISHED;
  break;
case KILLED:
eventToApp=RMAppEventType.ATTEMPT_KILLED;
break;
case FAILED:
eventToApp=RMAppEventType.ATTEMPT_FAILED;
break;
default :
LOG.info("Cannot get this state!! Error!!");
break;
}
appAttempt.eventHandler.handle(new RMAppEvent(appAttempt.applicationAttemptId.getApplicationId(),eventToApp));
appAttempt.eventHandler.handle(new AppRemovedSchedulerEvent(appAttempt.getAppAttemptId(),finalAttemptState));
}
