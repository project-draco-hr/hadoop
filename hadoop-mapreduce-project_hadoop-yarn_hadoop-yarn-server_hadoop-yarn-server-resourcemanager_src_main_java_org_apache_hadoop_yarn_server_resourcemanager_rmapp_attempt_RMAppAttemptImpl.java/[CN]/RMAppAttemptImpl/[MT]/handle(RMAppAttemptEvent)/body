{
  this.writeLock.lock();
  try {
    ApplicationAttemptId appAttemptID=event.getApplicationAttemptId();
    LOG.debug("Processing event for " + appAttemptID + " of type "+ event.getType());
    final RMAppAttemptState oldState=getAppAttemptState();
    try {
      this.stateMachine.doTransition(event.getType(),event);
    }
 catch (    InvalidStateTransitonException e) {
      LOG.error("Can't handle this event at current state",e);
    }
    if (oldState != getAppAttemptState()) {
      LOG.info(appAttemptID + " State change from " + oldState+ " to "+ getAppAttemptState());
    }
  }
  finally {
    this.writeLock.unlock();
  }
}
