{
  server=RPC.getServer(TestProtocol2.class,new TestImpl2(),ADDRESS,0,2,false,conf,null);
  server.start();
  addr=NetUtils.getConnectAddress(server);
  TestProtocol2 proxy=RPC.getProxy(TestProtocol2.class,TestProtocol2.versionID,addr,conf);
  boolean supported=RpcClientUtil.isMethodSupported(proxy,TestProtocol2.class,RpcKind.RPC_WRITABLE,RPC.getProtocolVersion(TestProtocol2.class),"echo");
  Assert.assertTrue(supported);
  supported=RpcClientUtil.isMethodSupported(proxy,TestProtocol2.class,RpcKind.RPC_PROTOCOL_BUFFER,RPC.getProtocolVersion(TestProtocol2.class),"echo");
  Assert.assertFalse(supported);
}
