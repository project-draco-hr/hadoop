{
  server=new RPC.Builder(conf).setProtocol(TestProtocol0.class).setInstance(new TestImpl0()).setBindAddress(ADDRESS).setPort(0).setNumHandlers(2).setVerbose(false).build();
  server.start();
  addr=NetUtils.getConnectAddress(server);
  proxy=RPC.getProtocolProxy(TestProtocol1.class,TestProtocol1.versionID,addr,conf);
  TestProtocol1 proxy1=(TestProtocol1)proxy.getProxy();
  proxy1.ping();
  try {
    proxy1.echo("hello");
    fail("Echo should fail");
  }
 catch (  IOException e) {
  }
}
