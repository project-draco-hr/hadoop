{
  tracker.setIndexCache(new IndexCache(trackerFConf));
  tracker.setTaskMemoryManagerEnabledFlag();
  tracker.systemFS=FileSystem.getLocal(trackerFConf);
  tracker.setLocalFileSystem(tracker.systemFS);
  tracker.systemDirectory=new Path(TEST_ROOT_DIR.getAbsolutePath());
  tracker.runningTasks=new LinkedHashMap<TaskAttemptID,TaskInProgress>();
  tracker.runningJobs=new TreeMap<JobID,RunningJob>();
  tracker.setAsyncDiskService(new MRAsyncDiskService(trackerFConf));
  tracker.getAsyncDiskService().cleanupAllVolumes();
  tracker.setTaskTrackerInstrumentation(TaskTracker.createInstrumentation(tracker,trackerFConf));
  taskController=createTaskController();
  taskController.setConf(trackerFConf);
  taskController.setup();
  tracker.setTaskController(taskController);
  tracker.setLocalizer(new Localizer(tracker.getLocalFileSystem(),localDirs,taskController));
}
