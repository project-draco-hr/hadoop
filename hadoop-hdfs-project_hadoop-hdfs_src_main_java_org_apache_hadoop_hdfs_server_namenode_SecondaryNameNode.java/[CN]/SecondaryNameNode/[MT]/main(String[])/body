{
  CommandLineOpts opts=SecondaryNameNode.parseArgs(argv);
  if (opts == null) {
    LOG.fatal("Failed to parse options");
    terminate(1);
  }
 else   if (opts.shouldPrintHelp()) {
    opts.usage();
    System.exit(0);
  }
  StringUtils.startupShutdownMessage(SecondaryNameNode.class,argv,LOG);
  Configuration tconf=new HdfsConfiguration();
  SecondaryNameNode secondary=null;
  try {
    secondary=new SecondaryNameNode(tconf,opts);
  }
 catch (  IOException ioe) {
    LOG.fatal("Failed to start secondary namenode",ioe);
    terminate(1);
  }
  if (opts != null && opts.getCommand() != null) {
    int ret=secondary.processStartupCommand(opts);
    terminate(ret);
  }
  if (secondary != null) {
    secondary.startCheckpointThread();
    secondary.join();
  }
}
