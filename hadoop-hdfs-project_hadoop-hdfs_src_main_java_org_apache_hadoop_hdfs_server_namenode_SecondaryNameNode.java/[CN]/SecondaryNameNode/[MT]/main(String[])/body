{
  CommandLineOpts opts=SecondaryNameNode.parseArgs(argv);
  if (opts == null) {
    LOG.fatal("Failed to parse options");
    terminate(1);
  }
 else   if (opts.shouldPrintHelp()) {
    opts.usage();
    System.exit(0);
  }
  try {
    StringUtils.startupShutdownMessage(SecondaryNameNode.class,argv,LOG);
    Configuration tconf=new HdfsConfiguration();
    SecondaryNameNode secondary=null;
    secondary=new SecondaryNameNode(tconf,opts);
    if (opts != null && opts.getCommand() != null) {
      int ret=secondary.processStartupCommand(opts);
      terminate(ret);
    }
    if (secondary != null) {
      secondary.startCheckpointThread();
      secondary.join();
    }
  }
 catch (  Throwable e) {
    LOG.fatal("Failed to start secondary namenode",e);
    terminate(1);
  }
}
