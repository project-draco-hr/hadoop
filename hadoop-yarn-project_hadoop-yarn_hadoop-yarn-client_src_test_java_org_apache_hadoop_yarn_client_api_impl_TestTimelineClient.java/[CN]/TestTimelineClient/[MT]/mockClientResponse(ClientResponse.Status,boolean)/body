{
  ClientResponse response=mock(ClientResponse.class);
  doReturn(response).when(client).doPostingEntities(any(ATSEntities.class));
  when(response.getClientResponseStatus()).thenReturn(status);
  ATSPutErrors.ATSPutError error=new ATSPutErrors.ATSPutError();
  error.setEntityId("test entity id");
  error.setEntityType("test entity type");
  error.setErrorCode(ATSPutErrors.ATSPutError.IO_EXCEPTION);
  ATSPutErrors errors=new ATSPutErrors();
  if (hasError) {
    errors.addError(error);
  }
  when(response.getEntity(ATSPutErrors.class)).thenReturn(errors);
  return response;
}
