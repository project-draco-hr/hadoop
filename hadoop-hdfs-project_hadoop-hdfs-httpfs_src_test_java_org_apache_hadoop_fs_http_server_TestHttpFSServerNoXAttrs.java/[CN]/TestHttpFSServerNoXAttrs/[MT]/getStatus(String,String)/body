{
  String user=HadoopUsersConfTestHelper.getHadoopUsers()[0];
  if (filename.charAt(0) == '/') {
    filename=filename.substring(1);
  }
  String pathOps=MessageFormat.format("/webhdfs/v1/{0}?user.name={1}&op={2}",filename,user,command);
  URL url=new URL(TestJettyHelper.getJettyURL(),pathOps);
  HttpURLConnection conn=(HttpURLConnection)url.openConnection();
  conn.connect();
  int resp=conn.getResponseCode();
  BufferedReader reader;
  Assert.assertEquals(HttpURLConnection.HTTP_INTERNAL_ERROR,resp);
  reader=new BufferedReader(new InputStreamReader(conn.getErrorStream()));
  String res=reader.readLine();
  Assert.assertTrue(res.contains("RemoteException"));
  Assert.assertTrue(res.contains("XAttr"));
  Assert.assertTrue(res.contains("rejected"));
}
