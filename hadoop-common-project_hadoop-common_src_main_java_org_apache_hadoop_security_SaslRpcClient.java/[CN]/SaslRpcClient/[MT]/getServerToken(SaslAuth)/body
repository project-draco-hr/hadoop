{
  TokenInfo tokenInfo=SecurityUtil.getTokenInfo(protocol,conf);
  LOG.debug("Get token info proto:" + protocol + " info:"+ tokenInfo);
  if (tokenInfo == null) {
    return null;
  }
  TokenSelector<?> tokenSelector=null;
  try {
    tokenSelector=tokenInfo.value().newInstance();
  }
 catch (  InstantiationException|IllegalAccessException e) {
    throw new IOException(e.toString(),e);
  }
  return tokenSelector.selectToken(SecurityUtil.buildTokenService(serverAddr),ugi.getTokens());
}
