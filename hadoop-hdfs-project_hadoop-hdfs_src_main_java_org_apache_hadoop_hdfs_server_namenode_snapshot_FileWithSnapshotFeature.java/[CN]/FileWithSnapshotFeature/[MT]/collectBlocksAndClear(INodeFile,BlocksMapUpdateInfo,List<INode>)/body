{
  if (isCurrentFileDeleted() && getDiffs().asList().isEmpty()) {
    file.destroyAndCollectBlocks(info,removedINodes);
    return;
  }
  final long max;
  if (isCurrentFileDeleted()) {
    final FileDiff last=getDiffs().getLast();
    max=last == null ? 0 : last.getFileSize();
  }
 else {
    max=file.computeFileSize();
  }
  collectBlocksBeyondMax(file,max,info);
}
