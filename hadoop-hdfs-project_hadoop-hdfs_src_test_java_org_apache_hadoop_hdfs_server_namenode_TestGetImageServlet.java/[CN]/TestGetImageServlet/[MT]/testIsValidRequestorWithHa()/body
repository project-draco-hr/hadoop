{
  Configuration conf=new HdfsConfiguration();
  conf.set(DFSConfigKeys.DFS_FEDERATION_NAMESERVICES,"ns1");
  conf.set(DFSUtil.addKeySuffixes(DFSConfigKeys.DFS_HA_NAMENODES_KEY_PREFIX,"ns1"),"nn1,nn2");
  conf.set(DFSUtil.addKeySuffixes(DFSConfigKeys.DFS_NAMENODE_RPC_ADDRESS_KEY,"ns1","nn1"),"host1:1234");
  conf.set(DFSUtil.addKeySuffixes(DFSConfigKeys.DFS_NAMENODE_USER_NAME_KEY,"ns1","nn1"),"hdfs/_HOST@TEST-REALM.COM");
  conf.set(DFSUtil.addKeySuffixes(DFSConfigKeys.DFS_NAMENODE_RPC_ADDRESS_KEY,"ns1","nn2"),"host2:1234");
  conf.set(DFSUtil.addKeySuffixes(DFSConfigKeys.DFS_NAMENODE_USER_NAME_KEY,"ns1","nn2"),"hdfs/_HOST@TEST-REALM.COM");
  NameNode.initializeGenericKeys(conf,"ns1","nn1");
  assertTrue(GetImageServlet.isValidRequestor("hdfs/host2@TEST-REALM.COM",conf));
}
