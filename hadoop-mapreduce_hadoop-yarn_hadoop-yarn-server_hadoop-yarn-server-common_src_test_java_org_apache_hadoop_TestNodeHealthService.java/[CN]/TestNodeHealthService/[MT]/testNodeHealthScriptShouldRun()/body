{
  Assert.assertFalse("By default Health checker should not have started",NodeHealthCheckerService.shouldRun(new Configuration()));
  Configuration conf=getConfForNodeHealthScript();
  Assert.assertFalse("Node health script should start",NodeHealthCheckerService.shouldRun(conf));
  conf.writeXml(new FileOutputStream(nodeHealthConfigFile));
  conf.addResource(nodeHealthConfigFile.getName());
  writeNodeHealthScriptFile("",false);
  Assert.assertFalse("Node health script should start",NodeHealthCheckerService.shouldRun(conf));
  writeNodeHealthScriptFile("",true);
  Assert.assertTrue("Node health script should start",NodeHealthCheckerService.shouldRun(conf));
}
