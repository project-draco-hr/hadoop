{
  try {
    if (hasToReboot && null != nodeManagerShutdownHook) {
      ShutdownHookManager.get().removeShutdownHook(nodeManagerShutdownHook);
    }
    nodeManagerShutdownHook=new CompositeServiceShutdownHook(this);
    ShutdownHookManager.get().addShutdownHook(nodeManagerShutdownHook,SHUTDOWN_HOOK_PRIORITY);
    this.shouldExitOnShutdownEvent=true;
    this.init(conf);
    this.start();
  }
 catch (  Throwable t) {
    LOG.fatal("Error starting NodeManager",t);
    System.exit(-1);
  }
}
