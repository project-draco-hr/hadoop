{
  YarnConfiguration conf=new YarnConfiguration();
  conf.setBoolean(YarnConfiguration.TIMELINE_SERVICE_ENABLED,true);
  conf.setBoolean(YarnConfiguration.RM_SYSTEM_METRICS_PUBLISHER_ENABLED,true);
  conf.setClass(YarnConfiguration.TIMELINE_SERVICE_STORE,MemoryTimelineStore.class,TimelineStore.class);
  conf.setClass(YarnConfiguration.TIMELINE_SERVICE_STATE_STORE_CLASS,MemoryTimelineStateStore.class,TimelineStateStore.class);
  conf.setInt(YarnConfiguration.RM_SYSTEM_METRICS_PUBLISHER_DISPATCHER_POOL_SIZE,2);
  timelineServer=new ApplicationHistoryServer();
  timelineServer.init(conf);
  timelineServer.start();
  store=timelineServer.getTimelineStore();
  metricsPublisher=new SystemMetricsPublisher();
  metricsPublisher.init(conf);
  metricsPublisher.start();
}
