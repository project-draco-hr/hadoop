{
  if (args[0].equals("success")) {
    ApplicationMasterProtocol client=ClientRMProxy.createRMProxy(conf,ApplicationMasterProtocol.class);
    client.registerApplicationMaster(RegisterApplicationMasterRequest.newInstance(NetUtils.getHostname(),-1,""));
    Thread.sleep(1000);
    FinishApplicationMasterResponse resp=client.finishApplicationMaster(FinishApplicationMasterRequest.newInstance(FinalApplicationStatus.SUCCEEDED,"success",null));
    assertTrue(resp.getIsUnregistered());
    System.exit(0);
  }
 else {
    System.exit(1);
  }
}
