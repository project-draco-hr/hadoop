{
  String classpath=getTestRuntimeClasspath();
  String javaHome=System.getenv("JAVA_HOME");
  if (javaHome == null) {
    LOG.fatal("JAVA_HOME not defined. Test not running.");
    return;
  }
  String[] args={"--classpath",classpath,"--queue","default","--cmd",javaHome + "/bin/java -Xmx512m " + "org.apache.hadoop.yarn.applications.distributedshell.ApplicationMaster "+ "--container_memory 128 --num_containers 1 --priority 0 "+ "--shell_command "+ (Shell.WINDOWS ? "dir" : "ls")};
  LOG.info("Initializing Launcher");
  UnmanagedAMLauncher launcher=new UnmanagedAMLauncher(new Configuration(yarnCluster.getConfig()));
  boolean initSuccess=launcher.init(args);
  Assert.assertTrue(initSuccess);
  LOG.info("Running Launcher");
  boolean result=launcher.run();
  LOG.info("Launcher run completed. Result=" + result);
  Assert.assertTrue(result);
}
