{
  DatanodeInfo[] dnInfos=new DatanodeInfo[3];
  dnInfos[0]=new DatanodeInfo("host0","0",5000,5001,20000,10001,9999,59,69,32,"local","host0",AdminStates.DECOMMISSION_INPROGRESS);
  dnInfos[1]=new DatanodeInfo("host1","1",5000,5001,20000,10001,9999,59,69,32,"local","host1",AdminStates.DECOMMISSIONED);
  dnInfos[2]=new DatanodeInfo("host2","2",5000,5001,20000,10001,9999,59,69,32,"local","host1",AdminStates.NORMAL);
  LocatedBlock lb=new LocatedBlock(new ExtendedBlock("bp12",12345,10,53),dnInfos,5,false);
  LocatedBlockProto lbProto=PBHelper.convert(lb);
  LocatedBlock lb2=PBHelper.convert(lbProto);
  assertEquals(lb.getBlock(),lb2.getBlock());
  compare(lb.getBlockToken(),lb2.getBlockToken());
  assertEquals(lb.getStartOffset(),lb2.getStartOffset());
  assertEquals(lb.isCorrupt(),lb2.isCorrupt());
  DatanodeInfo[] dnInfos2=lb2.getLocations();
  assertEquals(dnInfos.length,dnInfos2.length);
  for (int i=0; i < dnInfos.length; i++) {
    compare(dnInfos[i],dnInfos2[i]);
  }
}
