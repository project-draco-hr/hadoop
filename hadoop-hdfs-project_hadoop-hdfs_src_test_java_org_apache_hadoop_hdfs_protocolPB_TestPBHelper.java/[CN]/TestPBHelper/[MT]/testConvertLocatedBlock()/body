{
  DatanodeInfo[] dnInfos={DFSTestUtil.getLocalDatanodeInfo("1.1.1.1","h1",AdminStates.DECOMMISSION_INPROGRESS),DFSTestUtil.getLocalDatanodeInfo("2.2.2.2","h2",AdminStates.DECOMMISSIONED),DFSTestUtil.getLocalDatanodeInfo("3.3.3.3","h3",AdminStates.NORMAL)};
  LocatedBlock lb=new LocatedBlock(new ExtendedBlock("bp12",12345,10,53),dnInfos,5,false);
  LocatedBlockProto lbProto=PBHelper.convert(lb);
  LocatedBlock lb2=PBHelper.convert(lbProto);
  assertEquals(lb.getBlock(),lb2.getBlock());
  compare(lb.getBlockToken(),lb2.getBlockToken());
  assertEquals(lb.getStartOffset(),lb2.getStartOffset());
  assertEquals(lb.isCorrupt(),lb2.isCorrupt());
  DatanodeInfo[] dnInfos2=lb2.getLocations();
  assertEquals(dnInfos.length,dnInfos2.length);
  for (int i=0; i < dnInfos.length; i++) {
    compare(dnInfos[i],dnInfos2[i]);
  }
}
