{
  DatanodeInfo di1=DFSTestUtil.getLocalDatanodeInfo();
  DatanodeInfo di2=DFSTestUtil.getLocalDatanodeInfo();
  DatanodeInfo[] dnInfo=new DatanodeInfo[]{di1,di2};
  RecoveringBlock b=new RecoveringBlock(getExtendedBlock(),dnInfo,3);
  RecoveringBlockProto bProto=PBHelper.convert(b);
  RecoveringBlock b1=PBHelper.convert(bProto);
  assertEquals(b.getBlock(),b1.getBlock());
  DatanodeInfo[] dnInfo1=b1.getLocations();
  assertEquals(dnInfo.length,dnInfo1.length);
  for (int i=0; i < dnInfo.length; i++) {
    compare(dnInfo[0],dnInfo1[0]);
  }
}
