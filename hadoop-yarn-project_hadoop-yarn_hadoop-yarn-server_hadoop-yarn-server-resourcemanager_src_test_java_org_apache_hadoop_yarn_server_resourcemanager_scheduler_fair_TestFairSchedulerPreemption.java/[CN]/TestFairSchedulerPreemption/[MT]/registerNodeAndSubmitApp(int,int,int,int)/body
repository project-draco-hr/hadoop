{
  RMNode node1=MockNodes.newNodeInfo(1,Resources.createResource(memory,vcores),1,"node1");
  NodeAddedSchedulerEvent nodeEvent1=new NodeAddedSchedulerEvent(node1);
  scheduler.handle(nodeEvent1);
  assertEquals("Incorrect amount of resources in the cluster",memory,scheduler.rootMetrics.getAvailableMB());
  assertEquals("Incorrect amount of resources in the cluster",vcores,scheduler.rootMetrics.getAvailableVirtualCores());
  createSchedulingRequest(appMemory,"queueA","user1",appContainers);
  scheduler.update();
  for (int i=0; i < 3; i++) {
    NodeUpdateSchedulerEvent nodeUpdate1=new NodeUpdateSchedulerEvent(node1);
    scheduler.handle(nodeUpdate1);
  }
  assertEquals("app1's request is not met",memory - appContainers * appMemory,scheduler.rootMetrics.getAvailableMB());
}
