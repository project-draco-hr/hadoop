{
  int waitCount=0, cleanedConts=0;
  List<ContainerId> contsToClean;
  do {
    dispatcher.await();
    contsToClean=resp.getContainersToCleanup();
    cleanedConts+=contsToClean.size();
    if (cleanedConts >= 1) {
      break;
    }
    Thread.sleep(100);
    resp=nm.nodeHeartbeat(true);
  }
 while (waitCount++ < 200);
  if (contsToClean.isEmpty()) {
    LOG.error("Failed to get any containers to cleanup");
  }
 else {
    LOG.info("Got cleanup for " + contsToClean.get(0));
  }
  Assert.assertEquals(1,cleanedConts);
}
