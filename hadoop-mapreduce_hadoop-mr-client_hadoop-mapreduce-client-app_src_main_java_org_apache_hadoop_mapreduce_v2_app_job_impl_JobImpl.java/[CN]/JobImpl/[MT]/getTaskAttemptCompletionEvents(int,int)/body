{
  TaskAttemptCompletionEvent[] events=new TaskAttemptCompletionEvent[0];
  readLock.lock();
  try {
    if (taskAttemptCompletionEvents.size() > fromEventId) {
      int actualMax=Math.min(maxEvents,(taskAttemptCompletionEvents.size() - fromEventId));
      events=taskAttemptCompletionEvents.subList(fromEventId,actualMax + fromEventId).toArray(events);
    }
    return events;
  }
  finally {
    readLock.unlock();
  }
}
