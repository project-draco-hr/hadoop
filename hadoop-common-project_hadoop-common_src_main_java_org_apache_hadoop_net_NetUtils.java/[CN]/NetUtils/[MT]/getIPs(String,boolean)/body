{
  List<InetAddress> addrs=new ArrayList<InetAddress>();
  SubnetInfo subnetInfo=new SubnetUtils(subnet).getInfo();
  Enumeration<NetworkInterface> nifs;
  try {
    nifs=NetworkInterface.getNetworkInterfaces();
  }
 catch (  SocketException e) {
    LOG.error("Unable to get host interfaces",e);
    return addrs;
  }
  while (nifs.hasMoreElements()) {
    NetworkInterface nif=nifs.nextElement();
    addMatchingAddrs(nif,subnetInfo,addrs);
    if (!returnSubinterfaces) {
      continue;
    }
    Enumeration<NetworkInterface> subNifs=nif.getSubInterfaces();
    while (subNifs.hasMoreElements()) {
      addMatchingAddrs(subNifs.nextElement(),subnetInfo,addrs);
    }
  }
  return addrs;
}
