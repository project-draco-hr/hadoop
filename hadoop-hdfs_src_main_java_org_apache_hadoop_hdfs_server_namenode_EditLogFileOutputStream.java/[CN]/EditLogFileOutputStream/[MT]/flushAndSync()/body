{
  if (fp == null) {
    throw new IOException("Trying to use aborted output stream");
  }
  preallocate();
  doubleBuf.flushTo(fp);
  fc.force(false);
  fc.position(fc.position() - 1);
}
