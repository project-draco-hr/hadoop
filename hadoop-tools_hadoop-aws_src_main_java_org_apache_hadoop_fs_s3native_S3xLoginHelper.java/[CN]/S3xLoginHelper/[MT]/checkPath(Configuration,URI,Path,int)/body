{
  URI pathUri=path.toUri();
  String thatScheme=pathUri.getScheme();
  if (thatScheme == null) {
    return;
  }
  URI thisUri=canonicalizeUri(fsUri,defaultPort);
  String thisScheme=thisUri.getScheme();
  if (equalsIgnoreCase(thisScheme,thatScheme)) {
    String thisHost=thisUri.getHost();
    String thatHost=pathUri.getHost();
    if (thatHost == null && thisHost != null) {
      URI defaultUri=FileSystem.getDefaultUri(conf);
      if (equalsIgnoreCase(thisScheme,defaultUri.getScheme())) {
        pathUri=defaultUri;
      }
 else {
        pathUri=null;
      }
    }
    if (pathUri != null) {
      pathUri=canonicalizeUri(pathUri,defaultPort);
      thatHost=pathUri.getHost();
      if (thisHost == thatHost || (thisHost != null && equalsIgnoreCase(thisHost,thatHost))) {
        return;
      }
    }
  }
  throw new IllegalArgumentException("Wrong FS " + S3xLoginHelper.toString(pathUri) + " -expected "+ fsUri);
}
