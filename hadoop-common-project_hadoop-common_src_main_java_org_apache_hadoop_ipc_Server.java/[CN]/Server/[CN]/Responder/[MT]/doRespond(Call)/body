{
synchronized (call.connection.responseQueue) {
    if (call.connection.useWrap) {
      ByteArrayOutputStream response=new ByteArrayOutputStream();
      wrapWithSasl(response,call);
      call.setResponse(ByteBuffer.wrap(response.toByteArray()));
    }
    call.connection.responseQueue.addLast(call);
    if (call.connection.responseQueue.size() == 1) {
      processResponse(call.connection.responseQueue,true);
    }
  }
}
