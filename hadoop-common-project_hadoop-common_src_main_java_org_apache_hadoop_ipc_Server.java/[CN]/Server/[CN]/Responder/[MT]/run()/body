{
  LOG.info(Thread.currentThread().getName() + ": starting");
  SERVER.set(Server.this);
  try {
    doRunLoop();
  }
  finally {
    LOG.info("Stopping " + Thread.currentThread().getName());
    try {
      writeSelector.close();
    }
 catch (    IOException ioe) {
      LOG.error("Couldn't close write selector in " + Thread.currentThread().getName(),ioe);
    }
  }
}
