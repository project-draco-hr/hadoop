{
  this.bindAddress=bindAddress;
  this.conf=conf;
  this.portRangeConfig=portRangeConfig;
  this.port=port;
  this.rpcRequestClass=rpcRequestClass;
  this.handlerCount=handlerCount;
  this.socketSendBufferSize=0;
  this.maxDataLength=conf.getInt(CommonConfigurationKeys.IPC_MAXIMUM_DATA_LENGTH,CommonConfigurationKeys.IPC_MAXIMUM_DATA_LENGTH_DEFAULT);
  if (queueSizePerHandler != -1) {
    this.maxQueueSize=queueSizePerHandler;
  }
 else {
    this.maxQueueSize=handlerCount * conf.getInt(CommonConfigurationKeys.IPC_SERVER_HANDLER_QUEUE_SIZE_KEY,CommonConfigurationKeys.IPC_SERVER_HANDLER_QUEUE_SIZE_DEFAULT);
  }
  this.maxRespSize=conf.getInt(CommonConfigurationKeys.IPC_SERVER_RPC_MAX_RESPONSE_SIZE_KEY,CommonConfigurationKeys.IPC_SERVER_RPC_MAX_RESPONSE_SIZE_DEFAULT);
  if (numReaders != -1) {
    this.readThreads=numReaders;
  }
 else {
    this.readThreads=conf.getInt(CommonConfigurationKeys.IPC_SERVER_RPC_READ_THREADS_KEY,CommonConfigurationKeys.IPC_SERVER_RPC_READ_THREADS_DEFAULT);
  }
  this.readerPendingConnectionQueue=conf.getInt(CommonConfigurationKeys.IPC_SERVER_RPC_READ_CONNECTION_QUEUE_SIZE_KEY,CommonConfigurationKeys.IPC_SERVER_RPC_READ_CONNECTION_QUEUE_SIZE_DEFAULT);
  this.callQueue=new LinkedBlockingQueue<Call>(maxQueueSize);
  this.secretManager=(SecretManager<TokenIdentifier>)secretManager;
  this.authorize=conf.getBoolean(CommonConfigurationKeys.HADOOP_SECURITY_AUTHORIZATION,false);
  this.enabledAuthMethods=getAuthMethods(secretManager,conf);
  this.negotiateResponse=buildNegotiateResponse(enabledAuthMethods);
  listener=new Listener();
  this.port=listener.getAddress().getPort();
  connectionManager=new ConnectionManager();
  this.rpcMetrics=RpcMetrics.create(this,conf);
  this.rpcDetailedMetrics=RpcDetailedMetrics.create(this.port);
  this.tcpNoDelay=conf.getBoolean(CommonConfigurationKeysPublic.IPC_SERVER_TCPNODELAY_KEY,CommonConfigurationKeysPublic.IPC_SERVER_TCPNODELAY_DEFAULT);
  responder=new Responder();
  if (secretManager != null || UserGroupInformation.isSecurityEnabled()) {
    SaslRpcServer.init(conf);
  }
  this.exceptionsHandler.addTerseExceptions(StandbyException.class);
}
