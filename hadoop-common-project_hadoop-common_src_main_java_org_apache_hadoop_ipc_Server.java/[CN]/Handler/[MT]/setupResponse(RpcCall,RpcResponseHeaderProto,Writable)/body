{
  ResponseBuffer buf=responseBuffer.get().reset();
  try {
    RpcWritable.wrap(header).writeTo(buf);
    if (rv != null) {
      RpcWritable.wrap(rv).writeTo(buf);
    }
    call.setResponse(ByteBuffer.wrap(buf.toByteArray()));
  }
  finally {
    if (buf.capacity() > maxRespSize) {
      LOG.warn("Large response size " + buf.size() + " for call "+ call.toString());
      buf.setCapacity(INITIAL_RESP_BUF_SIZE);
    }
  }
}
