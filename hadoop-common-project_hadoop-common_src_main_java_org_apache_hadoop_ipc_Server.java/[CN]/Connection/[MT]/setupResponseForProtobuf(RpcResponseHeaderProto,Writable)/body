{
  Message payload=(rv != null) ? ((RpcWritable.ProtobufWrapper)rv).getMessage() : null;
  int length=getDelimitedLength(header);
  if (payload != null) {
    length+=getDelimitedLength(payload);
  }
  byte[] buf=new byte[length + 4];
  CodedOutputStream cos=CodedOutputStream.newInstance(buf);
  cos.writeRawByte((byte)((length >>> 24) & 0xFF));
  cos.writeRawByte((byte)((length >>> 16) & 0xFF));
  cos.writeRawByte((byte)((length >>> 8) & 0xFF));
  cos.writeRawByte((byte)((length >>> 0) & 0xFF));
  cos.writeRawVarint32(header.getSerializedSize());
  header.writeTo(cos);
  if (payload != null) {
    cos.writeRawVarint32(payload.getSerializedSize());
    payload.writeTo(cos);
  }
  return buf;
}
