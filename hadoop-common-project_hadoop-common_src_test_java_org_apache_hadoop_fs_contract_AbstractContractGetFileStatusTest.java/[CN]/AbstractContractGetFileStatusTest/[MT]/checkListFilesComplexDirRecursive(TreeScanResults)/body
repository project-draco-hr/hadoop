{
  describe("Expect recursive listFiles(true) to" + " list all files down the tree");
  FileSystem fs=getFileSystem();
  TreeScanResults listing=new TreeScanResults(fs.listFiles(tree.getBasePath(),true));
  tree.assertFieldsEquivalent("files",listing,tree.getFiles(),listing.getFiles());
  int count=verifyFileStats(fs.listFiles(tree.getBasePath(),true));
  describe("verifying consistency with treewalk's files");
  TreeScanResults treeWalk=treeWalk(fs,tree.getBasePath());
  treeWalk.assertFieldsEquivalent("files",listing,treeWalk.getFiles(),listing.getFiles());
  assertEquals("Size of status list through next() calls",count,toListThroughNextCallsAlone(fs.listFiles(tree.getBasePath(),true)).size());
}
