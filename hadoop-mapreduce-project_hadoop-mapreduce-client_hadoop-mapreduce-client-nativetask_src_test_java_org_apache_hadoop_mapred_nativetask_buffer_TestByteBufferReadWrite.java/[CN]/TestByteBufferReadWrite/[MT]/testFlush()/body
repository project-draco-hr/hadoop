{
  byte[] buff=new byte[10];
  MockDataTarget target=Mockito.spy(new MockDataTarget(buff));
  ByteBufferDataWriter writer=new ByteBufferDataWriter(target);
  Assert.assertEquals(false,writer.hasUnFlushedData());
  writer.write(1);
  writer.write(new byte[100]);
  Assert.assertEquals(true,writer.hasUnFlushedData());
  writer.close();
  Mockito.verify(target,Mockito.times(11)).sendData();
  Mockito.verify(target).finishSendData();
}
