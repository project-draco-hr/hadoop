{
  this.writeLock.lock();
  try {
    ApplicationId applicationID=event.getApplicationID();
    LOG.info("Processing " + applicationID + " of type "+ event.getType());
    ApplicationState oldState=stateMachine.getCurrentState();
    ApplicationState newState=null;
    try {
      newState=stateMachine.doTransition(event.getType(),event);
    }
 catch (    InvalidStateTransitonException e) {
      LOG.warn("Can't handle this event at current state",e);
    }
    if (oldState != newState) {
      LOG.info("Application " + applicationID + " transitioned from "+ oldState+ " to "+ newState);
    }
  }
  finally {
    this.writeLock.unlock();
  }
}
