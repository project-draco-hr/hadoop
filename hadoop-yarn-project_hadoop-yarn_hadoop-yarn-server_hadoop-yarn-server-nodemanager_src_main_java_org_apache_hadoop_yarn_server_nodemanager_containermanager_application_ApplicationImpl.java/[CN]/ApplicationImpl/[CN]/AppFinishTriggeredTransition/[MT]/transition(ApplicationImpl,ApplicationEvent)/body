{
  ApplicationFinishEvent appEvent=(ApplicationFinishEvent)event;
  if (app.containers.isEmpty()) {
    app.handleAppFinishWithContainersCleanedup();
    return ApplicationState.APPLICATION_RESOURCES_CLEANINGUP;
  }
  for (  ContainerId containerID : app.containers.keySet()) {
    app.dispatcher.getEventHandler().handle(new ContainerKillEvent(containerID,ContainerExitStatus.KILLED_AFTER_APP_COMPLETION,"Container killed on application-finish event: " + appEvent.getDiagnostic()));
  }
  return ApplicationState.FINISHING_CONTAINERS_WAIT;
}
