{
  app.dispatcher.getEventHandler().handle(new LogHandlerAppFinishedEvent(app.appId));
  app.context.getNMTokenSecretManager().appFinished(app.getAppId());
  app.context.getRegisteredCollectors().remove(app.getAppId());
  TimelineClient timelineClient=app.getTimelineClient();
  if (timelineClient != null) {
    timelineClient.stop();
  }
}
