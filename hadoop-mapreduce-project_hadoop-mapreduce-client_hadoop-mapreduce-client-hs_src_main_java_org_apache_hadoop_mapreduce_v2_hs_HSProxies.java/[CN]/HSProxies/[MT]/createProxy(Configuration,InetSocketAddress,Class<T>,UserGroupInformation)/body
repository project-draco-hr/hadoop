{
  T proxy;
  if (xface == RefreshUserMappingsProtocol.class) {
    proxy=(T)createHSProxyWithRefreshUserMappingsProtocol(hsaddr,conf,ugi);
  }
 else   if (xface == GetUserMappingsProtocol.class) {
    proxy=(T)createHSProxyWithGetUserMappingsProtocol(hsaddr,conf,ugi);
  }
 else   if (xface == HSAdminRefreshProtocol.class) {
    proxy=(T)createHSProxyWithHSAdminRefreshProtocol(hsaddr,conf,ugi);
  }
 else {
    String message="Unsupported protocol found when creating the proxy " + "connection to History server: " + ((xface != null) ? xface.getClass().getName() : "null");
    LOG.error(message);
    throw new IllegalStateException(message);
  }
  return proxy;
}
