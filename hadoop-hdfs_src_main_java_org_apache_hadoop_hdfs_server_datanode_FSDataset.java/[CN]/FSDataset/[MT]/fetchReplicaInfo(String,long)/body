{
  ReplicaInfo r=volumeMap.get(bpid,blockId);
  if (r == null)   return null;
switch (r.getState()) {
case FINALIZED:
    return new FinalizedReplica((FinalizedReplica)r);
case RBW:
  return new ReplicaBeingWritten((ReplicaBeingWritten)r);
case RWR:
return new ReplicaWaitingToBeRecovered((ReplicaWaitingToBeRecovered)r);
case RUR:
return new ReplicaUnderRecovery((ReplicaUnderRecovery)r);
case TEMPORARY:
return new ReplicaInPipeline((ReplicaInPipeline)r);
}
return null;
}
