{
  ImmutableList.Builder<XAttr> b=ImmutableList.builder();
  for (  XAttrCompactProto xAttrCompactProto : proto.getXAttrsList()) {
    int v=xAttrCompactProto.getName();
    int nid=(v >> XATTR_NAME_OFFSET) & XATTR_NAME_MASK;
    int ns=(v >> XATTR_NAMESPACE_OFFSET) & XATTR_NAMESPACE_MASK;
    ns|=((v >> XATTR_NAMESPACE_EXT_OFFSET) & XATTR_NAMESPACE_EXT_MASK) << 2;
    String name=stringTable[nid];
    byte[] value=null;
    if (xAttrCompactProto.getValue() != null) {
      value=xAttrCompactProto.getValue().toByteArray();
    }
    b.add(new XAttr.Builder().setNameSpace(XATTR_NAMESPACE_VALUES[ns]).setName(name).setValue(value).build());
  }
  return b.build();
}
