{
  INodeSection s=INodeSection.parseDelimitedFrom(in);
  fsn.dir.resetLastInodeId(s.getLastInodeId());
  long numInodes=s.getNumInodes();
  LOG.info("Loading " + numInodes + " INodes.");
  prog.setTotal(Phase.LOADING_FSIMAGE,currentStep,numInodes);
  Counter counter=prog.getCounter(Phase.LOADING_FSIMAGE,currentStep);
  for (int i=0; i < numInodes; ++i) {
    INodeSection.INode p=INodeSection.INode.parseDelimitedFrom(in);
    if (p.getId() == INodeId.ROOT_INODE_ID) {
      loadRootINode(p);
    }
 else {
      INode n=loadINode(p);
      dir.addToInodeMap(n);
    }
    counter.increment();
  }
}
