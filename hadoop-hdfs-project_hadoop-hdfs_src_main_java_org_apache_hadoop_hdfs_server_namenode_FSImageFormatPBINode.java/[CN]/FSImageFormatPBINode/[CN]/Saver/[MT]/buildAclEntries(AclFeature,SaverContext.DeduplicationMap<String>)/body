{
  AclFeatureProto.Builder b=AclFeatureProto.newBuilder();
  for (  AclEntry e : f.getEntries()) {
    int v=((map.getId(e.getName()) & ACL_ENTRY_NAME_MASK) << ACL_ENTRY_NAME_OFFSET) | (e.getType().ordinal() << ACL_ENTRY_TYPE_OFFSET) | (e.getScope().ordinal() << ACL_ENTRY_SCOPE_OFFSET)| (e.getPermission().ordinal());
    b.addEntries(v);
  }
  return b;
}
