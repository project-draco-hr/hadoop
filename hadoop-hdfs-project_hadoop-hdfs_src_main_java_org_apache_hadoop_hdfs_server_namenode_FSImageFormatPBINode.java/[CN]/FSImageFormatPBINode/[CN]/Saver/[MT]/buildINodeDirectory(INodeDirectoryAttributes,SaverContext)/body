{
  Quota.Counts quota=dir.getQuotaCounts();
  INodeSection.INodeDirectory.Builder b=INodeSection.INodeDirectory.newBuilder().setModificationTime(dir.getModificationTime()).setNsQuota(quota.get(Quota.NAMESPACE)).setDsQuota(quota.get(Quota.DISKSPACE)).setPermission(buildPermissionStatus(dir,state.getStringMap()));
  AclFeature f=dir.getAclFeature();
  if (f != null) {
    b.setAcl(buildAclEntries(f,state.getStringMap()));
  }
  return b;
}
