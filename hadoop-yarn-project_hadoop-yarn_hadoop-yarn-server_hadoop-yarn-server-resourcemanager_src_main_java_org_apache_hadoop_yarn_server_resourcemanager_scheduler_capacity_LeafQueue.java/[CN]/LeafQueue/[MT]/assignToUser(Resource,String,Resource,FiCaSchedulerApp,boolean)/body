{
  User user=getUser(userName);
  if (Resources.greaterThan(resourceCalculator,clusterResource,user.getConsumedResources(),limit)) {
    if (this.reservationsContinueLooking && checkReservations) {
      if (Resources.lessThanOrEqual(resourceCalculator,clusterResource,Resources.subtract(user.getConsumedResources(),application.getCurrentReservation()),limit)) {
        if (LOG.isDebugEnabled()) {
          LOG.debug("User " + userName + " in queue "+ getQueueName()+ " will exceed limit based on reservations - "+ " consumed: "+ user.getConsumedResources()+ " reserved: "+ application.getCurrentReservation()+ " limit: "+ limit);
        }
        return true;
      }
    }
    if (LOG.isDebugEnabled()) {
      LOG.debug("User " + userName + " in queue "+ getQueueName()+ " will exceed limit - "+ " consumed: "+ user.getConsumedResources()+ " limit: "+ limit);
    }
    return false;
  }
  return true;
}
