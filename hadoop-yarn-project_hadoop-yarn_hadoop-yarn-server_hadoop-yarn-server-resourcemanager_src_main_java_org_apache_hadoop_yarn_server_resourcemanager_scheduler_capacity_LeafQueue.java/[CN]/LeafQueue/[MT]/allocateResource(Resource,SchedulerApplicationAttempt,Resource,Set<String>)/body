{
  super.allocateResource(clusterResource,resource,nodeLabels);
  String userName=application.getUser();
  User user=getUser(userName);
  user.assignContainer(resource,nodeLabels);
  Resources.subtractFrom(application.getHeadroom(),resource);
  metrics.setAvailableResourcesToUser(userName,application.getHeadroom());
  if (LOG.isDebugEnabled()) {
    LOG.info(getQueueName() + " user=" + userName+ " used="+ queueUsage.getUsed()+ " numContainers="+ numContainers+ " headroom = "+ application.getHeadroom()+ " user-resources="+ user.getUsed());
  }
}
