{
  super.releaseResource(clusterResource,resource,nodePartition);
  if (null != rmContainer && rmContainer.getNodeLabelExpression().equals(RMNodeLabelsManager.NO_LABEL) && !nodePartition.equals(RMNodeLabelsManager.NO_LABEL)) {
    if (ignorePartitionExclusivityRMContainers.containsKey(nodePartition)) {
      Set<RMContainer> rmContainers=ignorePartitionExclusivityRMContainers.get(nodePartition);
      rmContainers.remove(rmContainer);
      if (rmContainers.isEmpty()) {
        ignorePartitionExclusivityRMContainers.remove(nodePartition);
      }
    }
  }
  String userName=application.getUser();
  User user=getUser(userName);
  user.releaseContainer(resource,nodePartition);
  metrics.setAvailableResourcesToUser(userName,application.getHeadroom());
  if (LOG.isDebugEnabled()) {
    LOG.debug(getQueueName() + " used=" + queueUsage.getUsed()+ " numContainers="+ numContainers+ " user="+ userName+ " user-resources="+ user.getUsed());
  }
}
