{
  Resource headroom=Resources.min(resourceCalculator,clusterResource,Resources.subtract(userLimit,user.getUsed()),Resources.subtract(currentResourceLimit,queueUsage.getUsed()));
  headroom=Resources.roundDown(resourceCalculator,headroom,minimumAllocation);
  return headroom;
}
