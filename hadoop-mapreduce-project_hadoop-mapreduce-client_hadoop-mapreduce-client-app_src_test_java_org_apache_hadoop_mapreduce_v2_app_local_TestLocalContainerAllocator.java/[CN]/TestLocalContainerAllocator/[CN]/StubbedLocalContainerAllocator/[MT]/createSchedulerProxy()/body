{
  AMRMProtocol scheduler=mock(AMRMProtocol.class);
  try {
    when(scheduler.allocate(isA(AllocateRequest.class))).thenThrow(RPCUtil.getRemoteException(new IOException("forcefail")));
  }
 catch (  YarnException e) {
  }
catch (  IOException e) {
  }
  return scheduler;
}
