{
  if (untarDir.exists() && !FileUtil.fullyDelete(untarDir)) {
    throw new IOException("Could not delete directory '" + untarDir + "'");
  }
  FileUtil.unTar(tarFile,untarDir);
  String parentDir=untarDir.getCanonicalPath() + Path.SEPARATOR + "name";
  File testFile=new File(parentDir + Path.SEPARATOR + "version");
  Assert.assertTrue(testFile.exists());
  Assert.assertTrue(testFile.length() == 0);
  String imageDir=parentDir + Path.SEPARATOR + "image";
  testFile=new File(imageDir + Path.SEPARATOR + "fsimage");
  Assert.assertTrue(testFile.exists());
  Assert.assertTrue(testFile.length() == 157);
  String currentDir=parentDir + Path.SEPARATOR + "current";
  testFile=new File(currentDir + Path.SEPARATOR + "fsimage");
  Assert.assertTrue(testFile.exists());
  Assert.assertTrue(testFile.length() == 4331);
  testFile=new File(currentDir + Path.SEPARATOR + "edits");
  Assert.assertTrue(testFile.exists());
  Assert.assertTrue(testFile.length() == 1033);
  testFile=new File(currentDir + Path.SEPARATOR + "fstime");
  Assert.assertTrue(testFile.exists());
  Assert.assertTrue(testFile.length() == 8);
}
