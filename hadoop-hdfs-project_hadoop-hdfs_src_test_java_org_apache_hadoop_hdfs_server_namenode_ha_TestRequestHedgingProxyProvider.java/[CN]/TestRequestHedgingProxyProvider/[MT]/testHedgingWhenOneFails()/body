{
  final NamenodeProtocols goodMock=Mockito.mock(NamenodeProtocols.class);
  Mockito.when(goodMock.getStats()).thenReturn(new long[]{1});
  final NamenodeProtocols badMock=Mockito.mock(NamenodeProtocols.class);
  Mockito.when(badMock.getStats()).thenThrow(new IOException("Bad mock !!"));
  RequestHedgingProxyProvider<NamenodeProtocols> provider=new RequestHedgingProxyProvider<>(conf,nnUri,NamenodeProtocols.class,createFactory(goodMock,badMock));
  long[] stats=provider.getProxy().proxy.getStats();
  Assert.assertTrue(stats.length == 1);
  Mockito.verify(badMock).getStats();
  Mockito.verify(goodMock).getStats();
}
