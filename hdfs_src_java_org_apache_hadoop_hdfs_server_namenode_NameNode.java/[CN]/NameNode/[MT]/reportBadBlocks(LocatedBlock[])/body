{
  stateChangeLog.info("*DIR* NameNode.reportBadBlocks");
  for (int i=0; i < blocks.length; i++) {
    ExtendedBlock blk=blocks[i].getBlock();
    DatanodeInfo[] nodes=blocks[i].getLocations();
    for (int j=0; j < nodes.length; j++) {
      DatanodeInfo dn=nodes[j];
      namesystem.markBlockAsCorrupt(blk,dn);
    }
  }
}
