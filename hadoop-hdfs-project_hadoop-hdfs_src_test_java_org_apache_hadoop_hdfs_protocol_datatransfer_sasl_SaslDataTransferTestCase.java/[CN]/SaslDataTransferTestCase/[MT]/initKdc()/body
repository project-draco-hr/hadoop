{
  baseDir=new File(System.getProperty("test.build.dir","target/test-dir"),SaslDataTransferTestCase.class.getSimpleName());
  FileUtil.fullyDelete(baseDir);
  assertTrue(baseDir.mkdirs());
  Properties kdcConf=MiniKdc.createConf();
  kdc=new MiniKdc(kdcConf,baseDir);
  kdc.start();
  String userName=UserGroupInformation.getLoginUser().getShortUserName();
  File keytabFile=new File(baseDir,userName + ".keytab");
  keytab=keytabFile.getAbsolutePath();
  kdc.createPrincipal(keytabFile,userName + "/localhost","HTTP/localhost");
  hdfsPrincipal=userName + "/localhost@" + kdc.getRealm();
  spnegoPrincipal="HTTP/localhost@" + kdc.getRealm();
}
