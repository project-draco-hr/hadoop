{
  FSImageTransactionalStorageInspector inspector=new FSImageTransactionalStorageInspector();
  inspector.inspectDirectory(mockDirectoryWithEditLogs("/foo1/current/" + getFinalizedEditsFileName(123,456)));
  inspector.inspectDirectory(mockDirectoryWithEditLogs("/foo2/current/" + getFinalizedEditsFileName(123,678)));
  LogGroup lg=inspector.logGroups.get(123L);
  assertEquals(2,lg.logs.size());
  try {
    lg.planRecovery();
    fail("Didn't throw IOE on inconsistent end txids");
  }
 catch (  IOException ioe) {
    assertTrue(ioe.getMessage().contains("More than one ending txid"));
  }
}
