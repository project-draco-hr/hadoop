{
  String currentDir=DATE_FORMAT.format(new Date());
  Path path=new Path(basePath,currentDir);
  if ((currentOutStream == null) || !path.equals(currentDirPath)) {
    currentDirPath=path;
    if (currentOutStream != null) {
      currentOutStream.close();
    }
    try {
      rollLogDir();
    }
 catch (    IOException ex) {
      throwMetricsException("Failed to creating new log file",ex);
    }
  }
}
