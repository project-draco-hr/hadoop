{
  this.conf=conf;
  timer=new Timer();
  rollingInterval=this.conf.getLong(YarnConfiguration.RM_NMTOKEN_MASTER_KEY_ROLLING_INTERVAL_SECS,YarnConfiguration.DEFAULT_RM_NMTOKEN_MASTER_KEY_ROLLING_INTERVAL_SECS) * 1000;
  this.activationDelay=(long)(conf.getLong(YarnConfiguration.RM_NM_EXPIRY_INTERVAL_MS,YarnConfiguration.DEFAULT_RM_NM_EXPIRY_INTERVAL_MS) * 1.5);
  LOG.info("NMTokenKeyRollingInterval: " + this.rollingInterval + "ms and NMTokenKeyActivationDelay: "+ this.activationDelay+ "ms");
  if (rollingInterval <= activationDelay * 2) {
    throw new IllegalArgumentException(YarnConfiguration.RM_NMTOKEN_MASTER_KEY_ROLLING_INTERVAL_SECS + " should be more than 2 X " + YarnConfiguration.RM_NM_EXPIRY_INTERVAL_MS);
  }
  appAttemptToNodeKeyMap=new ConcurrentHashMap<ApplicationAttemptId,HashSet<NodeId>>();
}
