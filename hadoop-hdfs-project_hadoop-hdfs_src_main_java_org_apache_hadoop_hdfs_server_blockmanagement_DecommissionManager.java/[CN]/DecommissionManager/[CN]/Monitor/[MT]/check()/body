{
  final DatanodeManager dm=blockmanager.getDatanodeManager();
  int count=0;
  for (  Map.Entry<String,DatanodeDescriptor> entry : dm.getDatanodeCyclicIteration(firstkey)) {
    final DatanodeDescriptor d=entry.getValue();
    firstkey=entry.getKey();
    if (d.isDecommissionInProgress()) {
      try {
        dm.checkDecommissionState(d);
      }
 catch (      Exception e) {
        LOG.warn("entry=" + entry,e);
      }
      if (++count == numNodesPerCheck) {
        return;
      }
    }
  }
}
