{
  Path path=new Path("/dir");
  String key=path.toUri().getPath().substring(1);
  when(s3.getObjectMetadata(BUCKET,key)).thenThrow(NOT_FOUND);
  when(s3.getObjectMetadata(BUCKET,key + "/")).thenThrow(NOT_FOUND);
  ObjectListing objects=mock(ObjectListing.class);
  when(objects.getCommonPrefixes()).thenReturn(Collections.<String>emptyList());
  when(objects.getObjectSummaries()).thenReturn(Collections.<S3ObjectSummary>emptyList());
  when(s3.listObjects(any(ListObjectsRequest.class))).thenReturn(objects);
  exception.expect(FileNotFoundException.class);
  fs.getFileStatus(path);
}
