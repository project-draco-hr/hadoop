{
  Class<?> classRef;
  Object principalName;
  String realmString=null;
  try {
    if (IBM_JAVA) {
      classRef=Class.forName("com.ibm.security.krb5.PrincipalName");
    }
 else {
      classRef=Class.forName("sun.security.krb5.PrincipalName");
    }
    int tKrbNtSrvHst=classRef.getField("KRB_NT_SRV_HST").getInt(null);
    principalName=classRef.getConstructor(String.class,int.class).newInstance(shortprinc,tKrbNtSrvHst);
    realmString=(String)classRef.getMethod("getRealmString",new Class[0]).invoke(principalName,new Object[0]);
  }
 catch (  RuntimeException rte) {
  }
catch (  Exception e) {
  }
  if (null == realmString || realmString.equals("")) {
    return getDefaultRealmProtected();
  }
 else {
    return realmString;
  }
}
