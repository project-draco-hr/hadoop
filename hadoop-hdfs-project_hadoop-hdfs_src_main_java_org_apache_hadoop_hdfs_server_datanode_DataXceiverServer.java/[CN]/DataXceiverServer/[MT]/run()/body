{
  while (datanode.shouldRun) {
    try {
      Socket s=ss.accept();
      s.setTcpNoDelay(true);
      final DataXceiver exciver;
      try {
        exciver=new DataXceiver(s,datanode,this);
      }
 catch (      IOException e) {
        IOUtils.closeSocket(s);
        throw e;
      }
      new Daemon(datanode.threadGroup,exciver).start();
    }
 catch (    SocketTimeoutException ignored) {
    }
catch (    AsynchronousCloseException ace) {
      if (datanode.shouldRun) {
        LOG.warn(datanode.getMachineName() + ":DataXceiverServer: ",ace);
      }
    }
catch (    IOException ie) {
      LOG.warn(datanode.getMachineName() + ":DataXceiverServer: ",ie);
    }
catch (    Throwable te) {
      LOG.error(datanode.getMachineName() + ":DataXceiverServer: Exiting due to: ",te);
      datanode.shouldRun=false;
    }
  }
  try {
    ss.close();
  }
 catch (  IOException ie) {
    LOG.warn(datanode.getMachineName() + " :DataXceiverServer: close exception",ie);
  }
}
