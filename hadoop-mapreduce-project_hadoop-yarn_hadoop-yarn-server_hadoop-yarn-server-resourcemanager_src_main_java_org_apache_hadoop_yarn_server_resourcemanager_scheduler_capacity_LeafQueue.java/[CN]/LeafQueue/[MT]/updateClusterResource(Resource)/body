{
  maxActiveApplications=CSQueueUtils.computeMaxActiveApplications(clusterResource,maxAMResourcePercent,absoluteCapacity);
  maxActiveApplicationsPerUser=CSQueueUtils.computeMaxActiveApplicationsPerUser(maxActiveApplications,userLimit,userLimitFactor);
  for (  SchedulerApp application : activeApplications) {
synchronized (application) {
      computeUserLimitAndSetHeadroom(application,clusterResource,Resources.none());
    }
  }
}
