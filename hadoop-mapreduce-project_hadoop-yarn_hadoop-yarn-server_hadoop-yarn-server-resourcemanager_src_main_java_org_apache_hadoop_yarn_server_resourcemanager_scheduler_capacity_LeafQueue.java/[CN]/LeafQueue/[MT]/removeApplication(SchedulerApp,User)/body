{
  boolean wasActive=activeApplications.remove(application);
  if (!wasActive) {
    pendingApplications.remove(application);
  }
  applicationsMap.remove(application.getApplicationAttemptId());
  user.finishApplication(wasActive);
  if (user.getTotalApplications() == 0) {
    users.remove(application.getUser());
  }
  activateApplications();
synchronized (application) {
    activeUsersManager.deactivateApplication(application.getUser(),application.getApplicationId());
  }
  LOG.info("Application removed -" + " appId: " + application.getApplicationId() + " user: "+ application.getUser()+ " queue: "+ getQueueName()+ " #user-pending-applications: "+ user.getPendingApplications()+ " #user-active-applications: "+ user.getActiveApplications()+ " #queue-pending-applications: "+ getNumPendingApplications()+ " #queue-active-applications: "+ getNumActiveApplications());
}
