{
  int filesRestored=0;
  File restoreDirectory=null;
  for (  File child : trashRoot.listFiles()) {
    if (child.isDirectory()) {
      filesRestored+=restoreBlockFilesFromTrash(child);
    }
    if (restoreDirectory == null) {
      restoreDirectory=new File(getRestoreDirectory(child));
      restoreDirectory.mkdirs();
    }
    child.renameTo(new File(restoreDirectory,child.getName()));
    ++filesRestored;
  }
  return filesRestored;
}
