{
  ReconfigurableDummy dummy=new ReconfigurableDummy(conf1);
  assertTrue(dummy.getConf().get(PROP1).equals(VAL1));
  Thread dummyThread=new Thread(dummy);
  dummyThread.start();
  try {
    Thread.sleep(500);
  }
 catch (  InterruptedException ignore) {
  }
  dummy.reconfigureProperty(PROP1,VAL2);
  long endWait=System.currentTimeMillis() + 2000;
  while (dummyThread.isAlive() && System.currentTimeMillis() < endWait) {
    try {
      Thread.sleep(50);
    }
 catch (    InterruptedException ignore) {
    }
  }
  assertFalse(dummyThread.isAlive());
  dummy.running=false;
  try {
    dummyThread.join();
  }
 catch (  InterruptedException ignore) {
  }
  assertTrue(dummy.getConf().get(PROP1).equals(VAL2));
}
