{
  ugi.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws IOException {
      proxy=RPC.getProxy(TestProtocol.class,TestProtocol.versionID,NetUtils.getConnectAddress(server),conf);
      Assert.assertEquals(ugi.toString(),proxy.aMethod());
      Assert.assertEquals(ugi.toString(),proxy.getServerRemoteUser());
      return null;
    }
  }
);
}
