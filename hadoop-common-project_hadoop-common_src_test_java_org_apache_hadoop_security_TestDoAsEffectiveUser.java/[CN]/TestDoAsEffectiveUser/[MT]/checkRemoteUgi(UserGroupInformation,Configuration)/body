{
  ugi.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws ServiceException {
      client=getClient(addr,conf);
      String currentUser=client.getCurrentUser(null,newEmptyRequest()).getUser();
      String serverRemoteUser=client.getServerRemoteUser(null,newEmptyRequest()).getUser();
      Assert.assertEquals(ugi.toString(),currentUser);
      Assert.assertEquals(ugi.toString(),serverRemoteUser);
      return null;
    }
  }
);
}
