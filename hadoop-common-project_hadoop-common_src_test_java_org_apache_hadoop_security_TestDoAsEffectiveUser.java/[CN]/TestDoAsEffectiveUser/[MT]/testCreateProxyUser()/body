{
  UserGroupInformation realUserUgi=UserGroupInformation.createRemoteUser(REAL_USER_NAME);
  UserGroupInformation proxyUserUgi=UserGroupInformation.createProxyUser(PROXY_USER_NAME,realUserUgi);
  UserGroupInformation curUGI=proxyUserUgi.doAs(new PrivilegedExceptionAction<UserGroupInformation>(){
    @Override public UserGroupInformation run() throws IOException {
      return UserGroupInformation.getCurrentUser();
    }
  }
);
  Assert.assertEquals(PROXY_USER_NAME + " (auth:PROXY) via " + REAL_USER_NAME+ " (auth:SIMPLE)",curUGI.toString());
}
