{
  if (LOG.isDebugEnabled()) {
    LOG.debug("Recalculate checksum for the missing/failed block index " + errBlkIndex);
  }
  byte[] errIndices=new byte[1];
  errIndices[0]=(byte)errBlkIndex;
  StripedReconstructionInfo stripedReconInfo=new StripedReconstructionInfo(blockGroup,ecPolicy,blockIndices,datanodes,errIndices);
  final StripedBlockChecksumReconstructor checksumRecon=new StripedBlockChecksumReconstructor(getDatanode().getErasureCodingWorker(),stripedReconInfo,md5writer);
  checksumRecon.reconstruct();
  DataChecksum checksum=checksumRecon.getChecksum();
  long crcPerBlock=checksum.getChecksumSize() <= 0 ? 0 : checksumRecon.getChecksumDataLen() / checksum.getChecksumSize();
  setOrVerifyChecksumProperties(errBlkIndex,checksum.getBytesPerChecksum(),crcPerBlock,checksum.getChecksumType());
  if (LOG.isDebugEnabled()) {
    LOG.debug("Recalculated checksum for the block index " + errBlkIndex + ": md5="+ checksumRecon.getMD5());
  }
}
