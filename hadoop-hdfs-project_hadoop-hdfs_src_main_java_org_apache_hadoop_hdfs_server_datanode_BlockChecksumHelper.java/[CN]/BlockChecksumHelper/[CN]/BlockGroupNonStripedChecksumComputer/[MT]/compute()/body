{
  for (int idx=0; idx < ecPolicy.getNumDataUnits(); idx++) {
    ExtendedBlock block=StripedBlockUtil.constructInternalBlock(blockGroup,ecPolicy.getCellSize(),ecPolicy.getNumDataUnits(),idx);
    DatanodeInfo targetDatanode=datanodes[idx];
    Token<BlockTokenIdentifier> blockToken=blockTokens[idx];
    checksumBlock(block,idx,blockToken,targetDatanode);
  }
  MD5Hash md5out=MD5Hash.digest(md5writer.getData());
  setOutBytes(md5out.getDigest());
}
