{
  Quota.Counts counts=Quota.Counts.newInstance();
  Snapshot s=snapshot != null && prior != null ? prior : snapshot;
  for (  INode child : getChildrenList(s)) {
    if (snapshot != null && excludedNodes != null && excludedNodes.containsKey(child)) {
      continue;
    }
 else {
      Quota.Counts childCounts=child.cleanSubtree(snapshot,prior,collectedBlocks,removedINodes,countDiffChange);
      counts.add(childCounts);
    }
  }
  return counts;
}
