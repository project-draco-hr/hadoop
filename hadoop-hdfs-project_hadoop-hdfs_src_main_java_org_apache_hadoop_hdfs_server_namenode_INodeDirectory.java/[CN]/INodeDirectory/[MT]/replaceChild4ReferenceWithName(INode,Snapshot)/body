{
  Preconditions.checkArgument(latest != null);
  if (oldChild instanceof INodeReference.WithName) {
    return (INodeReference.WithName)oldChild;
  }
  final INodeReference.WithCount withCount;
  if (oldChild.isReference()) {
    withCount=(INodeReference.WithCount)oldChild.asReference().getReferredINode();
  }
 else {
    withCount=new INodeReference.WithCount(null,oldChild);
  }
  final INodeReference.WithName ref=new INodeReference.WithName(this,withCount,oldChild.getLocalNameBytes(),latest.getId());
  replaceChild(oldChild,ref,null);
  return ref;
}
