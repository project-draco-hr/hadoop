{
  Preconditions.checkState(!(this instanceof INodeDirectoryWithSnapshot),"this is already an INodeDirectoryWithSnapshot, this=%s",this);
  final INodeDirectoryWithSnapshot withSnapshot=INodeDirectoryWithSnapshot.newInstance(this,latest);
  replaceSelf(withSnapshot);
  return withSnapshot;
}
