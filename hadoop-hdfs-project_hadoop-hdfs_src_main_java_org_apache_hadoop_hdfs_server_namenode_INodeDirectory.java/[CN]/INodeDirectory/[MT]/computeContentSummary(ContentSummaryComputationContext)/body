{
  final DirectoryWithSnapshotFeature sf=getDirectoryWithSnapshotFeature();
  if (sf != null) {
    sf.computeContentSummary4Snapshot(summary.getBlockStoragePolicySuite(),summary.getCounts());
  }
  final DirectoryWithQuotaFeature q=getDirectoryWithQuotaFeature();
  if (q != null) {
    return q.computeContentSummary(this,summary);
  }
 else {
    return computeDirectoryContentSummary(summary,Snapshot.CURRENT_STATE_ID);
  }
}
