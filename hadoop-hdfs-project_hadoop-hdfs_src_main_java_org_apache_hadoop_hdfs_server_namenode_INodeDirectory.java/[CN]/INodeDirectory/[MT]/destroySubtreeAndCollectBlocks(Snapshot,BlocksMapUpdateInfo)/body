{
  int total=0;
  for (  INode child : getChildrenList(snapshot)) {
    total+=child.destroySubtreeAndCollectBlocks(snapshot,collectedBlocks);
  }
  if (snapshot == null) {
    parent=null;
    children=null;
  }
  return total;
}
