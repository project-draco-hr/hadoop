{
  final DirectoryWithSnapshotFeature sf=getDirectoryWithSnapshotFeature();
  if (sf != null) {
    sf.clear(bsps,this,collectedBlocks,removedINodes,removedUCFiles);
  }
  for (  INode child : getChildrenList(Snapshot.CURRENT_STATE_ID)) {
    child.destroyAndCollectBlocks(bsps,collectedBlocks,removedINodes,removedUCFiles);
  }
  if (getAclFeature() != null) {
    AclStorage.removeAclFeature(getAclFeature());
  }
  clear();
  removedINodes.add(this);
}
