{
  jobHistory=spy(new JobHistory());
  HistoryStorage storage=new HistoryStorage(){
    @Override public void setHistoryFileManager(    HistoryFileManager hsManager){
    }
    @Override public JobsInfo getPartialJobs(    Long offset,    Long count,    String user,    String queue,    Long sBegin,    Long sEnd,    Long fBegin,    Long fEnd,    JobState jobState){
      return null;
    }
    @Override public Job getFullJob(    JobId jobId){
      return null;
    }
    @Override public Map<JobId,Job> getAllPartialJobs(){
      return null;
    }
  }
;
  doReturn(storage).when(jobHistory).createHistoryStorage();
  jobHistory.init(new Configuration());
  jobHistory.start();
  Throwable th=null;
  try {
    jobHistory.refreshLoadedJobCache();
  }
 catch (  Exception e) {
    th=e;
  }
  assertTrue(th instanceof UnsupportedOperationException);
}
