{
  FileOutputStream fos=new FileOutputStream(new File(TEST_DIR,"testSyncFileRange"));
  try {
    fos.write("foo".getBytes());
    NativeIO.POSIX.sync_file_range(fos.getFD(),0,1024,NativeIO.POSIX.SYNC_FILE_RANGE_WRITE);
  }
 catch (  UnsupportedOperationException uoe) {
    assumeTrue(false);
  }
 finally {
    fos.close();
  }
  try {
    NativeIO.POSIX.sync_file_range(fos.getFD(),0,1024,NativeIO.POSIX.SYNC_FILE_RANGE_WRITE);
    fail("Did not throw on bad file");
  }
 catch (  NativeIOException nioe) {
    assertEquals(Errno.EBADF,nioe.getErrno());
  }
}
