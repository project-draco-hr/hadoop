{
  int bytesToWrite=length;
  byte[] ret=new byte[bytesToWrite];
  byte[] toWrite=new byte[1024];
  int written=0;
  Random rb=new Random(rand.nextLong());
  while (bytesToWrite > 0) {
    rb.nextBytes(toWrite);
    int bytesToWriteNext=(1024 < bytesToWrite) ? 1024 : bytesToWrite;
    out.write(toWrite,0,bytesToWriteNext);
    System.arraycopy(toWrite,0,ret,(ret.length - bytesToWrite),bytesToWriteNext);
    written+=bytesToWriteNext;
    if (LOG.isDebugEnabled()) {
      LOG.debug("Written: " + bytesToWriteNext + "; Total: "+ written);
    }
    bytesToWrite-=bytesToWriteNext;
  }
  return ret;
}
