{
  while (app.nextAttemptId - app.firstAttemptIdInStateStore > app.maxAppAttempts) {
    ApplicationAttemptId attemptId=ApplicationAttemptId.newInstance(app.getApplicationId(),app.firstAttemptIdInStateStore);
    RMAppAttempt rmAppAttempt=app.getRMAppAttempt(attemptId);
    long endTime=app.systemClock.getTime();
    if (rmAppAttempt.getFinishTime() < (endTime - app.attemptFailuresValidityInterval)) {
      app.firstAttemptIdInStateStore++;
      LOG.info("Remove attempt from state store : " + attemptId);
      app.rmContext.getStateStore().removeApplicationAttempt(attemptId);
    }
 else {
      break;
    }
  }
}
