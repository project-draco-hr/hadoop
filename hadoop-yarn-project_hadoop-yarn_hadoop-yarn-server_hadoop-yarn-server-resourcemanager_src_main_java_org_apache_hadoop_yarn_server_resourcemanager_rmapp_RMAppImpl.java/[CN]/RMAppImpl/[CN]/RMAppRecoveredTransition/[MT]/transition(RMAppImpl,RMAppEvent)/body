{
  if (app.attempts.isEmpty()) {
    app.createNewAttempt(true);
    return RMAppState.SUBMITTED;
  }
 else {
    for (    RMAppAttempt attempt : app.getAppAttempts().values()) {
      app.dispatcher.getEventHandler().handle(new RMAppAttemptEvent(attempt.getAppAttemptId(),RMAppAttemptEventType.RECOVER));
    }
    if (app.recoveredFinalState != null) {
      FINAL_TRANSITION.transition(app,event);
      return app.recoveredFinalState;
    }
 else {
      return RMAppState.RUNNING;
    }
  }
}
