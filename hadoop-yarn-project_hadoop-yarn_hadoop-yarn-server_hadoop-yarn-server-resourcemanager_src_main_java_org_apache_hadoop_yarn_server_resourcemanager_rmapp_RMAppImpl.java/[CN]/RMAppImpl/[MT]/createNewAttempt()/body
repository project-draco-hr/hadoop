{
  ApplicationAttemptId appAttemptId=ApplicationAttemptId.newInstance(applicationId,attempts.size() + 1);
  RMAppAttempt attempt=new RMAppAttemptImpl(appAttemptId,rmContext,scheduler,masterService,submissionContext,conf,maxAppAttempts == attempts.size());
  attempts.put(appAttemptId,attempt);
  currentAttempt=attempt;
}
