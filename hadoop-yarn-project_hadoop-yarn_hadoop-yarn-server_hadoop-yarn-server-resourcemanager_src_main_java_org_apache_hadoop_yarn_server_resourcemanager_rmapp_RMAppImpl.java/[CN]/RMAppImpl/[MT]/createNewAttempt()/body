{
  ApplicationAttemptId appAttemptId=ApplicationAttemptId.newInstance(applicationId,attempts.size() + 1);
  RMAppAttempt attempt=new RMAppAttemptImpl(appAttemptId,rmContext,scheduler,masterService,submissionContext,conf,maxAppAttempts == (getNumFailedAppAttempts() + 1));
  attempts.put(appAttemptId,attempt);
  currentAttempt=attempt;
}
