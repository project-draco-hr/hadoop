{
  this.readLock.lock();
  try {
    ApplicationAttemptId currentApplicationAttemptId=null;
    String clientToken=UNAVAILABLE;
    String trackingUrl=UNAVAILABLE;
    String host=UNAVAILABLE;
    String origTrackingUrl=UNAVAILABLE;
    int rpcPort=-1;
    ApplicationResourceUsageReport appUsageReport=null;
    FinalApplicationStatus finishState=getFinalApplicationStatus();
    String diags=UNAVAILABLE;
    if (allowAccess) {
      if (this.currentAttempt != null) {
        currentApplicationAttemptId=this.currentAttempt.getAppAttemptId();
        trackingUrl=this.currentAttempt.getTrackingUrl();
        origTrackingUrl=this.currentAttempt.getOriginalTrackingUrl();
        clientToken=this.currentAttempt.getClientToken();
        host=this.currentAttempt.getHost();
        rpcPort=this.currentAttempt.getRpcPort();
        appUsageReport=currentAttempt.getApplicationResourceUsageReport();
      }
 else {
        currentApplicationAttemptId=BuilderUtils.newApplicationAttemptId(this.applicationId,DUMMY_APPLICATION_ATTEMPT_NUMBER);
      }
      diags=this.diagnostics.toString();
    }
 else {
      appUsageReport=DUMMY_APPLICATION_RESOURCE_USAGE_REPORT;
      currentApplicationAttemptId=BuilderUtils.newApplicationAttemptId(this.applicationId,DUMMY_APPLICATION_ATTEMPT_NUMBER);
    }
    return BuilderUtils.newApplicationReport(this.applicationId,currentApplicationAttemptId,this.user,this.queue,this.name,host,rpcPort,clientToken,createApplicationState(this.stateMachine.getCurrentState()),diags,trackingUrl,this.startTime,this.finishTime,finishState,appUsageReport,origTrackingUrl);
  }
  finally {
    this.readLock.unlock();
  }
}
