{
  int completedAttempts=0;
  long endTime=this.systemClock.getTime();
  for (  RMAppAttempt attempt : attempts.values()) {
    if (attempt.shouldCountTowardsMaxAttemptRetry()) {
      if (this.attemptFailuresValidityInterval <= 0 || (attempt.getFinishTime() > endTime - this.attemptFailuresValidityInterval)) {
        completedAttempts++;
      }
    }
  }
  return completedAttempts;
}
