{
  ApplicationAttemptId appAttemptId=ApplicationAttemptId.newInstance(applicationId,attempts.size() + 1);
  RMAppAttempt attempt=new RMAppAttemptImpl(appAttemptId,rmContext,scheduler,masterService,submissionContext,conf,user);
  attempts.put(appAttemptId,attempt);
  currentAttempt=attempt;
  if (startAttempt) {
    handler.handle(new RMAppAttemptEvent(appAttemptId,RMAppAttemptEventType.START));
  }
}
