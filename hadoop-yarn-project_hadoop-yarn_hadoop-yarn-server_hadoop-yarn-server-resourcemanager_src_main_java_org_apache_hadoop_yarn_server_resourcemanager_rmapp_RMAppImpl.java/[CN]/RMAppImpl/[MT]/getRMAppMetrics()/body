{
  Resource resourcePreempted=Resource.newInstance(0,0);
  int numAMContainerPreempted=0;
  int numNonAMContainerPreempted=0;
  long memorySeconds=0;
  long vcoreSeconds=0;
  for (  RMAppAttempt attempt : attempts.values()) {
    if (null != attempt) {
      RMAppAttemptMetrics attemptMetrics=attempt.getRMAppAttemptMetrics();
      Resources.addTo(resourcePreempted,attemptMetrics.getResourcePreempted());
      numAMContainerPreempted+=attemptMetrics.getIsPreempted() ? 1 : 0;
      numNonAMContainerPreempted+=attemptMetrics.getNumNonAMContainersPreempted();
      AggregateAppResourceUsage resUsage=attempt.getRMAppAttemptMetrics().getAggregateAppResourceUsage();
      memorySeconds+=resUsage.getMemorySeconds();
      vcoreSeconds+=resUsage.getVcoreSeconds();
    }
  }
  return new RMAppMetrics(resourcePreempted,numNonAMContainerPreempted,numAMContainerPreempted,memorySeconds,vcoreSeconds);
}
