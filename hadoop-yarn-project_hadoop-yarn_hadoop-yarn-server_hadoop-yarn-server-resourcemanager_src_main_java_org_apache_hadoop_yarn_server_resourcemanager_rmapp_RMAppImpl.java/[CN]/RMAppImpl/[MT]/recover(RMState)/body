{
  ApplicationStateData appState=state.getApplicationState().get(getApplicationId());
  this.recoveredFinalState=appState.getState();
  LOG.info("Recovering app: " + getApplicationId() + " with "+ +appState.getAttemptCount()+ " attempts and final state = "+ this.recoveredFinalState);
  this.diagnostics.append(null == appState.getDiagnostics() ? "" : appState.getDiagnostics());
  this.storedFinishTime=appState.getFinishTime();
  this.startTime=appState.getStartTime();
  this.callerContext=appState.getCallerContext();
  if (submissionContext.getAttemptFailuresValidityInterval() > 0) {
    this.firstAttemptIdInStateStore=appState.getFirstAttemptId();
    this.nextAttemptId=firstAttemptIdInStateStore;
  }
  sendATSCreateEvent(this,this.startTime);
  for (int i=0; i < appState.getAttemptCount(); ++i) {
    createNewAttempt();
    ((RMAppAttemptImpl)this.currentAttempt).recover(state);
  }
}
