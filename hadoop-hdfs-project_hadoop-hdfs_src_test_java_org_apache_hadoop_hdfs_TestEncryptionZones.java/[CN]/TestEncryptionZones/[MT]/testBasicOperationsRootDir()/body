{
  int numZones=0;
  final Path rootDir=new Path("/");
  final Path zone1=new Path(rootDir,"zone1");
  dfsAdmin.createEncryptionZone(rootDir,TEST_KEY);
  assertNumZones(++numZones);
  assertZonePresent(null,rootDir.toString());
  fs.setSafeMode(SafeModeAction.SAFEMODE_ENTER);
  fs.saveNamespace();
  fs.setSafeMode(SafeModeAction.SAFEMODE_LEAVE);
  cluster.restartNameNode(true);
  assertNumZones(numZones);
  assertZonePresent(null,rootDir.toString());
}
