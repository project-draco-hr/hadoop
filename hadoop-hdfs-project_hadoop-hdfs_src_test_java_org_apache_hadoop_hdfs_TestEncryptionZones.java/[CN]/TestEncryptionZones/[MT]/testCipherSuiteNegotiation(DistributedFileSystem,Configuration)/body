{
  final ClientProtocol mcp=Mockito.mock(ClientProtocol.class);
  final Configuration noCodecConf=new Configuration(conf);
  final CipherSuite suite=CipherSuite.AES_CTR_NOPADDING;
  final String confKey=CommonConfigurationKeysPublic.HADOOP_SECURITY_CRYPTO_CODEC_CLASSES_KEY_PREFIX + suite.getConfigSuffix();
  noCodecConf.set(confKey,"");
  fs.dfs=new DFSClient(null,mcp,noCodecConf,null);
  mockCreate(mcp,suite,CryptoProtocolVersion.ENCRYPTION_ZONES);
  try {
    fs.create(new Path("/mock"));
    fail("Created with no configured codecs!");
  }
 catch (  UnknownCipherSuiteException e) {
    assertExceptionContains("No configuration found for the cipher",e);
  }
  fs.dfs=new DFSClient(null,mcp,conf,null);
  CipherSuite unknown=CipherSuite.UNKNOWN;
  unknown.setUnknownValue(989);
  mockCreate(mcp,unknown,CryptoProtocolVersion.ENCRYPTION_ZONES);
  try {
    fs.create(new Path("/mock"));
    fail("Created with unknown cipher!");
  }
 catch (  IOException e) {
    assertExceptionContains("unknown CipherSuite with ID 989",e);
  }
}
