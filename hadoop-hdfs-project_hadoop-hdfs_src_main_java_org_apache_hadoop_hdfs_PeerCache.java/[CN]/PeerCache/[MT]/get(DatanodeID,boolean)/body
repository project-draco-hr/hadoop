{
  if (capacity <= 0) {
    return null;
  }
  List<Value> sockStreamList=multimap.get(new Key(dnId,isDomain));
  if (sockStreamList == null) {
    return null;
  }
  Iterator<Value> iter=sockStreamList.iterator();
  while (iter.hasNext()) {
    Value candidate=iter.next();
    iter.remove();
    if (!candidate.getPeer().isClosed()) {
      return candidate.getPeer();
    }
  }
  return null;
}
