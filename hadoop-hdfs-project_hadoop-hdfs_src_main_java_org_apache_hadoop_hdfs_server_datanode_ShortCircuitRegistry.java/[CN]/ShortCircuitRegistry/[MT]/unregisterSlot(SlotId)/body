{
  if (!enabled) {
    if (LOG.isTraceEnabled()) {
      LOG.trace("unregisterSlot: ShortCircuitRegistry is " + "not enabled.");
    }
    throw new UnsupportedOperationException();
  }
  ShmId shmId=slotId.getShmId();
  RegisteredShm shm=segments.get(shmId);
  if (shm == null) {
    throw new InvalidRequestException("there is no shared memory segment " + "registered with shmId " + shmId);
  }
  Slot slot=shm.getSlot(slotId.getSlotIdx());
  slot.makeInvalid();
  shm.unregisterSlot(slotId.getSlotIdx());
  slots.remove(slot.getBlockId(),slot);
}
