{
  RemoteIterator<CacheDirectiveEntry> iter=dfs.listCacheDirectives(null);
  while (iter.hasNext()) {
    dfs.removeCacheDirective(iter.next().getInfo().getId());
  }
  waitForCachedBlocks(namenode,0,0,"teardown");
  if (cluster != null) {
    cluster.shutdown();
    cluster=null;
  }
  NativeIO.POSIX.setCacheManipulator(prevCacheManipulator);
}
