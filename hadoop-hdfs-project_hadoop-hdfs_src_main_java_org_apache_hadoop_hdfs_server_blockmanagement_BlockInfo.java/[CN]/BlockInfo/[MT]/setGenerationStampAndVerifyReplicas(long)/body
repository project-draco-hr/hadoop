{
  Preconditions.checkState(uc != null && !isComplete());
  setGenerationStamp(genStamp);
  List<ReplicaUnderConstruction> staleReplicas=uc.getStaleReplicas(genStamp);
  for (  ReplicaUnderConstruction r : staleReplicas) {
    r.getExpectedStorageLocation().removeBlock(this);
    NameNode.blockStateChangeLog.debug("BLOCK* Removing stale replica " + "from location: {}",r.getExpectedStorageLocation());
  }
}
