{
  Path file=new Path(testBaseDir1() + "/file");
  Path link=new Path(testBaseDir2() + "/linkToFile");
  createAndWriteFile(file);
  fc.delete(new Path(testBaseDir2()),true);
  try {
    fc.createSymlink(file,link,false);
    fail("Created link without first creating parent dir");
  }
 catch (  IOException x) {
  }
  assertFalse(fc.exists(new Path(testBaseDir2())));
  fc.createSymlink(file,link,true);
  readFile(link);
}
