{
  Path file1=getTestPath("file1");
  createFile(fc,file1);
  fc.deleteOnExit(file1);
  checkDeleteOnExitData(1,fc,file1);
  Assert.assertTrue(Runtime.getRuntime().removeShutdownHook(FileContext.finalizer));
  Path file2=getTestPath("dir1/file2");
  createFile(fc,file2);
  fc.deleteOnExit(file2);
  checkDeleteOnExitData(1,fc,file1,file2);
  Path dir=getTestPath("dir3/dir4/dir5/dir6");
  createFile(fc,dir);
  fc.deleteOnExit(dir);
  checkDeleteOnExitData(1,fc,file1,file2,dir);
  FileContext.finalizer.start();
  FileContext.finalizer.join();
  checkDeleteOnExitData(0,fc,new Path[0]);
  Assert.assertFalse(fc.exists(file1));
  Assert.assertFalse(fc.exists(file2));
  Assert.assertFalse(fc.exists(dir));
}
