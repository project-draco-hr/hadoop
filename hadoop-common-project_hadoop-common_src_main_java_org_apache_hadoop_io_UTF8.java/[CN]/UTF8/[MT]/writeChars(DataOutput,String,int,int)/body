{
  final int end=start + length;
  for (int i=start; i < end; i++) {
    int code=s.charAt(i);
    if (code <= 0x7F) {
      out.writeByte((byte)code);
    }
 else     if (code <= 0x07FF) {
      out.writeByte((byte)(0xC0 | ((code >> 6) & 0x1F)));
      out.writeByte((byte)(0x80 | code & 0x3F));
    }
 else {
      out.writeByte((byte)(0xE0 | ((code >> 12) & 0X0F)));
      out.writeByte((byte)(0x80 | ((code >> 6) & 0x3F)));
      out.writeByte((byte)(0x80 | (code & 0x3F)));
    }
  }
}
