{
  HttpServletRequest request=Mockito.mock(HttpServletRequest.class);
  HttpServletResponse response=Mockito.mock(HttpServletResponse.class);
  Mockito.reset(request);
  Mockito.when(request.getMethod()).thenReturn(method);
  Mockito.when(request.getParameter(HttpFSFileSystem.OP_PARAM)).thenReturn(operation);
  Mockito.when(request.getParameter(HttpFSParams.DataParam.NAME)).thenReturn(Boolean.toString(upload));
  Mockito.when(request.getContentType()).thenReturn(contentType);
  FilterChain chain=Mockito.mock(FilterChain.class);
  Filter filter=new CheckUploadContentTypeFilter();
  filter.doFilter(request,response,chain);
  if (error) {
    Mockito.verify(response).sendError(Mockito.eq(HttpServletResponse.SC_BAD_REQUEST),Mockito.contains("Data upload"));
  }
 else {
    Mockito.verify(chain).doFilter(request,response);
  }
}
