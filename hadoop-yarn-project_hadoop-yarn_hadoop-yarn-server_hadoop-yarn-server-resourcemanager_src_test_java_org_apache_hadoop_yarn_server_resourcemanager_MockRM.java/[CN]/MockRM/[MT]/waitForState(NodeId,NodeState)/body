{
  RMNode node=getRMContext().getRMNodes().get(nodeId);
  Assert.assertNotNull("node shouldn't be null",node);
  int timeWaiting=0;
  while (!finalState.equals(node.getState())) {
    if (timeWaiting >= TIMEOUT_MS_FOR_CONTAINER_AND_NODE) {
      break;
    }
    System.out.println("Node State is : " + node.getState() + " Waiting for state : "+ finalState);
    Thread.sleep(WAIT_MS_PER_LOOP);
    timeWaiting+=WAIT_MS_PER_LOOP;
  }
  System.out.println("Node State is : " + node.getState());
  Assert.assertEquals("Node state is not correct (timedout)",finalState,node.getState());
}
