{
  int timeWaiting=0;
  while (!finalState.equals(attempt.getAppAttemptState())) {
    if (timeWaiting >= timeoutMsecs) {
      break;
    }
    LOG.info("AppAttempt : " + attempt.getAppAttemptId() + " State is : "+ attempt.getAppAttemptState()+ " Waiting for state : "+ finalState);
    Thread.sleep(WAIT_MS_PER_LOOP);
    timeWaiting+=WAIT_MS_PER_LOOP;
  }
  LOG.info("Attempt State is : " + attempt.getAppAttemptState());
  Assert.assertEquals("Attempt state is not correct (timeout).",finalState,attempt.getState());
}
