{
  RMApp app=getRMContext().getRMApps().get(appId);
  Assert.assertNotNull(app);
  while (app.getAppAttempts().size() != attemptSize) {
    System.out.println("Application " + appId + " is waiting for AM to restart. Current has "+ app.getAppAttempts().size()+ " attempts.");
    Thread.sleep(WAIT_MS_PER_LOOP);
  }
  return launchAndRegisterAM(app,this,nm);
}
