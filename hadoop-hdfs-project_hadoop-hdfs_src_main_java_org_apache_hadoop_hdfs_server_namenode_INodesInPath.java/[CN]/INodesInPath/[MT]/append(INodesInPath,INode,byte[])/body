{
  Preconditions.checkArgument(!iip.isSnapshot && iip.length() > 0);
  Preconditions.checkArgument(iip.getLastINode() != null && iip.getLastINode().isDirectory());
  INode[] inodes=new INode[iip.length() + 1];
  System.arraycopy(iip.inodes,0,inodes,0,inodes.length - 1);
  inodes[inodes.length - 1]=child;
  byte[][] path=new byte[iip.path.length + 1][];
  System.arraycopy(iip.path,0,path,0,path.length - 1);
  path[path.length - 1]=childName;
  return new INodesInPath(inodes,path,false,iip.snapshotId);
}
