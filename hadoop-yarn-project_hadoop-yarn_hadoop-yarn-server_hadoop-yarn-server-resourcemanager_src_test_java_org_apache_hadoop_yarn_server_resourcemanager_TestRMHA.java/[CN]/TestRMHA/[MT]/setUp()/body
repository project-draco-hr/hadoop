{
  configuration.setBoolean(YarnConfiguration.RM_HA_ENABLED,true);
  configuration.set(YarnConfiguration.RM_HA_IDS,RM1_NODE_ID + "," + RM2_NODE_ID);
  for (  String confKey : YarnConfiguration.getServiceAddressConfKeys(configuration)) {
    configuration.set(HAUtil.addSuffix(confKey,RM1_NODE_ID),RM1_ADDRESS);
    configuration.set(HAUtil.addSuffix(confKey,RM2_NODE_ID),RM2_ADDRESS);
    configuration.set(HAUtil.addSuffix(confKey,RM3_NODE_ID),RM3_ADDRESS);
  }
  configuration.setBoolean(MockRM.ENABLE_WEBAPP,true);
  configuration.setBoolean(YarnConfiguration.YARN_ACL_ENABLE,true);
  ClusterMetrics.destroy();
  QueueMetrics.clearQueueMetrics();
  MetricsSystem ms=DefaultMetricsSystem.instance();
  if (ms.getSource("ClusterMetrics") != null) {
    DefaultMetricsSystem.shutdown();
  }
}
