{
  QueueMetrics oldMetrics=queue.getMetrics();
  QueueMetrics newMetrics=newQueue.getMetrics();
  for (  Map<String,ResourceRequest> asks : requests.values()) {
    ResourceRequest request=asks.get(ResourceRequest.ANY);
    if (request != null) {
      oldMetrics.decrPendingResources(user,request.getNumContainers(),request.getCapability());
      newMetrics.incrPendingResources(user,request.getNumContainers(),request.getCapability());
    }
  }
  oldMetrics.moveAppFrom(this);
  newMetrics.moveAppTo(this);
  activeUsersManager.deactivateApplication(user,applicationId);
  activeUsersManager=newQueue.getActiveUsersManager();
  activeUsersManager.activateApplication(user,applicationId);
  this.queue=newQueue;
  this.queueName=newQueue.getQueueName();
}
