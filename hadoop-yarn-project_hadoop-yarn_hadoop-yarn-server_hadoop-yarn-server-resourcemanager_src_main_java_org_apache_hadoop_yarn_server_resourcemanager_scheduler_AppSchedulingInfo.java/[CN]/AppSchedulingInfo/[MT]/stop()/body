{
  QueueMetrics metrics=queue.getMetrics();
  for (  Map<String,ResourceRequest> asks : resourceRequestMap.values()) {
    ResourceRequest request=asks.get(ResourceRequest.ANY);
    if (request != null) {
      metrics.decrPendingResources(user,request.getNumContainers(),request.getCapability());
      queue.decPendingResource(request.getNodeLabelExpression(),Resources.multiply(request.getCapability(),request.getNumContainers()));
    }
  }
  metrics.finishAppAttempt(applicationId,pending,user);
  clearRequests();
}
