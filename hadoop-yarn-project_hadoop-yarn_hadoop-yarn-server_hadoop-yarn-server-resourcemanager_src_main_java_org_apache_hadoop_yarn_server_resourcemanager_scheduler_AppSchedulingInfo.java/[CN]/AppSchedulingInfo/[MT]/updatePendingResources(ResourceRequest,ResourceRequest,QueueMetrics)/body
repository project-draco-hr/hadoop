{
  if (request.getNumContainers() <= 0) {
    LOG.info("checking for deactivate of application :" + this.applicationId);
    checkForDeactivation();
  }
  int lastRequestContainers=(lastRequest != null) ? lastRequest.getNumContainers() : 0;
  Resource lastRequestCapability=lastRequest != null ? lastRequest.getCapability() : Resources.none();
  metrics.incrPendingResources(user,request.getNumContainers(),request.getCapability());
  metrics.decrPendingResources(user,lastRequestContainers,lastRequestCapability);
  Resource increasedResource=Resources.multiply(request.getCapability(),request.getNumContainers());
  queue.incPendingResource(request.getNodeLabelExpression(),increasedResource);
  appResourceUsage.incPending(request.getNodeLabelExpression(),increasedResource);
  if (lastRequest != null) {
    Resource decreasedResource=Resources.multiply(lastRequestCapability,lastRequestContainers);
    queue.decPendingResource(lastRequest.getNodeLabelExpression(),decreasedResource);
    appResourceUsage.decPending(lastRequest.getNodeLabelExpression(),decreasedResource);
  }
}
