{
  LOG.trace("Entering getMetadata method.");
  UserGroupInformation user=HttpUserGroupInformation.get();
  KMSClientProvider.checkNotEmpty(name,"name");
  KMSWebApp.getAdminCallsMeter().mark();
  assertAccess(KMSACLs.Type.GET_METADATA,user,KMSOp.GET_METADATA,name);
  LOG.debug("Getting metadata for key with name {}.",name);
  KeyProvider.Metadata metadata=user.doAs(new PrivilegedExceptionAction<KeyProvider.Metadata>(){
    @Override public KeyProvider.Metadata run() throws Exception {
      return provider.getMetadata(name);
    }
  }
);
  Object json=KMSServerJSONUtils.toJSON(name,metadata);
  kmsAudit.ok(user,KMSOp.GET_METADATA,name,"");
  LOG.trace("Exiting getMetadata method.");
  return Response.ok().type(MediaType.APPLICATION_JSON).entity(json).build();
}
