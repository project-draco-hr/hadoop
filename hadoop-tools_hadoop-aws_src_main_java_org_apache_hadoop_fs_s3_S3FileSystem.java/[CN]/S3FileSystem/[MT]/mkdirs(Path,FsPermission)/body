{
  Path absolutePath=makeAbsolute(path);
  List<Path> paths=new ArrayList<Path>();
  do {
    paths.add(0,absolutePath);
    absolutePath=absolutePath.getParent();
  }
 while (absolutePath != null);
  boolean result=true;
  for (int i=0; i < paths.size(); i++) {
    Path p=paths.get(i);
    try {
      result&=mkdir(p);
    }
 catch (    FileAlreadyExistsException e) {
      if (i + 1 < paths.size()) {
        throw new ParentNotDirectoryException(e.getMessage());
      }
      throw e;
    }
  }
  return result;
}
