{
  EditLogOutputStream stm=createLogSegment();
  writeOp(stm,1);
  stm.setReadyToFlush();
  futureReturns(null).when(spyLoggers.get(0)).sendEdits(eq(1L),eq(1),Mockito.<byte[]>any());
  futureReturns(null).when(spyLoggers.get(1)).sendEdits(eq(1L),eq(1),Mockito.<byte[]>any());
  SettableFuture<Void> slowLog=SettableFuture.<Void>create();
  Mockito.doReturn(slowLog).when(spyLoggers.get(2)).sendEdits(eq(1L),eq(1),Mockito.<byte[]>any());
  stm.flush();
}
