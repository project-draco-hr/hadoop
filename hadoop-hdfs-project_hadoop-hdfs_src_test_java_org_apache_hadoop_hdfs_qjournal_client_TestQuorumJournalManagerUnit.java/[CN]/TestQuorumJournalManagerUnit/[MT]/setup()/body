{
  spyLoggers=ImmutableList.of(mockLogger(),mockLogger(),mockLogger());
  qjm=new QuorumJournalManager(conf,new URI("qjournal://host/jid"),FAKE_NSINFO){
    @Override protected List<AsyncLogger> createLoggers(){
      return spyLoggers;
    }
  }
;
  for (  AsyncLogger logger : spyLoggers) {
    futureReturns(GetJournalStateResponseProto.newBuilder().setLastPromisedEpoch(0).setHttpPort(-1).build()).when(logger).getJournalState();
    futureReturns(NewEpochResponseProto.newBuilder().build()).when(logger).newEpoch(Mockito.anyLong());
  }
  qjm.recoverUnfinalizedSegments();
}
