{
  JobQueuesManager mgr=scheduler.jobQueuesManager;
  JobInitializationPoller p=scheduler.getInitializationPoller();
  FakeJobInProgress job=taskTrackerManager.submitJob(JobStatus.PREP,1,1,"default","u1");
  p.selectJobsToInitialize();
  assertTrue("Waiting jobs list does not contain the job",mgr.getJobQueue("default").getWaitingJobs().contains(job));
  assertTrue("Initialized job does not contain the job",p.getInitializedJobList().contains(job.getJobID()));
  taskTrackerManager.finalizeJob(job,JobStatus.KILLED);
  assertFalse("Waiting jobs list contains failed job",mgr.getJobQueue("default").getWaitingJobs().contains(job));
  p.selectJobsToInitialize();
  assertFalse("Initialized jobs  contains failed job",p.getInitializedJobList().contains(job.getJobID()));
}
