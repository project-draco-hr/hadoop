{
  taskTrackerManager.addQueues(new String[]{"default"});
  ArrayList<FakeQueueInfo> queues=new ArrayList<FakeQueueInfo>();
  queues.add(new FakeQueueInfo("default",100.0f,true,25));
  JobConf conf=(JobConf)(scheduler.getConf());
  conf.set(JobConf.UPPER_LIMIT_ON_TASK_VMEM_PROPERTY,String.valueOf(1024 * 1024 * 3));
  scheduler.setTaskTrackerManager(taskTrackerManager);
  taskTrackerManager.setFakeQueues(queues);
  scheduler.start();
  assertEquals(MemoryMatcher.getLimitMaxMemForMapSlot(),3);
  assertEquals(MemoryMatcher.getLimitMaxMemForReduceSlot(),3);
}
