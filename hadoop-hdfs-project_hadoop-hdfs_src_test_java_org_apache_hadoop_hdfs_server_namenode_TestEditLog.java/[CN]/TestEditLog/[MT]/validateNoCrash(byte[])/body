{
  final String TEST_LOG_NAME="test_edit_log";
  EditLogFileOutputStream elfos=null;
  File file=null;
  EditLogFileInputStream elfis=null;
  try {
    file=new File(TEST_LOG_NAME);
    elfos=new EditLogFileOutputStream(file,0);
    elfos.create();
    elfos.writeRaw(garbage,0,garbage.length);
    elfos.setReadyToFlush();
    elfos.flushAndSync(true);
    elfos.close();
    elfos=null;
    file=new File(TEST_LOG_NAME);
    elfis=new EditLogFileInputStream(file);
    try {
      while (true) {
        FSEditLogOp op=elfis.readOp();
        if (op == null)         break;
      }
    }
 catch (    IOException e) {
    }
catch (    Throwable t) {
      fail("Caught non-IOException throwable " + StringUtils.stringifyException(t));
    }
  }
  finally {
    if ((elfos != null) && (elfos.isOpen()))     elfos.close();
    if (elfis != null)     elfis.close();
  }
}
