{
  final String TEST_LOG_NAME="test_edit_log";
  EditLogFileOutputStream elfos=null;
  File file=null;
  EditLogFileInputStream elfis=null;
  try {
    file=new File(TEST_LOG_NAME);
    elfos=new EditLogFileOutputStream(file,0);
    elfos.create();
    elfos.writeRaw(garbage,0,garbage.length);
    elfos.setReadyToFlush();
    elfos.flushAndSync();
    elfos.close();
    elfos=null;
    file=new File(TEST_LOG_NAME);
    elfis=new EditLogFileInputStream(file);
    try {
      while (true) {
        FSEditLogOp op=elfis.readOp();
        if (op == null)         break;
      }
    }
 catch (    IOException e) {
    }
catch (    Throwable t) {
      StringWriter sw=new StringWriter();
      t.printStackTrace(new PrintWriter(sw));
      fail("caught non-IOException throwable with message " + t.getMessage() + "\nstack trace\n"+ sw.toString());
    }
  }
  finally {
    if ((elfos != null) && (elfos.isOpen()))     elfos.close();
    if (elfis != null)     elfis.close();
  }
}
