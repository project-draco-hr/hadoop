{
  File logDir=new File(TEST_DIR,"testFailedOpen");
  logDir.mkdirs();
  FSEditLog log=FSImageTestUtil.createStandaloneEditLog(logDir);
  try {
    logDir.setWritable(false);
    log.openForWrite();
    fail("Did no throw exception on only having a bad dir");
  }
 catch (  IOException ioe) {
    GenericTestUtils.assertExceptionContains("no journals successfully started",ioe);
  }
 finally {
    logDir.setWritable(true);
    log.close();
  }
}
