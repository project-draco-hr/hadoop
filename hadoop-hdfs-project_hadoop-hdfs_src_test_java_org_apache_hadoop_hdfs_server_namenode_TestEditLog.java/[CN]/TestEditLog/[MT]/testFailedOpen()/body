{
  File logDir=new File(TEST_DIR,"testFailedOpen");
  logDir.mkdirs();
  FSEditLog log=FSImageTestUtil.createStandaloneEditLog(logDir);
  try {
    FileUtil.setWritable(logDir,false);
    log.openForWrite();
    fail("Did no throw exception on only having a bad dir");
  }
 catch (  IOException ioe) {
    GenericTestUtils.assertExceptionContains("too few journals successfully started",ioe);
  }
 finally {
    FileUtil.setWritable(logDir,true);
    log.close();
  }
}
