{
  RMContext rmContext=resourceManager.getRMContext();
  ApplicationId appId=attId.getApplicationId();
  RMApp rmApp=new RMAppImpl(appId,rmContext,conf,null,user,null,ApplicationSubmissionContext.newInstance(appId,null,queue,null,null,false,false,0,amResource,null),null,null,0,null,null,null);
  rmContext.getRMApps().put(appId,rmApp);
  RMAppEvent event=new RMAppEvent(appId,RMAppEventType.START);
  resourceManager.getRMContext().getRMApps().get(appId).handle(event);
  event=new RMAppEvent(appId,RMAppEventType.APP_NEW_SAVED);
  resourceManager.getRMContext().getRMApps().get(appId).handle(event);
  event=new RMAppEvent(appId,RMAppEventType.APP_ACCEPTED);
  resourceManager.getRMContext().getRMApps().get(appId).handle(event);
  AppAddedSchedulerEvent appAddedEvent=new AppAddedSchedulerEvent(appId,queue,user);
  scheduler.handle(appAddedEvent);
  AppAttemptAddedSchedulerEvent attempAddedEvent=new AppAttemptAddedSchedulerEvent(attId,false);
  scheduler.handle(attempAddedEvent);
}
