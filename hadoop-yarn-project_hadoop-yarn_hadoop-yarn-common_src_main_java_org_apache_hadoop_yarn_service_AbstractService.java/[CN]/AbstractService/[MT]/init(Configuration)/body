{
  if (conf == null) {
    throw new ServiceStateException("Cannot initialize service " + getName() + ": null configuration");
  }
  if (isInState(STATE.INITED)) {
    return;
  }
synchronized (stateChangeLock) {
    if (enterState(STATE.INITED) != STATE.INITED) {
      setConfig(conf);
      try {
        serviceInit(config);
        if (isInState(STATE.INITED)) {
          notifyListeners();
        }
      }
 catch (      Exception e) {
        noteFailure(e);
        ServiceOperations.stopQuietly(LOG,this);
        throw ServiceStateException.convert(e);
      }
    }
  }
}
