{
  checkDir(dir);
  IOException ex=null;
  try (DirectoryStream<java.nio.file.Path> stream=Files.newDirectoryStream(dir.toPath())){
    for (    java.nio.file.Path entry : stream) {
      File child=entry.toFile();
      if (child.isDirectory()) {
        checkDirs(child);
      }
    }
  }
 catch (  DirectoryIteratorException de) {
    ex=de.getCause();
  }
catch (  IOException ie) {
    ex=ie;
  }
  if (ex != null) {
    throw new DiskErrorException("I/O error when open a directory: " + dir.toString(),ex);
  }
}
