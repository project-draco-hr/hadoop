{
  NativeAzureFileSystem mockFs=Mockito.spy((NativeAzureFileSystem)fs);
  String path=mockFs.pathToKey(mockFs.makeAbsolute(new Path("root")));
  AzureFileSystemThreadPoolExecutor mockThreadPoolExecutor=Mockito.spy(mockFs.getThreadPoolExecutor(deleteThreads,"AzureBlobDeleteThread","Delete",path,NativeAzureFileSystem.AZURE_DELETE_THREADS));
  Mockito.when(mockThreadPoolExecutor.getThreadPool(7)).thenThrow(new Exception());
  Mockito.when(mockFs.getThreadPoolExecutor(deleteThreads,"AzureBlobDeleteThread","Delete",path,NativeAzureFileSystem.AZURE_DELETE_THREADS)).thenReturn(mockThreadPoolExecutor);
  validateDeleteFolder(mockFs,"root");
  String content=logs.getOutput();
  assertTrue(content.contains("Failed to create thread pool with threads"));
  assertTrue(content.contains("Serializing the Delete operation"));
}
