{
  BlacklistManager manager=new SimpleBlacklistManager(3,0.5);
  String anyNode="foo";
  String anyNode2="bar";
  manager.addNode(anyNode);
  BlacklistUpdates blacklist=manager.getBlacklistUpdates();
  List<String> blacklistAdditions=blacklist.getAdditions();
  Collections.sort(blacklistAdditions);
  List<String> blacklistRemovals=blacklist.getRemovals();
  String[] expectedBlacklistAdditions=new String[]{anyNode};
  Assert.assertArrayEquals("Blacklist additions was not as expected",expectedBlacklistAdditions,blacklistAdditions.toArray());
  Assert.assertTrue("Blacklist removals should be empty but was " + blacklistRemovals,blacklistRemovals.isEmpty());
  manager.addNode(anyNode2);
  blacklist=manager.getBlacklistUpdates();
  blacklistAdditions=blacklist.getAdditions();
  Collections.sort(blacklistAdditions);
  blacklistRemovals=blacklist.getRemovals();
  Collections.sort(blacklistRemovals);
  String[] expectedBlacklistRemovals=new String[]{anyNode2,anyNode};
  Assert.assertTrue("Blacklist additions should be empty but was " + blacklistAdditions,blacklistAdditions.isEmpty());
  Assert.assertArrayEquals("Blacklist removals was not as expected",expectedBlacklistRemovals,blacklistRemovals.toArray());
}
