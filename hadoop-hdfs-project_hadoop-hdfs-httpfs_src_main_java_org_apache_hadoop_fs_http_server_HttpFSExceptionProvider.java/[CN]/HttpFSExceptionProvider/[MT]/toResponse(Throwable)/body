{
  Response.Status status;
  if (throwable instanceof FileSystemAccessException) {
    throwable=throwable.getCause();
  }
  if (throwable instanceof ContainerException) {
    throwable=throwable.getCause();
  }
  if (throwable instanceof SecurityException) {
    status=Response.Status.UNAUTHORIZED;
  }
 else   if (throwable instanceof FileNotFoundException) {
    status=Response.Status.NOT_FOUND;
  }
 else   if (throwable instanceof IOException) {
    status=Response.Status.INTERNAL_SERVER_ERROR;
  }
 else   if (throwable instanceof UnsupportedOperationException) {
    status=Response.Status.BAD_REQUEST;
  }
 else   if (throwable instanceof IllegalArgumentException) {
    status=Response.Status.BAD_REQUEST;
  }
 else {
    status=Response.Status.INTERNAL_SERVER_ERROR;
  }
  return createResponse(status,throwable);
}
