{
  InputStream inStream=null;
  BufferedInputStream inBufStream=null;
  try {
    try {
      if (null == storageInteractionLayer) {
        final String errMsg=String.format("Storage session expected for URI '%s' but does not exist.",sessionUri);
        throw new AssertionError(errMsg);
      }
      checkContainer(ContainerAccessType.PureRead);
      CloudBlockBlobWrapper blob=getBlobReference(key);
      inStream=blob.openInputStream(getDownloadOptions(),getInstrumentedContext(isConcurrentOOBAppendAllowed()));
      inBufStream=new BufferedInputStream(inStream);
      DataInputStream inDataStream=new DataInputStream(inBufStream);
      return inDataStream;
    }
 catch (    Exception e) {
      if (inBufStream != null) {
        inBufStream.close();
      }
      if (inStream != null) {
        inStream.close();
      }
      throw e;
    }
  }
 catch (  Exception e) {
    throw new AzureException(e);
  }
}
