{
  List<File> curDirs=Lists.newArrayList();
  for (  String baseDir : baseDirs) {
    File curDir=new File(baseDir,"current");
    curDirs.add(curDir);
switch (nodeType) {
case NAME_NODE:
      FSImageTestUtil.assertReasonableNameCurrentDir(curDir);
    break;
case DATA_NODE:
  assertEquals(UpgradeUtilities.checksumContents(nodeType,curDir,false),UpgradeUtilities.checksumMasterDataNodeContents());
break;
}
}
FSImageTestUtil.assertParallelFilesAreIdentical(curDirs,Collections.<String>emptySet());
for (int i=0; i < baseDirs.length; i++) {
assertFalse(new File(baseDirs[i],"previous").isDirectory());
}
}
