{
  Map<String,String> params=new HashMap<String,String>();
  params.put(OP_PARAM,Operation.GETFILECHECKSUM.toString());
  HttpURLConnection conn=getConnection(Operation.GETFILECHECKSUM.getMethod(),params,f,true);
  HttpExceptionUtils.validateResponse(conn,HttpURLConnection.HTTP_OK);
  final JSONObject json=(JSONObject)((JSONObject)HttpFSUtils.jsonParse(conn)).get(FILE_CHECKSUM_JSON);
  return new FileChecksum(){
    @Override public String getAlgorithmName(){
      return (String)json.get(CHECKSUM_ALGORITHM_JSON);
    }
    @Override public int getLength(){
      return ((Long)json.get(CHECKSUM_LENGTH_JSON)).intValue();
    }
    @Override public byte[] getBytes(){
      return StringUtils.hexStringToByte((String)json.get(CHECKSUM_BYTES_JSON));
    }
    @Override public void write(    DataOutput out) throws IOException {
      throw new UnsupportedOperationException();
    }
    @Override public void readFields(    DataInput in) throws IOException {
      throw new UnsupportedOperationException();
    }
  }
;
}
