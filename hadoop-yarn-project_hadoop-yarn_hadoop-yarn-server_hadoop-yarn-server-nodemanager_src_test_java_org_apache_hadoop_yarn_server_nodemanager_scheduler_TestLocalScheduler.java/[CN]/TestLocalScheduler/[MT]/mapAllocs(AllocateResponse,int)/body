{
  Assert.assertEquals(expectedSize,allocateResponse.getAllocatedContainers().size());
  Map<NodeId,List<ContainerId>> allocs=new HashMap<>();
  for (  Container c : allocateResponse.getAllocatedContainers()) {
    ContainerTokenIdentifier cTokId=BuilderUtils.newContainerTokenIdentifier(c.getContainerToken());
    Assert.assertEquals(c.getNodeId().getHost() + ":" + c.getNodeId().getPort(),cTokId.getNmHostAddress());
    List<ContainerId> cIds=allocs.get(c.getNodeId());
    if (cIds == null) {
      cIds=new ArrayList<>();
      allocs.put(c.getNodeId(),cIds);
    }
    cIds.add(c.getId());
  }
  return allocs;
}
