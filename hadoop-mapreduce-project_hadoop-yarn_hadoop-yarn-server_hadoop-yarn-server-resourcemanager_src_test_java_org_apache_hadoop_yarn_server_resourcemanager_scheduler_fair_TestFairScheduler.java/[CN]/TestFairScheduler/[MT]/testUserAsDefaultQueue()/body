{
  Configuration conf=new Configuration();
  conf.set(FairSchedulerConfiguration.USER_AS_DEFAULT_QUEUE,"true");
  scheduler.reinitialize(conf,null,resourceManager.getRMContext());
  AppAddedSchedulerEvent appAddedEvent=new AppAddedSchedulerEvent(createAppAttemptId(1,1),"default","user1");
  scheduler.handle(appAddedEvent);
  assertEquals(1,scheduler.getQueueManager().getQueue("user1").getApplications().size());
  assertEquals(0,scheduler.getQueueManager().getQueue("default").getApplications().size());
  conf.set(FairSchedulerConfiguration.USER_AS_DEFAULT_QUEUE,"false");
  scheduler.reinitialize(conf,null,resourceManager.getRMContext());
  AppAddedSchedulerEvent appAddedEvent2=new AppAddedSchedulerEvent(createAppAttemptId(2,1),"default","user2");
  scheduler.handle(appAddedEvent2);
  assertEquals(1,scheduler.getQueueManager().getQueue("user1").getApplications().size());
  assertEquals(1,scheduler.getQueueManager().getQueue("default").getApplications().size());
  assertEquals(0,scheduler.getQueueManager().getQueue("user2").getApplications().size());
}
