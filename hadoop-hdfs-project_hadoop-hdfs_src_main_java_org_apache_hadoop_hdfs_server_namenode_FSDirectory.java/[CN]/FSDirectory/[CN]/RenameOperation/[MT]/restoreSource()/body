{
  final INode oldSrcChild=srcChild;
  if (withCount == null) {
    srcChild.setLocalName(srcChildName);
  }
 else   if (!srcChildIsReference) {
    srcChild=withCount.getReferredINode();
    srcChild.setLocalName(srcChildName);
  }
 else {
    withCount.removeReference(oldSrcChild.asReference());
    srcChild=new INodeReference.DstReference(srcParent,withCount,srcRefDstSnapshot);
    withCount.getReferredINode().setLocalName(srcChildName);
  }
  if (isSrcInSnapshot) {
    srcParent.undoRename4ScrParent(oldSrcChild.asReference(),srcChild);
  }
 else {
    addLastINodeNoQuotaCheck(srcIIP,srcChild);
  }
}
