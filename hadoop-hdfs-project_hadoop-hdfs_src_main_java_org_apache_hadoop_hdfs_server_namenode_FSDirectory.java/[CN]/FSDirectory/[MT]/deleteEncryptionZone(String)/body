{
  writeLock();
  try {
    if (isNonEmptyDirectory(src)) {
      throw new IOException("Attempt to delete an encryption zone for a non-empty directory.");
    }
    final XAttr keyIdXAttr=XAttrHelper.buildXAttr(CRYPTO_XATTR_KEY_ID,null);
    final XAttr removedXAttr=unprotectedRemoveXAttr(src,keyIdXAttr);
    if (removedXAttr == null) {
      throw new IOException(src + " does not appear to be the root of an encryption zone");
    }
    return removedXAttr;
  }
  finally {
    writeUnlock();
  }
}
