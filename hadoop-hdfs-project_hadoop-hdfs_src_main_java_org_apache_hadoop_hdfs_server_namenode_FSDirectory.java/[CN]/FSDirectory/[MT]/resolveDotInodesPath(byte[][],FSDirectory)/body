{
  final String inodeId=DFSUtil.bytes2String(pathComponents[3]);
  final long id;
  try {
    id=Long.parseLong(inodeId);
  }
 catch (  NumberFormatException e) {
    throw new FileNotFoundException("Invalid inode path: " + DFSUtil.byteArray2PathString(pathComponents));
  }
  if (id == INodeId.ROOT_INODE_ID && pathComponents.length == 4) {
    return new byte[][]{INodeDirectory.ROOT_NAME};
  }
  INode inode=fsd.getInode(id);
  if (inode == null) {
    throw new FileNotFoundException("File for given inode path does not exist: " + DFSUtil.byteArray2PathString(pathComponents));
  }
  if ((pathComponents.length > 4) && Arrays.equals(pathComponents[4],DOT_DOT)) {
    INode parent=inode.getParent();
    if (parent == null || parent.getId() == INodeId.ROOT_INODE_ID) {
      return new byte[][]{INodeDirectory.ROOT_NAME};
    }
    return parent.getPathComponents();
  }
  return constructRemainingPath(inode.getPathComponents(),pathComponents,4);
}
