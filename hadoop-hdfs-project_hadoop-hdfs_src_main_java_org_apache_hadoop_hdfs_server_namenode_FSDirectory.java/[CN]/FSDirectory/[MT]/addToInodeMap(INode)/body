{
  if (inode instanceof INodeWithAdditionalFields) {
    inodeMap.put(inode);
    if (!inode.isSymlink()) {
      final XAttrFeature xaf=inode.getXAttrFeature();
      if (xaf != null) {
        XAttr xattr=xaf.getXAttr(CRYPTO_XATTR_ENCRYPTION_ZONE);
        if (xattr != null) {
          try {
            final HdfsProtos.ZoneEncryptionInfoProto ezProto=HdfsProtos.ZoneEncryptionInfoProto.parseFrom(xattr.getValue());
            ezManager.unprotectedAddEncryptionZone(inode.getId(),PBHelper.convert(ezProto.getSuite()),PBHelper.convert(ezProto.getCryptoProtocolVersion()),ezProto.getKeyName());
          }
 catch (          InvalidProtocolBufferException e) {
            NameNode.LOG.warn("Error parsing protocol buffer of " + "EZ XAttr " + xattr.getName());
          }
        }
      }
    }
  }
}
