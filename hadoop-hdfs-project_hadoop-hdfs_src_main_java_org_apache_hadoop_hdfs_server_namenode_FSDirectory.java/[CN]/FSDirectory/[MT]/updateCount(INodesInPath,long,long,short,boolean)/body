{
  final INodeFile fileINode=iip.getLastINode().asFile();
  EnumCounters<StorageType> typeSpaceDeltas=getStorageTypeDeltas(fileINode.getStoragePolicyID(),dsDelta,replication,replication);
  ;
  updateCount(iip,iip.length() - 1,new QuotaCounts.Builder().nameCount(nsDelta).spaceCount(dsDelta * replication).typeCounts(typeSpaceDeltas).build(),checkQuota);
}
