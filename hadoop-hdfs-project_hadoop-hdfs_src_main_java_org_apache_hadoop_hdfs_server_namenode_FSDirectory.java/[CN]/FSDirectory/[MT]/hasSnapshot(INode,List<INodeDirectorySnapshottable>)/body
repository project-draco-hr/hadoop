{
  if (target.isDirectory()) {
    INodeDirectory targetDir=target.asDirectory();
    if (targetDir.isSnapshottable()) {
      INodeDirectorySnapshottable ssTargetDir=(INodeDirectorySnapshottable)targetDir;
      if (ssTargetDir.getNumSnapshots() > 0) {
        return target;
      }
 else {
        snapshottableDirs.add(ssTargetDir);
      }
    }
    for (    INode child : targetDir.getChildrenList(null)) {
      INode snapshotDir=hasSnapshot(child,snapshottableDirs);
      if (snapshotDir != null) {
        return snapshotDir;
      }
    }
  }
  return null;
}
