{
  final INode[] inodes=inodesInPath.getINodes();
  final int pos=inodes.length - 1;
  INode removedNode=((INodeDirectory)inodes[pos - 1]).removeChild(inodes[pos]);
  if (removedNode != null) {
    INode.DirCounts counts=new INode.DirCounts();
    removedNode.spaceConsumedInTree(counts);
    updateCountNoQuotaCheck(inodesInPath,pos,-counts.getNsCount(),-counts.getDsCount());
    removeFromInodeMap(removedNode);
  }
  return removedNode;
}
