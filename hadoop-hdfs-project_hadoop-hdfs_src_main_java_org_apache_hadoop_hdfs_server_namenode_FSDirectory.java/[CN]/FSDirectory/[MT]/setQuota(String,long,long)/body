{
  writeLock();
  try {
    INodeDirectory dir=unprotectedSetQuota(src,nsQuota,dsQuota);
    if (dir != null) {
      final Quota.Counts q=dir.getQuotaCounts();
      fsImage.getEditLog().logSetQuota(src,q.get(Quota.NAMESPACE),q.get(Quota.DISKSPACE));
    }
  }
  finally {
    writeUnlock();
  }
}
