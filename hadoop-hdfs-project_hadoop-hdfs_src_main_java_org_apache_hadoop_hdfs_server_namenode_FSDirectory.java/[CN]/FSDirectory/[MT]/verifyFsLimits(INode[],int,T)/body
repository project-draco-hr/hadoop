{
  boolean includeChildName=false;
  try {
    if (maxComponentLength != 0) {
      int length=child.getLocalName().length();
      if (length > maxComponentLength) {
        includeChildName=true;
        throw new PathComponentTooLongException(maxComponentLength,length);
      }
    }
    if (maxDirItems != 0) {
      INodeDirectory parent=(INodeDirectory)pathComponents[pos - 1];
      int count=parent.getChildrenList(null).size();
      if (count >= maxDirItems) {
        throw new MaxDirectoryItemsExceededException(maxDirItems,count);
      }
    }
  }
 catch (  FSLimitException e) {
    String badPath=getFullPathName(pathComponents,pos - 1);
    if (includeChildName) {
      badPath+=Path.SEPARATOR + child.getLocalName();
    }
    e.setPathName(badPath);
    if (ready)     throw (e);
    NameNode.LOG.error("FSDirectory.verifyFsLimits - " + e.getLocalizedMessage());
  }
}
