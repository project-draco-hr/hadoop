{
  if (target instanceof INodeDirectory) {
    INodeDirectory targetDir=(INodeDirectory)target;
    if (targetDir.isSnapshottable() && ((INodeDirectorySnapshottable)targetDir).getNumSnapshots() > 0) {
      return target;
    }
    for (    INode child : targetDir.getChildren()) {
      INode snapshotDir=hasSnapshot(child);
      if (snapshotDir != null) {
        return snapshotDir;
      }
    }
  }
  return null;
}
