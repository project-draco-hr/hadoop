{
  if (target instanceof INodeDirectory) {
    INodeDirectory targetDir=(INodeDirectory)target;
    if (targetDir.isSnapshottable() && ((INodeDirectorySnapshottable)targetDir).getNumSnapshots() > 0) {
      return target;
    }
    List<INode> children=targetDir.getChildren();
    if (children != null) {
      for (      INode child : children) {
        INode snapshotDir=hasSnapshot(child);
        if (snapshotDir != null) {
          return snapshotDir;
        }
      }
    }
  }
  return null;
}
