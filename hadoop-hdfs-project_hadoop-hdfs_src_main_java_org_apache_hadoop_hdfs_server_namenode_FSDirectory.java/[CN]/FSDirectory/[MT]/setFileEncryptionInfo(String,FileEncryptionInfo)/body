{
  final HdfsProtos.PerFileEncryptionInfoProto proto=PBHelper.convertPerFileEncInfo(info);
  final byte[] protoBytes=proto.toByteArray();
  final XAttr fileEncryptionAttr=XAttrHelper.buildXAttr(CRYPTO_XATTR_FILE_ENCRYPTION_INFO,protoBytes);
  final List<XAttr> xAttrs=Lists.newArrayListWithCapacity(1);
  xAttrs.add(fileEncryptionAttr);
  writeLock();
  try {
    FSDirXAttrOp.unprotectedSetXAttrs(this,src,xAttrs,EnumSet.of(XAttrSetFlag.CREATE));
  }
  finally {
    writeUnlock();
  }
}
