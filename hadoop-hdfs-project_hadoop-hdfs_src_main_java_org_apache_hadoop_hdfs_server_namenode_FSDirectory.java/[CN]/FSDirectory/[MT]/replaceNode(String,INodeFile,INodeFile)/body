{
  writeLock();
  try {
    replaceINodeUnsynced(path,oldnode,newnode);
    int index=0;
    for (    BlockInfo b : newnode.getBlocks()) {
      BlockInfo info=getBlockManager().addBlockCollection(b,newnode);
      newnode.setBlock(index,info);
      index++;
    }
  }
  finally {
    writeUnlock();
  }
}
