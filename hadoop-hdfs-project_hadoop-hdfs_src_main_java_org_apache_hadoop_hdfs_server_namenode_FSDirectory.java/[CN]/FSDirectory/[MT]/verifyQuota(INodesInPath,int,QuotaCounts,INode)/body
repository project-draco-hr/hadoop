{
  if (deltas.getNameSpace() <= 0 && deltas.getDiskSpace() <= 0 && deltas.getTypeSpaces().allLessOrEqual(0L)) {
    return;
  }
  for (int i=(pos > iip.length() ? iip.length() : pos) - 1; i >= 0; i--) {
    if (commonAncestor == iip.getINode(i)) {
      return;
    }
    final DirectoryWithQuotaFeature q=iip.getINode(i).asDirectory().getDirectoryWithQuotaFeature();
    if (q != null) {
      try {
        q.verifyQuota(deltas);
      }
 catch (      QuotaExceededException e) {
        List<INode> inodes=iip.getReadOnlyINodes();
        final String path=getFullPathName(inodes.toArray(new INode[inodes.size()]),i);
        e.setPathName(path);
        throw e;
      }
    }
  }
}
