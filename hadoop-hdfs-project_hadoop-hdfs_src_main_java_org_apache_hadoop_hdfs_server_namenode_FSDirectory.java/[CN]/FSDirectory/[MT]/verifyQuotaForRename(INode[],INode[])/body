{
  if (!namesystem.isImageLoaded() || skipQuotaCheck) {
    return;
  }
  int i=0;
  while (src[i] == dst[i]) {
    i++;
  }
  final Quota.Counts delta=src[src.length - 1].computeQuotaUsage();
  final int dstIndex=dst.length - 1;
  if (dst[dstIndex] != null) {
    delta.subtract(dst[dstIndex].computeQuotaUsage());
  }
  verifyQuota(dst,dstIndex,delta.get(Quota.NAMESPACE),delta.get(Quota.DISKSPACE),src[i - 1]);
}
