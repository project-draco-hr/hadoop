{
  Preconditions.checkState(hasWriteLock());
  oldnode.getParent().replaceChild(oldnode,newnode);
  oldnode.clear();
  int index=0;
  for (  BlockInfo b : newnode.getBlocks()) {
    BlockInfo info=getBlockManager().addBlockCollection(b,newnode);
    newnode.setBlock(index,info);
    index++;
  }
}
