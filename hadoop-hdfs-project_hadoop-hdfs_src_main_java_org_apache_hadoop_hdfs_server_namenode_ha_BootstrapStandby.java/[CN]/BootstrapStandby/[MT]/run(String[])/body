{
  SecurityUtil.initKrb5CipherSuites();
  parseArgs(args);
  parseConfAndFindOtherNN();
  NameNode.checkAllowFormat(conf);
  InetSocketAddress myAddr=NameNode.getAddress(conf);
  SecurityUtil.login(conf,DFS_NAMENODE_KEYTAB_FILE_KEY,DFS_NAMENODE_USER_NAME_KEY,myAddr.getHostName());
  return SecurityUtil.doAsLoginUserOrFatal(new PrivilegedAction<Integer>(){
    @Override public Integer run(){
      try {
        return doRun();
      }
 catch (      IOException e) {
        throw new RuntimeException(e);
      }
    }
  }
);
}
