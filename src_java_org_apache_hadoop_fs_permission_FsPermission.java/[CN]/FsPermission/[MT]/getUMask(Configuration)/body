{
  int umask=DEFAULT_UMASK;
  if (conf != null) {
    String confUmask=conf.get(UMASK_LABEL);
    if (confUmask != null) {
      if (conf.deprecatedKeyWasSet(DEPRECATED_UMASK_LABEL))       umask=Integer.parseInt(confUmask);
 else       umask=new UmaskParser(confUmask).getUMask();
    }
  }
  return new FsPermission((short)umask);
}
