{
  ECSchema defaultSchema=ErasureCodingSchemaManager.getSystemDefaultSchema();
  INodeFile inf=createStripedINodeFile();
  inf.addStripedBlocksFeature();
  Block blk1=new Block(1);
  BlockInfoStriped blockInfoStriped1=new BlockInfoStriped(blk1,(short)defaultSchema.getNumDataUnits(),(short)defaultSchema.getNumParityUnits());
  blockInfoStriped1.setNumBytes(1);
  Block blk2=new Block(2);
  BlockInfoStriped blockInfoStriped2=new BlockInfoStriped(blk2,(short)defaultSchema.getNumDataUnits(),(short)defaultSchema.getNumParityUnits());
  blockInfoStriped2.setNumBytes(1);
  inf.addBlock(blockInfoStriped1);
  inf.addBlock(blockInfoStriped2);
  assertEquals(4 * 2,inf.storagespaceConsumedWithStriped(null));
  assertEquals(4 * 2,inf.storagespaceConsumed(null));
}
