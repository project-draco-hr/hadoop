{
  ECSchema defaultSchema=ErasureCodingSchemaManager.getSystemDefaultSchema();
  INodeFile inf=createStripedINodeFile();
  inf.addStripedBlocksFeature();
  Block blk=new Block(1);
  BlockInfoStripedUnderConstruction bInfoStripedUC=new BlockInfoStripedUnderConstruction(blk,(short)defaultSchema.getNumDataUnits(),(short)defaultSchema.getNumParityUnits());
  bInfoStripedUC.setNumBytes(100);
  inf.addBlock(bInfoStripedUC);
  QuotaCounts counts=inf.computeQuotaUsageWithStriped(defaultPolicy,new QuotaCounts.Builder().build());
  assertEquals(1024,inf.getPreferredBlockSize());
  assertEquals(1,counts.getNameSpace());
  assertEquals(9216,counts.getStorageSpace());
}
