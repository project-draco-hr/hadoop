{
  if (snapshot != null && this instanceof INodeFileWithSnapshot) {
    final FileDiff d=((INodeFileWithSnapshot)this).getDiffs().getDiff(snapshot);
    if (d != null) {
      return d.getFileSize();
    }
  }
  return computeFileSize(true,false);
}
