{
  FileWithSnapshotFeature sf=getFileWithSnapshotFeature();
  if (sf == null) {
    return null;
  }
  BlockInfo[] snapshotBlocks=getDiffs().findEarlierSnapshotBlocks(snapshotId);
  if (snapshotBlocks == null) {
    return null;
  }
  Set<BlockInfo> toRetain=new HashSet<>(snapshotBlocks.length);
  Collections.addAll(toRetain,snapshotBlocks);
  return toRetain;
}
