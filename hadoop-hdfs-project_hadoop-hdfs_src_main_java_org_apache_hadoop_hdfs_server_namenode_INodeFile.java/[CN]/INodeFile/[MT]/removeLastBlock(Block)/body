{
  Preconditions.checkState(isUnderConstruction(),"file is no longer under construction");
  if (blocks == null || blocks.length == 0) {
    return null;
  }
  int size_1=blocks.length - 1;
  if (!blocks[size_1].equals(oldblock)) {
    return null;
  }
  BlockInfoContiguousUnderConstruction uc=(BlockInfoContiguousUnderConstruction)blocks[size_1];
  BlockInfo[] newlist=new BlockInfo[size_1];
  System.arraycopy(blocks,0,newlist,0,size_1);
  setBlocks(newlist);
  return uc;
}
