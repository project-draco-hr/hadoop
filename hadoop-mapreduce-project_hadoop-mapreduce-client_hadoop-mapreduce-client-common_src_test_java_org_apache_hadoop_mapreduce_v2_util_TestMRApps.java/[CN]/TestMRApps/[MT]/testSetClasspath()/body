{
  Job job=Job.getInstance();
  Map<String,String> environment=new HashMap<String,String>();
  MRApps.setClasspath(environment,job.getConfiguration());
  assertTrue(environment.get("CLASSPATH").startsWith(ApplicationConstants.Environment.PWD.$() + File.pathSeparator));
  String yarnAppClasspath=job.getConfiguration().get(YarnConfiguration.YARN_APPLICATION_CLASSPATH,StringUtils.join(",",YarnConfiguration.DEFAULT_YARN_APPLICATION_CLASSPATH));
  if (yarnAppClasspath != null) {
    yarnAppClasspath=yarnAppClasspath.replaceAll(",\\s*",File.pathSeparator).trim();
  }
  assertTrue(environment.get("CLASSPATH").contains(yarnAppClasspath));
  String mrAppClasspath=job.getConfiguration().get(MRJobConfig.MAPREDUCE_APPLICATION_CLASSPATH,MRJobConfig.DEFAULT_MAPREDUCE_APPLICATION_CLASSPATH);
  if (mrAppClasspath != null) {
    mrAppClasspath=mrAppClasspath.replaceAll(",\\s*",File.pathSeparator).trim();
  }
  assertTrue(environment.get("CLASSPATH").contains(mrAppClasspath));
}
