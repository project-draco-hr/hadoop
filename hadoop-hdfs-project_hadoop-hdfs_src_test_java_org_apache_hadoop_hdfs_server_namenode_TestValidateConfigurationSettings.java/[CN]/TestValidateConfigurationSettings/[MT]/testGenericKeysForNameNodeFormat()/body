{
  Configuration conf=new HdfsConfiguration();
  conf.set(DFSConfigKeys.DFS_NAMENODE_RPC_ADDRESS_KEY,"127.0.0.1:0");
  conf.set(DFSConfigKeys.DFS_NAMENODE_HTTP_ADDRESS_KEY,"127.0.0.1:0");
  conf.set(DFSConfigKeys.DFS_NAMESERVICES,"ns1");
  File dir=new File(MiniDFSCluster.getBaseDirectory(),"testGenericKeysForNameNodeFormat");
  if (dir.exists()) {
    FileUtil.fullyDelete(dir);
  }
  conf.set(DFSConfigKeys.DFS_NAMENODE_NAME_DIR_KEY + ".ns1",dir.getAbsolutePath());
  DFSTestUtil.formatNameNode(conf);
  GenericTestUtils.assertExists(dir);
  NameNode nameNode=new NameNode(conf);
  nameNode.stop();
}
