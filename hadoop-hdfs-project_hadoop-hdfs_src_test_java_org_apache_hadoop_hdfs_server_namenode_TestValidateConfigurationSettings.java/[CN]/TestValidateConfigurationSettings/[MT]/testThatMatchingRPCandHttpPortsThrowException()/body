{
  Configuration conf=new HdfsConfiguration();
  File nameDir=new File(MiniDFSCluster.getBaseDirectory(),"name");
  conf.set(DFSConfigKeys.DFS_NAMENODE_NAME_DIR_KEY,nameDir.getAbsolutePath());
  FileSystem.setDefaultUri(conf,"hdfs://localhost:9000");
  conf.set(DFSConfigKeys.DFS_NAMENODE_HTTP_ADDRESS_KEY,"127.0.0.1:9000");
  DFSTestUtil.formatNameNode(conf);
  try {
    NameNode nameNode=new NameNode(conf);
    fail("Should have throw the exception since the ports match");
  }
 catch (  IOException e) {
    assertTrue(e.toString().contains("dfs.namenode.rpc-address ("));
    System.out.println("Got expected exception: " + e.toString());
  }
}
