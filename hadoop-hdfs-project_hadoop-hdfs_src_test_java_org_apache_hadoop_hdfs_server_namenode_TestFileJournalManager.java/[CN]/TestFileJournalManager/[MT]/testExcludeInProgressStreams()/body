{
  File f=new File(TestEditLog.TEST_DIR + "/filejournaltest2");
  NNStorage storage=setupEdits(Collections.<URI>singletonList(f.toURI()),10,false);
  StorageDirectory sd=storage.dirIterator(NameNodeDirType.EDITS).next();
  FileJournalManager jm=new FileJournalManager(conf,sd,storage);
  assertEquals(100,getNumberOfTransactions(jm,1,false,false));
  EditLogInputStream elis=getJournalInputStream(jm,90,false);
  FSEditLogOp lastReadOp=null;
  while ((lastReadOp=elis.readOp()) != null) {
    assertTrue(lastReadOp.getTransactionId() <= 100);
  }
}
