{
  ContainerId cId=ContainerId.newContainerId(id,idCounter.generateContainerId());
  Resource capability=normalizeCapability(appParams,rr);
  long currTime=System.currentTimeMillis();
  ContainerTokenIdentifier containerTokenIdentifier=new ContainerTokenIdentifier(cId,0,nodeId.getHost() + ":" + nodeId.getPort(),userName,capability,currTime + appParams.containerTokenExpiryInterval,tokenSecretManager.getCurrentKey().getKeyId(),rmIdentifier,rr.getPriority(),currTime,null,CommonNodeLabelsManager.NO_LABEL,ContainerType.TASK,ExecutionType.OPPORTUNISTIC);
  byte[] pwd=tokenSecretManager.createPassword(containerTokenIdentifier);
  Token containerToken=newContainerToken(nodeId,pwd,containerTokenIdentifier);
  Container container=BuilderUtils.newContainer(cId,nodeId,nodeId.getHost() + ":" + webpagePort,capability,rr.getPriority(),containerToken,containerTokenIdentifier.getExecutionType(),rr.getAllocationRequestId());
  return container;
}
