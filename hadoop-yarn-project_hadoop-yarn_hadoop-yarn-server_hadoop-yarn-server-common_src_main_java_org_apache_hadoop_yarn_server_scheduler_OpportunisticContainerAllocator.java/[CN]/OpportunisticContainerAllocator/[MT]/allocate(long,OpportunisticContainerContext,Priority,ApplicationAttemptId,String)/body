{
  Map<Resource,List<Container>> containers=new HashMap<>();
  for (  ResourceRequest anyAsk : appContext.getOutstandingOpReqs().get(priority).values()) {
    allocateContainersInternal(rmIdentifier,appContext.getAppParams(),appContext.getContainerIdGenerator(),appContext.getBlacklist(),appAttId,appContext.getNodeMap(),userName,containers,anyAsk);
    LOG.info("Opportunistic allocation requested for [" + "priority=" + anyAsk.getPriority() + ", num_containers="+ anyAsk.getNumContainers()+ ", capability="+ anyAsk.getCapability()+ "]"+ " allocated = "+ containers.get(anyAsk.getCapability()).size());
  }
  return containers;
}
