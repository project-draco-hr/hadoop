{
  if (!hdfsDir.mkdirs()) {
    fail("Failed to create dir " + hdfsDir.getPath());
  }
  String myId="testFormatWithForceAndClusterId";
  String[] argv={"-format","-force","-clusterid",myId};
  try {
    NameNode.createNameNode(argv,config);
    fail("createNameNode() did not call System.exit()");
  }
 catch (  ExitException e) {
    assertEquals("Format should have succeeded",0,e.status);
  }
  String cId=getClusterId(config);
  assertEquals("ClusterIds do not match",myId,cId);
}
