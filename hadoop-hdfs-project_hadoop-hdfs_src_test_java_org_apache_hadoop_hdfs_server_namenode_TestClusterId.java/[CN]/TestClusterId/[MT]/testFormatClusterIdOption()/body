{
  Configuration config=new Configuration();
  config.set(DFS_NAMENODE_NAME_DIR_KEY,new File(hdfsDir,"name").getPath());
  NameNode.format(config);
  String cid=getClusterId(config);
  assertTrue("Didn't get new ClusterId",(cid != null && !cid.equals("")));
  StartupOption.FORMAT.setClusterId("mycluster");
  NameNode.format(config);
  cid=getClusterId(config);
  assertTrue("ClusterId didn't match",cid.equals("mycluster"));
  StartupOption.FORMAT.setClusterId("");
  NameNode.format(config);
  String newCid=getClusterId(config);
  assertFalse("ClusterId should not be the same",newCid.equals(cid));
}
