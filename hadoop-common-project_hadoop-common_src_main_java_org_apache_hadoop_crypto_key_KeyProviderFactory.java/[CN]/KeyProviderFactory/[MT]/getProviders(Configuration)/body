{
  List<KeyProvider> result=new ArrayList<KeyProvider>();
  for (  String path : conf.getStringCollection(KEY_PROVIDER_PATH)) {
    try {
      URI uri=new URI(path);
      boolean found=false;
      for (      KeyProviderFactory factory : serviceLoader) {
        KeyProvider kp=factory.createProvider(uri,conf);
        if (kp != null) {
          result.add(kp);
          found=true;
          break;
        }
      }
      if (!found) {
        throw new IOException("No KeyProviderFactory for " + uri + " in "+ KEY_PROVIDER_PATH);
      }
    }
 catch (    URISyntaxException error) {
      throw new IOException("Bad configuration of " + KEY_PROVIDER_PATH + " at "+ path,error);
    }
  }
  return result;
}
