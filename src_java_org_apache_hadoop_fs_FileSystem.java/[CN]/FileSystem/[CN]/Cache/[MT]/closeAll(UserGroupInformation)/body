{
  List<FileSystem> targetFSList=new ArrayList<FileSystem>();
  for (  Map.Entry<Key,FileSystem> entry : map.entrySet()) {
    final Key key=entry.getKey();
    final FileSystem fs=entry.getValue();
    if (ugi.equals(key.ugi) && fs != null) {
      targetFSList.add(fs);
    }
  }
  List<IOException> exceptions=new ArrayList<IOException>();
  for (  FileSystem fs : targetFSList) {
    try {
      fs.close();
    }
 catch (    IOException ioe) {
      exceptions.add(ioe);
    }
  }
  if (!exceptions.isEmpty()) {
    throw MultipleIOException.createIOException(exceptions);
  }
}
