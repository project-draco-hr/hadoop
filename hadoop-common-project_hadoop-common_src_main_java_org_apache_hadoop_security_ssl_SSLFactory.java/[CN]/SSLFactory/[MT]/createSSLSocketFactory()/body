{
  if (mode != Mode.CLIENT) {
    throw new IllegalStateException("Factory is not in CLIENT mode. Actual mode is " + mode.toString());
  }
  return context.getSocketFactory();
}
