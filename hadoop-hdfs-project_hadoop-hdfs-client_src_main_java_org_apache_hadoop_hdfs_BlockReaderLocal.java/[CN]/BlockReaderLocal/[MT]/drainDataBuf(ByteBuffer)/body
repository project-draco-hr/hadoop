{
  if (dataBuf == null)   return -1;
  int oldLimit=dataBuf.limit();
  int nRead=Math.min(dataBuf.remaining(),buf.remaining());
  if (nRead == 0) {
    return (dataBuf.remaining() == 0) ? -1 : 0;
  }
  try {
    dataBuf.limit(dataBuf.position() + nRead);
    buf.put(dataBuf);
  }
  finally {
    dataBuf.limit(oldLimit);
  }
  return nRead;
}
