{
  scheduler=new CapacityTaskScheduler();
  taskTrackerManager=new FakeTaskTrackerManager(numTTs,numMapsPerTT,numReducesPerTT);
  taskTrackerManager.setQueueManager(new QueueManager());
  scheduler.setTaskTrackerManager(taskTrackerManager);
  scheduler.setConf(new Configuration());
  ControlledInitializationPoller controlledInitializationPoller=new ControlledInitializationPoller(scheduler.jobQueuesManager,taskTrackerManager);
  scheduler.setInitializationPoller(controlledInitializationPoller);
  taskTrackerManager.addJobInProgressListener(scheduler.jobQueuesManager);
  scheduler.start();
}
