{
  int allocatedContainerCount=0;
  while (iterationsLeft-- > 0) {
    Log.info(" == alloc " + allocatedContainerCount + " it left "+ iterationsLeft);
    AllocateResponse allocResponse=amClient.allocate(0.1f);
    assertTrue(amClient.ask.size() == 0);
    assertTrue(amClient.release.size() == 0);
    assertTrue(nodeCount == amClient.getClusterNodeCount());
    allocatedContainerCount+=allocResponse.getAllocatedContainers().size();
    if (allocatedContainerCount == 0) {
      sleep(100);
    }
  }
  return allocatedContainerCount;
}
