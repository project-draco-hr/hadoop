{
  Credentials credentials=UserGroupInformation.getCurrentUser().getCredentials();
  Iterator<org.apache.hadoop.security.token.Token<?>> iter=credentials.getAllTokens().iterator();
  org.apache.hadoop.security.token.Token<AMRMTokenIdentifier> result=null;
  while (iter.hasNext()) {
    org.apache.hadoop.security.token.Token<?> token=iter.next();
    if (token.getKind().equals(AMRMTokenIdentifier.KIND_NAME)) {
      if (result != null) {
        Assert.fail("credentials has more than one AMRM token." + " token1: " + result + " token2: "+ token);
      }
      result=(org.apache.hadoop.security.token.Token<AMRMTokenIdentifier>)token;
    }
  }
  return result;
}
