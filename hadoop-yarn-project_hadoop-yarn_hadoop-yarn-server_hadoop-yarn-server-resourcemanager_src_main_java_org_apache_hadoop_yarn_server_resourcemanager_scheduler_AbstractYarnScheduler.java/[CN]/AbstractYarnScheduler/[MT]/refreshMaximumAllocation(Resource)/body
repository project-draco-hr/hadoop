{
  maxAllocWriteLock.lock();
  try {
    configuredMaximumAllocation=Resources.clone(newMaxAlloc);
    int maxMemory=newMaxAlloc.getMemory();
    if (maxNodeMemory != -1) {
      maxMemory=Math.min(maxMemory,maxNodeMemory);
    }
    int maxVcores=newMaxAlloc.getVirtualCores();
    if (maxNodeVCores != -1) {
      maxVcores=Math.min(maxVcores,maxNodeVCores);
    }
    maximumAllocation=Resources.createResource(maxMemory,maxVcores);
  }
  finally {
    maxAllocWriteLock.unlock();
  }
}
