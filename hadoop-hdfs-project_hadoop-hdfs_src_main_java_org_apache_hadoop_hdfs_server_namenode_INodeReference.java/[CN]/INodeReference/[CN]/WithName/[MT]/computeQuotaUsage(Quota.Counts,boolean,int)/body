{
  Preconditions.checkState(this.lastSnapshotId >= lastSnapshotId);
  final INode referred=this.getReferredINode().asReference().getReferredINode();
  int id=lastSnapshotId > Snapshot.INVALID_ID ? lastSnapshotId : this.lastSnapshotId;
  return referred.computeQuotaUsage(counts,false,id);
}
