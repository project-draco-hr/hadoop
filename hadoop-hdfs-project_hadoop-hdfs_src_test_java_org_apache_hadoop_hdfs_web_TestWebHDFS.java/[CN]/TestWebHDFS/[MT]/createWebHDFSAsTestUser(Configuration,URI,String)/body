{
  final UserGroupInformation ugi=UserGroupInformation.createUserForTesting(userName,new String[]{"supergroup"});
  return ugi.doAs(new PrivilegedExceptionAction<WebHdfsFileSystem>(){
    @Override public WebHdfsFileSystem run() throws IOException {
      WebHdfsFileSystem webhdfs=(WebHdfsFileSystem)FileSystem.get(uri,conf);
      return webhdfs;
    }
  }
);
}
