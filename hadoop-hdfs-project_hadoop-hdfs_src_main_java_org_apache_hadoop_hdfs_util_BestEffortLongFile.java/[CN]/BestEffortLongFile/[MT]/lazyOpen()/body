{
  if (ch != null) {
    return;
  }
  byte[] data=null;
  try {
    data=Files.toByteArray(file);
  }
 catch (  FileNotFoundException fnfe) {
  }
  if (data != null && data.length != 0) {
    if (data.length != Longs.BYTES) {
      throw new IOException("File " + file + " had invalid length: "+ data.length);
    }
    value=Longs.fromByteArray(data);
  }
 else {
    value=defaultVal;
  }
  RandomAccessFile raf=new RandomAccessFile(file,"rw");
  try {
    ch=raf.getChannel();
  }
  finally {
    if (ch == null) {
      IOUtils.closeStream(raf);
    }
  }
}
