{
  DFSOutputStream mockStream=Mockito.mock(DFSOutputStream.class);
  long fileId=789L;
  Assert.assertFalse("Renewer not initially running",renewer.isRunning());
  renewer.put(fileId,mockStream,MOCK_DFSCLIENT);
  Assert.assertTrue("Renewer should have started running",renewer.isRunning());
  String threadName=renewer.getDaemonName();
  Assert.assertEquals("LeaseRenewer:myuser@hdfs://nn1/",threadName);
  renewer.closeFile(fileId,MOCK_DFSCLIENT);
  renewer.setEmptyTime(Time.now());
  long failTime=Time.now() + 5000;
  while (renewer.isRunning() && Time.now() < failTime) {
    Thread.sleep(50);
  }
  Assert.assertFalse(renewer.isRunning());
}
