{
  org.apache.hadoop.yarn.api.records.Token token=loggedInUser.doAs(new PrivilegedExceptionAction<org.apache.hadoop.yarn.api.records.Token>(){
    @Override public org.apache.hadoop.yarn.api.records.Token run() throws YarnRemoteException, IOException {
      GetDelegationTokenRequest request=Records.newRecord(GetDelegationTokenRequest.class);
      request.setRenewer(renewerString);
      return clientRMService.getDelegationToken(request).getRMDelegationToken();
    }
  }
);
  return token;
}
