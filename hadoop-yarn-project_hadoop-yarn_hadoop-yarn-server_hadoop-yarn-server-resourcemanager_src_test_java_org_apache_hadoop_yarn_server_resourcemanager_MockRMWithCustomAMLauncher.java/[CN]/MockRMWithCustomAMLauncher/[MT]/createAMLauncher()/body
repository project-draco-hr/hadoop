{
  return new ApplicationMasterLauncher(getRMContext()){
    @Override protected Runnable createRunnableLauncher(    RMAppAttempt application,    AMLauncherEventType event){
      return new AMLauncher(context,application,event,getConfig()){
        @Override protected ContainerManagementProtocol getContainerMgrProxy(        ContainerId containerId){
          return containerManager;
        }
        @Override protected Token<AMRMTokenIdentifier> getAMRMToken(){
          Token<AMRMTokenIdentifier> amRmToken=super.getAMRMToken();
          InetSocketAddress serviceAddr=getConfig().getSocketAddr(YarnConfiguration.RM_SCHEDULER_ADDRESS,YarnConfiguration.DEFAULT_RM_SCHEDULER_ADDRESS,YarnConfiguration.DEFAULT_RM_SCHEDULER_PORT);
          SecurityUtil.setTokenService(amRmToken,serviceAddr);
          return amRmToken;
        }
      }
;
    }
  }
;
}
