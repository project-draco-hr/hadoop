{
  Token<?> token=dttr.token;
  long newExpirationDate=0;
  try {
    dttr.expirationDate=UserGroupInformation.getLoginUser().doAs(new PrivilegedExceptionAction<Long>(){
      @Override public Long run() throws Exception {
        return dttr.token.renew(dttr.conf);
      }
    }
);
    if (LOG.isDebugEnabled()) {
      LOG.debug("renewing for:" + token.getService() + ";newED="+ dttr.expirationDate);
    }
    setTimerForTokenRenewal(dttr,false);
  }
 catch (  Exception e) {
    LOG.error("Exception renewing token" + token + ". Not rescheduled",e);
    removeFailedDelegationToken(dttr);
  }
}
