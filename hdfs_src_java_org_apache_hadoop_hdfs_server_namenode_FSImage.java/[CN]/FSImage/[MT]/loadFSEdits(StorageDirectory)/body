{
  FSEditLogLoader loader=new FSEditLogLoader(namesystem);
  int numEdits=0;
  EditLogFileInputStream edits=new EditLogFileInputStream(NNStorage.getStorageFile(sd,NameNodeFile.EDITS));
  numEdits=loader.loadFSEdits(edits);
  edits.close();
  File editsNew=NNStorage.getStorageFile(sd,NameNodeFile.EDITS_NEW);
  if (editsNew.exists() && editsNew.length() > 0) {
    edits=new EditLogFileInputStream(editsNew);
    numEdits+=loader.loadFSEdits(edits);
    edits.close();
  }
  if (numEdits == 0 && editsNew.exists()) {
    numEdits++;
  }
  getFSNamesystem().dir.updateCountForINodeWithQuota();
  return numEdits;
}
