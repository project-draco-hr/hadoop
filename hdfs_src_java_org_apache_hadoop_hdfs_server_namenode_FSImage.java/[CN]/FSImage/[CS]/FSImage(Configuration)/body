{
  this();
  this.conf=conf;
  if (conf.getBoolean(DFSConfigKeys.DFS_NAMENODE_NAME_DIR_RESTORE_KEY,DFSConfigKeys.DFS_NAMENODE_NAME_DIR_RESTORE_DEFAULT)) {
    NameNode.LOG.info("set FSImage.restoreFailedStorage");
    storage.setRestoreFailedStorage(true);
  }
  setCheckpointDirectories(FSImage.getCheckpointDirs(conf,null),FSImage.getCheckpointEditsDirs(conf,null));
}
