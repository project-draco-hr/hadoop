{
  JobHistoryEventHandler jheh=new JobHistoryEventHandler(null,0);
  Counters counters=new Counters();
  CounterGroup group1=counters.addGroup("DOCTORS","Incarnations of the Doctor");
  group1.addCounter("PETER_CAPALDI","Peter Capaldi",12);
  group1.addCounter("MATT_SMITH","Matt Smith",11);
  group1.addCounter("DAVID_TENNANT","David Tennant",10);
  CounterGroup group2=counters.addGroup("COMPANIONS","Companions of the Doctor");
  group2.addCounter("CLARA_OSWALD","Clara Oswald",6);
  group2.addCounter("RORY_WILLIAMS","Rory Williams",5);
  group2.addCounter("AMY_POND","Amy Pond",4);
  group2.addCounter("MARTHA_JONES","Martha Jones",3);
  group2.addCounter("DONNA_NOBLE","Donna Noble",2);
  group2.addCounter("ROSE_TYLER","Rose Tyler",1);
  JsonNode jsonNode=jheh.countersToJSON(counters);
  String jsonStr=new ObjectMapper().writeValueAsString(jsonNode);
  String expected="[{\"NAME\":\"COMPANIONS\",\"DISPLAY_NAME\":\"Companions " + "of the Doctor\",\"COUNTERS\":[{\"NAME\":\"AMY_POND\",\"DISPLAY_NAME\"" + ":\"Amy Pond\",\"VALUE\":4},{\"NAME\":\"CLARA_OSWALD\","+ "\"DISPLAY_NAME\":\"Clara Oswald\",\"VALUE\":6},{\"NAME\":"+ "\"DONNA_NOBLE\",\"DISPLAY_NAME\":\"Donna Noble\",\"VALUE\":2},"+ "{\"NAME\":\"MARTHA_JONES\",\"DISPLAY_NAME\":\"Martha Jones\","+ "\"VALUE\":3},{\"NAME\":\"RORY_WILLIAMS\",\"DISPLAY_NAME\":\"Rory "+ "Williams\",\"VALUE\":5},{\"NAME\":\"ROSE_TYLER\",\"DISPLAY_NAME\":"+ "\"Rose Tyler\",\"VALUE\":1}]},{\"NAME\":\"DOCTORS\",\"DISPLAY_NAME\""+ ":\"Incarnations of the Doctor\",\"COUNTERS\":[{\"NAME\":"+ "\"DAVID_TENNANT\",\"DISPLAY_NAME\":\"David Tennant\",\"VALUE\":10},"+ "{\"NAME\":\"MATT_SMITH\",\"DISPLAY_NAME\":\"Matt Smith\",\"VALUE\":"+ "11},{\"NAME\":\"PETER_CAPALDI\",\"DISPLAY_NAME\":\"Peter Capaldi\","+ "\"VALUE\":12}]}]";
  Assert.assertEquals(expected,jsonStr);
}
