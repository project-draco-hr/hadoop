{
  boolean getAllMetrics=false;
synchronized (this) {
    if (Time.now() - jmxCacheTS >= jmxCacheTTL) {
      jmxCacheTS=Time.now() + jmxCacheTTL;
      if (lastRecs == null) {
        getAllMetrics=true;
      }
    }
 else {
      return;
    }
  }
  if (getAllMetrics) {
    MetricsCollectorImpl builder=new MetricsCollectorImpl();
    getMetrics(builder,true);
  }
synchronized (this) {
    int oldCacheSize=attrCache.size();
    int newCacheSize=updateAttrCache();
    if (oldCacheSize < newCacheSize) {
      updateInfoCache();
    }
    jmxCacheTS=Time.now();
    lastRecs=null;
  }
}
