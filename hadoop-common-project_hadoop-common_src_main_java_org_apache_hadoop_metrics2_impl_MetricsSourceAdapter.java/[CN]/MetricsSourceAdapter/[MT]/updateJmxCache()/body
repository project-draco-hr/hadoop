{
  boolean getAllMetrics=false;
synchronized (this) {
    if (Time.now() - jmxCacheTS >= jmxCacheTTL) {
      jmxCacheTS=Time.now() + jmxCacheTTL;
      if (lastRecsCleared) {
        getAllMetrics=true;
        lastRecsCleared=false;
      }
    }
 else {
      return;
    }
    if (getAllMetrics) {
      MetricsCollectorImpl builder=new MetricsCollectorImpl();
      getMetrics(builder,true);
    }
    updateAttrCache();
    if (getAllMetrics) {
      updateInfoCache();
    }
    jmxCacheTS=Time.now();
    lastRecs=null;
    lastRecsCleared=true;
  }
}
