{
  Path nmPrivateCTokensPath=null;
  try {
    nmPrivateCTokensPath=localDirsSelector.getLocalPathForWrite(NM_PRIVATE_DIR + Path.SEPARATOR + String.format(ContainerLocalizer.TOKEN_FILE_NAME_FMT,localizerId),getConfig());
    writeCredentials(nmPrivateCTokensPath);
    exec.startLocalizer(nmPrivateCTokensPath,localizationServerAddress,context.getUser(),ConverterUtils.toString(context.getContainerId().getApplicationAttemptId().getApplicationId()),localizerId,localDirs);
  }
 catch (  Exception e) {
    LOG.info("Localizer failed",e);
    ContainerId cId=context.getContainerId();
    dispatcher.getEventHandler().handle(new ContainerResourceFailedEvent(cId,null,e));
  }
 finally {
    for (    LocalizerResourceRequestEvent event : scheduled.values()) {
      event.getResource().unlock();
    }
    delService.delete(null,nmPrivateCTokensPath,new Path[]{});
  }
}
