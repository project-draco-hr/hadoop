{
  final MetricsFilter globFilter=newGlobFilter(conf);
  final MetricsFilter regexFilter=newRegexFilter(conf);
  assertEquals("accepts " + tags,expectAcceptList,globFilter.accepts(tags));
  assertEquals("accepts " + tags,expectAcceptList,regexFilter.accepts(tags));
  int acceptedCount=0;
  for (int i=0; i < tags.size(); i++) {
    MetricsTag tag=tags.get(i);
    boolean actGlob=globFilter.accepts(tag);
    boolean actRegex=regexFilter.accepts(tag);
    assertEquals("accepts " + tag,expectedAcceptedSpec[i],actGlob);
    assertEquals(actGlob,actRegex);
    if (actGlob) {
      acceptedCount++;
    }
  }
  if (expectAcceptList) {
    assertTrue("No tag of the following accepted: " + tags,acceptedCount > 0);
  }
 else {
    assertTrue("No tag of the following rejected: " + tags,acceptedCount < tags.size());
  }
}
