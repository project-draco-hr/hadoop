{
  if (t == null) {
    LOG.warn("Null token ignored for " + alias);
  }
 else   if (tokenMap.put(alias,t) != null) {
    Map<Text,Token<? extends TokenIdentifier>> tokensToAdd=new HashMap<>();
    for (    Map.Entry<Text,Token<? extends TokenIdentifier>> e : tokenMap.entrySet()) {
      Token<? extends TokenIdentifier> token=e.getValue();
      if (token instanceof Token.PrivateToken && ((Token.PrivateToken)token).getPublicService().equals(alias)) {
        Token<? extends TokenIdentifier> privateToken=new Token.PrivateToken<>(t);
        privateToken.setService(token.getService());
        tokensToAdd.put(e.getKey(),privateToken);
      }
    }
    tokenMap.putAll(tokensToAdd);
  }
}
