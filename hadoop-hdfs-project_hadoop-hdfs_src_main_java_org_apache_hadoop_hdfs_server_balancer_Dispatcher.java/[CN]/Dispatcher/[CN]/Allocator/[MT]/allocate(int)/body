{
  final int remaining=max - count;
  if (remaining <= 0) {
    return 0;
  }
 else {
    final int allocated=remaining < n ? remaining : n;
    count+=allocated;
    return allocated;
  }
}
