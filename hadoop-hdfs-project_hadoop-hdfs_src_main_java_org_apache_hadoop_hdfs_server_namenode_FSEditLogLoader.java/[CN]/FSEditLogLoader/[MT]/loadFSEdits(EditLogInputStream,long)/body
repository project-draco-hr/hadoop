{
  long numEdits=0;
  int logVersion=edits.getVersion();
  fsNamesys.writeLock();
  try {
    long startTime=now();
    numEdits=loadEditRecords(logVersion,edits,false,expectedStartingTxId);
    FSImage.LOG.info("Edits file " + edits.getName() + " of size "+ edits.length()+ " edits # "+ numEdits+ " loaded in "+ (now() - startTime) / 1000 + " seconds.");
  }
  finally {
    fsNamesys.setBlockTotal();
    fsNamesys.notifyGenStampUpdate(maxGenStamp);
    edits.close();
    fsNamesys.writeUnlock();
  }
  return numEdits;
}
