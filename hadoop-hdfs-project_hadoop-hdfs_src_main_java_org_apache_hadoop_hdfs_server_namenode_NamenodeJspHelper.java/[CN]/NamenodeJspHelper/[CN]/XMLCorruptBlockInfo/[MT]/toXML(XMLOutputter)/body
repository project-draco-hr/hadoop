{
  doc.startTag("corrupt_block_info");
  if (numCorruptBlocks < 0 || numCorruptBlocks > 100) {
    doc.startTag("error");
    doc.pcdata("numCorruptBlocks must be >= 0 and <= 100");
    doc.endTag();
  }
  doc.startTag(DFSConfigKeys.DFS_REPLICATION_KEY);
  doc.pcdata("" + conf.getInt(DFSConfigKeys.DFS_REPLICATION_KEY,DFSConfigKeys.DFS_REPLICATION_DEFAULT));
  doc.endTag();
  doc.startTag("num_missing_blocks");
  doc.pcdata("" + (blockManager != null ? blockManager.getMissingBlocksCount() : 0));
  doc.endTag();
  doc.startTag("num_corrupt_replica_blocks");
  doc.pcdata("" + (blockManager != null ? blockManager.getCorruptReplicaBlocksCount() : 0));
  doc.endTag();
  doc.startTag("corrupt_replica_block_ids");
  final long[] corruptBlockIds=blockManager != null ? blockManager.getCorruptReplicaBlockIds(numCorruptBlocks,startingBlockId) : null;
  if (corruptBlockIds != null) {
    for (    Long blockId : corruptBlockIds) {
      doc.startTag("block_id");
      doc.pcdata("" + blockId);
      doc.endTag();
    }
  }
  doc.endTag();
  doc.endTag();
  doc.getWriter().flush();
}
