{
  final int code=conn.getResponseCode();
  if (code != op.getExpectedHttpResponseCode()) {
    final Map<String,Object> m;
    try {
      m=jsonParse(conn.getErrorStream());
    }
 catch (    IOException e) {
      throw new IOException("Unexpected HTTP response: code = " + code + " != "+ op.getExpectedHttpResponseCode()+ ", "+ op.toQueryString()+ ", message="+ conn.getResponseMessage(),e);
    }
    final RemoteException re=JsonUtil.toRemoteException(m);
    throw re.unwrapRemoteException(AccessControlException.class,DSQuotaExceededException.class,FileAlreadyExistsException.class,FileNotFoundException.class,ParentNotDirectoryException.class,SafeModeException.class,NSQuotaExceededException.class,UnresolvedPathException.class);
  }
}
