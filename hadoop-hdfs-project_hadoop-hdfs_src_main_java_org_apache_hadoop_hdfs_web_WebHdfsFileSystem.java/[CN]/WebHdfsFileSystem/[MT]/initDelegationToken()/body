{
  Token<?> token=selectDelegationToken(ugi);
  boolean createdToken=false;
  if (token == null) {
    token=getDelegationToken(null);
    createdToken=(token != null);
  }
  if (token != null) {
    setDelegationToken(token);
    if (createdToken) {
      addRenewAction(this);
      LOG.debug("Created new DT for " + token.getService());
    }
 else {
      LOG.debug("Found existing DT for " + token.getService());
    }
  }
}
