{
  int p=getPrior(snapshot,true);
  if (p != Snapshot.CURRENT_STATE_ID && Snapshot.ID_INTEGER_COMPARATOR.compare(p,prior) > 0) {
    return p;
  }
  return prior;
}
