{
  Snapshot s=getPrior(snapshot);
  if (s != null && (prior == null || Snapshot.ID_COMPARATOR.compare(s,prior) > 0)) {
    return s;
  }
  return prior;
}
