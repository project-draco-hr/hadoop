{
  try {
    for (    SocketAddress socketAddress : metricsServers) {
      if (socketAddress == null || !(socketAddress instanceof InetSocketAddress))       throw new IllegalArgumentException("Unsupported Address type");
      InetSocketAddress inetAddress=(InetSocketAddress)socketAddress;
      if (inetAddress.isUnresolved()) {
        throw new UnknownHostException("Unresolved host: " + inetAddress);
      }
      DatagramPacket packet=new DatagramPacket(buffer,offset,socketAddress);
      datagramSocket.send(packet);
    }
  }
  finally {
    offset=0;
  }
}
