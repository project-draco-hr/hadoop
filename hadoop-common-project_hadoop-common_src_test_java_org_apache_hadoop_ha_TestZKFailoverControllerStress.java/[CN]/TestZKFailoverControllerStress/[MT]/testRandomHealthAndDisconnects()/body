{
  long runFor=STRESS_RUNTIME_SECS * 1000;
  Mockito.doAnswer(new RandomlyThrow(0)).when(cluster.getService(0).proxy).monitorHealth();
  Mockito.doAnswer(new RandomlyThrow(1)).when(cluster.getService(1).proxy).monitorHealth();
  ActiveStandbyElector.NUM_RETRIES=100;
  long st=System.currentTimeMillis();
  while (System.currentTimeMillis() - st < runFor) {
    cluster.getTestContext().checkException();
    serverFactory.closeAll();
    Thread.sleep(50);
  }
}
