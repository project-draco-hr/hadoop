{
  AuthenticatorTestCase auth=new AuthenticatorTestCase();
  AuthenticatorTestCase.setAuthenticationHandlerConfig(getAuthenticationHandlerConfiguration(false));
  auth.start();
  try {
    URL url=new URL(auth.getBaseURL());
    HttpURLConnection conn=(HttpURLConnection)url.openConnection();
    conn.connect();
    Assert.assertEquals(HttpURLConnection.HTTP_FORBIDDEN,conn.getResponseCode());
    Assert.assertEquals("Anonymous requests are disallowed",conn.getResponseMessage());
  }
  finally {
    auth.stop();
  }
}
