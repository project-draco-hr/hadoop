{
  for (int i=0; i < blocks.length; i++) {
    DatanodeInfo blockTargets[]=xferTargets[i];
    for (int t=0; t < blockTargets.length; t++) {
      DatanodeInfo dnInfo=blockTargets[t];
      DatanodeRegistration receivedDNReg;
      receivedDNReg=new DatanodeRegistration(dnInfo.getName());
      receivedDNReg.setStorageInfo(new DataStorage(nsInfo,dnInfo.getStorageID()));
      receivedDNReg.setInfoPort(dnInfo.getInfoPort());
      nameNode.blockReceivedAndDeleted(receivedDNReg,nameNode.getNamesystem().getBlockPoolId(),new ReceivedDeletedBlockInfo[]{new ReceivedDeletedBlockInfo(blocks[i],DataNode.EMPTY_DEL_HINT)});
    }
  }
  return blocks.length;
}
