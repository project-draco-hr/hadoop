{
  Configuration conf=new Configuration();
  long sleepTime=100;
  conf.setLong(MRJobConfig.MR_CLIENT_JOB_RETRY_INTERVAL,sleepTime);
  Cluster mockCluster=mock(Cluster.class);
  JobID jobId1=JobID.forName("job_1234654654_001");
  when(mockCluster.getJob(jobId1)).thenReturn(null);
  for (int i=0; i < 2; ++i) {
    conf.setInt(MRJobConfig.MR_CLIENT_JOB_MAX_RETRIES,i);
    CLI cli=spy(new CLI(conf));
    cli.cluster=mockCluster;
    doReturn(mockCluster).when(cli).createCluster();
    long start=Time.monotonicNow();
    cli.getJob(jobId1);
    long end=Time.monotonicNow();
    Assert.assertTrue(end - start > (i * sleepTime));
    Assert.assertTrue(end - start < ((i + 1) * sleepTime));
  }
}
