{
  Configuration conf=new Configuration();
  String[] dirs=new String[]{"a","b","c"};
  for (int i=0; i < dirs.length; i++) {
    dirs[i]=new Path(System.getProperty("test.build.data"),dirs[i]).toString();
  }
  conf.set("dirs",StringUtils.join(dirs,","));
  for (int i=0; i < 1000; i++) {
    String localPath=conf.getLocalPath("dirs","dir" + i).toString();
    assertTrue("Path doesn't end in specified dir: " + localPath,localPath.endsWith("dir" + i));
    assertFalse("Path has internal whitespace: " + localPath,localPath.contains(" "));
  }
}
