{
  StringBuffer buf=new StringBuffer();
  NodeNameState state=(NodeNameState)pool.getState(getClass());
  if (state == null) {
    state=new NodeNameState();
    pool.addState(getClass(),state);
  }
  if (rackName != null && hostName != null) {
    buf.append('/');
    buf.append(anonymize(rackName,state.getRackNameState()));
    buf.append('/');
    buf.append(anonymize(hostName,state.getHostNameState()));
  }
 else {
    if (state.getRackNameState().contains(nodeName) || rackName != null) {
      buf.append(anonymize(nodeName,state.getRackNameState()));
    }
 else {
      buf.append(anonymize(nodeName,state.getHostNameState()));
    }
  }
  anonymizedNodeName=buf.toString();
}
