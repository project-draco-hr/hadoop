{
  if (Math.abs(maxAMShare - -1.0f) < 0.0001) {
    return true;
  }
  Resource maxResource=Resources.clone(getFairShare());
  if (maxResource.getMemorySize() == 0) {
    maxResource.setMemorySize(Math.min(scheduler.getRootQueueMetrics().getAvailableMB(),getMaxShare().getMemorySize()));
  }
  if (maxResource.getVirtualCores() == 0) {
    maxResource.setVirtualCores(Math.min(scheduler.getRootQueueMetrics().getAvailableVirtualCores(),getMaxShare().getVirtualCores()));
  }
  Resource maxAMResource=Resources.multiply(maxResource,maxAMShare);
  Resource ifRunAMResource=Resources.add(amResourceUsage,amResource);
  return Resources.fitsIn(ifRunAMResource,maxAMResource);
}
