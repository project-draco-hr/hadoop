{
  try {
    Configuration config=new YarnConfiguration();
    config.setBoolean(YarnConfiguration.TIMELINE_SERVICE_ENABLED,true);
    config.setFloat(YarnConfiguration.TIMELINE_SERVICE_VERSION,2.0f);
    config.set(YarnConfiguration.TIMELINE_SERVICE_WEBAPP_ADDRESS,"localhost:0");
    config.set(YarnConfiguration.RM_CLUSTER_ID,"cluster1");
    server=new TimelineReaderServer();
    server.init(config);
    server.start();
    serverPort=server.getWebServerPort();
  }
 catch (  Exception e) {
    Assert.fail("Web server failed to start");
  }
}
