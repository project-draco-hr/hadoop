{
  Client client=createClient();
  try {
    URI uri=URI.create("http://localhost:" + serverPort + "/ws/v2/"+ "timeline/entity/app1/app/id_1");
    ClientResponse resp=getResponse(client,uri);
    TimelineEntity entity=resp.getEntity(TimelineEntity.class);
    assertEquals(MediaType.APPLICATION_JSON_TYPE,resp.getType());
    assertNotNull(entity);
    assertEquals("id_1",entity.getId());
    assertEquals("app",entity.getType());
    uri=URI.create("http://localhost:" + serverPort + "/ws/v2/"+ "timeline/entities/app1/app");
    resp=getResponse(client,uri);
    Set<TimelineEntity> entities=resp.getEntity(new GenericType<Set<TimelineEntity>>(){
    }
);
    assertEquals(MediaType.APPLICATION_JSON_TYPE,resp.getType());
    assertNotNull(entities);
    assertEquals(4,entities.size());
  }
  finally {
    client.destroy();
  }
}
