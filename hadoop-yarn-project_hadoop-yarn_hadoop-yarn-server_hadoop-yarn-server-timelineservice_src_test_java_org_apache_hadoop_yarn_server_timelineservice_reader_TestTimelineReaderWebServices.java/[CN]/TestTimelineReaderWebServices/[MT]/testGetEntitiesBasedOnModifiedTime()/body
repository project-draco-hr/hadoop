{
  Client client=createClient();
  try {
    URI uri=URI.create("http://localhost:" + serverPort + "/ws/v2/"+ "timeline/entities/cluster1/app1/app?modifiedtimestart=1425016502090"+ "&modifiedtimeend=1425016503020");
    ClientResponse resp=getResponse(client,uri);
    Set<TimelineEntity> entities=resp.getEntity(new GenericType<Set<TimelineEntity>>(){
    }
);
    assertEquals(MediaType.APPLICATION_JSON_TYPE,resp.getType());
    assertNotNull(entities);
    assertEquals(2,entities.size());
    assertTrue("Entities with id_1 and id_4 should have been" + " present in response.",entities.contains(newEntity("app","id_1")) && entities.contains(newEntity("app","id_4")));
    uri=URI.create("http://localhost:" + serverPort + "/ws/v2/timeline/"+ "entities/cluster1/app1/app?modifiedtimeend=1425016502090");
    resp=getResponse(client,uri);
    entities=resp.getEntity(new GenericType<Set<TimelineEntity>>(){
    }
);
    assertEquals(MediaType.APPLICATION_JSON_TYPE,resp.getType());
    assertNotNull(entities);
    assertEquals(2,entities.size());
    assertTrue("Entities with id_2 and id_3 should have been " + "present in response.",entities.contains(newEntity("app","id_2")) && entities.contains(newEntity("app","id_3")));
    uri=URI.create("http://localhost:" + serverPort + "/ws/v2/timeline/"+ "entities/cluster1/app1/app?modifiedtimestart=1425016503005");
    resp=getResponse(client,uri);
    entities=resp.getEntity(new GenericType<Set<TimelineEntity>>(){
    }
);
    assertEquals(MediaType.APPLICATION_JSON_TYPE,resp.getType());
    assertNotNull(entities);
    assertEquals(1,entities.size());
    assertTrue("Entity with id_4 should have been present in response.",entities.contains(newEntity("app","id_4")));
  }
  finally {
    client.destroy();
  }
}
