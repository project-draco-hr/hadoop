{
  StoppedProtocol wrappedProxy=(StoppedProtocol)RPC.getProxy(StoppedProtocol.class,StoppedProtocol.versionID,null,conf);
  StoppedInvocationHandler invocationHandler=(StoppedInvocationHandler)Proxy.getInvocationHandler(wrappedProxy);
  StoppedProtocol proxy=(StoppedProtocol)RetryProxy.create(StoppedProtocol.class,wrappedProxy,RetryPolicies.RETRY_FOREVER);
  assertEquals(invocationHandler.getCloseCalled(),0);
  RPC.stopProxy(proxy);
  assertEquals(invocationHandler.getCloseCalled(),1);
}
