{
  Server server;
  TestRpcService proxy=null;
  System.out.println("Testing Slow RPC");
  server=setupTestServer(conf,2);
  try {
    proxy=getClient(addr,conf);
    SlowRPC slowrpc=new SlowRPC(proxy);
    Thread thread=new Thread(slowrpc,"SlowRPC");
    thread.start();
    assertTrue("Slow RPC should not have finished1.",!slowrpc.isDone());
    slowrpc.ping(false);
    assertTrue("Slow RPC should not have finished2.",!slowrpc.isDone());
    slowrpc.ping(false);
    while (!slowrpc.isDone()) {
      System.out.println("Waiting for slow RPC to get done.");
      try {
        Thread.sleep(1000);
      }
 catch (      InterruptedException e) {
      }
    }
  }
  finally {
    System.out.println("Down slow rpc testing");
    stop(server,proxy);
  }
}
