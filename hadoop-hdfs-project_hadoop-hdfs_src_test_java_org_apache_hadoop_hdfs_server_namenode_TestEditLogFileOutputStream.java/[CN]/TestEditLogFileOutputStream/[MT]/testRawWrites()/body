{
  EditLogFileOutputStream elos=new EditLogFileOutputStream(conf,TEST_EDITS,0);
  try {
    byte[] small=new byte[]{1,2,3,4,5,8,7};
    elos.create();
    elos.writeRaw(small,0,small.length);
    flushAndCheckLength(elos,MIN_PREALLOCATION_LENGTH);
    elos.writeRaw(small,0,small.length);
    flushAndCheckLength(elos,MIN_PREALLOCATION_LENGTH);
    final int BIG_WRITE_LENGTH=3 * MIN_PREALLOCATION_LENGTH;
    byte[] buf=new byte[4096];
    for (int i=0; i < buf.length; i++) {
      buf[i]=0;
    }
    int total=BIG_WRITE_LENGTH;
    while (total > 0) {
      int toWrite=(total > buf.length) ? buf.length : total;
      elos.writeRaw(buf,0,toWrite);
      total-=toWrite;
    }
    flushAndCheckLength(elos,4 * MIN_PREALLOCATION_LENGTH);
  }
  finally {
    if (elos != null)     elos.close();
  }
}
