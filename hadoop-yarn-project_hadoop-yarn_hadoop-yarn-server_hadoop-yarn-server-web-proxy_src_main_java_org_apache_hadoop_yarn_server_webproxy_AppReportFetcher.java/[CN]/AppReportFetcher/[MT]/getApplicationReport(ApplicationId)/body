{
  GetApplicationReportRequest request=recordFactory.newRecordInstance(GetApplicationReportRequest.class);
  request.setApplicationId(appId);
  GetApplicationReportResponse response;
  try {
    response=applicationsManager.getApplicationReport(request);
  }
 catch (  YarnException e) {
    if (!isAHSEnabled) {
      throw e;
    }
    if (!(e.getClass() == ApplicationNotFoundException.class)) {
      throw e;
    }
    response=historyManager.getApplicationReport(request);
  }
  return response.getApplicationReport();
}
