{
  GetApplicationReportRequest request=recordFactory.newRecordInstance(GetApplicationReportRequest.class);
  request.setApplicationId(appId);
  ApplicationReport appReport;
  FetchedAppReport fetchedAppReport;
  try {
    appReport=applicationsManager.getApplicationReport(request).getApplicationReport();
    fetchedAppReport=new FetchedAppReport(appReport,AppReportSource.RM);
  }
 catch (  ApplicationNotFoundException e) {
    if (!isAHSEnabled) {
      throw e;
    }
    appReport=historyManager.getApplicationReport(request).getApplicationReport();
    fetchedAppReport=new FetchedAppReport(appReport,AppReportSource.AHS);
  }
  return fetchedAppReport;
}
