{
  this.width=width;
  this.height=height;
  for (int y=0; y < height; ++y) {
    for (int x=0; x < width; ++x) {
      dancer.addColumn(new Point(x,y));
    }
  }
  int pieceBase=dancer.getNumberColumns();
  for (  Piece p : pieces) {
    dancer.addColumn(p);
  }
  boolean[] row=new boolean[dancer.getNumberColumns()];
  for (int idx=0; idx < pieces.size(); ++idx) {
    Piece piece=pieces.get(idx);
    row[idx + pieceBase]=true;
    generateRows(dancer,piece,width,height,false,row,idx == 0);
    if (piece.getFlippable()) {
      generateRows(dancer,piece,width,height,true,row,idx == 0);
    }
    row[idx + pieceBase]=false;
  }
  printer=new SolutionPrinter(width,height);
}
