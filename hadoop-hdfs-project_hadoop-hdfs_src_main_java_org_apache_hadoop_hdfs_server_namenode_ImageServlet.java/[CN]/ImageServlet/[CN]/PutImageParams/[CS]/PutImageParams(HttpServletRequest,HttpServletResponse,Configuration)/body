{
  txId=ServletUtil.parseLongParam(request,TXID_PARAM);
  storageInfoString=ServletUtil.getParameter(request,STORAGEINFO_PARAM);
  fileSize=ServletUtil.parseLongParam(request,TransferFsImage.FILE_LENGTH);
  String imageType=ServletUtil.getParameter(request,IMAGE_FILE_TYPE);
  nnf=imageType == null ? NameNodeFile.IMAGE : NameNodeFile.valueOf(imageType);
  if (fileSize == 0 || txId == -1 || storageInfoString == null || storageInfoString.isEmpty()) {
    throw new IOException("Illegal parameters to TransferFsImage");
  }
}
