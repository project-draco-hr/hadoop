{
  UserGroupInformation callerUGI=getUser(req);
  ApplicationId aid=parseApplicationId(appId);
  final ApplicationAttemptId aaid=parseApplicationAttemptId(appAttemptId);
  validateIds(aid,aaid,null);
  Collection<ContainerReport> containerReports=null;
  try {
    if (callerUGI == null) {
      containerReports=appContext.getContainers(aaid).values();
    }
 else {
      containerReports=callerUGI.doAs(new PrivilegedExceptionAction<Collection<ContainerReport>>(){
        @Override public Collection<ContainerReport> run() throws Exception {
          return appContext.getContainers(aaid).values();
        }
      }
);
    }
  }
 catch (  Exception e) {
    throw new WebApplicationException(e);
  }
  ContainersInfo containersInfo=new ContainersInfo();
  for (  ContainerReport containerReport : containerReports) {
    ContainerInfo containerInfo=new ContainerInfo(containerReport);
    containersInfo.add(containerInfo);
  }
  return containersInfo;
}
