{
  UserGroupInformation callerUGI=getUser(req);
  final ApplicationId id=parseApplicationId(appId);
  Collection<ApplicationAttemptReport> appAttemptReports=null;
  try {
    if (callerUGI == null) {
      GetApplicationAttemptsRequest request=GetApplicationAttemptsRequest.newInstance(id);
      appAttemptReports=appBaseProt.getApplicationAttempts(request).getApplicationAttemptList();
    }
 else {
      appAttemptReports=callerUGI.doAs(new PrivilegedExceptionAction<Collection<ApplicationAttemptReport>>(){
        @Override public Collection<ApplicationAttemptReport> run() throws Exception {
          GetApplicationAttemptsRequest request=GetApplicationAttemptsRequest.newInstance(id);
          return appBaseProt.getApplicationAttempts(request).getApplicationAttemptList();
        }
      }
);
    }
  }
 catch (  Exception e) {
    rewrapAndThrowException(e);
  }
  AppAttemptsInfo appAttemptsInfo=new AppAttemptsInfo();
  for (  ApplicationAttemptReport appAttemptReport : appAttemptReports) {
    AppAttemptInfo appAttemptInfo=new AppAttemptInfo(appAttemptReport);
    appAttemptsInfo.add(appAttemptInfo);
  }
  return appAttemptsInfo;
}
