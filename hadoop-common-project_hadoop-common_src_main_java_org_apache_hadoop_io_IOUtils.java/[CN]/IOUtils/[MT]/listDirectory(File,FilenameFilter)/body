{
  ArrayList<String> list=new ArrayList<String>();
  try (DirectoryStream<Path> stream=Files.newDirectoryStream(dir.toPath())){
    for (    Path entry : stream) {
      String fileName=entry.getFileName().toString();
      if ((filter == null) || filter.accept(dir,fileName)) {
        list.add(fileName);
      }
    }
  }
 catch (  DirectoryIteratorException e) {
    throw e.getCause();
  }
  return list;
}
