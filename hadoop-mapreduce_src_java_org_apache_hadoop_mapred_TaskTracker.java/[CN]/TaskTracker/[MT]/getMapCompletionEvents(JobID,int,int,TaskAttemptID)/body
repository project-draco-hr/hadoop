{
  TaskCompletionEvent[] mapEvents=TaskCompletionEvent.EMPTY_ARRAY;
synchronized (shouldReset) {
    if (shouldReset.remove(id)) {
      return new MapTaskCompletionEventsUpdate(mapEvents,true);
    }
  }
  RunningJob rjob;
synchronized (runningJobs) {
    rjob=runningJobs.get(jobId);
    if (rjob != null) {
synchronized (rjob) {
        FetchStatus f=rjob.getFetchStatus();
        if (f != null) {
          mapEvents=f.getMapEvents(fromEventId,maxLocs);
        }
      }
    }
  }
  return new MapTaskCompletionEventsUpdate(mapEvents,false);
}
