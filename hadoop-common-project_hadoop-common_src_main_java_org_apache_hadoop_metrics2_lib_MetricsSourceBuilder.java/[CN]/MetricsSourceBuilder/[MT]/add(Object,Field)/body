{
  for (  Annotation annotation : field.getAnnotations()) {
    if (!(annotation instanceof Metric)) {
      continue;
    }
    try {
      field.setAccessible(true);
      if (field.get(source) != null)       continue;
    }
 catch (    Exception e) {
      LOG.warn("Error accessing field " + field + " annotated with"+ annotation,e);
      continue;
    }
    MutableMetric mutable=factory.newForField(field,(Metric)annotation,registry);
    if (mutable != null) {
      try {
        field.set(source,mutable);
        hasAtMetric=true;
      }
 catch (      Exception e) {
        throw new MetricsException("Error setting field " + field + " annotated with "+ annotation,e);
      }
    }
  }
}
