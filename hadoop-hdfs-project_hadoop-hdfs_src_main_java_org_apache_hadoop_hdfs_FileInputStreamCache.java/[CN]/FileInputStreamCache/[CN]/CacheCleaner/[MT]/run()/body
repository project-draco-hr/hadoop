{
synchronized (FileInputStreamCache.this) {
    if (closed)     return;
    long curTime=Time.monotonicNow();
    for (Iterator<Entry<Key,Value>> iter=map.entries().iterator(); iter.hasNext(); iter=map.entries().iterator()) {
      Entry<Key,Value> entry=iter.next();
      if (entry.getValue().getTime() + expiryTimeMs >= curTime) {
        break;
      }
      entry.getValue().close();
      iter.remove();
    }
  }
}
