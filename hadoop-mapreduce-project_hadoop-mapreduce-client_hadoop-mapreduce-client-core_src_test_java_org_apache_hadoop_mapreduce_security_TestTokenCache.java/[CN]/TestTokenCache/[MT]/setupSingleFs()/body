{
  FileSystem mockFs=mock(FileSystem.class);
  when(mockFs.getCanonicalServiceName()).thenReturn("singlefs1");
  when(mockFs.getUri()).thenReturn(new URI("singlefs1:///"));
  List<Token<?>> tokens=new LinkedList<Token<?>>();
  Token<?> mockToken=mock(Token.class);
  when(mockToken.getService()).thenReturn(new Text("singlefs1"));
  tokens.add(mockToken);
  when(mockFs.getDelegationTokens(any(String.class))).thenThrow(new RuntimeException("getDelegationTokens(renewer) should not be called"));
  when(mockFs.getDelegationTokens(any(String.class),any(Credentials.class))).thenReturn(tokens);
  return mockFs;
}
