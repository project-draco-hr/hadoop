{
  FileSystem mockFs=mock(FileSystem.class);
  when(mockFs.getCanonicalServiceName()).thenReturn("singlefs4");
  when(mockFs.getUri()).thenReturn(new URI("singlefs4:///"));
  final Token<?> mockToken=(Token<?>)mock(Token.class);
  when(mockToken.getService()).thenReturn(new Text("singlefs4"));
  when(mockFs.getDelegationToken(any(String.class))).thenAnswer(new Answer<Token<?>>(){
    @Override public Token<?> answer(    InvocationOnMock invocation) throws Throwable {
      return mockToken;
    }
  }
);
  when(mockFs.getDelegationTokens(any(String.class),any(Credentials.class))).thenReturn(new LinkedList<Token<?>>());
  return mockFs;
}
