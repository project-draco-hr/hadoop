{
  String directoryName="metricsTestDirectory_ClientError";
  Path directoryPath=new Path("/" + directoryName);
  assertTrue(fs.mkdirs(directoryPath));
  String leaseID=testAccount.acquireShortLease(directoryName);
  try {
    try {
      fs.delete(directoryPath,true);
      assertTrue("Should've thrown.",false);
    }
 catch (    AzureException ex) {
      assertTrue("Unexpected exception: " + ex,ex.getMessage().contains("lease"));
    }
    assertEquals(1,AzureMetricsTestUtil.getLongCounterValue(getInstrumentation(),WASB_CLIENT_ERRORS));
    assertEquals(0,AzureMetricsTestUtil.getLongCounterValue(getInstrumentation(),WASB_SERVER_ERRORS));
  }
  finally {
    testAccount.releaseLease(leaseID,directoryName);
  }
}
