{
  Configuration conf=new Configuration();
  Dispatcher dispatcher=new InlineDispatcher();
  RMContext context=new RMContextImpl(new MemStore(),dispatcher,null,null,null,null);
  dispatcher.register(SchedulerEventType.class,new InlineDispatcher.EmptyEventHandler());
  dispatcher.register(RMNodeEventType.class,new NodeEventDispatcher(context));
  NMLivelinessMonitor nmLivelinessMonitor=new TestNmLivelinessMonitor(dispatcher);
  nmLivelinessMonitor.init(conf);
  nmLivelinessMonitor.start();
  NodesListManager nodesListManager=new NodesListManager(context);
  nodesListManager.init(conf);
  ContainerTokenSecretManager containerTokenSecretManager=new ContainerTokenSecretManager(conf);
  resourceTrackerService=new ResourceTrackerService(context,nodesListManager,nmLivelinessMonitor,containerTokenSecretManager);
  resourceTrackerService.init(conf);
  resourceTrackerService.start();
}
