{
  MockRM rm=new MockRM();
  rm.init(new YarnConfiguration());
  rm.start();
  RMApp app=rm.submitApp(1024);
  MockNM nm=rm.registerNode("host1:1234",8192);
  nm.nodeHeartbeat(true);
  ContainerStatus status=ContainerStatus.newInstance(ContainerId.newInstance(ApplicationAttemptId.newInstance(app.getApplicationId(),2),1),ContainerState.COMPLETE,"Dummy Completed",0);
  nm.registerNode(Collections.singletonList(status));
  assertEquals("Incorrect number of nodes",1,rm.getRMContext().getRMNodes().size());
}
