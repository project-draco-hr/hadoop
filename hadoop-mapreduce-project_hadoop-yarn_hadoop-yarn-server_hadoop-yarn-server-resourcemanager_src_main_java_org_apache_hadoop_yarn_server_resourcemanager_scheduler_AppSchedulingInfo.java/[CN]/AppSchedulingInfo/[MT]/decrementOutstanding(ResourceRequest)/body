{
  int numOffSwitchContainers=offSwitchRequest.getNumContainers() - 1;
  offSwitchRequest.setNumContainers(numOffSwitchContainers);
  if (numOffSwitchContainers == 0) {
    boolean deactivate=true;
    for (    Priority priority : getPriorities()) {
      ResourceRequest request=getResourceRequest(priority,RMNodeImpl.ANY);
      if (request.getNumContainers() > 0) {
        deactivate=false;
        break;
      }
    }
    if (deactivate) {
      activeUsersManager.deactivateApplication(user,applicationId);
    }
  }
}
