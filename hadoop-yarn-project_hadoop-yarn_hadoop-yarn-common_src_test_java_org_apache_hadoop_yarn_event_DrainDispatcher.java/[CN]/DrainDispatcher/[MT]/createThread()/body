{
  return new Runnable(){
    @Override public void run(){
      while (!Thread.currentThread().isInterrupted()) {
synchronized (mutex) {
          drained=queue.isEmpty();
        }
        Event event;
        try {
          event=queue.take();
        }
 catch (        InterruptedException ie) {
          return;
        }
        if (event != null) {
          dispatch(event);
        }
      }
    }
  }
;
}
