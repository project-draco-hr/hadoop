{
  FSNamesystem fsn=mock(FSNamesystem.class);
  FSEditLog editLog=mock(FSEditLog.class);
  final long nextGenerationStampV1=5000;
  final long nextGenerationStampV2=20000;
  when(fsn.getNextGenerationStampV1()).thenReturn(nextGenerationStampV1);
  when(fsn.getNextGenerationStampV2()).thenReturn(nextGenerationStampV2);
  when(fsn.nextGenerationStamp(anyBoolean())).thenCallRealMethod();
  when(fsn.hasWriteLock()).thenReturn(true);
  when(fsn.getEditLog()).thenReturn(editLog);
  assertThat(fsn.nextGenerationStamp(true),is(nextGenerationStampV1));
  assertThat(fsn.nextGenerationStamp(false),is(nextGenerationStampV2));
}
