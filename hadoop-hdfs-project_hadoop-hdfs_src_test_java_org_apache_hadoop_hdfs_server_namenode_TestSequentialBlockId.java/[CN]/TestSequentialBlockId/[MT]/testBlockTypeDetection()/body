{
  FSNamesystem fsn=mock(FSNamesystem.class);
  final long maxGenStampForLegacyBlocks=10000;
  when(fsn.getGenerationStampV1Limit()).thenReturn(maxGenStampForLegacyBlocks);
  Block legacyBlock=spy(new Block());
  when(legacyBlock.getGenerationStamp()).thenReturn(maxGenStampForLegacyBlocks / 2);
  Block newBlock=spy(new Block());
  when(newBlock.getGenerationStamp()).thenReturn(maxGenStampForLegacyBlocks + 1);
  when(fsn.isLegacyBlock(any(Block.class))).thenCallRealMethod();
  assertThat(fsn.isLegacyBlock(legacyBlock),is(true));
  assertThat(fsn.isLegacyBlock(newBlock),is(false));
}
