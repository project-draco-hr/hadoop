{
  TimelineEntity entity=createAppAttemptEntity(appAttempt.getAppAttemptId());
  TimelineEvent tEvent=new TimelineEvent();
  tEvent.setEventType(AppAttemptMetricsConstants.FINISHED_EVENT_TYPE);
  tEvent.setTimestamp(finishedTime);
  Map<String,Object> eventInfo=new HashMap<String,Object>();
  eventInfo.put(AppAttemptMetricsConstants.TRACKING_URL_EVENT_INFO,appAttempt.getTrackingUrl());
  eventInfo.put(AppAttemptMetricsConstants.ORIGINAL_TRACKING_URL_EVENT_INFO,appAttempt.getOriginalTrackingUrl());
  eventInfo.put(AppAttemptMetricsConstants.DIAGNOSTICS_INFO_EVENT_INFO,appAttempt.getDiagnostics());
  eventInfo.put(AppAttemptMetricsConstants.FINAL_STATUS_EVENT_INFO,app.getFinalApplicationStatus().toString());
  eventInfo.put(AppAttemptMetricsConstants.STATE_EVENT_INFO,RMServerUtils.createApplicationAttemptState(appAttemtpState).toString());
  if (appAttempt.getMasterContainer() != null) {
    eventInfo.put(AppAttemptMetricsConstants.MASTER_CONTAINER_EVENT_INFO,appAttempt.getMasterContainer().getId().toString());
  }
  tEvent.setEventInfo(eventInfo);
  entity.addEvent(tEvent);
  getDispatcher().getEventHandler().handle(new TimelineV1PublishEvent(SystemMetricsEventType.PUBLISH_ENTITY,entity,appAttempt.getAppAttemptId().getApplicationId()));
}
