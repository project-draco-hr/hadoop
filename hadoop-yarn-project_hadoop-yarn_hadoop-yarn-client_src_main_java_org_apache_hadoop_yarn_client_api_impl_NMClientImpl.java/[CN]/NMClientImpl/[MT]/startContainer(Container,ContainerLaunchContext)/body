{
  StartedContainer startingContainer=createStartedContainer(container);
synchronized (startingContainer) {
    addStartingContainer(startingContainer);
    Map<String,ByteBuffer> allServiceResponse;
    ContainerManagementProtocolProxyData proxy=null;
    try {
      proxy=cmProxy.getProxy(container.getNodeId().toString(),container.getId());
      StartContainerRequest scRequest=StartContainerRequest.newInstance(containerLaunchContext,container.getContainerToken());
      List<StartContainerRequest> list=new ArrayList<StartContainerRequest>();
      list.add(scRequest);
      StartContainersRequest allRequests=StartContainersRequest.newInstance(list);
      StartContainersResponse response=proxy.getContainerManagementProtocol().startContainers(allRequests);
      if (response.getFailedRequests() != null && response.getFailedRequests().containsKey(container.getId())) {
        Throwable t=response.getFailedRequests().get(container.getId()).deSerialize();
        parseAndThrowException(t);
      }
      allServiceResponse=response.getAllServicesMetaData();
      startingContainer.state=ContainerState.RUNNING;
    }
 catch (    YarnException e) {
      startingContainer.state=ContainerState.COMPLETE;
      removeStartedContainer(startingContainer);
      throw e;
    }
catch (    IOException e) {
      startingContainer.state=ContainerState.COMPLETE;
      removeStartedContainer(startingContainer);
      throw e;
    }
catch (    Throwable t) {
      startingContainer.state=ContainerState.COMPLETE;
      removeStartedContainer(startingContainer);
      throw RPCUtil.getRemoteException(t);
    }
 finally {
      if (proxy != null) {
        cmProxy.mayBeCloseProxy(proxy);
      }
    }
    return allServiceResponse;
  }
}
