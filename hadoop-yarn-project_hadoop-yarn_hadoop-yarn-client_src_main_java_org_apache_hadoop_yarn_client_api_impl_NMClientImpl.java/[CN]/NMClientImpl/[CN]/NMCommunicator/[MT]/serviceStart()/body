{
  final YarnRPC rpc=YarnRPC.create(getConfig());
  final InetSocketAddress containerAddress=NetUtils.createSocketAddr(nodeId.toString());
  UserGroupInformation currentUser=UserGroupInformation.createRemoteUser(containerId.toString());
  org.apache.hadoop.security.token.Token<ContainerTokenIdentifier> token=ConverterUtils.convertFromYarn(containerToken,containerAddress);
  currentUser.addToken(token);
  containerManager=currentUser.doAs(new PrivilegedAction<ContainerManagementProtocol>(){
    @Override public ContainerManagementProtocol run(){
      return (ContainerManagementProtocol)rpc.getProxy(ContainerManagementProtocol.class,containerAddress,getConfig());
    }
  }
);
  LOG.debug("Connecting to ContainerManager at " + containerAddress);
  super.serviceStart();
}
