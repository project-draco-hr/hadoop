{
  AdminACLsManager oldAdminACLsManager=timelineACLsManager.setAdminACLsManager(adminACLsManager);
  try {
    TimelineDomain domain=new TimelineDomain();
    domain.setId("test_domain_id_acl");
    WebResource r=resource();
    ClientResponse response=r.path("ws").path("v1").path("timeline").path("domain").queryParam("user.name","tester").accept(MediaType.APPLICATION_JSON).type(MediaType.APPLICATION_JSON).put(ClientResponse.class,domain);
    assertEquals(Status.OK.getStatusCode(),response.getStatus());
    response=r.path("ws").path("v1").path("timeline").path("domain").queryParam("user.name","other").accept(MediaType.APPLICATION_JSON).type(MediaType.APPLICATION_JSON).put(ClientResponse.class,domain);
    assertEquals(Status.FORBIDDEN.getStatusCode(),response.getStatus());
  }
  finally {
    timelineACLsManager.setAdminACLsManager(oldAdminACLsManager);
  }
}
