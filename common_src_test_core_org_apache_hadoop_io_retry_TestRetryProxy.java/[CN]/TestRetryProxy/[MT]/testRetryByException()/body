{
  Map<Class<? extends Exception>,RetryPolicy> exceptionToPolicyMap=Collections.<Class<? extends Exception>,RetryPolicy>singletonMap(FatalException.class,TRY_ONCE_THEN_FAIL);
  UnreliableInterface unreliable=(UnreliableInterface)RetryProxy.create(UnreliableInterface.class,unreliableImpl,retryByException(RETRY_FOREVER,exceptionToPolicyMap));
  unreliable.failsOnceThenSucceeds();
  try {
    unreliable.alwaysFailsWithFatalException();
    fail("Should fail");
  }
 catch (  FatalException e) {
  }
}
