{
  Configuration conf=getConfig();
  try {
    server=RPC.getServer(TaskUmbilicalProtocol.class,this,"0.0.0.0",0,conf.getInt(MRJobConfig.MR_AM_TASK_LISTENER_THREAD_COUNT,MRJobConfig.DEFAULT_MR_AM_TASK_LISTENER_THREAD_COUNT),false,conf,jobTokenSecretManager);
    if (conf.getBoolean(CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHORIZATION,false)) {
      refreshServiceAcls(conf,new MRAMPolicyProvider());
    }
    server.start();
    InetSocketAddress listenerAddress=server.getListenerAddress();
    listenerAddress.getAddress();
    this.address=NetUtils.createSocketAddr(InetAddress.getLocalHost().getCanonicalHostName() + ":" + listenerAddress.getPort());
  }
 catch (  IOException e) {
    throw new YarnException(e);
  }
}
