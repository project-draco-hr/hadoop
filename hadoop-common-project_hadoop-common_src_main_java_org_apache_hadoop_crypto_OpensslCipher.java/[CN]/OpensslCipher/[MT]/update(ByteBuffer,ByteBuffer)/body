{
  checkState();
  Preconditions.checkArgument(input.isDirect() && output.isDirect(),"Direct buffers are required.");
  int len=update(context,input,input.position(),input.remaining(),output,output.position(),output.remaining());
  input.position(input.limit());
  output.position(output.position() + len);
  return len;
}
