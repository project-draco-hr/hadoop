{
  Configuration conf=new Configuration();
  conf.setInt(DFSConfigKeys.DFS_BLOCK_SIZE_KEY,BLOCK_SIZE);
  conf.setInt(DFSConfigKeys.DFS_HEARTBEAT_INTERVAL_KEY,1);
  cluster=new MiniDFSCluster.Builder(conf).nnTopology(MiniDFSNNTopology.simpleHATopology()).numDataNodes(3).waitSafeMode(false).build();
  cluster.waitActive();
  nn0=cluster.getNameNode(0);
  nn1=cluster.getNameNode(1);
  fs=HATestUtil.configureFailoverFs(cluster,conf);
  nn0.getNamesystem().getEditLogTailer().setRuntime(mockRuntime);
  cluster.transitionToActive(0);
}
