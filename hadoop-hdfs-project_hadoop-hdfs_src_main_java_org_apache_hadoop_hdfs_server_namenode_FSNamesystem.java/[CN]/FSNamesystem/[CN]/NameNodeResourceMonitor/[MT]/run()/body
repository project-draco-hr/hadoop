{
  try {
    while (fsRunning && shouldNNRmRun) {
      checkAvailableResources();
      if (!nameNodeHasResourcesAvailable()) {
        String lowResourcesMsg="NameNode low on available disk space. ";
        if (!isInSafeMode()) {
          FSNamesystem.LOG.warn(lowResourcesMsg + "Entering safe mode.");
        }
 else {
          FSNamesystem.LOG.warn(lowResourcesMsg + "Already in safe mode.");
        }
        enterSafeMode(true);
      }
      try {
        Thread.sleep(resourceRecheckInterval);
      }
 catch (      InterruptedException ie) {
      }
    }
  }
 catch (  Exception e) {
    FSNamesystem.LOG.error("Exception in NameNodeResourceMonitor: ",e);
  }
}
