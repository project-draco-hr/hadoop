{
  writeLock();
  try {
    checkSuperuserPrivilege();
    File file=new File(System.getProperty("hadoop.log.dir"),filename);
    PrintWriter out=new PrintWriter(new BufferedWriter(new FileWriter(file,true)));
    long totalInodes=this.dir.totalInodes();
    long totalBlocks=this.getBlocksTotal();
    out.println(totalInodes + " files and directories, " + totalBlocks+ " blocks = "+ (totalInodes + totalBlocks)+ " total");
    blockManager.metaSave(out);
    out.flush();
    out.close();
  }
  finally {
    writeUnlock();
  }
}
