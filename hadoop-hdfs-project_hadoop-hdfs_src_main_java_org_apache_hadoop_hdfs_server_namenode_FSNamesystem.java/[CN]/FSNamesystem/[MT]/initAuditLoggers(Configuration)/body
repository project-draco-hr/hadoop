{
  Collection<String> alClasses=conf.getStringCollection(DFS_NAMENODE_AUDIT_LOGGERS_KEY);
  List<AuditLogger> auditLoggers=Lists.newArrayList();
  if (alClasses != null && !alClasses.isEmpty()) {
    for (    String className : alClasses) {
      try {
        AuditLogger logger;
        if (DFS_NAMENODE_DEFAULT_AUDIT_LOGGER_NAME.equals(className)) {
          logger=new DefaultAuditLogger();
        }
 else {
          logger=(AuditLogger)Class.forName(className).newInstance();
        }
        logger.initialize(conf);
        auditLoggers.add(logger);
      }
 catch (      RuntimeException re) {
        throw re;
      }
catch (      Exception e) {
        throw new RuntimeException(e);
      }
    }
  }
  if (auditLoggers.isEmpty()) {
    auditLoggers.add(new DefaultAuditLogger());
  }
  if (conf.getBoolean(DFSConfigKeys.NNTOP_ENABLED_KEY,DFSConfigKeys.NNTOP_ENABLED_DEFAULT)) {
    String sessionId=conf.get(DFSConfigKeys.DFS_METRICS_SESSION_ID_KEY);
    TopConf nntopConf=new TopConf(conf);
    TopMetrics.initSingleton(conf,NamenodeRole.NAMENODE.name(),sessionId,nntopConf.nntopReportingPeriodsMs);
    auditLoggers.add(new TopAuditLogger());
  }
  return Collections.unmodifiableList(auditLoggers);
}
