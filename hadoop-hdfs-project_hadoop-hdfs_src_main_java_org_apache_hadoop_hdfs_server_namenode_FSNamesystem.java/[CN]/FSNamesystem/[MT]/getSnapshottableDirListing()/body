{
  SnapshottableDirectoryStatus[] status=null;
  readLock();
  try {
    checkOperation(OperationCategory.READ);
    FSPermissionChecker checker=new FSPermissionChecker(fsOwner.getShortUserName(),supergroup);
    final String user=checker.isSuperUser() ? null : checker.getUser();
    status=snapshotManager.getSnapshottableDirListing(user);
  }
  finally {
    readUnlock();
  }
  if (auditLog.isInfoEnabled() && isExternalInvocation()) {
    logAuditEvent(UserGroupInformation.getCurrentUser(),getRemoteIp(),"listSnapshottableDirectory",null,null,null);
  }
  return status;
}
