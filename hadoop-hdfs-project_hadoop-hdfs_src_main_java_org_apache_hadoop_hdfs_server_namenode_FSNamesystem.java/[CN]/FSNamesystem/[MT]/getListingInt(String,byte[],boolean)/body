{
  DirectoryListing dl;
  FSPermissionChecker pc=getPermissionChecker();
  readLock();
  try {
    checkOperation(OperationCategory.READ);
    if (isPermissionEnabled) {
      if (dir.isDir(src)) {
        checkPathAccess(pc,src,FsAction.READ_EXECUTE);
      }
 else {
        checkTraverse(pc,src);
      }
    }
    if (isAuditEnabled() && isExternalInvocation()) {
      logAuditEvent(UserGroupInformation.getCurrentUser(),getRemoteIp(),"listStatus",src,null,null);
    }
    dl=dir.getListing(src,startAfter,needLocation);
  }
  finally {
    readUnlock();
  }
  return dl;
}
