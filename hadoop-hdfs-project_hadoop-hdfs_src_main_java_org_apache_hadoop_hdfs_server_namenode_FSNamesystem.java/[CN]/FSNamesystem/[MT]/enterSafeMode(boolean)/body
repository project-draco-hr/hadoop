{
  writeLock();
  try {
    getEditLog().logSyncAll();
    if (!isInSafeMode()) {
      safeMode=new SafeModeInfo(resourcesLow);
      return;
    }
    if (resourcesLow) {
      safeMode.setResourcesLow();
    }
    safeMode.setManual();
    getEditLog().logSyncAll();
    NameNode.stateChangeLog.info("STATE* Safe mode is ON. " + safeMode.getTurnOffTip());
  }
  finally {
    writeUnlock();
  }
}
