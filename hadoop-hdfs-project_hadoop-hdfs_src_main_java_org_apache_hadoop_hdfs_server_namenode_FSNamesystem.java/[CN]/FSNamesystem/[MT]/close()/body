{
  fsRunning=false;
  try {
    stopCommonServices();
    if (smmthread != null)     smmthread.interrupt();
  }
  finally {
    try {
      stopActiveServices();
      stopStandbyServices();
      if (dir != null) {
        dir.close();
      }
    }
 catch (    IOException ie) {
      LOG.error("Error closing FSDirectory",ie);
      IOUtils.cleanup(LOG,dir);
    }
  }
}
