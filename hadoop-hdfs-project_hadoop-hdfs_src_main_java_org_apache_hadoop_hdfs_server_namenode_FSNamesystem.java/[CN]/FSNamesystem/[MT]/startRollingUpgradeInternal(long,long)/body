{
  checkRollingUpgrade("start rolling upgrade");
  getFSImage().checkUpgrade(this);
  if (txid < 0 || !getFSImage().hasRollbackFSImage(txid)) {
    getFSImage().saveNamespace(this,NameNodeFile.IMAGE_ROLLBACK,null);
    LOG.info("Successfully saved namespace for preparing rolling upgrade.");
  }
  setRollingUpgradeInfo(startTime);
}
