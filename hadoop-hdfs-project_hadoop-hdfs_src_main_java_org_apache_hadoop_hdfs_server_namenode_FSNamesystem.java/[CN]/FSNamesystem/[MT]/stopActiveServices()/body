{
  LOG.info("Stopping services started for active state");
  writeLock();
  try {
    stopSecretManager();
    if (leaseManager != null) {
      leaseManager.stopMonitor();
    }
    if (dir != null && dir.fsImage != null) {
      if (dir.fsImage.editLog != null) {
        dir.fsImage.editLog.close();
      }
      dir.fsImage.updateLastAppliedTxIdFromWritten();
    }
  }
  finally {
    writeUnlock();
  }
}
