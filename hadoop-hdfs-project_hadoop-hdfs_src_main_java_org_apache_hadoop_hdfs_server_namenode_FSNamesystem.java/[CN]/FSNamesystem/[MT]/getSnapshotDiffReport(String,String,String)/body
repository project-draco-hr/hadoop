{
  SnapshotDiffInfo diffs=null;
  readLock();
  try {
    checkOperation(OperationCategory.READ);
    diffs=snapshotManager.diff(path,fromSnapshot,toSnapshot);
  }
  finally {
    readUnlock();
  }
  if (auditLog.isInfoEnabled() && isExternalInvocation()) {
    logAuditEvent(UserGroupInformation.getCurrentUser(),getRemoteIp(),"computeSnapshotDiff",null,null,null);
  }
  return diffs != null ? diffs.generateReport() : new SnapshotDiffReport(path,fromSnapshot,toSnapshot,Collections.<DiffReportEntry>emptyList());
}
