{
  boolean skipSync=false;
  final HdfsFileStatus stat;
  FSPermissionChecker pc=getPermissionChecker();
  writeLock();
  try {
    checkOperation(OperationCategory.WRITE);
    startFileInternal(pc,src,permissions,holder,clientMachine,flag,createParent,replication,blockSize);
    stat=dir.getFileInfo(src,false);
  }
 catch (  StandbyException se) {
    skipSync=true;
    throw se;
  }
 finally {
    writeUnlock();
    if (!skipSync) {
      getEditLog().logSync();
    }
  }
  if (isAuditEnabled() && isExternalInvocation()) {
    logAuditEvent(UserGroupInformation.getCurrentUser(),getRemoteIp(),"create",src,null,stat);
  }
  return stat;
}
