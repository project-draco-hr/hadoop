{
  Preconditions.checkNotNull(zone);
  Preconditions.checkNotNull(supportedVersions);
  final CryptoProtocolVersion required=zone.getVersion();
  for (  CryptoProtocolVersion c : supportedVersions) {
    if (c.equals(CryptoProtocolVersion.UNKNOWN)) {
      if (LOG.isDebugEnabled()) {
        LOG.debug("Ignoring unknown CryptoProtocolVersion provided by " + "client: " + c.getUnknownValue());
      }
      continue;
    }
    if (c.equals(required)) {
      return c;
    }
  }
  throw new UnknownCryptoProtocolVersionException("No crypto protocol versions provided by the client are supported." + " Client provided: " + Arrays.toString(supportedVersions) + " NameNode supports: "+ Arrays.toString(CryptoProtocolVersion.values()));
}
