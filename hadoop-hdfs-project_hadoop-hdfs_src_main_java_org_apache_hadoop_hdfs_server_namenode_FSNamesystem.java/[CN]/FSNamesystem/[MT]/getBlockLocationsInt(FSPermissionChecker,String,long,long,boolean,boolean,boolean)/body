{
  if (isPermissionEnabled) {
    checkPathAccess(pc,src,FsAction.READ);
  }
  if (offset < 0) {
    throw new HadoopIllegalArgumentException("Negative offset is not supported. File: " + src);
  }
  if (length < 0) {
    throw new HadoopIllegalArgumentException("Negative length is not supported. File: " + src);
  }
  final LocatedBlocks ret=getBlockLocationsUpdateTimes(src,offset,length,doAccessTime,needBlockToken);
  if (isAuditEnabled() && isExternalInvocation()) {
    logAuditEvent(UserGroupInformation.getCurrentUser(),getRemoteIp(),"open",src,null,null);
  }
  if (checkSafeMode && isInSafeMode()) {
    for (    LocatedBlock b : ret.getLocatedBlocks()) {
      if ((b.getLocations() == null) || (b.getLocations().length == 0)) {
        throw new SafeModeException("Zero blocklocations for " + src,safeMode);
      }
    }
  }
  return ret;
}
