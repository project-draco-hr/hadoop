{
  if (action != SafeModeAction.SAFEMODE_GET) {
    checkSuperuserPrivilege();
switch (action) {
case SAFEMODE_LEAVE:
      leaveSafeMode();
    break;
case SAFEMODE_ENTER:
  enterSafeMode(false);
break;
}
}
return isInSafeMode();
}
