{
  LocatedBlocks blocks=getBlockLocations(src,offset,length,true,true,true);
  if (blocks != null) {
    blockManager.getDatanodeManager().sortLocatedBlocks(clientMachine,blocks.getLocatedBlocks(),randomizeBlockLocationsPerBlock);
    LocatedBlock lastBlock=blocks.getLastLocatedBlock();
    if (lastBlock != null) {
      ArrayList<LocatedBlock> lastBlockList=Lists.newArrayListWithCapacity(1);
      lastBlockList.add(lastBlock);
      blockManager.getDatanodeManager().sortLocatedBlocks(clientMachine,lastBlockList,randomizeBlockLocationsPerBlock);
    }
  }
  return blocks;
}
