{
  if (!isImageLoaded() || dir.shouldSkipQuotaChecks()) {
    return null;
  }
  if (file.getLastBlock() != null) {
    final QuotaCounts delta=computeQuotaDeltaForUCBlock(file);
    dir.readLock();
    try {
      FSDirectory.verifyQuota(iip,iip.length() - 1,delta,null);
      return delta;
    }
  finally {
      dir.readUnlock();
    }
  }
  return null;
}
