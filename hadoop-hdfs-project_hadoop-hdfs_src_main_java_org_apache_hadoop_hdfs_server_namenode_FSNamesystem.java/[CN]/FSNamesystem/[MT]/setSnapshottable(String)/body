{
  writeLock();
  try {
    final INodeDirectory d=INodeDirectory.valueOf(dir.getINode(path),path);
    if (d.isSnapshottable()) {
      return;
    }
    final INodeDirectorySnapshottable s=INodeDirectorySnapshottable.newInstance(d);
    dir.replaceINodeDirectory(path,d,s);
  }
  finally {
    writeUnlock();
  }
}
