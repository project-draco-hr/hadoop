{
  checkSuperuserPrivilege();
  checkOperation(OperationCategory.JOURNAL);
  writeLock();
  try {
    checkOperation(OperationCategory.JOURNAL);
    if (isInSafeMode()) {
      throw new SafeModeException("Log not rolled",safeMode);
    }
    LOG.info("Roll Edit Log from " + Server.getRemoteAddress());
    return getFSImage().rollEditLog();
  }
  finally {
    writeUnlock();
  }
}
