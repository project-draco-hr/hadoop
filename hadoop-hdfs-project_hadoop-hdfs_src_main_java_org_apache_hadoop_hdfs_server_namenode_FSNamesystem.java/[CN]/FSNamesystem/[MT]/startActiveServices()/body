{
  LOG.info("Starting services required for active state");
  writeLock();
  try {
    if (!dir.fsImage.editLog.isOpenForWrite()) {
      dir.fsImage.editLog.initJournalsForWrite();
      dir.fsImage.editLog.recoverUnclosedStreams();
      dir.fsImage.editLog.openForWrite();
    }
    if (UserGroupInformation.isSecurityEnabled()) {
      startSecretManager();
    }
    leaseManager.startMonitor();
  }
  finally {
    writeUnlock();
  }
}
