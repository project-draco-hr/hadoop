{
  writeLock();
  try {
    if (isInSafeMode()) {
      throw new SafeModeException("Cannot log master key update in safe mode",safeMode);
    }
    getEditLog().logUpdateMasterKey(key);
  }
  finally {
    writeUnlock();
  }
  getEditLog().logSync();
}
