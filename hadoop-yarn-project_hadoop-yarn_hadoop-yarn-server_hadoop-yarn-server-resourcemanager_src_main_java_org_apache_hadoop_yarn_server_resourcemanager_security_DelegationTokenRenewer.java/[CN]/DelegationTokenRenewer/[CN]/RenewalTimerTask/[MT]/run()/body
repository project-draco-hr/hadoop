{
  if (cancelled.get()) {
    return;
  }
  Token<?> token=dttr.token;
  try {
    requestNewHdfsDelegationTokenIfNeeded(dttr);
    if (!dttr.isTimerCancelled()) {
      renewToken(dttr);
      setTimerForTokenRenewal(dttr);
    }
 else {
      LOG.info("The token was removed already. Token = [" + dttr + "]");
    }
  }
 catch (  Exception e) {
    LOG.error("Exception renewing token" + token + ". Not rescheduled",e);
    removeFailedDelegationToken(dttr);
  }
}
