{
  Map<String,Map<Resource,ResourceRequest>> remoteRequests=this.remoteRequestsTable.get(priority);
  if (remoteRequests == null) {
    remoteRequests=new HashMap<String,Map<Resource,ResourceRequest>>();
    this.remoteRequestsTable.put(priority,remoteRequests);
    if (LOG.isDebugEnabled()) {
      LOG.debug("Added priority=" + priority);
    }
  }
  Map<Resource,ResourceRequest> reqMap=remoteRequests.get(resourceName);
  if (reqMap == null) {
    reqMap=new HashMap<Resource,ResourceRequest>();
    remoteRequests.put(resourceName,reqMap);
  }
  ResourceRequest remoteRequest=reqMap.get(capability);
  if (remoteRequest == null) {
    remoteRequest=BuilderUtils.newResourceRequest(priority,resourceName,capability,0);
    reqMap.put(capability,remoteRequest);
  }
  remoteRequest.setNumContainers(remoteRequest.getNumContainers() + containerCount);
  addResourceRequestToAsk(remoteRequest);
  if (LOG.isDebugEnabled()) {
    LOG.debug("addResourceRequest:" + " applicationId=" + appAttemptId + " priority="+ priority.getPriority()+ " resourceName="+ resourceName+ " numContainers="+ remoteRequest.getNumContainers()+ " #asks="+ ask.size());
  }
}
