{
  assertTrue(doAnEdit());
  invalidateEditsDirAtIndex(0,true,true);
  invalidateEditsDirAtIndex(1,true,true);
  try {
    doAnEdit();
    fail("The previous edit could not be synced to any persistent storage, " + " should have halted the NN");
  }
 catch (  RemoteException re) {
    assertTrue(re.getClassName().contains("ExitException"));
    GenericTestUtils.assertExceptionContains("Could not sync enough journals to persistent storage due to " + "No journals available to flush. " + "Unsynced transactions: 1",re);
  }
}
