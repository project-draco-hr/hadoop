{
  assertAllBlocksComplete();
  final long atime=getModificationTime();
  final INodeFileWithSnapshot f=new INodeFileWithSnapshot(this,getDiffs());
  f.setModificationTime(mtime);
  f.setAccessTime(atime);
  return f;
}
