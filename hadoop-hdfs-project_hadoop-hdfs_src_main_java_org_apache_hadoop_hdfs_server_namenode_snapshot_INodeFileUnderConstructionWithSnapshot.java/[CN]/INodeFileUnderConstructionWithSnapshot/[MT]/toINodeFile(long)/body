{
  assertAllBlocksComplete();
  final long atime=getModificationTime();
  final INodeFileWithSnapshot f=new INodeFileWithSnapshot(this,diffs);
  f.setModificationTime(mtime,null);
  f.setAccessTime(atime,null);
  this.insertBefore(f);
  return f;
}
