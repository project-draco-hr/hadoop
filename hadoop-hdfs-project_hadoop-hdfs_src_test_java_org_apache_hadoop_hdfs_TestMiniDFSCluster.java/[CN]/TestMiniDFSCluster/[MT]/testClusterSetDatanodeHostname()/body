{
  assumeTrue(System.getProperty("os.name").startsWith("Linux"));
  Configuration conf=new HdfsConfiguration();
  conf.set(DFSConfigKeys.DFS_DATANODE_HOST_NAME_KEY,"MYHOST");
  File testDataCluster5=new File(testDataPath,CLUSTER_5);
  String c5Path=testDataCluster5.getAbsolutePath();
  conf.set(MiniDFSCluster.HDFS_MINIDFS_BASEDIR,c5Path);
  MiniDFSCluster cluster5=new MiniDFSCluster.Builder(conf).numDataNodes(1).checkDataNodeHostConfig(true).build();
  try {
    assertEquals("DataNode hostname config not respected","MYHOST",cluster5.getDataNodes().get(0).getDatanodeId().getHostName());
  }
  finally {
    MiniDFSCluster.shutdownCluster(cluster5);
  }
}
