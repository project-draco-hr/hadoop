{
  targetTestRoot=FileSystemTestHelper.getAbsoluteTestRootPath(fsTarget);
  fsTarget.delete(targetTestRoot,true);
  fsTarget.mkdirs(targetTestRoot);
  fsTarget.mkdirs(new Path(targetTestRoot,"user"));
  fsTarget.mkdirs(new Path(targetTestRoot,"data"));
  fsTarget.mkdirs(new Path(targetTestRoot,"dir2"));
  fsTarget.mkdirs(new Path(targetTestRoot,"dir3"));
  FileSystemTestHelper.createFile(fsTarget,new Path(targetTestRoot,"aFile"));
  conf=ViewFileSystemTestSetup.configWithViewfsScheme();
  ConfigUtil.addLink(conf,"/user",new Path(targetTestRoot,"user").toUri());
  ConfigUtil.addLink(conf,"/user2",new Path(targetTestRoot,"user").toUri());
  ConfigUtil.addLink(conf,"/data",new Path(targetTestRoot,"data").toUri());
  ConfigUtil.addLink(conf,"/internalDir/linkToDir2",new Path(targetTestRoot,"dir2").toUri());
  ConfigUtil.addLink(conf,"/internalDir/internalDir2/linkToDir3",new Path(targetTestRoot,"dir3").toUri());
  ConfigUtil.addLink(conf,"/danglingLink",new Path(targetTestRoot,"missingTarget").toUri());
  ConfigUtil.addLink(conf,"/linkToAFile",new Path(targetTestRoot,"aFile").toUri());
  fsView=FileSystem.get(FsConstants.VIEWFS_URI,conf);
}
