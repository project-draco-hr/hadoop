{
  Configuration conf=createJobConf();
  Job job=MapReduceTestUtil.createJob(conf,getInputDir(),getOutputDir(),1,1);
  job.setOutputFormatClass(BadOutputFormat.class);
  try {
    job.submit();
    fail("Should've thrown an exception while checking output specs.");
  }
 catch (  Exception e) {
    assertTrue(e instanceof IOException);
  }
  JobID jobId=job.getJobID();
  Cluster cluster=new Cluster(conf);
  Path jobStagingArea=JobSubmissionFiles.getStagingDir(cluster,job.getConfiguration());
  Path submitJobDir=new Path(jobStagingArea,jobId.toString());
  Path submitJobFile=JobSubmissionFiles.getJobConfPath(submitJobDir);
  assertFalse("Shouldn't have created a job file if job specs failed.",FileSystem.get(conf).exists(submitJobFile));
}
