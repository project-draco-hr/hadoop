{
  File krb5conf=getKdc().getKrb5conf();
  String krbConfig=FileUtils.readFileToString(krb5conf);
  LOG.info("krb5.conf at {}:\n{}",krb5conf,krbConfig);
  Subject subject=new Subject();
  final Krb5LoginModule krb5LoginModule=new Krb5LoginModule();
  final Map<String,String> options=new HashMap<String,String>();
  options.put("keyTab",keytab_alice.getAbsolutePath());
  options.put("principal",ALICE_LOCALHOST);
  options.put("debug","true");
  options.put("doNotPrompt","true");
  options.put("isInitiator","true");
  options.put("refreshKrb5Config","true");
  options.put("renewTGT","true");
  options.put("storeKey","true");
  options.put("useKeyTab","true");
  options.put("useTicketCache","true");
  krb5LoginModule.initialize(subject,null,new HashMap<String,String>(),options);
  boolean loginOk=krb5LoginModule.login();
  assertTrue("Failed to login",loginOk);
  boolean commitOk=krb5LoginModule.commit();
  assertTrue("Failed to Commit",commitOk);
}
