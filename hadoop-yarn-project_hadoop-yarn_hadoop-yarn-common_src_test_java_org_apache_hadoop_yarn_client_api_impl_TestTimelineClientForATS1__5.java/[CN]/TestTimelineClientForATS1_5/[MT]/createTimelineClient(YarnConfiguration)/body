{
  TimelineClientImpl client=new TimelineClientImpl(){
    @Override protected TimelineWriter createTimelineWriter(    Configuration conf,    UserGroupInformation authUgi,    Client client,    URI resURI) throws IOException {
      TimelineWriter timelineWriter=new FileSystemTimelineWriter(conf,authUgi,client,resURI){
        public ClientResponse doPostingObject(        Object object,        String path){
          ClientResponse response=mock(ClientResponse.class);
          when(response.getClientResponseStatus()).thenReturn(ClientResponse.Status.OK);
          return response;
        }
      }
;
      spyTimelineWriter=spy(timelineWriter);
      return spyTimelineWriter;
    }
  }
;
  client.init(conf);
  client.start();
  return client;
}
