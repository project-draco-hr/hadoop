{
  FSDirXAttrOp.checkXAttrsConfigFlag(fsd);
  FSPermissionChecker pc=fsd.getPermissionChecker();
  XAttrPermissionFilter.checkPermissionForApi(pc,xAttr,FSDirectory.isReservedRawName(src));
  byte[][] pathComponents=FSDirectory.getPathComponentsForReservedPath(src);
  List<XAttr> xAttrs=Lists.newArrayListWithCapacity(1);
  xAttrs.add(xAttr);
  INodesInPath iip;
  fsd.writeLock();
  try {
    src=fsd.resolvePath(pc,src,pathComponents);
    iip=fsd.getINodesInPath4Write(src);
    checkXAttrChangeAccess(fsd,iip,xAttr,pc);
    List<XAttr> removedXAttrs=unprotectedRemoveXAttrs(fsd,src,xAttrs);
    if (removedXAttrs != null && !removedXAttrs.isEmpty()) {
      fsd.getEditLog().logRemoveXAttrs(src,removedXAttrs,logRetryCache);
    }
 else {
      throw new IOException("No matching attributes found for remove operation");
    }
  }
  finally {
    fsd.writeUnlock();
  }
  return fsd.getAuditFileInfo(iip);
}
