{
  runBuckets.remove(app.getApplicationId());
switch (rmAppAttemptFinalState) {
case KILLED:
    appsKilled.incr();
  break;
case FAILED:
appsFailed.incr();
break;
default :
appsCompleted.incr();
break;
}
if (app.isPending()) {
appsPending.decr();
}
 else {
appsRunning.decr();
}
QueueMetrics userMetrics=getUserMetrics(app.getUser());
if (userMetrics != null) {
userMetrics.finishApp(app,rmAppAttemptFinalState);
}
if (parent != null) {
parent.finishApp(app,rmAppAttemptFinalState);
}
}
