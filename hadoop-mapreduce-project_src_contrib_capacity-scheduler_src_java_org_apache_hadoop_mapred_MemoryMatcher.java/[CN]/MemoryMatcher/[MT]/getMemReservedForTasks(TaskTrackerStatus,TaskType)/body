{
  long vmem=0;
  for (  TaskStatus task : taskTracker.getTaskReports()) {
    if ((task.getRunState() == TaskStatus.State.RUNNING) || (task.getRunState() == TaskStatus.State.UNASSIGNED) || (task.inTaskCleanupPhase())) {
      long myVmem=0;
      if (task.getIsMap() && taskType == TaskType.MAP) {
        long memSizePerMapSlot=getMemSizeForMapSlot();
        myVmem=memSizePerMapSlot * task.getNumSlots();
      }
 else       if (!task.getIsMap() && taskType == TaskType.REDUCE) {
        long memSizePerReduceSlot=getMemSizeForReduceSlot();
        myVmem=memSizePerReduceSlot * task.getNumSlots();
      }
      vmem+=myVmem;
    }
  }
  return Long.valueOf(vmem);
}
