{
  try (FsDatasetSpi.FsVolumeReferences refs=dn.getFSDataset().getFsVolumeReferences()){
    for (    FsVolumeSpi fvs : refs) {
      FsVolumeImpl volume=(FsVolumeImpl)fvs;
      if (volume.getStorageType() == type) {
        LOG.info("setCapacity to 0 for [" + volume.getStorageType() + "]"+ volume.getStorageID());
        volume.setCapacityForTesting(0);
      }
    }
  }
 catch (  IOException e) {
    LOG.error("Unexpected exception by closing FsVolumeReference",e);
  }
}
