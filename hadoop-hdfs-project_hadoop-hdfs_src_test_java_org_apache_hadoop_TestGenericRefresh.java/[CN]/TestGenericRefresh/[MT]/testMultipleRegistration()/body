{
  RefreshRegistry.defaultRegistry().register("sharedId",firstHandler);
  RefreshRegistry.defaultRegistry().register("sharedId",secondHandler);
  DFSAdmin admin=new DFSAdmin(config);
  String[] args=new String[]{"-refresh","localhost:" + cluster.getNameNodePort(),"sharedId","one"};
  int exitCode=admin.run(args);
  assertEquals(-1,exitCode);
  Mockito.verify(firstHandler).handleRefresh("sharedId",new String[]{"one"});
  Mockito.verify(secondHandler).handleRefresh("sharedId",new String[]{"one"});
  RefreshRegistry.defaultRegistry().unregisterAll("sharedId");
}
