{
  Class<?> resType=method.getReturnType();
switch (metricType) {
case COUNTER:
    return newCounter(resType);
case GAUGE:
  return newGauge(resType);
case DEFAULT:
return resType == String.class ? newTag(resType) : newGauge(resType);
case TAG:
return newTag(resType);
default :
checkArg(metricType,false,"unsupported metric type");
return null;
}
}
