{
  T[] r=a.length >= size ? a : (T[])java.lang.reflect.Array.newInstance(a.getClass().getComponentType(),size);
  if (!isEmpty()) {
    Node<E> node=root.getLeftMostNode();
    int pos=0;
    while (node != null) {
      System.arraycopy(node.entries,node.leftIndex,r,pos,node.size);
      pos+=node.size;
      node=node.next;
    }
    if (r.length > pos) {
      r[pos]=null;
    }
  }
 else   if (a.length > 0) {
    a[0]=null;
  }
  return r;
}
