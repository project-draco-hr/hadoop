{
  length=(int)Math.min(length,bytesRemaining);
  int bytes=file.read(buffer,offset,length);
  if (bytes > 0) {
    bytesRemaining-=bytes;
  }
  return bytes;
}
