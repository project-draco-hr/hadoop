{
  this.state=state;
  this.proxy=makeMock();
  try {
    Configuration conf=new Configuration();
    conf.set(DUMMY_FENCE_KEY,DummyFencer.class.getName());
    this.fencer=Mockito.spy(NodeFencer.create(conf,DUMMY_FENCE_KEY));
  }
 catch (  BadFencingConfigurationException e) {
    throw new RuntimeException(e);
  }
  this.address=address;
synchronized (instances) {
    instances.add(this);
    this.index=instances.size();
  }
}
