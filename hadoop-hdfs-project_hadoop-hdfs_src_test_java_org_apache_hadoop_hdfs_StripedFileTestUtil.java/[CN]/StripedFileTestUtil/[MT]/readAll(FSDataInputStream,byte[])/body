{
  int readLen=0;
  int ret;
  while ((ret=in.read(buf,readLen,buf.length - readLen)) >= 0 && readLen <= buf.length) {
    readLen+=ret;
  }
  return readLen;
}
