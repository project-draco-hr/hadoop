{
  try {
    while (remainingEvents.isEmpty()) {
      ParsedLine line=new ParsedLine(getFullLine(),internalVersion);
      LineType type=LineType.findLineType(line.getType());
      if (type == null) {
        continue;
      }
      String name=type.getName(line);
      HistoryEventEmitter emitter=findOrMakeEmitter(name,type);
      Pair<Queue<HistoryEvent>,HistoryEventEmitter.PostEmitAction> pair=emitter.emitterCore(line,name);
      if (pair.second() == HistoryEventEmitter.PostEmitAction.REMOVE_HEE) {
        liveEmitters.remove(name);
      }
      remainingEvents=pair.first();
    }
    return remainingEvents.poll();
  }
 catch (  EOFException e) {
    return null;
  }
catch (  IOException e) {
    return null;
  }
}
