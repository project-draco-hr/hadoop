{
  UnreliableInterface unreliable=(UnreliableInterface)RetryProxy.create(UnreliableInterface.class,new FlipFlopProxyProvider(UnreliableInterface.class,new UnreliableImplementation("impl1",TypeOfExceptionToFailWith.IO_EXCEPTION),new UnreliableImplementation("impl2",TypeOfExceptionToFailWith.UNRELIABLE_EXCEPTION)),RetryPolicies.failoverOnNetworkException(1));
  try {
    unreliable.nonIdempotentVoidFailsIfIdentifierDoesntMatch("impl2");
    fail("did not throw an exception");
  }
 catch (  Exception e) {
  }
}
