{
  String rmId=getRMHAId(conf);
  if (rmId == null) {
    StringBuilder msg=new StringBuilder();
    msg.append("Can not find valid RM_HA_ID. None of ");
    for (    String id : conf.getTrimmedStringCollection(YarnConfiguration.RM_HA_IDS)) {
      msg.append(addSuffix(YarnConfiguration.RM_ADDRESS,id) + " ");
    }
    msg.append(" are matching" + " the local address OR " + YarnConfiguration.RM_HA_ID + " is not"+ " specified in HA Configuration");
    throwBadConfigurationException(msg.toString());
  }
 else {
    Collection<String> ids=getRMHAIds(conf);
    if (!ids.contains(rmId)) {
      throwBadConfigurationException(getRMHAIdNeedToBeIncludedMessage(ids.toString(),rmId));
    }
  }
  conf.set(YarnConfiguration.RM_HA_ID,rmId);
}
