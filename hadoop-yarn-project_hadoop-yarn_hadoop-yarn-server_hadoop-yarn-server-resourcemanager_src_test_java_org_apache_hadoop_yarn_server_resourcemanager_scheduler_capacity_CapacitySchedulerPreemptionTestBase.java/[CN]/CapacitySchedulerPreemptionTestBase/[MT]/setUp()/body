{
  conf=new YarnConfiguration();
  conf.setClass(YarnConfiguration.RM_SCHEDULER,CapacityScheduler.class,ResourceScheduler.class);
  conf.setBoolean(YarnConfiguration.RM_SCHEDULER_ENABLE_MONITORS,true);
  conf.setClass(YarnConfiguration.RM_SCHEDULER_MONITOR_POLICIES,ProportionalCapacityPreemptionPolicy.class,SchedulingEditPolicy.class);
  conf=TestUtils.getConfigurationWithMultipleQueues(this.conf);
  conf.setInt(CapacitySchedulerConfiguration.PREEMPTION_WAIT_TIME_BEFORE_KILL,0);
  conf.setFloat(CapacitySchedulerConfiguration.TOTAL_PREEMPTION_PER_ROUND,1.0f);
  conf.setFloat(CapacitySchedulerConfiguration.PREEMPTION_NATURAL_TERMINATION_FACTOR,1.0f);
  conf.setLong(CapacitySchedulerConfiguration.PREEMPTION_MONITORING_INTERVAL,60000L);
  mgr=new NullRMNodeLabelsManager();
  mgr.init(this.conf);
  clock=mock(Clock.class);
  when(clock.getTime()).thenReturn(0L);
}
