{
  int dataLen=decodingState.decodeLength;
  CoderUtil.resetOutputBuffers(decodingState.outputs,decodingState.outputOffsets,dataLen);
  prepareDecoding(decodingState.inputs,decodingState.erasedIndexes);
  byte[][] realInputs=new byte[getNumDataUnits()][];
  int[] realInputOffsets=new int[getNumDataUnits()];
  for (int i=0; i < getNumDataUnits(); i++) {
    realInputs[i]=decodingState.inputs[validIndexes[i]];
    realInputOffsets[i]=decodingState.inputOffsets[validIndexes[i]];
  }
  RSUtil.encodeData(gfTables,dataLen,realInputs,realInputOffsets,decodingState.outputs,decodingState.outputOffsets);
}
