{
  Configuration conf=new HdfsConfiguration();
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(0).build();
  try {
    String fsName=NameNode.getHostPortString(cluster.getNameNode().getHttpAddress());
    String id="getimage=1";
    File[] localPath=new File[]{new File("/xxxxx-does-not-exist/blah")};
    TransferFsImage.getFileClient(fsName,id,localPath,false);
    fail("Didn't get an exception!");
  }
 catch (  IOException ioe) {
    assertTrue("Expected FNFE, got: " + StringUtils.stringifyException(ioe),ioe instanceof FileNotFoundException);
  }
 finally {
    cluster.shutdown();
  }
}
