{
  Util.out.print("\nParsing " + inputpath + " ... ");
  Util.out.flush();
  final Map<Parameter,List<TaskResult>> parsed=parse(inputpath);
  Util.out.println("DONE");
  if (outputdir != null) {
    Util.out.print("\nWriting to " + outputdir + " ...");
    Util.out.flush();
    for (    Parameter p : Parameter.values()) {
      final List<TaskResult> results=parsed.get(p);
      Collections.sort(results);
      final PrintWriter out=new PrintWriter(new FileWriter(new File(outputdir,p + ".txt")),true);
      try {
        for (int i=0; i < results.size(); i++)         out.println(DistSum.taskResult2string(p + "." + i,results.get(i)));
      }
  finally {
        out.close();
      }
    }
    Util.out.println("DONE");
  }
  return parsed;
}
