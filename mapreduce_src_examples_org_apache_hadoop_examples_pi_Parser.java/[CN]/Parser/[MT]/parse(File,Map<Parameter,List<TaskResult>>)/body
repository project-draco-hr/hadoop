{
  if (f.isDirectory()) {
    println("Process directory " + f);
    for (    File child : f.listFiles())     parse(child,sums);
  }
 else   if (f.getName().endsWith(".txt")) {
    println("Parse file " + f);
    final Map<Parameter,List<TaskResult>> m=new TreeMap<Parameter,List<TaskResult>>();
    for (    Parameter p : Parameter.values())     m.put(p,new ArrayList<TaskResult>());
    final BufferedReader in=new BufferedReader(new FileReader(f));
    try {
      for (String line; (line=in.readLine()) != null; )       try {
        parseLine(line,m);
      }
 catch (      RuntimeException e) {
        Util.err.println("line = " + line);
        throw e;
      }
    }
  finally {
      in.close();
    }
    for (    Parameter p : Parameter.values()) {
      final List<TaskResult> combined=Util.combine(m.get(p));
      if (!combined.isEmpty()) {
        println(p + " (size=" + combined.size()+ "):");
        for (        TaskResult r : combined)         println("  " + r);
      }
      sums.get(p).addAll(m.get(p));
    }
  }
}
