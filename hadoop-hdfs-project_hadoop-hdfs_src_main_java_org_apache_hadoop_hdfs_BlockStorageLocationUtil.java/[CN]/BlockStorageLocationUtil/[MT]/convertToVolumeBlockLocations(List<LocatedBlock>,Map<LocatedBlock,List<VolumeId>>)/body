{
  BlockLocation[] locations=DFSUtilClient.locatedBlocks2Locations(blocks);
  List<BlockStorageLocation> volumeBlockLocs=new ArrayList<BlockStorageLocation>(locations.length);
  for (int i=0; i < locations.length; i++) {
    LocatedBlock locBlock=blocks.get(i);
    List<VolumeId> volumeIds=blockVolumeIds.get(locBlock);
    BlockStorageLocation bsLoc=new BlockStorageLocation(locations[i],volumeIds.toArray(new VolumeId[0]));
    volumeBlockLocs.add(bsLoc);
  }
  return volumeBlockLocs.toArray(new BlockStorageLocation[]{});
}
