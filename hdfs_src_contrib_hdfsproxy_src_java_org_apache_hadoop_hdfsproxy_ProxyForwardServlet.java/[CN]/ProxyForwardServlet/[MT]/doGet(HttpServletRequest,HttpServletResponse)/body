{
  String hostname=request.getServerName();
  String version=configuration.get(hostname);
  if (version == null) {
    String[] strs=hostname.split("[-\\.]");
    version="/" + strs[0];
  }
  ServletContext curContext=getServletContext();
  ServletContext dstContext=curContext.getContext(version);
  if (dstContext == null || getServletContext().equals(dstContext)) {
    LOG.error("Context (" + version + ".war) non-exist or restricted from access");
    response.sendError(HttpServletResponse.SC_NOT_FOUND);
    return;
  }
  if (LOG.isDebugEnabled()) {
    LOG.debug("Request to " + hostname + " is forwarded to version "+ version);
  }
  forwardRequest(request,response,dstContext,request.getServletPath());
}
