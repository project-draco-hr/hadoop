{
  File localf=pathToFile(f);
  FileStatus[] results;
  if (!localf.exists()) {
    throw new FileNotFoundException("File " + f + " does not exist");
  }
  if (localf.isFile()) {
    if (!useDeprecatedFileStatus) {
      return new FileStatus[]{getFileStatus(f)};
    }
    return new FileStatus[]{new DeprecatedRawLocalFileStatus(localf,getDefaultBlockSize(f),this)};
  }
  String[] names=localf.list();
  if (names == null) {
    return null;
  }
  results=new FileStatus[names.length];
  int j=0;
  for (int i=0; i < names.length; i++) {
    try {
      results[j]=getFileStatus(new Path(f,new Path(null,null,names[i])));
      j++;
    }
 catch (    FileNotFoundException e) {
    }
  }
  if (j == names.length) {
    return results;
  }
  return Arrays.copyOf(results,j);
}
