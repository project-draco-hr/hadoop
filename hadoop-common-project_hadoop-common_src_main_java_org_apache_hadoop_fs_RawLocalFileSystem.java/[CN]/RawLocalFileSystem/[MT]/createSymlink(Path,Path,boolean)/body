{
  final String targetScheme=target.toUri().getScheme();
  if (targetScheme != null && !"file".equals(targetScheme)) {
    throw new IOException("Unable to create symlink to non-local file " + "system: " + target.toString());
  }
  if (createParent) {
    mkdirs(link.getParent());
  }
  try {
    Shell.execCommand(Shell.getSymlinkCommand(Path.getPathWithoutSchemeAndAuthority(target).toString(),Path.getPathWithoutSchemeAndAuthority(makeAbsolute(link)).toString()));
  }
 catch (  IOException x) {
    throw new IOException("Unable to create symlink: " + x.getMessage());
  }
}
