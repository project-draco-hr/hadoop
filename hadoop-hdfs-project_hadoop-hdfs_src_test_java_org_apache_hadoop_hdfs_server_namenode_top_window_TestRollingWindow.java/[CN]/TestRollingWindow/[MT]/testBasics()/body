{
  RollingWindow window=new RollingWindow(WINDOW_LEN,BUCKET_CNT);
  long time=1;
  Assert.assertEquals("The initial sum of rolling window must be 0",0,window.getSum(time));
  time=WINDOW_LEN + BUCKET_LEN * 3 / 2;
  Assert.assertEquals("The initial sum of rolling window must be 0",0,window.getSum(time));
  window.incAt(time,5);
  Assert.assertEquals("The sum of rolling window does not reflect the recent update",5,window.getSum(time));
  time+=BUCKET_LEN;
  window.incAt(time,6);
  Assert.assertEquals("The sum of rolling window does not reflect the recent update",11,window.getSum(time));
  time+=WINDOW_LEN - BUCKET_LEN;
  Assert.assertEquals("The sum of rolling window does not reflect rolling effect",6,window.getSum(time));
  time+=BUCKET_LEN;
  Assert.assertEquals("The sum of rolling window does not reflect rolling effect",0,window.getSum(time));
}
