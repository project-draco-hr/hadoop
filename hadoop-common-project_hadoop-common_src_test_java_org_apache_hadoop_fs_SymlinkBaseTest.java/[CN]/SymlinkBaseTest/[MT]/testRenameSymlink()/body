{
  assumeTrue(!emulatingSymlinksOnWindows());
  Path file=new Path(testBaseDir1(),"file");
  Path link1=new Path(testBaseDir1(),"linkToFile1");
  Path link2=new Path(testBaseDir1(),"linkToFile2");
  createAndWriteFile(file);
  wrapper.createSymlink(file,link1,false);
  wrapper.rename(link1,link2);
  assertTrue(wrapper.getFileLinkStatus(link2).isSymlink());
  assertFalse(wrapper.getFileStatus(link2).isDirectory());
  readFile(link2);
  readFile(file);
  try {
    createAndWriteFile(link2);
    fail("link was not renamed");
  }
 catch (  IOException x) {
  }
}
