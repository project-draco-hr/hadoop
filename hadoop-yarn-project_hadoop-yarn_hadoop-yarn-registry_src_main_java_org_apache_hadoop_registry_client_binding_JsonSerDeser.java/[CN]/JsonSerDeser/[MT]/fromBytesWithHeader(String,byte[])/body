{
  int hlen=header.length;
  int blen=buffer.length;
  if (hlen > 0) {
    if (blen < hlen) {
      throw new NoRecordException(path,E_NO_SERVICE_RECORD);
    }
    byte[] magic=Arrays.copyOfRange(buffer,0,hlen);
    if (!Arrays.equals(header,magic)) {
      LOG.debug("start of entry does not match service record header at {}",path);
      throw new NoRecordException(path,E_NO_SERVICE_RECORD);
    }
  }
  return fromBytes(path,buffer,hlen);
}
