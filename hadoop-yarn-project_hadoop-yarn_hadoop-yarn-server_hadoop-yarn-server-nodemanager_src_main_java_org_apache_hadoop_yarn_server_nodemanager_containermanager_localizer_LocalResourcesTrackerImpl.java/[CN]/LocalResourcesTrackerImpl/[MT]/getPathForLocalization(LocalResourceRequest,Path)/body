{
  if (useLocalCacheDirectoryManager && localDirPath != null) {
    if (!directoryManagers.containsKey(localDirPath)) {
      directoryManagers.putIfAbsent(localDirPath,new LocalCacheDirectoryManager(conf));
    }
    LocalCacheDirectoryManager dir=directoryManagers.get(localDirPath);
    Path rPath=localDirPath;
    String hierarchicalPath=dir.getRelativePathForLocalization();
    if (!hierarchicalPath.isEmpty()) {
      rPath=new Path(localDirPath,hierarchicalPath);
    }
    inProgressLocalResourcesMap.put(req,rPath);
    return rPath;
  }
 else {
    return localDirPath;
  }
}
