{
  LocalResourceRequest req=event.getLocalResourceRequest();
  LocalizedResource rsrc=localrsrc.get(req);
switch (event.getType()) {
case REQUEST:
case LOCALIZED:
    if (rsrc != null && (!isResourcePresent(rsrc))) {
      LOG.info("Resource " + rsrc.getLocalPath() + " is missing, localizing it again");
      localrsrc.remove(req);
      decrementFileCountForLocalCacheDirectory(req,rsrc);
      rsrc=null;
    }
  if (null == rsrc) {
    rsrc=new LocalizedResource(req,dispatcher);
    localrsrc.put(req,rsrc);
  }
break;
case RELEASE:
if (null == rsrc) {
LOG.info("Release unknown rsrc null (discard)");
return;
}
break;
}
rsrc.handle(event);
}
