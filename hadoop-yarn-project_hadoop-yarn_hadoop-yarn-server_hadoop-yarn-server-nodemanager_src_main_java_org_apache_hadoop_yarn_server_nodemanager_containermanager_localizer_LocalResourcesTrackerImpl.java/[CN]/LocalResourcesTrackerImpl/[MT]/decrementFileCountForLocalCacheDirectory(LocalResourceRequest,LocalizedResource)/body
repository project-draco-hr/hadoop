{
  if (useLocalCacheDirectoryManager) {
    Path rsrcPath=null;
    if (inProgressLocalResourcesMap.containsKey(req)) {
      rsrcPath=inProgressLocalResourcesMap.remove(req);
    }
 else     if (rsrc != null && rsrc.getLocalPath() != null) {
      rsrcPath=rsrc.getLocalPath().getParent().getParent();
    }
    if (rsrcPath != null) {
      Path parentPath=new Path(rsrcPath.toUri().getRawPath());
      while (!directoryManagers.containsKey(parentPath)) {
        parentPath=parentPath.getParent();
        if (parentPath == null) {
          return;
        }
      }
      if (parentPath != null) {
        String parentDir=parentPath.toUri().getRawPath().toString();
        LocalCacheDirectoryManager dir=directoryManagers.get(parentPath);
        String rsrcDir=rsrcPath.toUri().getRawPath();
        if (rsrcDir.equals(parentDir)) {
          dir.decrementFileCountForPath("");
        }
 else {
          dir.decrementFileCountForPath(rsrcDir.substring(parentDir.length() + 1));
        }
      }
    }
  }
}
