{
  writeLocalName(file,out);
  out.writeLong(file.getId());
  out.writeShort(file.getFileReplication());
  out.writeLong(file.getModificationTime());
  out.writeLong(file.getAccessTime());
  out.writeLong(file.getPreferredBlockSize());
  writeBlocks(file.getBlocks(),out);
  SnapshotFSImageFormat.saveFileDiffList(file,out);
  if (writeUnderConstruction) {
    if (file instanceof INodeFileUnderConstruction) {
      out.writeBoolean(true);
      final INodeFileUnderConstruction uc=(INodeFileUnderConstruction)file;
      writeString(uc.getClientName(),out);
      writeString(uc.getClientMachine(),out);
    }
 else {
      out.writeBoolean(false);
    }
  }
  writePermissionStatus(file,out);
}
