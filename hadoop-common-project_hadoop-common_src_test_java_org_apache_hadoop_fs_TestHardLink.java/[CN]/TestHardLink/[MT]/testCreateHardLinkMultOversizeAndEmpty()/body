{
  String name1="x11111111";
  String name2="x22222222";
  String name3="x33333333";
  File x1_long=new File(src,name1);
  File x2_long=new File(src,name2);
  File x3_long=new File(src,name3);
  x1.renameTo(x1_long);
  x2.renameTo(x2_long);
  x3.renameTo(x3_long);
  assertTrue(x1_long.exists());
  assertTrue(x2_long.exists());
  assertTrue(x3_long.exists());
  assertFalse(x1.exists());
  assertFalse(x2.exists());
  assertFalse(x3.exists());
  int callCount;
  String[] emptyList={};
  String[] fileNames=src.list();
  int overhead=getLinkMultArgLength(src,emptyList,tgt_mult);
  int maxLength=overhead + (int)(2.5 * (float)(1 + name1.length()));
  callCount=createHardLinkMult(src,fileNames,tgt_mult,maxLength);
  assertEquals(2,callCount);
  String[] tgt_multNames=tgt_mult.list();
  Arrays.sort(fileNames);
  Arrays.sort(tgt_multNames);
  assertArrayEquals(fileNames,tgt_multNames);
  FileUtil.fullyDelete(tgt_mult);
  assertFalse(tgt_mult.exists());
  tgt_mult.mkdirs();
  assertTrue(tgt_mult.exists() && tgt_mult.list().length == 0);
  maxLength=overhead + (int)(0.5 * (float)(1 + name1.length()));
  callCount=createHardLinkMult(src,fileNames,tgt_mult,maxLength);
  assertEquals(3,callCount);
  tgt_multNames=tgt_mult.list();
  Arrays.sort(fileNames);
  Arrays.sort(tgt_multNames);
  assertArrayEquals(fileNames,tgt_multNames);
}
