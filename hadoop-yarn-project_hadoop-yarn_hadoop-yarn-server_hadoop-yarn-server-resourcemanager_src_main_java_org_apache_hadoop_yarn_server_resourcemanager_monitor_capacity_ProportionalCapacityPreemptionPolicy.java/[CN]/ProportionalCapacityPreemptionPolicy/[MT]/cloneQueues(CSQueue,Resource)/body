{
  TempQueue ret;
synchronized (root) {
    float absUsed=root.getAbsoluteUsedCapacity();
    Resource current=Resources.multiply(clusterResources,absUsed);
    Resource guaranteed=Resources.multiply(clusterResources,root.getAbsoluteCapacity());
    if (root instanceof LeafQueue) {
      LeafQueue l=(LeafQueue)root;
      Resource pending=l.getTotalResourcePending();
      ret=new TempQueue(root.getQueueName(),current,pending,guaranteed);
      ret.setLeafQueue(l);
    }
 else {
      Resource pending=Resource.newInstance(0,0);
      ret=new TempQueue(root.getQueueName(),current,pending,guaranteed);
      for (      CSQueue c : root.getChildQueues()) {
        ret.addChild(cloneQueues(c,clusterResources));
      }
    }
  }
  return ret;
}
