{
  TempQueue ret;
synchronized (root) {
    String queueName=root.getQueueName();
    float absUsed=root.getAbsoluteUsedCapacity();
    float absCap=root.getAbsoluteCapacity();
    float absMaxCap=root.getAbsoluteMaximumCapacity();
    Resource current=Resources.multiply(clusterResources,absUsed);
    Resource guaranteed=Resources.multiply(clusterResources,absCap);
    Resource maxCapacity=Resources.multiply(clusterResources,absMaxCap);
    if (root instanceof LeafQueue) {
      LeafQueue l=(LeafQueue)root;
      Resource pending=l.getTotalResourcePending();
      ret=new TempQueue(queueName,current,pending,guaranteed,maxCapacity);
      ret.setLeafQueue(l);
    }
 else {
      Resource pending=Resource.newInstance(0,0);
      ret=new TempQueue(root.getQueueName(),current,pending,guaranteed,maxCapacity);
      for (      CSQueue c : root.getChildQueues()) {
        ret.addChild(cloneQueues(c,clusterResources));
      }
    }
  }
  return ret;
}
