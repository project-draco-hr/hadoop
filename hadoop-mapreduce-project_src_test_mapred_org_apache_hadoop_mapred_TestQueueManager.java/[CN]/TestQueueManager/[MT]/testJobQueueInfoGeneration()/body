{
  deleteQueuesConfigFile();
  Document doc=createDocument();
  createSimpleDocument(doc);
  writeToFile(doc,QUEUES_CONFIG_FILE_PATH);
  QueueManager qm=new QueueManager(QUEUES_CONFIG_FILE_PATH,true);
  List<JobQueueInfo> rootQueues=qm.getRoot().getJobQueueInfo().getChildren();
  assertEquals(rootQueues.size(),2);
  List<String> names=new ArrayList<String>();
  for (  JobQueueInfo q : rootQueues) {
    names.add(q.getQueueName());
    if (q.getQueueName().equals("q1")) {
      Properties p=q.getProperties();
      assertEquals(p.getProperty("capacity"),"10");
      assertEquals(p.getProperty("maxCapacity"),"35");
      assertTrue(q.getChildren().isEmpty());
    }
 else     if (q.getQueueName().equals("p1")) {
      List<JobQueueInfo> children=q.getChildren();
      assertEquals(children.size(),2);
      for (      JobQueueInfo child : children) {
        if (child.getQueueName().equals("p1" + NAME_SEPARATOR + "p12")) {
          assertEquals(child.getQueueState(),QueueState.STOPPED.getStateName());
        }
 else         if (child.getQueueName().equals("p1" + NAME_SEPARATOR + "p11")) {
          assertEquals(child.getQueueState(),QueueState.RUNNING.getStateName());
        }
 else {
          fail("Only 2 children");
        }
      }
    }
 else {
      fail("Only 2 queues with q1 and p1 ");
    }
  }
}
