{
  IOException e=null;
  String resp;
  if (con == null)   return null;
  try {
    resp=con.getResponseMessage();
  }
 catch (  IOException ie) {
    return null;
  }
  if (resp == null || resp.isEmpty())   return null;
  String exceptionClass="", exceptionMsg="";
  String[] rs=resp.split(";");
  if (rs.length < 2)   return null;
  exceptionClass=rs[0];
  exceptionMsg=rs[1];
  LOG.info("Error response from HTTP request=" + resp + ";ec="+ exceptionClass+ ";em="+ exceptionMsg);
  if (exceptionClass == null || exceptionClass.isEmpty())   return null;
  try {
    Class<? extends Exception> ec=Class.forName(exceptionClass).asSubclass(Exception.class);
    java.lang.reflect.Constructor<? extends Exception> constructor=ec.getConstructor(new Class[]{String.class});
    e=(IOException)constructor.newInstance(exceptionMsg);
  }
 catch (  Exception ee) {
    LOG.warn("failed to create object of this class",ee);
  }
  if (e == null)   return null;
  e.setStackTrace(new StackTraceElement[0]);
  LOG.info("Exception from HTTP response=" + e.getLocalizedMessage());
  return e;
}
