{
  SimpleDateFormat sdf=new SimpleDateFormat("yyyy-MM-dd HH:mm:ss.SSS");
  sdf.setTimeZone(TimeZone.getTimeZone("UTC"));
  String time=sdf.format(new Date());
  StringBuilder builder=new StringBuilder();
  builder.append("[\n");
  for (int i=0; i != fileMetadata.length; i++) {
    if (i > 0) {
      builder.append(",\n");
    }
    builder.append("    ");
    String noPrefix=StringUtils.removeStart(fileMetadata[i].getKey(),srcKey + "/");
    builder.append(quote(noPrefix));
    if (builder.length() >= MAX_RENAME_PENDING_FILE_SIZE - FORMATTING_BUFFER) {
      LOG.error("Internal error: Exceeded maximum rename pending file size of " + MAX_RENAME_PENDING_FILE_SIZE + " bytes.");
      return "exceeded maximum rename pending file size";
    }
  }
  builder.append("\n  ]");
  String fileList=builder.toString();
  String contents="{\n" + "  FormatVersion: \"1.0\",\n" + "  OperationUTCTime: \"" + time + "\",\n"+ "  OldFolderName: "+ quote(srcKey)+ ",\n"+ "  NewFolderName: "+ quote(dstKey)+ ",\n"+ "  FileList: "+ fileList+ "\n"+ "}\n";
  return contents;
}
