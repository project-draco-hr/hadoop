{
  LOG.info("Starting testInitNonExistingWorkingDirectoryInSafeMode");
  tearDown();
  FileSystem fs=spy(new RawLocalFileSystem());
  doReturn(false).when(fs).isDirectory(any(Path.class));
  doThrow(new IOException()).when(fs).mkdirs(any(Path.class));
  try {
    initStore(fs);
    Assert.fail("Exception should have been thrown");
  }
 catch (  Exception e) {
  }
  verify(fs,times(1)).isDirectory(any(Path.class));
  verify(fs,times(1)).mkdirs(any(Path.class));
}
