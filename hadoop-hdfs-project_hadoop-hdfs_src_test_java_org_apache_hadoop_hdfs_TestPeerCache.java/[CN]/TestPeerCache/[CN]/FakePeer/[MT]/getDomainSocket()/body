{
  if (!hasDomain)   return null;
  return Mockito.mock(DomainSocket.class,new Answer<Object>(){
    @Override public Object answer(    InvocationOnMock invocation) throws Throwable {
      throw new RuntimeException("injected fault.");
    }
  }
);
}
