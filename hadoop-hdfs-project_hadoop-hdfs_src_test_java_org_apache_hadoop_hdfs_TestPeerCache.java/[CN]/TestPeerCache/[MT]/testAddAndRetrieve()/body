{
  DatanodeID dnId=new DatanodeID("192.168.0.1","fakehostname","fake_storage_id",100,101,102);
  FakePeer peer=new FakePeer(dnId);
  cache.put(dnId,peer);
  assertTrue(!peer.isClosed());
  assertEquals(1,cache.size());
  assertEquals(peer,cache.get(dnId));
  assertEquals(0,cache.size());
  cache.clear();
}
