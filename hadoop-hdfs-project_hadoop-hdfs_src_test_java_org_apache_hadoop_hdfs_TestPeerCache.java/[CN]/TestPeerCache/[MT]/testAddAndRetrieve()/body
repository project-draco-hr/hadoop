{
  PeerCache cache=new PeerCache(3,100000);
  DatanodeID dnId=new DatanodeID("192.168.0.1","fakehostname","fake_datanode_id",100,101,102,103);
  FakePeer peer=new FakePeer(dnId,false);
  cache.put(dnId,peer);
  assertTrue(!peer.isClosed());
  assertEquals(1,cache.size());
  assertEquals(peer,cache.get(dnId,false));
  assertEquals(0,cache.size());
  cache.close();
}
