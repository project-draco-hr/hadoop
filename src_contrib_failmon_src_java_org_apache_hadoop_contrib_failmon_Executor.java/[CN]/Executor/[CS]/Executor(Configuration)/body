{
  Environment.prepare("conf/failmon.properties");
  String localTmpDir;
  if (conf == null) {
    localTmpDir=System.getProperty("java.io.tmpdir");
    Environment.setProperty("local.tmp.dir",localTmpDir);
  }
 else {
    localTmpDir=conf.get("hadoop.tmp.dir");
    String hadoopLogPath=System.getProperty("hadoop.log.dir") + "/" + System.getProperty("hadoop.log.file");
    Environment.setProperty("hadoop.log.file",hadoopLogPath);
    Environment.setProperty("local.tmp.dir",localTmpDir);
  }
  monitors=Environment.getJobs();
  interval=Environment.getInterval(monitors);
  upload_interval=LocalStore.UPLOAD_INTERVAL;
  lstore=new LocalStore();
  if (Environment.getProperty("local.upload.interval") != null)   upload_interval=Integer.parseInt(Environment.getProperty("local.upload.interval"));
  instances++;
}
