{
  String components[]=perm.split(":");
  if (components.length != 3) {
    throw new IOException("Unable to parse permission string " + perm + ": expected 3 components, but only had "+ components.length);
  }
  String userName=components[0];
  String groupName=components[1];
  String modeString=components[2];
  long userNameId=registerStringId(userName);
  long groupNameId=registerStringId(groupName);
  long mode=new FsPermission(modeString).toShort();
  return (userNameId << 40) | (groupNameId << 16) | mode;
}
