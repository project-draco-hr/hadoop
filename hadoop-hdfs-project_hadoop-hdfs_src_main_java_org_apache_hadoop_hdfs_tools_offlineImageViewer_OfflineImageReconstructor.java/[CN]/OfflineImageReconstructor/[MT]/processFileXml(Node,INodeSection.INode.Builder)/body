{
  inodeBld.setType(INodeSection.INode.Type.FILE);
  INodeSection.INodeFile.Builder bld=INodeSection.INodeFile.newBuilder();
  Integer ival=node.removeChildInt(SECTION_REPLICATION);
  if (ival != null) {
    bld.setReplication(ival);
  }
  Long lval=node.removeChildLong(INODE_SECTION_MTIME);
  if (lval != null) {
    bld.setModificationTime(lval);
  }
  lval=node.removeChildLong(INODE_SECTION_ATIME);
  if (lval != null) {
    bld.setAccessTime(lval);
  }
  lval=node.removeChildLong(INODE_SECTION_PREFERRED_BLOCK_SIZE);
  if (lval != null) {
    bld.setPreferredBlockSize(lval);
  }
  String perm=node.removeChildStr(INODE_SECTION_PERMISSION);
  if (perm != null) {
    bld.setPermission(permissionXmlToU64(perm));
  }
  Node blocks=node.removeChild(INODE_SECTION_BLOCKS);
  if (blocks != null) {
    while (true) {
      Node block=blocks.removeChild(INODE_SECTION_BLOCK);
      if (block == null) {
        break;
      }
      HdfsProtos.BlockProto.Builder blockBld=HdfsProtos.BlockProto.newBuilder();
      Long id=block.removeChildLong(SECTION_ID);
      if (id == null) {
        throw new IOException("<block> found without <id>");
      }
      blockBld.setBlockId(id);
      Long genstamp=block.removeChildLong(INODE_SECTION_GEMSTAMP);
      if (genstamp == null) {
        throw new IOException("<block> found without <genstamp>");
      }
      blockBld.setGenStamp(genstamp);
      Long numBytes=block.removeChildLong(INODE_SECTION_NUM_BYTES);
      if (numBytes == null) {
        throw new IOException("<block> found without <numBytes>");
      }
      blockBld.setNumBytes(numBytes);
      bld.addBlocks(blockBld);
    }
  }
  Node fileUnderConstruction=node.removeChild(INODE_SECTION_FILE_UNDER_CONSTRUCTION);
  if (fileUnderConstruction != null) {
    INodeSection.FileUnderConstructionFeature.Builder fb=INodeSection.FileUnderConstructionFeature.newBuilder();
    String clientName=fileUnderConstruction.removeChildStr(INODE_SECTION_CLIENT_NAME);
    if (clientName == null) {
      throw new IOException("<file-under-construction> found without " + "<clientName>");
    }
    fb.setClientName(clientName);
    String clientMachine=fileUnderConstruction.removeChildStr(INODE_SECTION_CLIENT_MACHINE);
    if (clientMachine == null) {
      throw new IOException("<file-under-construction> found without " + "<clientMachine>");
    }
    fb.setClientMachine(clientMachine);
    bld.setFileUC(fb);
  }
  Node acls=node.removeChild(INODE_SECTION_ACLS);
  if (acls != null) {
    bld.setAcl(aclXmlToProto(acls));
  }
  Node xattrs=node.removeChild(INODE_SECTION_XATTRS);
  if (xattrs != null) {
    bld.setXAttrs(xattrsXmlToProto(xattrs));
  }
  ival=node.removeChildInt(INODE_SECTION_STORAGE_POLICY_ID);
  if (ival != null) {
    bld.setStoragePolicyID(ival);
  }
  Boolean bval=node.removeChildBool(INODE_SECTION_IS_STRIPED);
  bld.setIsStriped(bval);
  inodeBld.setFile(bld);
}
