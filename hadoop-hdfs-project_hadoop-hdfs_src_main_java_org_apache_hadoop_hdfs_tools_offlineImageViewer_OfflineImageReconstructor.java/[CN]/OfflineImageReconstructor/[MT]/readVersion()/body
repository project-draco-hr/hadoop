{
  try {
    expectTag("version",false);
  }
 catch (  IOException e) {
    throw new IOException("No <version> section found at the top of " + "the fsimage XML.  This XML file is too old to be processed " + "by ovi.",e);
  }
  Node version=new Node();
  loadNodeChildren(version,"version fields");
  Integer onDiskVersion=version.removeChildInt("onDiskVersion");
  if (onDiskVersion == null) {
    throw new IOException("The <version> section doesn't contain " + "the onDiskVersion.");
  }
  Integer layoutVersion=version.removeChildInt("layoutVersion");
  if (layoutVersion == null) {
    throw new IOException("The <version> section doesn't contain " + "the layoutVersion.");
  }
  if (layoutVersion.intValue() != NameNodeLayoutVersion.CURRENT_LAYOUT_VERSION) {
    throw new IOException("Layout version mismatch.  This oiv tool " + "handles layout version " + NameNodeLayoutVersion.CURRENT_LAYOUT_VERSION + ", but the "+ "XML file has <layoutVersion> "+ layoutVersion+ ".  Please "+ "either re-generate the XML file with the proper layout version, "+ "or manually edit the XML file to be usable with this version "+ "of the oiv tool.");
  }
  fileSummaryBld.setOndiskVersion(onDiskVersion);
  fileSummaryBld.setLayoutVersion(layoutVersion);
  if (LOG.isDebugEnabled()) {
    LOG.debug("Loaded <version> with onDiskVersion=" + onDiskVersion + ", layoutVersion="+ layoutVersion+ ".");
  }
}
