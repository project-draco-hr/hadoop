{
  LOG.debug("Processing SnapshotDiffSection");
  while (true) {
    XMLEvent ev=expectTag("[diff start tag]",true);
    if (ev.isEndElement()) {
      String name=ev.asEndElement().getName().getLocalPart();
      if (name.equals(SNAPSHOT_DIFF_SECTION_NAME)) {
        break;
      }
      throw new IOException("Got unexpected end tag for " + name);
    }
    String tagName=ev.asStartElement().getName().getLocalPart();
    if (tagName.equals(SNAPSHOT_DIFF_SECTION_DIR_DIFF_ENTRY)) {
      processDirDiffEntry();
    }
 else     if (tagName.equals(SNAPSHOT_DIFF_SECTION_FILE_DIFF_ENTRY)) {
      processFileDiffEntry();
    }
 else {
      throw new IOException("SnapshotDiffSection contained unexpected " + "tag " + tagName);
    }
  }
  recordSectionLength(SectionName.SNAPSHOT_DIFF.name());
}
