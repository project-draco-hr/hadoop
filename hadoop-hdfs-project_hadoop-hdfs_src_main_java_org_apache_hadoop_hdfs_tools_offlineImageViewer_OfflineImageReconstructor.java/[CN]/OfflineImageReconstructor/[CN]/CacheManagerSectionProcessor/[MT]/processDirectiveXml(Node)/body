{
  CacheDirectiveInfoProto.Builder bld=CacheDirectiveInfoProto.newBuilder();
  Long id=directive.removeChildLong("id");
  if (id == null) {
    throw new IOException("<directive> found without <id>");
  }
  bld.setId(id);
  String path=directive.removeChildStr("path");
  if (path == null) {
    throw new IOException("<directive> found without <path>");
  }
  bld.setPath(path);
  Integer replication=directive.removeChildInt("replication");
  if (replication == null) {
    throw new IOException("<directive> found without <replication>");
  }
  bld.setReplication(replication);
  String pool=directive.removeChildStr("pool");
  if (path == null) {
    throw new IOException("<directive> found without <pool>");
  }
  bld.setPool(pool);
  Node expiration=directive.removeChild("expiration");
  if (expiration != null) {
    CacheDirectiveInfoExpirationProto.Builder ebld=CacheDirectiveInfoExpirationProto.newBuilder();
    Long millis=expiration.removeChildLong("millis");
    if (millis == null) {
      throw new IOException("cache directive <expiration> found " + "without <millis>");
    }
    ebld.setMillis(millis);
    if (expiration.removeChildBool("relative")) {
      ebld.setIsRelative(true);
    }
 else {
      ebld.setIsRelative(false);
    }
    bld.setExpiration(ebld);
  }
  directive.verifyNoRemainingKeys("directive");
  bld.build().writeDelimitedTo(out);
}
