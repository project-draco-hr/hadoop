{
  RpcFrameDecoder decoder=new RpcFrameDecoder();
  byte[] fragment1=new byte[4 + 10];
  fragment1[0]=0;
  fragment1[1]=0;
  fragment1[2]=0;
  fragment1[3]=(byte)10;
  assertFalse(XDR.isLastFragment(fragment1));
  assertTrue(XDR.fragmentSize(fragment1) == 10);
  ByteBuffer buffer=ByteBuffer.allocate(4 + 10);
  buffer.put(fragment1);
  buffer.flip();
  ChannelBuffer buf=new ByteBufferBackedChannelBuffer(buffer);
  ChannelBuffer channelBuffer=(ChannelBuffer)decoder.decode(Mockito.mock(ChannelHandlerContext.class),Mockito.mock(Channel.class),buf);
  assertTrue(channelBuffer == null);
  byte[] fragment2=new byte[4 + 10];
  fragment2[0]=(byte)(1 << 7);
  fragment2[1]=0;
  fragment2[2]=0;
  fragment2[3]=(byte)10;
  assertTrue(XDR.isLastFragment(fragment2));
  assertTrue(XDR.fragmentSize(fragment2) == 10);
  buffer=ByteBuffer.allocate(4 + 10);
  buffer.put(fragment2);
  buffer.flip();
  buf=new ByteBufferBackedChannelBuffer(buffer);
  channelBuffer=(ChannelBuffer)decoder.decode(Mockito.mock(ChannelHandlerContext.class),Mockito.mock(Channel.class),buf);
  assertTrue(channelBuffer != null);
  assertEquals(20,channelBuffer.readableBytes());
}
