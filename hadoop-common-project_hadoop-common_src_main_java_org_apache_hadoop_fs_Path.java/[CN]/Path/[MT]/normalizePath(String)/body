{
  path=StringUtils.replace(path,"//","/");
  if (Path.WINDOWS) {
    path=StringUtils.replace(path,"\\","/");
  }
  int minLength=hasWindowsDrive(path,true) ? 4 : 1;
  if (path.length() > minLength && path.endsWith("/")) {
    path=path.substring(0,path.length() - 1);
  }
  return path;
}
