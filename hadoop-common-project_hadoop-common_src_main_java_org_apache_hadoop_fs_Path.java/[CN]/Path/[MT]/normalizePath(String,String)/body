{
  path=StringUtils.replace(path,"//","/");
  if (WINDOWS && (hasWindowsDrive(path) || (scheme == null) || (scheme.isEmpty())|| (scheme.equals("file")))) {
    path=StringUtils.replace(path,"\\","/");
  }
  int minLength=hasWindowsDrive(path) ? 4 : 1;
  if (path.length() > minLength && path.endsWith("/")) {
    path=path.substring(0,path.length() - 1);
  }
  return path;
}
