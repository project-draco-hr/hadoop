{
  path=StringUtils.replace(path,"//","/");
  if (WINDOWS && (hasWindowsDrive(path) || (scheme == null) || (scheme.isEmpty())|| (scheme.equals("file")))) {
    path=StringUtils.replace(path,"\\","/");
  }
  int minLength=startPositionWithoutWindowsDrive(path) + 1;
  if (path.length() > minLength && path.endsWith(SEPARATOR)) {
    path=path.substring(0,path.length() - 1);
  }
  return path;
}
