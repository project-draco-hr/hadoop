{
switch (event.getType()) {
case FINISH_APPS:
    CMgrCompletedAppsEvent appsFinishedEvent=(CMgrCompletedAppsEvent)event;
  for (  ApplicationId appID : appsFinishedEvent.getAppsToCleanup()) {
    String diagnostic="";
    if (appsFinishedEvent.getReason() == CMgrCompletedAppsEvent.Reason.ON_SHUTDOWN) {
      diagnostic="Application killed on shutdown";
    }
 else     if (appsFinishedEvent.getReason() == CMgrCompletedAppsEvent.Reason.BY_RESOURCEMANAGER) {
      diagnostic="Application killed by ResourceManager";
    }
    this.dispatcher.getEventHandler().handle(new ApplicationFinishEvent(appID,diagnostic));
  }
break;
case FINISH_CONTAINERS:
CMgrCompletedContainersEvent containersFinishedEvent=(CMgrCompletedContainersEvent)event;
for (ContainerId container : containersFinishedEvent.getContainersToCleanup()) {
this.dispatcher.getEventHandler().handle(new ContainerKillEvent(container,ContainerExitStatus.KILLED_BY_RESOURCEMANAGER,"Container Killed by ResourceManager"));
}
break;
default :
throw new YarnRuntimeException("Got an unknown ContainerManagerEvent type: " + event.getType());
}
}
