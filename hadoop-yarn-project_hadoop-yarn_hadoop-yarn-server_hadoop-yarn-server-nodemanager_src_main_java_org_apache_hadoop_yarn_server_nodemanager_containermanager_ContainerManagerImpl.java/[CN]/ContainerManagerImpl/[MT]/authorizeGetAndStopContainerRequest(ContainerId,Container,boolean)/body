{
  UserGroupInformation remoteUgi=getRemoteUgi();
  NMTokenIdentifier identifier=selectNMTokenIdentifier(remoteUgi);
  if ((!identifier.getApplicationAttemptId().equals(containerId.getApplicationAttemptId())) || (container != null && !identifier.getApplicationAttemptId().equals(container.getContainerId().getApplicationAttemptId()))) {
    if (stopRequest) {
      LOG.warn(identifier.getApplicationAttemptId() + " attempted to stop non-application container : " + container.getContainerId().toString());
      NMAuditLogger.logFailure("UnknownUser",AuditConstants.STOP_CONTAINER,"ContainerManagerImpl","Trying to stop unknown container!",identifier.getApplicationAttemptId().getApplicationId(),container.getContainerId());
    }
 else {
      LOG.warn(identifier.getApplicationAttemptId() + " attempted to get get status for non-application container : " + container.getContainerId().toString());
    }
    throw RPCUtil.getRemoteException("Container " + containerId.toString() + " is not started by this application attempt.");
  }
  if (container == null) {
    throw RPCUtil.getRemoteException("Container " + containerId.toString() + " is not handled by this NodeManager");
  }
}
