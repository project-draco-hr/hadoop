{
  String containerIDStr=containerID.toString();
  Container container=this.context.getContainers().get(containerID);
  LOG.info("Stopping container with container Id: " + containerIDStr);
  authorizeGetAndStopContainerRequest(containerID,container,true,nmTokenIdentifier);
  if (container == null) {
    if (!nodeStatusUpdater.isContainerRecentlyStopped(containerID)) {
      throw RPCUtil.getRemoteException("Container " + containerIDStr + " is not handled by this NodeManager");
    }
  }
 else {
    dispatcher.getEventHandler().handle(new ContainerKillEvent(containerID,ContainerExitStatus.KILLED_BY_APPMASTER,"Container killed by the ApplicationMaster."));
    NMAuditLogger.logSuccess(container.getUser(),AuditConstants.STOP_CONTAINER,"ContainerManageImpl",containerID.getApplicationAttemptId().getApplicationId(),containerID);
    nodeStatusUpdater.sendOutofBandHeartBeat();
  }
}
