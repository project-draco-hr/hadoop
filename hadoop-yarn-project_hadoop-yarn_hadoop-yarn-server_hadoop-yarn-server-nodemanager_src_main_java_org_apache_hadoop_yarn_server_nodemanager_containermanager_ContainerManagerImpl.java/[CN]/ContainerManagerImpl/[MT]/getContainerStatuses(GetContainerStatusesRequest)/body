{
  List<ContainerStatus> succeededRequests=new ArrayList<ContainerStatus>();
  Map<ContainerId,SerializedException> failedRequests=new HashMap<ContainerId,SerializedException>();
  UserGroupInformation remoteUgi=getRemoteUgi();
  NMTokenIdentifier identifier=selectNMTokenIdentifier(remoteUgi);
  if (identifier == null) {
    throw RPCUtil.getRemoteException(INVALID_NMTOKEN_MSG);
  }
  for (  ContainerId id : request.getContainerIds()) {
    try {
      ContainerStatus status=getContainerStatusInternal(id,identifier);
      succeededRequests.add(status);
    }
 catch (    YarnException e) {
      failedRequests.put(id,SerializedException.newInstance(e));
    }
  }
  return GetContainerStatusesResponse.newInstance(succeededRequests,failedRequests);
}
