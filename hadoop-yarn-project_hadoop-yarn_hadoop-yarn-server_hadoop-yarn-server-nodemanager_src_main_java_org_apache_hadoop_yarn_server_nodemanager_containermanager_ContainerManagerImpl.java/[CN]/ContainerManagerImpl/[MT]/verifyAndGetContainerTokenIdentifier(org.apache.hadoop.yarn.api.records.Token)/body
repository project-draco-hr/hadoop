{
  ContainerTokenIdentifier containerTokenIdentifier=null;
  try {
    containerTokenIdentifier=BuilderUtils.newContainerTokenIdentifier(token);
  }
 catch (  IOException e) {
    throw RPCUtil.getRemoteException(e);
  }
  byte[] password=context.getContainerTokenSecretManager().retrievePassword(containerTokenIdentifier);
  byte[] tokenPass=token.getPassword().array();
  if (password == null || tokenPass == null || !Arrays.equals(password,tokenPass)) {
    throw new InvalidToken("Invalid container token used for starting container on : " + context.getNodeId().toString());
  }
  return containerTokenIdentifier;
}
