{
  NameSystemSection s=NameSystemSection.parseDelimitedFrom(in);
  BlockIdManager blockIdManager=fsn.getBlockManager().getBlockIdManager();
  blockIdManager.setLegacyGenerationStamp(s.getGenstampV1());
  blockIdManager.setGenerationStamp(s.getGenstampV2());
  blockIdManager.setLegacyGenerationStampLimit(s.getGenstampV1Limit());
  blockIdManager.setLastAllocatedContiguousBlockId(s.getLastAllocatedBlockId());
  if (s.hasLastAllocatedStripedBlockId()) {
    blockIdManager.setLastAllocatedStripedBlockId(s.getLastAllocatedStripedBlockId());
  }
  imgTxId=s.getTransactionId();
  if (s.hasRollingUpgradeStartTime() && fsn.getFSImage().hasRollbackFSImage()) {
    fsn.setRollingUpgradeInfo(true,s.getRollingUpgradeStartTime());
  }
}
