{
  final FSNamesystem fsn=context.getSourceNamesystem();
  OutputStream out=sectionOutputStream;
  BlockIdManager blockIdManager=fsn.getBlockManager().getBlockIdManager();
  NameSystemSection.Builder b=NameSystemSection.newBuilder().setGenstampV1(blockIdManager.getGenerationStampV1()).setGenstampV1Limit(blockIdManager.getGenerationStampV1Limit()).setGenstampV2(blockIdManager.getGenerationStampV2()).setLastAllocatedBlockId(blockIdManager.getLastAllocatedContiguousBlockId()).setLastAllocatedStripedBlockId(blockIdManager.getLastAllocatedStripedBlockId()).setTransactionId(context.getTxId());
  b.setNamespaceId(fsn.unprotectedGetNamespaceInfo().getNamespaceID());
  if (fsn.isRollingUpgrade()) {
    b.setRollingUpgradeStartTime(fsn.getRollingUpgradeInfo().getStartTime());
  }
  NameSystemSection s=b.build();
  s.writeDelimitedTo(out);
  commitSection(summary,SectionName.NS_INFO);
}
