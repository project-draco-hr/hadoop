{
  if (conf == null)   throw new NullPointerException("configuration is null");
  Command instance=objectMap.get(cmdName);
  if (instance == null) {
    Class<? extends Command> cmdClass=classMap.get(cmdName);
    if (cmdClass != null) {
      instance=ReflectionUtils.newInstance(cmdClass,conf);
      instance.setName(cmdName);
      instance.setCommandFactory(this);
    }
  }
  return instance;
}
