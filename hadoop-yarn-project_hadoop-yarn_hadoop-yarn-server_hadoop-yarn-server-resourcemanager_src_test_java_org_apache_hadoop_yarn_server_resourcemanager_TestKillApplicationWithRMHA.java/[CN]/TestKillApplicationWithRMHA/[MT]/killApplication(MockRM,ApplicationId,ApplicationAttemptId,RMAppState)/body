{
  KillApplicationResponse response=rm.killApp(appId);
  Assert.assertTrue(response.getIsKillCompleted() == isFinalState(rmAppState));
  RMApp loadedApp0=rm.getRMContext().getRMApps().get(appId);
  rm.waitForState(appId,RMAppState.KILLED);
  if (appAttemptId != null) {
    rm.waitForState(appAttemptId,RMAppAttemptState.KILLED);
  }
  Assert.assertEquals(1,loadedApp0.getAppAttempts().size());
}
