{
  assertEquals("nonzero entities size for nonexistent type",0,getEntities("type_0").size());
  assertEquals("nonzero entities size for nonexistent type",0,getEntities("type_3").size());
  assertEquals("nonzero entities size for nonexistent type",0,getEntities("type_6").size());
  assertEquals("nonzero entities size for nonexistent type",0,getEntitiesWithPrimaryFilter("type_0",userFilter).size());
  assertEquals("nonzero entities size for nonexistent type",0,getEntitiesWithPrimaryFilter("type_3",userFilter).size());
  assertEquals("nonzero entities size for nonexistent type",0,getEntitiesWithPrimaryFilter("type_6",userFilter).size());
  List<TimelineEntity> entities=getEntities("type_1");
  assertEquals(3,entities.size());
  verifyEntityInfo(entityId1,entityType1,events1,EMPTY_REL_ENTITIES,primaryFilters,otherInfo,entities.get(0),domainId1);
  verifyEntityInfo(entityId1b,entityType1,events1,EMPTY_REL_ENTITIES,primaryFilters,otherInfo,entities.get(1),domainId1);
  verifyEntityInfo(entityId6,entityType1,EMPTY_EVENTS,EMPTY_REL_ENTITIES,primaryFilters,otherInfo,entities.get(2),domainId2);
  entities=getEntities("type_2");
  assertEquals(1,entities.size());
  verifyEntityInfo(entityId2,entityType2,events2,relEntityMap,EMPTY_PRIMARY_FILTERS,EMPTY_MAP,entities.get(0),domainId1);
  entities=getEntities("type_1",1l,null,null,null,EnumSet.allOf(Field.class));
  assertEquals(1,entities.size());
  verifyEntityInfo(entityId1,entityType1,events1,EMPTY_REL_ENTITIES,primaryFilters,otherInfo,entities.get(0),domainId1);
  entities=getEntities("type_1",1l,0l,null,null,EnumSet.allOf(Field.class));
  assertEquals(1,entities.size());
  verifyEntityInfo(entityId1,entityType1,events1,EMPTY_REL_ENTITIES,primaryFilters,otherInfo,entities.get(0),domainId1);
  entities=getEntities("type_1",null,234l,null,null,EnumSet.allOf(Field.class));
  assertEquals(0,entities.size());
  entities=getEntities("type_1",null,123l,null,null,EnumSet.allOf(Field.class));
  assertEquals(0,entities.size());
  entities=getEntities("type_1",null,234l,345l,null,EnumSet.allOf(Field.class));
  assertEquals(0,entities.size());
  entities=getEntities("type_1",null,null,345l,null,EnumSet.allOf(Field.class));
  assertEquals(3,entities.size());
  verifyEntityInfo(entityId1,entityType1,events1,EMPTY_REL_ENTITIES,primaryFilters,otherInfo,entities.get(0),domainId1);
  verifyEntityInfo(entityId1b,entityType1,events1,EMPTY_REL_ENTITIES,primaryFilters,otherInfo,entities.get(1),domainId1);
  verifyEntityInfo(entityId6,entityType1,EMPTY_EVENTS,EMPTY_REL_ENTITIES,primaryFilters,otherInfo,entities.get(2),domainId2);
  entities=getEntities("type_1",null,null,123l,null,EnumSet.allOf(Field.class));
  assertEquals(3,entities.size());
  verifyEntityInfo(entityId1,entityType1,events1,EMPTY_REL_ENTITIES,primaryFilters,otherInfo,entities.get(0),domainId1);
  verifyEntityInfo(entityId1b,entityType1,events1,EMPTY_REL_ENTITIES,primaryFilters,otherInfo,entities.get(1),domainId1);
  verifyEntityInfo(entityId6,entityType1,EMPTY_EVENTS,EMPTY_REL_ENTITIES,primaryFilters,otherInfo,entities.get(2),domainId2);
}
