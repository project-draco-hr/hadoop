{
  List<TimelineEntity> entities=getEntitiesFromId("type_1",entityId1);
  assertEquals(3,entities.size());
  verifyEntityInfo(entityId1,entityType1,events1,EMPTY_REL_ENTITIES,primaryFilters,otherInfo,entities.get(0),domainId1);
  verifyEntityInfo(entityId1b,entityType1,events1,EMPTY_REL_ENTITIES,primaryFilters,otherInfo,entities.get(1),domainId1);
  verifyEntityInfo(entityId6,entityType1,EMPTY_EVENTS,EMPTY_REL_ENTITIES,primaryFilters,otherInfo,entities.get(2),domainId2);
  entities=getEntitiesFromId("type_1",entityId1b);
  assertEquals(2,entities.size());
  verifyEntityInfo(entityId1b,entityType1,events1,EMPTY_REL_ENTITIES,primaryFilters,otherInfo,entities.get(0),domainId1);
  verifyEntityInfo(entityId6,entityType1,EMPTY_EVENTS,EMPTY_REL_ENTITIES,primaryFilters,otherInfo,entities.get(1),domainId2);
  entities=getEntitiesFromId("type_1",entityId6);
  assertEquals(1,entities.size());
  verifyEntityInfo(entityId6,entityType1,EMPTY_EVENTS,EMPTY_REL_ENTITIES,primaryFilters,otherInfo,entities.get(0),domainId2);
  entities=getEntitiesFromIdWithWindow("type_1",0l,entityId6);
  assertEquals(0,entities.size());
  entities=getEntitiesFromId("type_2","a");
  assertEquals(0,entities.size());
  entities=getEntitiesFromId("type_2",entityId2);
  assertEquals(1,entities.size());
  verifyEntityInfo(entityId2,entityType2,events2,relEntityMap,EMPTY_PRIMARY_FILTERS,EMPTY_MAP,entities.get(0),domainId1);
  entities=getEntitiesFromIdWithWindow("type_2",-456l,null);
  assertEquals(0,entities.size());
  entities=getEntitiesFromIdWithWindow("type_2",-456l,"a");
  assertEquals(0,entities.size());
  entities=getEntitiesFromIdWithWindow("type_2",0l,null);
  assertEquals(1,entities.size());
  entities=getEntitiesFromIdWithWindow("type_2",0l,entityId2);
  assertEquals(1,entities.size());
  entities=getEntitiesFromIdWithPrimaryFilter("type_1",userFilter,entityId1);
  assertEquals(3,entities.size());
  verifyEntityInfo(entityId1,entityType1,events1,EMPTY_REL_ENTITIES,primaryFilters,otherInfo,entities.get(0),domainId1);
  verifyEntityInfo(entityId1b,entityType1,events1,EMPTY_REL_ENTITIES,primaryFilters,otherInfo,entities.get(1),domainId1);
  verifyEntityInfo(entityId6,entityType1,EMPTY_EVENTS,EMPTY_REL_ENTITIES,primaryFilters,otherInfo,entities.get(2),domainId2);
  entities=getEntitiesFromIdWithPrimaryFilter("type_1",userFilter,entityId1b);
  assertEquals(2,entities.size());
  verifyEntityInfo(entityId1b,entityType1,events1,EMPTY_REL_ENTITIES,primaryFilters,otherInfo,entities.get(0),domainId1);
  verifyEntityInfo(entityId6,entityType1,EMPTY_EVENTS,EMPTY_REL_ENTITIES,primaryFilters,otherInfo,entities.get(1),domainId2);
  entities=getEntitiesFromIdWithPrimaryFilter("type_1",userFilter,entityId6);
  assertEquals(1,entities.size());
  verifyEntityInfo(entityId6,entityType1,EMPTY_EVENTS,EMPTY_REL_ENTITIES,primaryFilters,otherInfo,entities.get(0),domainId2);
  entities=getEntitiesFromIdWithPrimaryFilterAndWindow("type_1",0l,entityId6,userFilter);
  assertEquals(0,entities.size());
  entities=getEntitiesFromIdWithPrimaryFilter("type_2",userFilter,"a");
  assertEquals(0,entities.size());
}
