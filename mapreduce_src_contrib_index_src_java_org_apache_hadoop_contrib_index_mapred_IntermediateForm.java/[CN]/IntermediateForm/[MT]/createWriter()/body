{
  IndexWriter writer=new IndexWriter(dir,false,null,new KeepOnlyLastCommitDeletionPolicy());
  writer.setUseCompoundFile(false);
  if (iconf != null) {
    int maxFieldLength=iconf.getIndexMaxFieldLength();
    if (maxFieldLength > 0) {
      writer.setMaxFieldLength(maxFieldLength);
    }
  }
  return writer;
}
