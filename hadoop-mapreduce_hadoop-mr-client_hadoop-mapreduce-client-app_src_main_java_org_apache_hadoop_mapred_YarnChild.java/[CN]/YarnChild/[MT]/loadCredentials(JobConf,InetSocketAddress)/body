{
  String tokenFileLocation=System.getenv(ApplicationConstants.CONTAINER_TOKEN_FILE_ENV_NAME);
  String jobTokenFile=new Path(tokenFileLocation).makeQualified(FileSystem.getLocal(conf)).toUri().getPath();
  Credentials credentials=TokenCache.loadTokens(jobTokenFile,conf);
  LOG.debug("loading token. # keys =" + credentials.numberOfSecretKeys() + "; from file="+ jobTokenFile);
  Token<JobTokenIdentifier> jt=TokenCache.getJobToken(credentials);
  jt.setService(new Text(address.getAddress().getHostAddress() + ":" + address.getPort()));
  UserGroupInformation current=UserGroupInformation.getCurrentUser();
  current.addToken(jt);
  for (  Token<? extends TokenIdentifier> tok : credentials.getAllTokens()) {
    current.addToken(tok);
  }
  conf.setCredentials(credentials);
  return jt;
}
