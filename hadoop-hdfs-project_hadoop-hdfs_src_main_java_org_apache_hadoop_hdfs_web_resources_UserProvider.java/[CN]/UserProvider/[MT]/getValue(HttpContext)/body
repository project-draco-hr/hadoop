{
  final Principal principal=context.getRequest().getUserPrincipal();
  if (principal != null) {
    return principal;
  }
  final String username=context.getRequest().getQueryParameters().getFirst(UserParam.NAME);
  if (username != null) {
    final UserParam userparam=new UserParam(username);
    return new Principal(){
      @Override public String getName(){
        return userparam.getValue();
      }
    }
;
  }
  return null;
}
