{
  final Path foo=new Path(getParent(GenericTestUtils.getMethodName()),"foo");
  Path createdFile=new Path(foo,"created_file.data");
  getDFS().mkdirs(foo);
  getDFS().setQuota(foo,Long.MAX_VALUE - 1,Long.MAX_VALUE - 1);
  long fileLen=BLOCKSIZE * 2 + BLOCKSIZE / 2;
  DFSTestUtil.createFile(getDFS(),createdFile,BLOCKSIZE / 16,fileLen,BLOCKSIZE,REPLICATION,seed);
  INode fnode=getFSDirectory().getINode4Write(foo.toString());
  assertTrue(fnode.isDirectory());
  assertTrue(fnode.isQuotaSet());
  QuotaCounts cnt=fnode.asDirectory().getDirectoryWithQuotaFeature().getSpaceConsumed();
  assertEquals(2,cnt.getNameSpace());
  assertEquals(fileLen * REPLICATION,cnt.getStorageSpace());
}
