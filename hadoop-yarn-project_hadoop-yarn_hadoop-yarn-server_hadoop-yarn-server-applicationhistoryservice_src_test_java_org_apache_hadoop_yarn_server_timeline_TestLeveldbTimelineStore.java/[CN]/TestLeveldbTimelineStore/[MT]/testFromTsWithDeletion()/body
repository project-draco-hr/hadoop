{
  long l=System.currentTimeMillis();
  assertEquals(2,getEntitiesFromTs("type_1",l).size());
  assertEquals(1,getEntitiesFromTs("type_2",l).size());
  assertEquals(2,getEntitiesFromTsWithPrimaryFilter("type_1",userFilter,l).size());
  ((LeveldbTimelineStore)store).discardOldEntities(123l);
  assertEquals(0,getEntitiesFromTs("type_1",l).size());
  assertEquals(0,getEntitiesFromTs("type_2",l).size());
  assertEquals(0,getEntitiesFromTsWithPrimaryFilter("type_1",userFilter,l).size());
  assertEquals(0,getEntities("type_1").size());
  assertEquals(0,getEntities("type_2").size());
  assertEquals(0,getEntitiesFromTsWithPrimaryFilter("type_1",userFilter,l).size());
  loadTestData();
  assertEquals(0,getEntitiesFromTs("type_1",l).size());
  assertEquals(0,getEntitiesFromTs("type_2",l).size());
  assertEquals(0,getEntitiesFromTsWithPrimaryFilter("type_1",userFilter,l).size());
  assertEquals(2,getEntities("type_1").size());
  assertEquals(1,getEntities("type_2").size());
  assertEquals(2,getEntitiesWithPrimaryFilter("type_1",userFilter).size());
}
