{
  long l=System.currentTimeMillis();
  assertEquals(3,getEntitiesFromTs("type_1",l).size());
  assertEquals(1,getEntitiesFromTs("type_2",l).size());
  assertEquals(3,getEntitiesFromTsWithPrimaryFilter("type_1",userFilter,l).size());
  ((LeveldbTimelineStore)store).discardOldEntities(123L);
  assertEquals(0,getEntitiesFromTs("type_1",l).size());
  assertEquals(0,getEntitiesFromTs("type_2",l).size());
  assertEquals(0,getEntitiesFromTsWithPrimaryFilter("type_1",userFilter,l).size());
  assertEquals(0,getEntities("type_1").size());
  assertEquals(0,getEntities("type_2").size());
  assertEquals(0,getEntitiesFromTsWithPrimaryFilter("type_1",userFilter,l).size());
  loadTestEntityData();
  assertEquals(0,getEntitiesFromTs("type_1",l).size());
  assertEquals(0,getEntitiesFromTs("type_2",l).size());
  assertEquals(0,getEntitiesFromTsWithPrimaryFilter("type_1",userFilter,l).size());
  assertEquals(3,getEntities("type_1").size());
  assertEquals(1,getEntities("type_2").size());
  assertEquals(3,getEntitiesWithPrimaryFilter("type_1",userFilter).size());
}
