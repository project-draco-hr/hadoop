{
  ApplicationSubmissionContext submissionContext=request.getApplicationSubmissionContext();
  try {
    String user=UserGroupInformation.getCurrentUser().getShortUserName();
    ApplicationId applicationId=submissionContext.getApplicationId();
    if (rmContext.getRMApps().get(applicationId) != null) {
      throw new IOException("Application with id " + applicationId + " is already present! Cannot add a duplicate!");
    }
    this.rmContext.getDispatcher().getEventHandler().handle(new RMAppManagerSubmitEvent(submissionContext));
    LOG.info("Application with id " + applicationId.getId() + " submitted by user "+ user+ " with "+ submissionContext);
  }
 catch (  IOException ie) {
    LOG.info("Exception in submitting application",ie);
    throw RPCUtil.getRemoteException(ie);
  }
  SubmitApplicationResponse response=recordFactory.newRecordInstance(SubmitApplicationResponse.class);
  return response;
}
