{
  UserGroupInformation callerUGI;
  try {
    callerUGI=UserGroupInformation.getCurrentUser();
  }
 catch (  IOException ie) {
    LOG.info("Error getting UGI ",ie);
    throw RPCUtil.getRemoteException(ie);
  }
  List<ApplicationReport> reports=new ArrayList<ApplicationReport>();
  for (  RMApp application : this.rmContext.getRMApps().values()) {
    if (checkAccess(callerUGI,application.getUser(),ApplicationAccessType.VIEW_APP,application.getApplicationId())) {
      reports.add(application.createAndGetApplicationReport());
    }
  }
  GetAllApplicationsResponse response=recordFactory.newRecordInstance(GetAllApplicationsResponse.class);
  response.setApplicationList(reports);
  return response;
}
