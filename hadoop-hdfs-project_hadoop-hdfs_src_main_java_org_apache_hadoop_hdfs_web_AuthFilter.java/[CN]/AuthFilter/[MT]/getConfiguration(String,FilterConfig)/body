{
  final Configuration conf=new Configuration();
  final Properties p=new Properties();
  p.setProperty(AUTH_TYPE,UserGroupInformation.isSecurityEnabled() ? KerberosAuthenticationHandler.TYPE : PseudoAuthenticationHandler.TYPE);
  p.setProperty(PseudoAuthenticationHandler.ANONYMOUS_ALLOWED,"true");
  p.setProperty(COOKIE_PATH,"/");
  for (  Map.Entry<String,String> entry : conf) {
    final String key=entry.getKey();
    if (key.startsWith(CONF_PREFIX)) {
      p.setProperty(key.substring(CONF_PREFIX.length()),conf.get(key));
    }
  }
  return p;
}
