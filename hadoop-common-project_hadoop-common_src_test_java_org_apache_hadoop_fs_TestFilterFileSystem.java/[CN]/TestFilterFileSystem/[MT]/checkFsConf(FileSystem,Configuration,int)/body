{
  int depth=0;
  while (true) {
    depth++;
    assertFalse("depth " + depth + ">"+ expectDepth,depth > expectDepth);
    assertEquals(conf,fs.getConf());
    if (!(fs instanceof FilterFileSystem)) {
      break;
    }
    fs=((FilterFileSystem)fs).getRawFileSystem();
  }
  assertEquals(expectDepth,depth);
}
