{
  final String sAddr;
  if (null == (sAddr=conf.get("proxy.http.test.listener.addr"))) {
    SslSocketConnector sslListener=new SslSocketConnector();
    sslListener.setKeystore(conf.get("ssl.server.keystore.location"));
    sslListener.setPassword(conf.get("ssl.server.keystore.password",""));
    sslListener.setKeyPassword(conf.get("ssl.server.keystore.keypassword",""));
    sslListener.setKeystoreType(conf.get("ssl.server.keystore.type","jks"));
    sslListener.setNeedClientAuth(true);
    System.setProperty("javax.net.ssl.trustStore",conf.get("ssl.server.truststore.location",""));
    System.setProperty("javax.net.ssl.trustStorePassword",conf.get("ssl.server.truststore.password",""));
    System.setProperty("javax.net.ssl.trustStoreType",conf.get("ssl.server.truststore.type","jks"));
    return sslListener;
  }
  InetSocketAddress proxyAddr=NetUtils.createSocketAddr(sAddr);
  SelectChannelConnector testlistener=new SelectChannelConnector();
  testlistener.setUseDirectBuffers(false);
  testlistener.setHost(proxyAddr.getHostName());
  testlistener.setPort(proxyAddr.getPort());
  return testlistener;
}
