{
  String value=conf.get(HADOOP_SECURITY_AUTHENTICATION);
  if (value == null || "simple".equals(value)) {
    useKerberos=false;
  }
 else   if ("kerberos".equals(value)) {
    useKerberos=true;
  }
 else {
    throw new IllegalArgumentException("Invalid attribute value for " + HADOOP_SECURITY_AUTHENTICATION + " of "+ value);
  }
  if (!(groups instanceof TestingGroups)) {
    groups=Groups.getUserToGroupsMappingService(conf);
  }
  javax.security.auth.login.Configuration.setConfiguration(new HadoopConfiguration());
  try {
    KerberosName.setConfiguration(conf);
  }
 catch (  IOException ioe) {
    throw new RuntimeException("Problem with Kerberos auth_to_local name " + "configuration",ioe);
  }
  isInitialized=true;
}
