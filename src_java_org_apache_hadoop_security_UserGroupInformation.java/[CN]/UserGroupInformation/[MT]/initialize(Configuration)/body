{
  String value=conf.get(HADOOP_SECURITY_AUTHENTICATION);
  if ("simple".equals(value)) {
    useKerberos=false;
  }
 else   if (value == null || "kerberos".equals(value)) {
    useKerberos=true;
  }
 else {
    throw new IllegalArgumentException("Invalid attribute value for " + HADOOP_SECURITY_AUTHENTICATION + " of "+ value);
  }
  if (!(groups instanceof TestingGroups)) {
    groups=Groups.getUserToGroupsMappingService(conf);
  }
  javax.security.auth.login.Configuration.setConfiguration(new HadoopConfiguration());
  isInitialized=true;
}
