{
  try {
    final List<String> keys=provider.getKeys();
    getOut().println("Listing keys for KeyProvider: " + provider);
    if (metadata) {
      final Metadata[] meta=provider.getKeysMetadata(keys.toArray(new String[keys.size()]));
      for (int i=0; i < meta.length; ++i) {
        getOut().println(keys.get(i) + " : " + meta[i]);
      }
    }
 else {
      for (      String keyName : keys) {
        getOut().println(keyName);
      }
    }
  }
 catch (  IOException e) {
    getOut().println("Cannot list keys for KeyProvider: " + provider + ": "+ e.toString());
    throw e;
  }
}
