{
  KeyProvider provider=null;
  List<KeyProvider> providers;
  try {
    providers=KeyProviderFactory.getProviders(getConf());
    if (userSuppliedProvider) {
      provider=providers.get(0);
    }
 else {
      for (      KeyProvider p : providers) {
        if (!p.isTransient()) {
          provider=p;
          break;
        }
      }
    }
  }
 catch (  IOException e) {
    e.printStackTrace(err);
  }
  return provider;
}
