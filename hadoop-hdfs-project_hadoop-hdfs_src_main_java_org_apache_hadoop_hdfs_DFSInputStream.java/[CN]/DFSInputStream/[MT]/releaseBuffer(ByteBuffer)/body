{
  Object val=extendedReadBuffers.remove(buffer);
  if (val == null) {
    throw new IllegalArgumentException("tried to release a buffer " + "that was not created by this stream, " + buffer);
  }
  if (val instanceof ClientMmap) {
    ((ClientMmap)val).unref();
  }
 else   if (val instanceof ByteBufferPool) {
    ((ByteBufferPool)val).putBuffer(buffer);
  }
}
