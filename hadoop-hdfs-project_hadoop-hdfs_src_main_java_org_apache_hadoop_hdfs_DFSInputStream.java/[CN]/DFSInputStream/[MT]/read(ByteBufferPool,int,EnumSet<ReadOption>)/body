{
  if (maxLength == 0) {
    return EMPTY_BUFFER;
  }
 else   if (maxLength < 0) {
    throw new IllegalArgumentException("can't read a negative " + "number of bytes.");
  }
  if ((blockReader == null) || (blockEnd == -1)) {
    if (pos >= getFileLength()) {
      return null;
    }
    if ((!seekToBlockSource(pos)) || (blockReader == null)) {
      throw new IOException("failed to allocate new BlockReader " + "at position " + pos);
    }
  }
  ByteBuffer buffer=null;
  if (dfsClient.getConf().shortCircuitMmapEnabled) {
    buffer=tryReadZeroCopy(maxLength,opts);
  }
  if (buffer != null) {
    return buffer;
  }
  buffer=ByteBufferUtil.fallbackRead(this,bufferPool,maxLength);
  if (buffer != null) {
    extendedReadBuffers.put(buffer,bufferPool);
  }
  return buffer;
}
