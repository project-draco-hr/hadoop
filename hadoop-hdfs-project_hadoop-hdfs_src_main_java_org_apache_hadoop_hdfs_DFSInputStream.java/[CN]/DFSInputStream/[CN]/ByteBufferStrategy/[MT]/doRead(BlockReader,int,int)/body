{
  int oldpos=buf.position();
  int oldlimit=buf.limit();
  boolean success=false;
  try {
    int ret=blockReader.read(buf);
    success=true;
    updateReadStatistics(readStatistics,ret,blockReader);
    if (ret == 0) {
      DFSClient.LOG.warn("zero");
    }
    return ret;
  }
  finally {
    if (!success) {
      buf.position(oldpos);
      buf.limit(oldlimit);
    }
  }
}
