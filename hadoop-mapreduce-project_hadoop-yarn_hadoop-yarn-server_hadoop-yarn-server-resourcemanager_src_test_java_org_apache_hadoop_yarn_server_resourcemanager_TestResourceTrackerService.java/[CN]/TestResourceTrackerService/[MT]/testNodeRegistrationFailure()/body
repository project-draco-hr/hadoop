{
  writeToHostsFile("host1");
  Configuration conf=new Configuration();
  conf.set("yarn.resourcemanager.nodes.include-path",hostFile.getAbsolutePath());
  rm=new MockRM(conf);
  rm.start();
  ResourceTrackerService resourceTrackerService=rm.getResourceTrackerService();
  RegisterNodeManagerRequest req=Records.newRecord(RegisterNodeManagerRequest.class);
  NodeId nodeId=Records.newRecord(NodeId.class);
  nodeId.setHost("host2");
  nodeId.setPort(1234);
  req.setNodeId(nodeId);
  req.setHttpPort(1234);
  RegisterNodeManagerResponse response=resourceTrackerService.registerNodeManager(req);
  Assert.assertEquals(NodeAction.SHUTDOWN,response.getRegistrationResponse().getNodeAction());
}
