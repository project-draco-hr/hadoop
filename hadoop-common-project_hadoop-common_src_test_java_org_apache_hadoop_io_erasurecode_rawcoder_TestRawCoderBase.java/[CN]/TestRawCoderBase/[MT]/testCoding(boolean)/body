{
  this.usingDirectBuffer=usingDirectBuffer;
  prepareCoders();
  ECChunk[] dataChunks=prepareDataChunksForEncoding();
  ECChunk[] parityChunks=prepareParityChunksForEncoding();
  ECChunk[] clonedDataChunks=cloneChunksWithData(dataChunks);
  encoder.encode(dataChunks,parityChunks);
  ECChunk[] backupChunks=backupAndEraseChunks(clonedDataChunks,parityChunks);
  ECChunk[] inputChunks=prepareInputChunksForDecoding(clonedDataChunks,parityChunks);
  ECChunk[] recoveredChunks=prepareOutputChunksForDecoding();
  decoder.decode(inputChunks,getErasedIndexesForDecoding(),recoveredChunks);
  compareAndVerify(backupChunks,recoveredChunks);
}
