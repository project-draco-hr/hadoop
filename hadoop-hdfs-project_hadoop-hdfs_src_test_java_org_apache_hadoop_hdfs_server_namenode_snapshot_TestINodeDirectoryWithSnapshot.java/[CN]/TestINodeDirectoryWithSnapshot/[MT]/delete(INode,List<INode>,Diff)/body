{
  final int i=Diff.search(current,inode);
  Assert.assertTrue("i=" + i + ", inode="+ inode+ "\ncurrent="+ current,i >= 0);
  current.remove(i);
  if (diff != null) {
    final boolean testUndo=RANDOM.nextInt(UNDO_TEST_P) == 0;
    String before=null;
    if (testUndo) {
      before=toString(diff);
    }
    final Triple<Integer,INode,Integer> undoInfo=diff.delete(inode);
    if (testUndo) {
      final String after=toString(diff);
      diff.undoDelete(inode,undoInfo);
      assertDiff(before,diff);
      diff.delete(inode);
      assertDiff(after,diff);
    }
  }
}
