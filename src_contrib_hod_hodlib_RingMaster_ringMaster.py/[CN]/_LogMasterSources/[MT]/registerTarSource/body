def registerTarSource(self, hostname, url, addr=None):
    self.log.debug(('registering: ' + url))
    lock = self.tarSourceLock
    lock.acquire()
    self.dict[url] = url
    self.count[url] = 0
    if addr:
        c = self.count[addr]
        self.count[addr] = (c - 1)
    lock.release()
    if addr:
        str = ('%s is done' % addr)
        self.log.debug(str)
    return url
