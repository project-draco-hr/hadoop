def getServiceAddr(self, name):
    addr = 'not found'
    self.log.debug(('getServiceAddr name: %s' % name))
    lock = self.masterParamLock
    lock.acquire()
    try:
        service = self.serviceDict[name]
    except KeyError:
        pass
    else:
        self.log.debug(('getServiceAddr service: %s' % service))
        err = service.getMasterFailed()
        if ((err is not None) and (service.getMasterFailureCount() > self.cfg['ringmaster']['max-master-failures'])):
            self.log.critical(('Detected errors (%s) beyond allowed number of failures (%s). Flagging error to client' % (service.getMasterFailureCount(), self.cfg['ringmaster']['max-master-failures'])))
            addr = ('Error: ' + err)
        elif service.isMasterInitialized():
            addr = service.getMasterAddrs()[0]
        else:
            addr = 'not found'
    lock.release()
    self.log.debug(('getServiceAddr addr %s: %s' % (name, addr)))
    return addr
