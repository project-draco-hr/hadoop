{
  String nsId="ns1";
  String host1="1.2.3.1";
  String host2="1.2.3.2";
  Configuration conf=getHAConf(nsId,host1,host2);
  conf.set(DFSUtil.addKeySuffixes(DFSConfigKeys.DFS_NAMENODE_SERVICE_RPC_ADDRESS_KEY,nsId,"nn1"),host1 + ":54321");
  conf.set(DFSConfigKeys.DFS_NAMESERVICE_ID,"ns1");
  NameNode.initializeGenericKeys(conf,"ns1","nn1");
  List<Configuration> others=HAUtil.getConfForOtherNodes(conf);
  Configuration nn2Conf=others.get(0);
  assertEquals(nn2Conf.get(DFSConfigKeys.DFS_HA_NAMENODE_ID_KEY),"nn2");
  assertTrue(!conf.get(DFSConfigKeys.DFS_NAMENODE_RPC_ADDRESS_KEY).equals(nn2Conf.get(DFSConfigKeys.DFS_NAMENODE_RPC_ADDRESS_KEY)));
  assertNull(nn2Conf.get(DFSConfigKeys.DFS_NAMENODE_SERVICE_RPC_ADDRESS_KEY));
}
