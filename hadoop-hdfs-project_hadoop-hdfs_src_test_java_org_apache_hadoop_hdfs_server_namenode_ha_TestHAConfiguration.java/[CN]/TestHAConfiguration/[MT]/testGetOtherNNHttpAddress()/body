{
  Configuration conf=getHAConf("ns1","1.2.3.1","1.2.3.2");
  conf.set(DFSConfigKeys.DFS_NAMESERVICE_ID,"ns1");
  NameNode.initializeGenericKeys(conf,"ns1","nn1");
  StandbyCheckpointer checkpointer=new StandbyCheckpointer(conf,fsn);
  assertAddressMatches("1.2.3.2",checkpointer.getActiveNNAddresses().get(0));
  conf=getHAConf("ns1","1.2.3.1","1.2.3.2","1.2.3.3");
  NameNode.initializeGenericKeys(conf,"ns1","nn1");
  checkpointer=new StandbyCheckpointer(conf,fsn);
  assertEquals("Got an unexpected number of possible active NNs",2,checkpointer.getActiveNNAddresses().size());
  assertEquals(new URL("http","1.2.3.2",DFSConfigKeys.DFS_NAMENODE_HTTP_PORT_DEFAULT,""),checkpointer.getActiveNNAddresses().get(0));
  assertAddressMatches("1.2.3.2",checkpointer.getActiveNNAddresses().get(0));
  assertAddressMatches("1.2.3.3",checkpointer.getActiveNNAddresses().get(1));
}
