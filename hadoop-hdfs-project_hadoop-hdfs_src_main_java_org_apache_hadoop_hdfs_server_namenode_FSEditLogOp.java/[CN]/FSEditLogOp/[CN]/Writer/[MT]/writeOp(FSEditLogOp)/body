{
  int start=buf.getLength();
  buf.writeByte(op.opCode.getOpCode());
  buf.writeInt(0);
  buf.writeLong(op.txid);
  op.writeFields(buf);
  int end=buf.getLength();
  int length=end - start - 1;
  buf.writeInt(length,start + 1);
  checksum.reset();
  checksum.update(buf.getData(),start,end - start);
  int sum=(int)checksum.getValue();
  buf.writeInt(sum);
}
