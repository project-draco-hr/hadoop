{
  if (!LayoutVersion.supports(Feature.EDITLOG_OP_OPTIMIZATION,logVersion)) {
    this.length=in.readInt();
  }
  if (LayoutVersion.supports(Feature.ADD_INODE_ID,logVersion)) {
    this.inodeId=in.readLong();
  }
 else {
    this.inodeId=INodeId.GRANDFATHER_INODE_ID;
  }
  if ((-17 < logVersion && length != 4) || (logVersion <= -17 && length != 5 && !LayoutVersion.supports(Feature.EDITLOG_OP_OPTIMIZATION,logVersion))) {
    throw new IOException("Incorrect data format." + " logVersion is " + logVersion + " but writables.length is "+ length+ ". ");
  }
  this.path=FSImageSerialization.readString(in);
  if (LayoutVersion.supports(Feature.EDITLOG_OP_OPTIMIZATION,logVersion)) {
    this.replication=FSImageSerialization.readShort(in);
    this.mtime=FSImageSerialization.readLong(in);
  }
 else {
    this.replication=readShort(in);
    this.mtime=readLong(in);
  }
  if (LayoutVersion.supports(Feature.FILE_ACCESS_TIME,logVersion)) {
    if (LayoutVersion.supports(Feature.EDITLOG_OP_OPTIMIZATION,logVersion)) {
      this.atime=FSImageSerialization.readLong(in);
    }
 else {
      this.atime=readLong(in);
    }
  }
 else {
    this.atime=0;
  }
  if (LayoutVersion.supports(Feature.EDITLOG_OP_OPTIMIZATION,logVersion)) {
    this.blockSize=FSImageSerialization.readLong(in);
  }
 else {
    this.blockSize=readLong(in);
  }
  this.blocks=readBlocks(in,logVersion);
  this.permissions=PermissionStatus.read(in);
  if (this.opCode == OP_ADD) {
    if (permissions.getPermission().getAclBit()) {
      aclEntries=PBHelper.convertAclEntry(AclFsImageProto.parseDelimitedFrom((DataInputStream)in).getEntriesList());
    }
 else {
      aclEntries=null;
    }
    this.clientName=FSImageSerialization.readString(in);
    this.clientMachine=FSImageSerialization.readString(in);
    readRpcIds(in,logVersion);
  }
 else {
    this.clientName="";
    this.clientMachine="";
  }
}
