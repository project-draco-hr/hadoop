{
  FSImageSerialization.writeLong(directive.getId(),out);
  byte flags=(byte)(((directive.getPath() != null) ? 0x1 : 0) | ((directive.getReplication() != null) ? 0x2 : 0) | ((directive.getPool() != null) ? 0x4 : 0)| ((directive.getExpiration() != null) ? 0x8 : 0));
  out.writeByte(flags);
  if (directive.getPath() != null) {
    FSImageSerialization.writeString(directive.getPath().toUri().getPath(),out);
  }
  if (directive.getReplication() != null) {
    FSImageSerialization.writeShort(directive.getReplication(),out);
  }
  if (directive.getPool() != null) {
    FSImageSerialization.writeString(directive.getPool(),out);
  }
  if (directive.getExpiration() != null) {
    FSImageSerialization.writeLong(directive.getExpiration().getMillis(),out);
  }
  writeRpcIds(rpcClientId,rpcCallId,out);
}
