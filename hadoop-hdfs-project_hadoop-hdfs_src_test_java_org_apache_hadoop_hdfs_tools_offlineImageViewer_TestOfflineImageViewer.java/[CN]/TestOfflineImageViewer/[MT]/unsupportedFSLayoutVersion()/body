{
  File testFile=new File(ROOT,"/invalidLayoutVersion");
  File outputFile=new File(ROOT,"invalidLayoutVersionOutput");
  try {
    int badVersionNum=-432;
    changeLayoutVersion(originalFsimage,testFile,badVersionNum);
    ImageVisitor v=new LsImageVisitor(outputFile.getPath(),true);
    OfflineImageViewer oiv=new OfflineImageViewer(testFile.getPath(),v,false);
    try {
      oiv.go();
      fail("Shouldn't be able to read invalid laytout version");
    }
 catch (    IOException e) {
      if (!e.getMessage().contains(Integer.toString(badVersionNum)))       throw e;
      LOG.debug("Correctly failed at reading bad image version.");
    }
  }
  finally {
    if (testFile.exists())     testFile.delete();
    if (outputFile.exists())     outputFile.delete();
  }
}
