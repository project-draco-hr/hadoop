{
  final ByteArrayOutputStream bytes=new ByteArrayOutputStream();
  final PrintStream out=new PrintStream(bytes);
  final PrintStream oldOut=System.out;
  try {
    System.setOut(out);
    int status=OfflineImageViewerPB.run(new String[]{"-i",originalFsimage.getAbsolutePath(),"-o","-","-p","FileDistribution","-maxSize","512","-step","8","-format"});
    assertEquals(0,status);
    Assert.assertTrue(bytes.toString().contains("(0 B, 8 B]"));
  }
  finally {
    System.setOut(oldOut);
    IOUtils.closeStream(out);
  }
}
