{
  s3=new AmazonS3Client(credentials,awsConf);
  String endPoint=conf.getTrimmed(ENDPOINT,"");
  if (!endPoint.isEmpty()) {
    try {
      s3.setEndpoint(endPoint);
    }
 catch (    IllegalArgumentException e) {
      String msg="Incorrect endpoint: " + e.getMessage();
      LOG.error(msg);
      throw new IllegalArgumentException(msg,e);
    }
  }
  enablePathStyleAccessIfRequired(conf);
}
