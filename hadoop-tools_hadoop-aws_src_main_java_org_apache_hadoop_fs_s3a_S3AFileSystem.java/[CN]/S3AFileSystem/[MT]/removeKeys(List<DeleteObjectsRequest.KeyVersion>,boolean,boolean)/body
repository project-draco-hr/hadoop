{
  if (keysToDelete.isEmpty()) {
    return;
  }
  if (enableMultiObjectsDelete) {
    deleteObjects(new DeleteObjectsRequest(bucket).withKeys(keysToDelete));
  }
 else {
    for (    DeleteObjectsRequest.KeyVersion keyVersion : keysToDelete) {
      deleteObject(keyVersion.getKey());
    }
  }
  if (!deleteFakeDir) {
    instrumentation.fileDeleted(keysToDelete.size());
  }
 else {
    instrumentation.fakeDirsDeleted(keysToDelete.size());
  }
  if (clearKeys) {
    keysToDelete.clear();
  }
}
