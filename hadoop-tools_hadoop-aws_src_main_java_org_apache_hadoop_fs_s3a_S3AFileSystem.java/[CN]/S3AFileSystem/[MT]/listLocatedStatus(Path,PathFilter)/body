{
  incrementStatistic(INVOCATION_LIST_LOCATED_STATUS);
  Path path=qualify(f);
  LOG.debug("listLocatedStatus({}, {}",path,filter);
  try {
    final FileStatus fileStatus=getFileStatus(path);
    if (fileStatus.isFile()) {
      LOG.debug("Path is a file");
      return new Listing.SingleStatusRemoteIterator(filter.accept(path) ? toLocatedFileStatus(fileStatus) : null);
    }
 else {
      String key=maybeAddTrailingSlash(pathToKey(path));
      return listing.createLocatedFileStatusIterator(listing.createFileStatusListingIterator(path,createListObjectsRequest(key,"/"),filter,new Listing.AcceptAllButSelfAndS3nDirs(path)));
    }
  }
 catch (  AmazonClientException e) {
    throw translateException("listLocatedStatus",path,e);
  }
}
