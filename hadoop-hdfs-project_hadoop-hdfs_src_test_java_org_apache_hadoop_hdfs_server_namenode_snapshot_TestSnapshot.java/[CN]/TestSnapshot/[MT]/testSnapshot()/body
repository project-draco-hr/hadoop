{
  for (int i=0; i < SNAPSHOT_ITERATION_NUMBER; i++) {
    TestDirectoryTree.Node[] ssNodes=createSnapshots();
    ArrayList<TestDirectoryTree.Node> excludedList=new ArrayList<TestDirectoryTree.Node>();
    TestDirectoryTree.Node[] modNodes=new TestDirectoryTree.Node[ssNodes.length + 1];
    for (int n=0; n < ssNodes.length; n++) {
      modNodes[n]=ssNodes[n];
      excludedList.add(ssNodes[n]);
    }
    modNodes[modNodes.length - 1]=dirTree.getRandomDirNode(random,excludedList);
    Modification[] mods=prepareModifications(modNodes);
    modifyCurrentDirAndCheckSnapshots(mods);
  }
  System.out.println("XXX done:");
  SnapshotTestHelper.dumpTreeRecursively(fsn.getFSDirectory().getINode("/"));
}
