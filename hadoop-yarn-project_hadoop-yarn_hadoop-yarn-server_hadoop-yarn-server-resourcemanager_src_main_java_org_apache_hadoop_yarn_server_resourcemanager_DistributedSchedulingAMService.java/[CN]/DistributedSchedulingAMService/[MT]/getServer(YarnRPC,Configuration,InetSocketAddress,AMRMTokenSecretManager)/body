{
  Server server=rpc.getServer(DistributedSchedulingAMProtocol.class,this,addr,serverConf,secretManager,serverConf.getInt(YarnConfiguration.RM_SCHEDULER_CLIENT_THREAD_COUNT,YarnConfiguration.DEFAULT_RM_SCHEDULER_CLIENT_THREAD_COUNT));
  ((RPC.Server)server).addProtocol(RPC.RpcKind.RPC_PROTOCOL_BUFFER,ApplicationMasterProtocolPB.class,ApplicationMasterProtocolService.newReflectiveBlockingService(new ApplicationMasterProtocolPBServiceImpl(this)));
  return server;
}
