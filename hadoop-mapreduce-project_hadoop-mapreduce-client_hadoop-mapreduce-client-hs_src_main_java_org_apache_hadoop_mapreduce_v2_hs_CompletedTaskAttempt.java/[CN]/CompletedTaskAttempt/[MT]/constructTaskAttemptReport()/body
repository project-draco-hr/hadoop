{
  report=Records.newRecord(TaskAttemptReport.class);
  report.setTaskAttemptId(attemptId);
  report.setTaskAttemptState(state);
  report.setProgress(getProgress());
  report.setStartTime(attemptInfo.getStartTime());
  report.setFinishTime(attemptInfo.getFinishTime());
  report.setShuffleFinishTime(attemptInfo.getShuffleFinishTime());
  report.setSortFinishTime(attemptInfo.getSortFinishTime());
  if (localDiagMessage != null) {
    report.setDiagnosticInfo(attemptInfo.getError() + ", " + localDiagMessage);
  }
 else {
    report.setDiagnosticInfo(attemptInfo.getError());
  }
  report.setStateString(attemptInfo.getState());
  report.setRawCounters(getCounters());
  report.setContainerId(attemptInfo.getContainerId());
  if (attemptInfo.getHostname() == null) {
    report.setNodeManagerHost("UNKNOWN");
  }
 else {
    report.setNodeManagerHost(attemptInfo.getHostname());
    report.setNodeManagerPort(attemptInfo.getPort());
  }
  report.setNodeManagerHttpPort(attemptInfo.getHttpPort());
}
