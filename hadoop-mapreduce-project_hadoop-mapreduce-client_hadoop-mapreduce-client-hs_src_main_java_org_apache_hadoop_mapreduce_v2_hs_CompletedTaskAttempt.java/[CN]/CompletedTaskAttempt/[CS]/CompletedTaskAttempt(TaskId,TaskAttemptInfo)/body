{
  this.attemptInfo=attemptInfo;
  this.attemptId=TypeConverter.toYarn(attemptInfo.getAttemptId());
  if (attemptInfo.getCounters() != null)   this.counters=TypeConverter.toYarn(attemptInfo.getCounters());
  if (attemptInfo.getTaskStatus() != null) {
    this.state=TaskAttemptState.valueOf(attemptInfo.getTaskStatus());
  }
 else {
    this.state=TaskAttemptState.KILLED;
    localDiagMessage="Attmpt state missing from History : marked as KILLED";
    diagnostics.add(localDiagMessage);
  }
  if (attemptInfo.getError() != null) {
    diagnostics.add(attemptInfo.getError());
  }
  report=RecordFactoryProvider.getRecordFactory(null).newRecordInstance(TaskAttemptReport.class);
  report.setCounters(counters);
  report.setTaskAttemptId(attemptId);
  report.setTaskAttemptState(state);
  report.setProgress(getProgress());
  report.setStartTime(attemptInfo.getStartTime());
  report.setFinishTime(attemptInfo.getFinishTime());
  report.setShuffleFinishTime(attemptInfo.getShuffleFinishTime());
  report.setSortFinishTime(attemptInfo.getSortFinishTime());
  if (localDiagMessage != null) {
    report.setDiagnosticInfo(attemptInfo.getError() + ", " + localDiagMessage);
  }
 else {
    report.setDiagnosticInfo(attemptInfo.getError());
  }
  report.setStateString(attemptInfo.getState());
  report.setCounters(getCounters());
  report.setContainerId(attemptInfo.getContainerId());
  if (attemptInfo.getHostname() == null) {
    report.setNodeManagerHost("UNKNOWN");
  }
 else {
    report.setNodeManagerHost(attemptInfo.getHostname());
    report.setNodeManagerPort(attemptInfo.getPort());
  }
  report.setNodeManagerHttpPort(attemptInfo.getHttpPort());
}
