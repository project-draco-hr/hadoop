{
  ContainerLaunchContext container=recordFactory.newRecordInstance(ContainerLaunchContext.class);
  container.addAllCommands(applicationMasterContext.getCommandList());
  StringBuilder mergedCommand=new StringBuilder();
  String failCount=Integer.toString(application.getAppAttemptId().getAttemptId());
  List<String> commandList=new ArrayList<String>();
  for (  String str : container.getCommandList()) {
    String result=str.replaceFirst(ApplicationConstants.AM_FAIL_COUNT_STRING,failCount);
    mergedCommand.append(result).append(" ");
    commandList.add(result);
  }
  container.clearCommands();
  container.addAllCommands(commandList);
  LOG.info("Command to launch container " + containerID + " : "+ mergedCommand);
  container.addAllEnv(applicationMasterContext.getAllEnvironment());
  container.addAllEnv(setupTokensInEnv(applicationMasterContext));
  container.setContainerId(containerID);
  container.setUser(applicationMasterContext.getUser());
  container.setResource(applicationMasterContext.getMasterCapability());
  container.addAllLocalResources(applicationMasterContext.getAllResourcesTodo());
  container.setContainerTokens(applicationMasterContext.getFsTokensTodo());
  return container;
}
