{
  TestElement[] elements=generateElements(1 << 16);
  final LightWeightResizableGSet<TestKey,TestElement> set=new LightWeightResizableGSet<TestKey,TestElement>();
  assertEquals(set.size(),0);
  for (int i=0; i < elements.length; i++) {
    TestElement element=set.put(elements[i]);
    assertTrue(element == null);
  }
  assertEquals(set.size(),elements.length);
{
    set.clear();
    assertEquals(set.size(),0);
    for (int i=0; i < elements.length; i++) {
      assertFalse(set.contains(elements[i]));
    }
    assertFalse(set.iterator().hasNext());
  }
  for (int i=0; i < elements.length; i++) {
    TestElement element=set.put(elements[i]);
    assertTrue(element == null);
  }
{
    for (Iterator<TestElement> iter=set.iterator(); iter.hasNext(); ) {
      TestElement element=iter.next();
      assertTrue(set.contains(element));
      iter.remove();
      assertFalse(set.contains(element));
    }
    for (int i=0; i < elements.length; i++) {
      assertFalse(set.contains(elements[i]));
    }
    assertFalse(set.iterator().hasNext());
    assertEquals(set.size(),0);
  }
}
