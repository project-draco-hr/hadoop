{
  if (pmemUsage != ResourceCalculatorProcessTree.UNAVAILABLE || cpuUsagePercentPerCore != ResourceCalculatorProcessTree.UNAVAILABLE) {
    ContainerEntity entity=createContainerEntity(container.getContainerId());
    long currentTimeMillis=System.currentTimeMillis();
    if (pmemUsage != ResourceCalculatorProcessTree.UNAVAILABLE) {
      TimelineMetric memoryMetric=new TimelineMetric();
      memoryMetric.setId(ContainerMetric.MEMORY.toString());
      memoryMetric.addValue(currentTimeMillis,pmemUsage);
      entity.addMetric(memoryMetric);
    }
    if (cpuUsagePercentPerCore != ResourceCalculatorProcessTree.UNAVAILABLE) {
      TimelineMetric cpuMetric=new TimelineMetric();
      cpuMetric.setId(ContainerMetric.CPU.toString());
      cpuMetric.addValue(currentTimeMillis,Math.round(cpuUsagePercentPerCore));
      entity.addMetric(cpuMetric);
    }
    dispatcher.getEventHandler().handle(new TimelinePublishEvent(entity,container.getContainerId().getApplicationAttemptId().getApplicationId()));
  }
}
