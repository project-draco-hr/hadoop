{
  if (pmemUsage != ResourceCalculatorProcessTree.UNAVAILABLE || cpuUsageTotalCoresPercentage != ResourceCalculatorProcessTree.UNAVAILABLE) {
    ContainerEntity entity=createContainerEntity(container.getContainerId());
    long currentTimeMillis=System.currentTimeMillis();
    if (pmemUsage != ResourceCalculatorProcessTree.UNAVAILABLE) {
      TimelineMetric memoryMetric=new TimelineMetric();
      memoryMetric.setId(ContainerMetric.MEMORY.toString() + pId);
      memoryMetric.addValue(currentTimeMillis,pmemUsage);
      entity.addMetric(memoryMetric);
    }
    if (cpuUsageTotalCoresPercentage != ResourceCalculatorProcessTree.UNAVAILABLE) {
      TimelineMetric cpuMetric=new TimelineMetric();
      cpuMetric.setId(ContainerMetric.CPU.toString() + pId);
      cpuMetric.addValue(currentTimeMillis,cpuUsageTotalCoresPercentage);
      entity.addMetric(cpuMetric);
    }
    dispatcher.getEventHandler().handle(new TimelinePublishEvent(entity,container.getContainerId().getApplicationAttemptId().getApplicationId()));
  }
}
