{
  publishSystemMetrics=YarnConfiguration.systemMetricsPublisherEnabled(conf);
  if (publishSystemMetrics) {
    dispatcher=new AsyncDispatcher();
    dispatcher.register(NMTimelineEventType.class,new ForwardingEventHandler());
    dispatcher.register(ContainerEventType.class,new ContainerEventHandler());
    dispatcher.register(ApplicationEventType.class,new ApplicationEventHandler());
    dispatcher.register(LocalizationEventType.class,new LocalizationEventDispatcher());
    addIfService(dispatcher);
    LOG.info("YARN system metrics publishing service is enabled");
  }
 else {
    LOG.info("YARN system metrics publishing service is not enabled");
  }
  super.serviceInit(conf);
}
