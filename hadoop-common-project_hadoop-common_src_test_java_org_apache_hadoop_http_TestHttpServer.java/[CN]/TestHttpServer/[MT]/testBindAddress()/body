{
  checkBindAddress("0.0.0.0",0,false).stop();
  HttpServer myServer=checkBindAddress("localhost",0,false);
  HttpServer myServer2=null;
  try {
    int port=myServer.getListenerAddress().getPort();
    myServer2=checkBindAddress("localhost",port,true);
    port=myServer2.getListenerAddress().getPort();
    myServer2.stop();
    assertEquals(-1,myServer2.getPort());
    myServer2.openListener();
    assertEquals(port,myServer2.getPort());
  }
  finally {
    myServer.stop();
    if (myServer2 != null) {
      myServer2.stop();
    }
  }
}
