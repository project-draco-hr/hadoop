{
  KerberosTestUtils.doAs(HTTP_USER + "/localhost",new Callable<Void>(){
    @Override public Void call() throws Exception {
      TimelineEntity entityToStore=new TimelineEntity();
      entityToStore.setEntityType(TestTimelineAuthenticationFilter.class.getName());
      entityToStore.setEntityId("entity1");
      entityToStore.setStartTime(0L);
      TimelinePutResponse putResponse=client.putEntities(entityToStore);
      Assert.assertEquals(0,putResponse.getErrors().size());
      TimelineEntity entityToRead=testTimelineServer.getTimelineStore().getEntity("entity1",TestTimelineAuthenticationFilter.class.getName(),null);
      Assert.assertNotNull(entityToRead);
      return null;
    }
  }
);
}
