{
  Configuration conf=getConfig();
  Server server;
  try {
    server=new RPC.Builder(conf).setProtocol(CustomProtocol.class).setNumHandlers(1).setSecretManager(new ClientToAMTokenSecretManager(this.appAttemptId,secretKey)).setInstance(this).build();
  }
 catch (  Exception e) {
    throw new YarnRuntimeException(e);
  }
  server.start();
  this.address=NetUtils.getConnectAddress(server);
  super.serviceStart();
}
