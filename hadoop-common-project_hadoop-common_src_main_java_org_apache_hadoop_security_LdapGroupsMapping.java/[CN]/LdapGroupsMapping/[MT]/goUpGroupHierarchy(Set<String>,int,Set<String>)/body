{
  if (goUpHierarchy <= 0 || groups.isEmpty()) {
    return;
  }
  DirContext context=getDirContext();
  Set<String> nextLevelGroups=new HashSet<String>();
  StringBuilder filter=new StringBuilder();
  filter.append("(&").append(groupSearchFilter).append("(|");
  for (  String dn : groupDNs) {
    filter.append("(").append(groupMemberAttr).append("=").append(dn).append(")");
  }
  filter.append("))");
  LOG.debug("Ldap group query string: " + filter.toString());
  NamingEnumeration<SearchResult> groupResults=context.search(baseDN,filter.toString(),SEARCH_CONTROLS);
  while (groupResults.hasMoreElements()) {
    SearchResult groupResult=groupResults.nextElement();
    getGroupNames(groupResult,groups,nextLevelGroups,true);
  }
  goUpGroupHierarchy(nextLevelGroups,goUpHierarchy - 1,groups);
}
