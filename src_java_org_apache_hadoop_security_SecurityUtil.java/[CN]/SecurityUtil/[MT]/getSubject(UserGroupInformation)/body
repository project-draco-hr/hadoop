{
  if (ugi == null) {
    return null;
  }
  Set<Principal> principals=new HashSet<Principal>(ugi.getGroupNames().length + 1);
  User userPrincipal=new User(ugi.getUserName());
  principals.add(userPrincipal);
  for (  String group : ugi.getGroupNames()) {
    Group groupPrincipal=new Group(group);
    principals.add(groupPrincipal);
  }
  principals.add(ugi);
  Subject user=new Subject(false,principals,new HashSet<Object>(),new HashSet<Object>());
  return user;
}
