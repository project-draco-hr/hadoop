{
  if (!UserGroupInformation.isSecurityEnabled())   return;
  String serviceName="host/" + remoteHost.getHost();
  LOG.debug("Fetching service ticket for host at: " + serviceName);
  Credentials serviceCred=null;
  try {
    PrincipalName principal=new PrincipalName(serviceName,PrincipalName.KRB_NT_SRV_HST);
    serviceCred=Credentials.acquireServiceCreds(principal.toString(),Krb5Util.ticketToCreds(getTgtFromSubject()));
  }
 catch (  Exception e) {
    throw new IOException("Invalid service principal name: " + serviceName,e);
  }
  if (serviceCred == null) {
    throw new IOException("Can't get service ticket for " + serviceName);
  }
  Subject.getSubject(AccessController.getContext()).getPrivateCredentials().add(Krb5Util.credsToTicket(serviceCred));
}
