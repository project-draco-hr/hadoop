{
  while (namesystem.isRunning()) {
    try {
      if (isPopulatingReplQueues()) {
        scanAndCompactStorages();
      }
      Thread.sleep(storageInfoDefragmentInterval);
    }
 catch (    Throwable t) {
      if (!namesystem.isRunning()) {
        LOG.info("Stopping thread.");
        if (!(t instanceof InterruptedException)) {
          LOG.info("Received an exception while shutting down.",t);
        }
        break;
      }
 else       if (!checkNSRunning && t instanceof InterruptedException) {
        LOG.info("Stopping for testing.");
        break;
      }
      LOG.error("Thread received Runtime exception.",t);
      terminate(1,t);
    }
  }
}
