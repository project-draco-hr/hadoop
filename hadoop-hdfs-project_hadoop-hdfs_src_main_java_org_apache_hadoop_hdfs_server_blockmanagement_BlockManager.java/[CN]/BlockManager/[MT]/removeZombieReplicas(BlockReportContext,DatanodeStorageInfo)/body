{
  LOG.warn("processReport 0x{}: removing zombie storage {}, which no " + "longer exists on the DataNode.",Long.toHexString(context.getReportId()),zombie.getStorageID());
  assert(namesystem.hasWriteLock());
  Iterator<BlockInfoContiguous> iter=zombie.getBlockIterator();
  int prevBlocks=zombie.numBlocks();
  while (iter.hasNext()) {
    BlockInfoContiguous block=iter.next();
    removeStoredBlock(block,zombie.getDatanodeDescriptor());
    invalidateBlocks.remove(zombie.getDatanodeDescriptor(),block);
  }
  assert(zombie.numBlocks() == 0);
  LOG.warn("processReport 0x{}: removed {} replicas from storage {}, " + "which no longer exists on the DataNode.",Long.toHexString(context.getReportId()),prevBlocks,zombie.getStorageID());
}
