{
  BlockInfo[] timedOutItems=pendingReplications.getTimedOutBlocks();
  if (timedOutItems != null) {
    namesystem.writeLock();
    try {
      for (      BlockInfo timedOutItem : timedOutItems) {
        BlockInfo bi=getStoredBlock(timedOutItem);
        if (bi == null) {
          continue;
        }
        NumberReplicas num=countNodes(timedOutItem);
        if (isNeededReplication(bi,getReplication(bi),num.liveReplicas())) {
          neededReplications.add(bi,num.liveReplicas(),num.decommissionedAndDecommissioning(),getReplication(bi));
        }
      }
    }
  finally {
      namesystem.writeUnlock();
    }
  }
}
