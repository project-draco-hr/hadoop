{
  namesystem.writeLock();
  DatanodeDescriptor node=this.getDatanodeManager().getDatanode(nodeReg);
  if (node != null) {
    List<DatanodeStorageInfo> zombies=node.removeZombieStorages(storageIDsInBlockReport);
    if (zombies.isEmpty()) {
      LOG.debug("processReport 0x{}: no zombie storages found.",Long.toHexString(context.getReportId()));
    }
 else {
      for (      DatanodeStorageInfo zombie : zombies) {
        this.removeZombieReplicas(context,zombie);
      }
    }
  }
  namesystem.writeUnlock();
}
