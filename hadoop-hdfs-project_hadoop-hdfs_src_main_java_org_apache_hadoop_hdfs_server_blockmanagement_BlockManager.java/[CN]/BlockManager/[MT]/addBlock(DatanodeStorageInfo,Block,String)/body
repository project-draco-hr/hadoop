{
  DatanodeDescriptor node=storageInfo.getDatanodeDescriptor();
  node.decrementBlocksScheduled(storageInfo.getStorageType());
  DatanodeDescriptor delHintNode=null;
  if (delHint != null && delHint.length() != 0) {
    delHintNode=datanodeManager.getDatanode(delHint);
    if (delHintNode == null) {
      blockLog.warn("BLOCK* blockReceived: {} is expected to be removed " + "from an unrecorded node {}",block,delHint);
    }
  }
  BlockInfo storedBlock=getStoredBlock(block);
  if (storedBlock != null) {
    pendingReplications.decrement(storedBlock,node);
  }
  processAndHandleReportedBlock(storageInfo,block,ReplicaState.FINALIZED,delHintNode);
}
