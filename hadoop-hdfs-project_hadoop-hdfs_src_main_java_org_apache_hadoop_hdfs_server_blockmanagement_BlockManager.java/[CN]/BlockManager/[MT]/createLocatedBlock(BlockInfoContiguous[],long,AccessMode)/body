{
  int curBlk=0;
  long curPos=0;
  int nrBlocks=(blocks[0].getNumBytes() == 0) ? 0 : blocks.length;
  for (curBlk=0; curBlk < nrBlocks; curBlk++) {
    long blkSize=blocks[curBlk].getNumBytes();
    if (curPos + blkSize >= endPos) {
      break;
    }
    curPos+=blkSize;
  }
  return createLocatedBlock(blocks[curBlk],curPos,mode);
}
