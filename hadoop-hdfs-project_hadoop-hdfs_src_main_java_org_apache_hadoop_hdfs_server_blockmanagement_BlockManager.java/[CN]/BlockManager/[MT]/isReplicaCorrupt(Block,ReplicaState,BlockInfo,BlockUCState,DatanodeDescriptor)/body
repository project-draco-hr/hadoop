{
switch (reportedState) {
case FINALIZED:
switch (ucState) {
case COMPLETE:
case COMMITTED:
      return (storedBlock.getGenerationStamp() != iblk.getGenerationStamp() || storedBlock.getNumBytes() != iblk.getNumBytes());
default :
    return false;
}
case RBW:
case RWR:
if (!storedBlock.isComplete()) {
return false;
}
 else if (storedBlock.getGenerationStamp() != iblk.getGenerationStamp()) {
return true;
}
 else {
if (reportedState == ReplicaState.RBW) {
  LOG.info("Received an RBW replica for block " + storedBlock + " on "+ dn.getName()+ ": ignoring it, since the block is "+ "complete with the same generation stamp.");
  return false;
}
 else {
  return true;
}
}
case RUR:
case TEMPORARY:
default :
LOG.warn("Unexpected replica state " + reportedState + " for block: "+ storedBlock+ " on "+ dn.getName()+ " size "+ storedBlock.getNumBytes());
return true;
}
}
