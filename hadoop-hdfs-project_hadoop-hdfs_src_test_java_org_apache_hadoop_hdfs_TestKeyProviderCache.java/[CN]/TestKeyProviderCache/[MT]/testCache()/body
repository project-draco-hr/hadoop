{
  KeyProviderCache kpCache=new KeyProviderCache(10000);
  Configuration conf=new Configuration();
  conf.set(DFSConfigKeys.DFS_ENCRYPTION_KEY_PROVIDER_URI,"dummy://foo:bar@test_provider1");
  KeyProvider keyProvider1=kpCache.get(conf);
  Assert.assertNotNull("Returned Key Provider is null !!",keyProvider1);
  conf.set(DFSConfigKeys.DFS_ENCRYPTION_KEY_PROVIDER_URI,"dummy://foo:bar@test_provider1");
  KeyProvider keyProvider2=kpCache.get(conf);
  Assert.assertTrue("Different KeyProviders returned !!",keyProvider1 == keyProvider2);
  conf.set(DFSConfigKeys.DFS_ENCRYPTION_KEY_PROVIDER_URI,"dummy://test_provider3");
  KeyProvider keyProvider3=kpCache.get(conf);
  Assert.assertFalse("Same KeyProviders returned !!",keyProvider1 == keyProvider3);
  conf.set(DFSConfigKeys.DFS_ENCRYPTION_KEY_PROVIDER_URI,"dummy://hello:there@test_provider1");
  KeyProvider keyProvider4=kpCache.get(conf);
  Assert.assertFalse("Same KeyProviders returned !!",keyProvider1 == keyProvider4);
}
