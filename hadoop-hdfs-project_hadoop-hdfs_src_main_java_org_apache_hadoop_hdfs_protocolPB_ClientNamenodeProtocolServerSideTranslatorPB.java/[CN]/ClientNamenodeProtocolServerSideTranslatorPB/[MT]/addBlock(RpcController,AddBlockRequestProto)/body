{
  try {
    return AddBlockResponseProto.newBuilder().setBlock(PBHelper.convert(server.addBlock(req.getSrc(),req.getClientName(),req.hasPrevious() ? PBHelper.convert(req.getPrevious()) : null,PBHelper.convert((DatanodeInfoProto[])req.getExcludeNodesList().toArray())))).build();
  }
 catch (  IOException e) {
    throw new ServiceException(e);
  }
}
