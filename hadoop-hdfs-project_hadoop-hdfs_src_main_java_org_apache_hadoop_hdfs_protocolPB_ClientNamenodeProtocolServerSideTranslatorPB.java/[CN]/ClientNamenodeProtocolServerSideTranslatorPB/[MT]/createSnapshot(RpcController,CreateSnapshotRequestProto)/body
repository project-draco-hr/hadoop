{
  try {
    final CreateSnapshotResponseProto.Builder builder=CreateSnapshotResponseProto.newBuilder();
    final String snapshotPath=server.createSnapshot(req.getSnapshotRoot(),req.hasSnapshotName() ? req.getSnapshotName() : null);
    if (snapshotPath != null) {
      builder.setSnapshotPath(snapshotPath);
    }
    return builder.build();
  }
 catch (  IOException e) {
    throw new ServiceException(e);
  }
}
