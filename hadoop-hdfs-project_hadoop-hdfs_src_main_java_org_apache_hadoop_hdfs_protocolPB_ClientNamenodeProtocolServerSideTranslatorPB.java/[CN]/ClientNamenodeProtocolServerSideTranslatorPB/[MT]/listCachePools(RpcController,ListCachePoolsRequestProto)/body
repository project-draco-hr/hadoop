{
  try {
    RemoteIterator<CachePoolEntry> iter=server.listCachePools(request.getPrevPoolName());
    ListCachePoolsResponseProto.Builder responseBuilder=ListCachePoolsResponseProto.newBuilder();
    String prevPoolName=null;
    while (iter.hasNext()) {
      CachePoolEntry entry=iter.next();
      responseBuilder.addEntries(PBHelper.convert(entry));
      prevPoolName=entry.getInfo().getPoolName();
    }
    if (prevPoolName == null) {
      responseBuilder.setHasMore(false);
    }
 else {
      iter=server.listCachePools(prevPoolName);
      responseBuilder.setHasMore(iter.hasNext());
    }
    return responseBuilder.build();
  }
 catch (  IOException e) {
    throw new ServiceException(e);
  }
}
