{
  try {
    BatchedEntries<CachePoolEntry> entries=server.listCachePools(request.getPrevPoolName());
    ListCachePoolsResponseProto.Builder responseBuilder=ListCachePoolsResponseProto.newBuilder();
    responseBuilder.setHasMore(entries.hasMore());
    for (int i=0, n=entries.size(); i < n; i++) {
      responseBuilder.addEntries(PBHelper.convert(entries.get(i)));
    }
    return responseBuilder.build();
  }
 catch (  IOException e) {
    throw new ServiceException(e);
  }
}
