{
  try {
    RemoteIterator<PathBasedCacheEntry> iter=server.listPathBasedCacheEntries(request.getPrevId(),request.hasPool() ? request.getPool() : null,request.hasPath() ? request.getPath() : null);
    ListPathBasedCacheEntriesResponseProto.Builder builder=ListPathBasedCacheEntriesResponseProto.newBuilder();
    long prevId=0;
    while (iter.hasNext()) {
      PathBasedCacheEntry entry=iter.next();
      builder.addElements(ListPathBasedCacheEntriesElementProto.newBuilder().setId(entry.getEntryId()).setPath(entry.getDirective().getPath()).setPool(entry.getDirective().getPool()));
      prevId=entry.getEntryId();
    }
    if (prevId == 0) {
      builder.setHasMore(false);
    }
 else {
      iter=server.listPathBasedCacheEntries(prevId,request.getPool(),request.getPath());
      builder.setHasMore(iter.hasNext());
    }
    return builder.build();
  }
 catch (  IOException e) {
    throw new ServiceException(e);
  }
}
