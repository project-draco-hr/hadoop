{
  try {
    List<DatanodeIDProto> newNodes=req.getNewNodesList();
    server.updatePipeline(req.getClientName(),PBHelper.convert(req.getOldBlock()),PBHelper.convert(req.getNewBlock()),PBHelper.convert(newNodes.toArray(new DatanodeIDProto[newNodes.size()])));
    return VOID_UPDATEPIPELINE_RESPONSE;
  }
 catch (  IOException e) {
    throw new ServiceException(e);
  }
}
