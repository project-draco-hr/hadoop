{
  try {
    RemoteIterator<PathBasedCacheDescriptor> iter=server.listPathBasedCacheDescriptors(request.getPrevId(),request.hasPool() ? request.getPool() : null,request.hasPath() ? request.getPath() : null);
    ListPathBasedCacheDescriptorsResponseProto.Builder builder=ListPathBasedCacheDescriptorsResponseProto.newBuilder();
    long prevId=0;
    while (iter.hasNext()) {
      PathBasedCacheDescriptor directive=iter.next();
      builder.addElements(ListPathBasedCacheDescriptorsElementProto.newBuilder().setId(directive.getEntryId()).setPath(directive.getPath()).setPool(directive.getPool()));
      prevId=directive.getEntryId();
    }
    if (prevId == 0) {
      builder.setHasMore(false);
    }
 else {
      iter=server.listPathBasedCacheDescriptors(prevId,request.hasPool() ? request.getPool() : null,request.hasPath() ? request.getPath() : null);
      builder.setHasMore(iter.hasNext());
    }
    return builder.build();
  }
 catch (  IOException e) {
    throw new ServiceException(e);
  }
}
