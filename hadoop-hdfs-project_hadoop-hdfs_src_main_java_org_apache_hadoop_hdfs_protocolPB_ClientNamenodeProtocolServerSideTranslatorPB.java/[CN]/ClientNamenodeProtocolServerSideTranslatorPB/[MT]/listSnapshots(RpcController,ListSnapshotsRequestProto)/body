{
  SnapshotInfo[] result;
  try {
    result=server.listSnapshots(request.getSnapshotRoot());
    ListSnapshotsResponseProto.Builder builder=ListSnapshotsResponseProto.newBuilder();
    for (    SnapshotInfo si : result) {
      SnapshotInfoProto.Builder infobuilder=SnapshotInfoProto.newBuilder();
      infobuilder.setSnapshotName(si.getSnapshotName());
      infobuilder.setSnapshotRoot(si.getSnapshotRoot());
      infobuilder.setCreateTime(si.getCreateTime());
      infobuilder.setPermission(si.getPermission());
      infobuilder.setOwner(si.getOwner());
      infobuilder.setGroup(si.getGroup());
      builder.addSnapshots(infobuilder);
    }
    return builder.build();
  }
 catch (  IOException e) {
    throw new ServiceException(e);
  }
}
