{
  try {
    List<DatanodeInfoProto> existingList=req.getExistingsList();
    List<String> existingStorageIDsList=req.getExistingStorageUuidsList();
    List<DatanodeInfoProto> excludesList=req.getExcludesList();
    LocatedBlock result=server.getAdditionalDatanode(req.getSrc(),req.getFileId(),PBHelperClient.convert(req.getBlk()),PBHelper.convert(existingList.toArray(new DatanodeInfoProto[existingList.size()])),existingStorageIDsList.toArray(new String[existingStorageIDsList.size()]),PBHelper.convert(excludesList.toArray(new DatanodeInfoProto[excludesList.size()])),req.getNumAdditionalNodes(),req.getClientName());
    return GetAdditionalDatanodeResponseProto.newBuilder().setBlock(PBHelper.convertLocatedBlock(result)).build();
  }
 catch (  IOException e) {
    throw new ServiceException(e);
  }
}
