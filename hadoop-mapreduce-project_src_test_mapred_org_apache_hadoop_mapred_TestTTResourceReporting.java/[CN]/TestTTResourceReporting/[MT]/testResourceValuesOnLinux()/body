{
  if (!System.getProperty("os.name").startsWith("Linux")) {
    return;
  }
  JobConf conf=new JobConf();
  LinuxResourceCalculatorPlugin plugin=new LinuxResourceCalculatorPlugin();
  conf.setLong("totalVmemOnTT",plugin.getVirtualMemorySize());
  conf.setLong("totalPmemOnTT",plugin.getPhysicalMemorySize());
  conf.setLong("numProcessors",plugin.getNumProcessors());
  try {
    setUpCluster(conf);
    runSleepJob(miniMRCluster.createJobConf());
    verifyTestResults(true);
  }
  finally {
    tearDownCluster();
  }
}
