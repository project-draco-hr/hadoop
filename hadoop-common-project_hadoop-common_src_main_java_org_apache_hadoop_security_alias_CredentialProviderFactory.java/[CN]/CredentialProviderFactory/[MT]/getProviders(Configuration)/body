{
  List<CredentialProvider> result=new ArrayList<CredentialProvider>();
  for (  String path : conf.getStringCollection(CREDENTIAL_PROVIDER_PATH)) {
    try {
      URI uri=new URI(path);
      boolean found=false;
      for (      CredentialProviderFactory factory : serviceLoader) {
        CredentialProvider kp=factory.createProvider(uri,conf);
        if (kp != null) {
          result.add(kp);
          found=true;
          break;
        }
      }
      if (!found) {
        throw new IOException("No CredentialProviderFactory for " + uri + " in "+ CREDENTIAL_PROVIDER_PATH);
      }
    }
 catch (    URISyntaxException error) {
      throw new IOException("Bad configuration of " + CREDENTIAL_PROVIDER_PATH + " at "+ path,error);
    }
  }
  return result;
}
