{
  setupCluster();
  try {
    String file1="/dir/file1";
    String file2="/dir/file2";
    DFSTestUtil.createFile(fs,new Path(file1),3,(short)1,0L);
    DFSTestUtil.createFile(fs,new Path(file2),4,(short)1,0L);
    CachedLocatedBlocks cachedBlocks=new CachedLocatedBlocks(namesystem);
    verifyCachedBlocksResult(cachedBlocks,namesystem,file1);
    verifyCachedBlocksResult(cachedBlocks,namesystem,file1);
    verifyCachedBlocksResult(cachedBlocks,namesystem,file2);
    verifyCachedBlocksResult(cachedBlocks,namesystem,file2);
    try {
      Thread.sleep(1200L);
    }
 catch (    InterruptedException e) {
    }
    verifyCachedBlocksResult(cachedBlocks,namesystem,file2);
    verifyCachedBlocksResult(cachedBlocks,namesystem,file1);
  }
  finally {
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}
