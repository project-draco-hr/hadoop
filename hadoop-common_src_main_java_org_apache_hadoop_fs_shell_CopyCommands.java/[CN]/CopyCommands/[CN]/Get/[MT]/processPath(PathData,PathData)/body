{
  src.fs.setVerifyChecksum(verifyChecksum);
  if (copyCrc && !(src.fs instanceof ChecksumFileSystem)) {
    displayWarning(src.fs + ": Does not support checksums");
    copyCrc=false;
  }
  File targetFile=localFs.pathToFile(target.path);
  if (src.stat.isFile()) {
    copyFileToLocal(src,target.path);
    if (copyCrc) {
      copyCrcToLocal(src,target.path);
    }
  }
 else   if (src.stat.isDirectory()) {
    if (!targetFile.mkdirs()) {
      throw new PathIOException(target.toString());
    }
  }
 else {
    throw new PathOperationException(src.toString());
  }
}
