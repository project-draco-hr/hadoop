{
  if (fp == null) {
    throw new IOException("Trying to use aborted output stream");
  }
  if (doubleBuf.isFlushed()) {
    LOG.info("Nothing to flush");
    return;
  }
  doubleBuf.flushTo(fp);
  fc.force(false);
  fc.position(fc.position() - 1);
  preallocate();
}
