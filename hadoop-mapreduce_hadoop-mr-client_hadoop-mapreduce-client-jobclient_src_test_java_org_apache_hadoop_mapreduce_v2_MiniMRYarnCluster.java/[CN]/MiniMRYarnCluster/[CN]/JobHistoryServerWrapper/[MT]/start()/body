{
  try {
    historyServer=new JobHistoryServer();
    historyServer.init(getConfig());
    new Thread(){
      public void run(){
        historyServer.start();
      }
    }
.start();
    while (historyServer.getServiceState() == STATE.INITED) {
      LOG.info("Waiting for HistoryServer to start...");
      Thread.sleep(1500);
    }
    if (historyServer.getServiceState() != STATE.STARTED) {
      throw new IOException("HistoryServer failed to start");
    }
    super.start();
  }
 catch (  Throwable t) {
    throw new YarnException(t);
  }
}
