{
  long st=Time.now();
  while (Time.now() - st < 2000) {
    if (hm.getHealthState() == state) {
      return;
    }
    Thread.sleep(50);
  }
  assertEquals(state,hm.getHealthState());
}
