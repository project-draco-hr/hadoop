{
  LOG.info("Mocking RTE in health monitor, waiting for FAILED");
  Mockito.doThrow(new OutOfMemoryError()).when(mockProxy).monitorHealth();
  waitForState(hm,HealthMonitor.State.HEALTH_MONITOR_FAILED);
  hm.shutdown();
  hm.join();
  assertFalse(hm.isAlive());
}
