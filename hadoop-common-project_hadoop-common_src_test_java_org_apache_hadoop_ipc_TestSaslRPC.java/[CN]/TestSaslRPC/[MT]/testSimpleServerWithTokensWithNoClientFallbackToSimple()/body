{
  clientFallBackToSimpleAllowed=false;
  try {
    getAuthMethod(SIMPLE,SIMPLE,true);
  }
 catch (  IOException ioe) {
    Assert.assertTrue(ioe.getMessage().contains("Failed on local exception: " + "java.io.IOException: java.io.IOException: " + "Server asks us to fall back to SIMPLE auth, "+ "but this client is configured to only allow secure connections"));
  }
  forceSecretManager=true;
  assertAuthEquals(TOKEN,getAuthMethod(SIMPLE,SIMPLE,true));
  forceSecretManager=false;
  clientFallBackToSimpleAllowed=true;
}
