{
  Configuration newConf=new Configuration(conf);
  newConf.set(SERVER_PRINCIPAL_KEY,SERVER_PRINCIPAL_1);
  conf.setInt(CommonConfigurationKeys.IPC_PING_INTERVAL_KEY,CommonConfigurationKeys.IPC_PING_INTERVAL_DEFAULT);
  newConf.setBoolean(CommonConfigurationKeys.IPC_CLIENT_PING_KEY,true);
  ConnectionId remoteId=ConnectionId.getConnectionId(new InetSocketAddress(0),TestRpcService.class,null,0,null,newConf);
  assertEquals(CommonConfigurationKeys.IPC_PING_INTERVAL_DEFAULT,remoteId.getPingInterval());
  newConf.setBoolean(CommonConfigurationKeys.IPC_CLIENT_PING_KEY,false);
  remoteId=ConnectionId.getConnectionId(new InetSocketAddress(0),TestRpcService.class,null,0,null,newConf);
  assertEquals(0,remoteId.getPingInterval());
}
