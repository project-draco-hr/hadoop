{
  fs.delete(archivePath,true);
  final Path sub1=new Path(inputPath,"dir1");
  fs.mkdirs(sub1);
  createFile(sub1,"a",fs);
  final Configuration conf=mapred.createJobConf();
  final FsShell shell=new FsShell(conf);
  final List<String> originalPaths=lsr(shell,"input");
  System.out.println("originalPath: " + originalPaths);
  final URI uri=fs.getUri();
  final String prefix="har://hdfs-" + uri.getHost() + ":"+ uri.getPort()+ archivePath.toUri().getPath()+ Path.SEPARATOR;
{
    final String harName="foo.har";
    final String[] args={"-archiveName",harName,"-p","input","*","archive"};
    System.setProperty(HadoopArchives.TEST_HADOOP_ARCHIVES_JAR_PATH,HADOOP_ARCHIVES_JAR);
    final HadoopArchives har=new HadoopArchives(mapred.createJobConf());
    assertEquals(0,ToolRunner.run(har,args));
    final List<String> harPaths=lsr(shell,prefix + harName);
    assertEquals(originalPaths,harPaths);
  }
}
