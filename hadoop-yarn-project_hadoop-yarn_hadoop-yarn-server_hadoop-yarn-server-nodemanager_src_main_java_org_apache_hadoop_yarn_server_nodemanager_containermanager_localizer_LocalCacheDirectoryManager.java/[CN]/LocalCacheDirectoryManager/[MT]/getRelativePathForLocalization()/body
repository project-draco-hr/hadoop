{
  if (nonFullDirectories.isEmpty()) {
    totalSubDirectories++;
    Directory newDir=new Directory(totalSubDirectories);
    nonFullDirectories.add(newDir);
    knownDirectories.put(newDir.getRelativePath(),newDir);
  }
  Directory subDir=nonFullDirectories.peek();
  if (subDir.incrementAndGetCount() >= perDirectoryFileLimit) {
    nonFullDirectories.remove();
  }
  return subDir.getRelativePath();
}
