{
synchronized (this) {
    metricsRecord.setMetric("maps_running",tt.mapTotal);
    metricsRecord.setMetric("reduces_running",tt.reduceTotal);
    metricsRecord.setMetric("mapTaskSlots",(short)tt.getMaxCurrentMapTasks());
    metricsRecord.setMetric("reduceTaskSlots",(short)tt.getMaxCurrentReduceTasks());
    metricsRecord.incrMetric("tasks_completed",numCompletedTasks);
    metricsRecord.incrMetric("tasks_failed_timeout",timedoutTasks);
    metricsRecord.incrMetric("tasks_failed_ping",tasksFailedPing);
    numCompletedTasks=0;
    timedoutTasks=0;
    tasksFailedPing=0;
  }
  metricsRecord.update();
}
