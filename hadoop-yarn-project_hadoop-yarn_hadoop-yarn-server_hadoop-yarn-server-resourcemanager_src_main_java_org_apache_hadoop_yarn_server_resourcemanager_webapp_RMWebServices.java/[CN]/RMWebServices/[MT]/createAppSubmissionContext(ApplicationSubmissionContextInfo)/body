{
  ApplicationId appid;
  String error="Could not parse application id " + newApp.getApplicationId();
  try {
    appid=ConverterUtils.toApplicationId(recordFactory,newApp.getApplicationId());
  }
 catch (  Exception e) {
    throw new BadRequestException(error);
  }
  ApplicationSubmissionContext appContext=ApplicationSubmissionContext.newInstance(appid,newApp.getApplicationName(),newApp.getQueue(),Priority.newInstance(newApp.getPriority()),createContainerLaunchContext(newApp),newApp.getUnmanagedAM(),newApp.getCancelTokensWhenComplete(),newApp.getMaxAppAttempts(),createAppSubmissionContextResource(newApp),newApp.getApplicationType(),newApp.getKeepContainersAcrossApplicationAttempts(),newApp.getAppNodeLabelExpression(),newApp.getAMContainerNodeLabelExpression());
  appContext.setApplicationTags(newApp.getApplicationTags());
  return appContext;
}
