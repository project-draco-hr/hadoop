{
  ApplicationId appid;
  String error="Could not parse application id " + newApp.getApplicationId();
  try {
    appid=ApplicationId.fromString(newApp.getApplicationId());
  }
 catch (  Exception e) {
    throw new BadRequestException(error);
  }
  ApplicationSubmissionContext appContext=ApplicationSubmissionContext.newInstance(appid,newApp.getApplicationName(),newApp.getQueue(),Priority.newInstance(newApp.getPriority()),createContainerLaunchContext(newApp),newApp.getUnmanagedAM(),newApp.getCancelTokensWhenComplete(),newApp.getMaxAppAttempts(),createAppSubmissionContextResource(newApp),newApp.getApplicationType(),newApp.getKeepContainersAcrossApplicationAttempts(),newApp.getAppNodeLabelExpression(),newApp.getAMContainerNodeLabelExpression());
  appContext.setApplicationTags(newApp.getApplicationTags());
  appContext.setAttemptFailuresValidityInterval(newApp.getAttemptFailuresValidityInterval());
  if (newApp.getLogAggregationContextInfo() != null) {
    appContext.setLogAggregationContext(createLogAggregationContext(newApp.getLogAggregationContextInfo()));
  }
  String reservationIdStr=newApp.getReservationId();
  if (reservationIdStr != null && !reservationIdStr.isEmpty()) {
    ReservationId reservationId=ReservationId.parseReservationId(reservationIdStr);
    appContext.setReservationID(reservationId);
  }
  return appContext;
}
