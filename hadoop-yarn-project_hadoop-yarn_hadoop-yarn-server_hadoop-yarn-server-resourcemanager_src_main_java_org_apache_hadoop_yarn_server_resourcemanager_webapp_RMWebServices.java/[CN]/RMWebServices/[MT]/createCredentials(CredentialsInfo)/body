{
  Credentials ret=new Credentials();
  try {
    for (    Map.Entry<String,String> entry : credentials.getTokens().entrySet()) {
      Text alias=new Text(entry.getKey());
      Token<TokenIdentifier> token=new Token<TokenIdentifier>();
      token.decodeFromUrlString(entry.getValue());
      ret.addToken(alias,token);
    }
    for (    Map.Entry<String,String> entry : credentials.getTokens().entrySet()) {
      Text alias=new Text(entry.getKey());
      Base64 decoder=new Base64(0,null,true);
      byte[] secret=decoder.decode(entry.getValue());
      ret.addSecretKey(alias,secret);
    }
  }
 catch (  IOException ie) {
    throw new BadRequestException("Could not parse credentials data; exception message = " + ie.getMessage());
  }
  return ret;
}
