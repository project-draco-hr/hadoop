{
  snapshotCounter=in.readInt();
  numSnapshots.set(in.readInt());
  final Map<Integer,Snapshot> snapshotMap=new HashMap<Integer,Snapshot>();
  for (int i=0; i < numSnapshots.get(); i++) {
    final Snapshot s=Snapshot.read(in,loader);
    snapshotMap.put(s.getId(),s);
  }
  return snapshotMap;
}
