{
  final INodeDirectory d=INodeDirectory.valueOf(fsdir.getINode(path),path);
  if (d.isSnapshottable()) {
    ((INodeDirectorySnapshottable)d).setSnapshotQuota(snapshotQuota);
    return;
  }
  final INodeDirectorySnapshottable s=INodeDirectorySnapshottable.newInstance(d,snapshotQuota);
  fsdir.replaceINodeDirectory(path,d,s);
  snapshottables.add(s);
  numSnapshottableDirs.getAndIncrement();
}
