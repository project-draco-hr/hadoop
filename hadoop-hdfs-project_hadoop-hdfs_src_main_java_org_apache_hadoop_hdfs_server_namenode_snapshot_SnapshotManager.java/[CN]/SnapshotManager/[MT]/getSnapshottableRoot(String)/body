{
  final INodeDirectory dir=INodeDirectory.valueOf(fsdir.getINodesInPath4Write(path).getLastINode(),path);
  if (!dir.isSnapshottable()) {
    throw new SnapshotException("Directory is not a snapshottable directory: " + path);
  }
  return dir;
}
