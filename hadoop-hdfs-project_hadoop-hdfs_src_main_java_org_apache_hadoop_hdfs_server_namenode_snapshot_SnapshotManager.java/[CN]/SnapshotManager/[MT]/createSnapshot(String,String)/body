{
  final INodesInPath i=fsdir.getINodesInPath4Write(path);
  final INodeDirectorySnapshottable srcRoot=INodeDirectorySnapshottable.valueOf(i.getLastINode(),path);
  fsdir.verifyMaxComponentLength(snapshotName,path,0);
  srcRoot.addSnapshot(snapshotCounter,snapshotName);
  snapshotCounter++;
  numSnapshots.getAndIncrement();
}
