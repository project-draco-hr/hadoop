{
  final INodeDirectorySnapshottable srcRoot=INodeDirectorySnapshottable.valueOf(fsdir.getINode(path),path);
synchronized (this) {
    final Snapshot s=new Snapshot(snapshotID,snapshotName,srcRoot);
    srcRoot.addSnapshot(s);
    new SnapshotCreation().processRecursively(srcRoot,s.getRoot());
    snapshotID++;
  }
  numSnapshots.getAndIncrement();
}
