{
  if ((from == null || from.isEmpty()) && (to == null || to.isEmpty())) {
    return new SnapshotDiffReport(path,from,to,Collections.<DiffReportEntry>emptyList());
  }
  INodesInPath inodesInPath=fsdir.getINodesInPath4Write(path.toString());
  final INodeDirectorySnapshottable snapshotRoot=INodeDirectorySnapshottable.valueOf(inodesInPath.getLastINode(),path);
  final SnapshotDiffInfo diffs=snapshotRoot.computeDiff(from,to);
  return diffs != null ? diffs.generateReport() : new SnapshotDiffReport(path,from,to,Collections.<DiffReportEntry>emptyList());
}
