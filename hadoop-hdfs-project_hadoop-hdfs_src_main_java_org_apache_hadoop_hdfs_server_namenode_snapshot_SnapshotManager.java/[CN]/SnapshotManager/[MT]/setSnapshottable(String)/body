{
  final INodesInPath iip=fsdir.getLastINodeInPath(path);
  final INodeDirectory d=INodeDirectory.valueOf(iip.getINode(0),path);
  final INodeDirectorySnapshottable s;
  if (d.isSnapshottable()) {
    s=(INodeDirectorySnapshottable)d;
    s.setSnapshotQuota(INodeDirectorySnapshottable.SNAPSHOT_LIMIT);
  }
 else {
    s=d.replaceSelf4INodeDirectorySnapshottable(iip.getLatestSnapshot(),fsdir.getINodeMap());
  }
  addSnapshottable(s);
}
