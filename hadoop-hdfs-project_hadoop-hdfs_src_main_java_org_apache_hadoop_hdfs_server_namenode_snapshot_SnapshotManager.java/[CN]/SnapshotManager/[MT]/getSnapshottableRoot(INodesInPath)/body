{
  final String path=iip.getPath();
  final INodeDirectory dir=INodeDirectory.valueOf(iip.getLastINode(),path);
  if (!dir.isSnapshottable()) {
    throw new SnapshotException("Directory is not a snapshottable directory: " + path);
  }
  return dir;
}
