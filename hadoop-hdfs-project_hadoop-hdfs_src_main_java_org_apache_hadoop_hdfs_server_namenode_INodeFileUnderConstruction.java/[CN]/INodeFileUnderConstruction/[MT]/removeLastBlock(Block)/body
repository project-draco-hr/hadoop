{
  final BlockInfo[] blocks=getBlocks();
  if (blocks == null) {
    throw new IOException("Trying to delete non-existant block " + oldblock);
  }
  int size_1=blocks.length - 1;
  if (!blocks[size_1].equals(oldblock)) {
    throw new IOException("Trying to delete non-last block " + oldblock);
  }
  BlockInfo[] newlist=new BlockInfo[size_1];
  System.arraycopy(blocks,0,newlist,0,size_1);
  setBlocks(newlist);
}
