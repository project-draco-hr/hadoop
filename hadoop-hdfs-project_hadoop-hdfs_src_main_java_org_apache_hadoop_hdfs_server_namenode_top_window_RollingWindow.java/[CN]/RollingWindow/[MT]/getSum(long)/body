{
  long sum=0;
  for (  Bucket bucket : buckets) {
    boolean stale=bucket.isStaleNow(time);
    if (!stale) {
      sum+=bucket.value.get();
    }
    if (LOG.isDebugEnabled()) {
      long bucketTime=bucket.updateTime.get();
      String timeStr=new Date(bucketTime).toString();
      LOG.debug("Sum: + " + sum + " Bucket: updateTime: "+ timeStr+ " ("+ bucketTime+ ") isStale "+ stale+ " at "+ time);
    }
  }
  return sum;
}
