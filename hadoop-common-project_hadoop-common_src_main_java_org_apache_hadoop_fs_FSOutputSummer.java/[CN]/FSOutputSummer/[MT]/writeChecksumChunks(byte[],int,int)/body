{
  sum.calculateChunkedSums(b,off,len,checksum,0);
  for (int i=0; i < len; i+=sum.getBytesPerChecksum()) {
    int chunkLen=Math.min(sum.getBytesPerChecksum(),len - i);
    int ckOffset=i / sum.getBytesPerChecksum() * getChecksumSize();
    writeChunk(b,off + i,chunkLen,checksum,ckOffset,getChecksumSize());
  }
}
