{
  final Credentials c=DelegationTokenSecretManager.createCredentials(namenode,ugi,renewer != null ? renewer : request.getUserPrincipal().getName());
  final Token<? extends TokenIdentifier> t=c.getAllTokens().iterator().next();
  t.setKind(WebHdfsFileSystem.TOKEN_KIND);
  SecurityUtil.setTokenService(t,namenode.getNameNodeAddress());
  return t;
}
