{
  for (int index=0; index < namenodes.size(); index++) {
    int failedCount=0;
    while (true) {
      try {
        waitActive(index);
        break;
      }
 catch (      IOException e) {
        failedCount++;
        if (failedCount > 1) {
          LOG.warn("Tried waitActive() " + failedCount + " time(s) and failed, giving up.  "+ StringUtils.stringifyException(e));
          throw e;
        }
      }
    }
  }
  LOG.info("Cluster is active");
}
