{
  Map<String,TreeMap<Resource,ResourceRequestInfo>> remoteRequests=this.remoteRequestsTable.get(priority);
  if (remoteRequests == null) {
    return;
  }
  for (  String location : locations) {
    TreeMap<Resource,ResourceRequestInfo> reqs=remoteRequests.get(location);
    if (reqs != null && !reqs.isEmpty()) {
      boolean existingRelaxLocality=reqs.values().iterator().next().remoteRequest.getRelaxLocality();
      if (relaxLocality != existingRelaxLocality) {
        throw new InvalidContainerRequestException("Cannot submit a " + "ContainerRequest asking for location " + location + " with locality relaxation "+ relaxLocality+ " when it has "+ "already been requested with locality relaxation "+ existingRelaxLocality);
      }
    }
  }
}
