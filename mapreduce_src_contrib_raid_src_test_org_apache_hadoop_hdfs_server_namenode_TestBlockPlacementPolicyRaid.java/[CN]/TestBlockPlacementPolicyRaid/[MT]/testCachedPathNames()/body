{
  setupCluster();
  try {
    String file1="/dir/file1";
    String file2="/dir/file2";
    DFSTestUtil.createFile(fs,new Path(file1),3,(short)1,0L);
    DFSTestUtil.createFile(fs,new Path(file2),4,(short)1,0L);
    CachedFullPathNames cachedFullPathNames=new CachedFullPathNames(namesystem);
    FSInodeInfo inode1=null;
    FSInodeInfo inode2=null;
    namesystem.dir.readLock();
    try {
      inode1=namesystem.dir.rootDir.getNode(file1,true);
      inode2=namesystem.dir.rootDir.getNode(file2,true);
    }
  finally {
      namesystem.dir.readUnlock();
    }
    verifyCachedFullPathNameResult(cachedFullPathNames,inode1);
    verifyCachedFullPathNameResult(cachedFullPathNames,inode1);
    verifyCachedFullPathNameResult(cachedFullPathNames,inode2);
    verifyCachedFullPathNameResult(cachedFullPathNames,inode2);
    try {
      Thread.sleep(1200L);
    }
 catch (    InterruptedException e) {
    }
    verifyCachedFullPathNameResult(cachedFullPathNames,inode2);
    verifyCachedFullPathNameResult(cachedFullPathNames,inode1);
  }
  finally {
    if (cluster != null) {
      cluster.shutdown();
    }
  }
}
