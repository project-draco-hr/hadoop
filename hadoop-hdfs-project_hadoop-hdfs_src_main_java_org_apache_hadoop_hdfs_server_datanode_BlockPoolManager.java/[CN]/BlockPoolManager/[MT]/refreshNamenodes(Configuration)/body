{
  LOG.info("Refresh request received for nameservices: " + conf.get(DFSConfigKeys.DFS_NAMESERVICES));
  Map<String,Map<String,InetSocketAddress>> newAddressMap=DFSUtil.getNNServiceRpcAddressesForCluster(conf);
  Map<String,Map<String,InetSocketAddress>> newLifelineAddressMap=DFSUtil.getNNLifelineRpcAddressesForCluster(conf);
synchronized (refreshNamenodesLock) {
    doRefreshNamenodes(newAddressMap,newLifelineAddressMap);
  }
}
