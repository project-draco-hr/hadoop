{
  long nonDfsUsed=p.hasNonDfsUsed() ? p.getNonDfsUsed() : p.getCapacity() - p.getDfsUsed() - p.getRemaining();
  return new StorageReport(p.hasStorage() ? convert(p.getStorage()) : new DatanodeStorage(p.getStorageUuid()),p.getFailed(),p.getCapacity(),p.getDfsUsed(),p.getRemaining(),p.getBlockPoolUsed(),nonDfsUsed);
}
