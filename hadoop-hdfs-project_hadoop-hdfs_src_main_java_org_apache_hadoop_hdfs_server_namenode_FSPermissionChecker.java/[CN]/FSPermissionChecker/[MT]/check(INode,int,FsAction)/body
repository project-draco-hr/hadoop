{
  if (inode == null) {
    return;
  }
  FsPermission mode=inode.getFsPermission(snapshotId);
  if (mode.getAclBit()) {
    AclFeature aclFeature=inode instanceof INodeWithAdditionalFields ? ((INodeWithAdditionalFields)inode).getAclFeature() : null;
    if (aclFeature != null) {
      List<AclEntry> featureEntries=aclFeature.getEntries();
      if (featureEntries.get(0).getScope() == AclEntryScope.ACCESS) {
        checkAccessAcl(inode,snapshotId,access,mode,featureEntries);
        return;
      }
    }
  }
  checkFsPermission(inode,snapshotId,access,mode);
}
