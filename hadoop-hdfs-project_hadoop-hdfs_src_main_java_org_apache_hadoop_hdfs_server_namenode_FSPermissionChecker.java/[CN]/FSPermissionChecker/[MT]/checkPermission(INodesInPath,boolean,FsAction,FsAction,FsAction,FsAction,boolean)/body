{
  if (LOG.isDebugEnabled()) {
    LOG.debug("ACCESS CHECK: " + this + ", doCheckOwner="+ doCheckOwner+ ", ancestorAccess="+ ancestorAccess+ ", parentAccess="+ parentAccess+ ", access="+ access+ ", subAccess="+ subAccess+ ", ignoreEmptyDir="+ ignoreEmptyDir);
  }
  final int snapshotId=inodesInPath.getPathSnapshotId();
  final int length=inodesInPath.length();
  final INode last=length > 0 ? inodesInPath.getLastINode() : null;
  final INode parent=length > 1 ? inodesInPath.getINode(-2) : null;
  checkTraverse(inodesInPath,snapshotId);
  if (parentAccess != null && parentAccess.implies(FsAction.WRITE) && length > 1 && last != null) {
    checkStickyBit(parent,last,snapshotId);
  }
  if (ancestorAccess != null && length > 1) {
    List<INode> inodes=inodesInPath.getReadOnlyINodes();
    INode ancestor=null;
    for (int i=inodes.size() - 2; i >= 0 && (ancestor=inodes.get(i)) == null; i--)     ;
    check(ancestor,snapshotId,ancestorAccess);
  }
  if (parentAccess != null && length > 1 && parent != null) {
    check(parent,snapshotId,parentAccess);
  }
  if (access != null) {
    check(last,snapshotId,access);
  }
  if (subAccess != null) {
    checkSubAccess(last,snapshotId,subAccess,ignoreEmptyDir);
  }
  if (doCheckOwner) {
    checkOwner(last,snapshotId);
  }
}
