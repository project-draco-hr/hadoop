{
  if (LOG.isDebugEnabled()) {
    LOG.debug("ACCESS CHECK: " + this + ", doCheckOwner="+ doCheckOwner+ ", ancestorAccess="+ ancestorAccess+ ", parentAccess="+ parentAccess+ ", access="+ access+ ", subAccess="+ subAccess+ ", resolveLink="+ resolveLink);
  }
  final INodesInPath inodesInPath=root.getINodesInPath(path,resolveLink);
  final Snapshot snapshot=inodesInPath.getPathSnapshot();
  final INode[] inodes=inodesInPath.getINodes();
  int ancestorIndex=inodes.length - 2;
  for (; ancestorIndex >= 0 && inodes[ancestorIndex] == null; ancestorIndex--)   ;
  checkTraverse(inodes,ancestorIndex,snapshot);
  final INode last=inodes[inodes.length - 1];
  if (parentAccess != null && parentAccess.implies(FsAction.WRITE) && inodes.length > 1 && last != null) {
    checkStickyBit(inodes[inodes.length - 2],last,snapshot);
  }
  if (ancestorAccess != null && inodes.length > 1) {
    check(inodes,ancestorIndex,snapshot,ancestorAccess);
  }
  if (parentAccess != null && inodes.length > 1) {
    check(inodes,inodes.length - 2,snapshot,parentAccess);
  }
  if (access != null) {
    check(last,snapshot,access);
  }
  if (subAccess != null) {
    checkSubAccess(last,snapshot,subAccess);
  }
  if (doCheckOwner) {
    checkOwner(last,snapshot);
  }
}
