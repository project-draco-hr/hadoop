{
  if (blocks == null || blocks.length == 0) {
    throw new IOException("Trying to update non-existant block. " + "File is empty.");
  }
  BlockInfoUnderConstruction ucBlock=lastBlock.convertToBlockUnderConstruction(BlockUCState.UNDER_CONSTRUCTION,targets);
  ucBlock.setINode(this);
  setBlock(numBlocks() - 1,ucBlock);
  return ucBlock;
}
