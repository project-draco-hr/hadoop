{
  String bindAddress=getConfig().get(YarnConfiguration.NM_WEBAPP_ADDRESS,YarnConfiguration.DEFAULT_NM_WEBAPP_ADDRESS);
  LOG.info("Instantiating NMWebApp at " + bindAddress);
  try {
    this.webApp=WebApps.$for("node",Context.class,this.nmContext,"ws").at(bindAddress).with(getConfig()).start(this.nmWebApp);
    int port=this.webApp.httpServer().getPort();
    String webAddress=StringUtils.split(bindAddress,':')[0] + ":" + port;
    getConfig().set(YarnConfiguration.NM_WEBAPP_ADDRESS,webAddress);
  }
 catch (  Exception e) {
    String msg="NMWebapps failed to start.";
    LOG.error(msg,e);
    throw new YarnException(msg);
  }
  super.start();
}
