{
  FSNamesystemLock rwLock=new FSNamesystemLock(new Configuration());
  assertEquals(0,rwLock.getReadHoldCount());
  rwLock.readLock();
  assertEquals(1,rwLock.getReadHoldCount());
  rwLock.readLock();
  assertEquals(2,rwLock.getReadHoldCount());
  rwLock.readUnlock();
  assertEquals(1,rwLock.getReadHoldCount());
  rwLock.readUnlock();
  assertEquals(0,rwLock.getReadHoldCount());
  assertFalse(rwLock.isWriteLockedByCurrentThread());
  assertEquals(0,rwLock.getWriteHoldCount());
  rwLock.writeLock();
  assertTrue(rwLock.isWriteLockedByCurrentThread());
  assertEquals(1,rwLock.getWriteHoldCount());
  rwLock.writeLock();
  assertTrue(rwLock.isWriteLockedByCurrentThread());
  assertEquals(2,rwLock.getWriteHoldCount());
  rwLock.writeUnlock();
  assertTrue(rwLock.isWriteLockedByCurrentThread());
  assertEquals(1,rwLock.getWriteHoldCount());
  rwLock.writeUnlock();
  assertFalse(rwLock.isWriteLockedByCurrentThread());
  assertEquals(0,rwLock.getWriteHoldCount());
}
