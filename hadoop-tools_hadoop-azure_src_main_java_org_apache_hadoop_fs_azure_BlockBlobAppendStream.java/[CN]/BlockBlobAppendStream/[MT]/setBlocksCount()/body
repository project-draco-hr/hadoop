{
  try {
    if (nextBlockCount == UNSET_BLOCKS_COUNT) {
      nextBlockCount=(long)(sequenceGenerator.nextInt(Integer.MAX_VALUE)) + sequenceGenerator.nextInt(Integer.MAX_VALUE - MAX_BLOCK_COUNT);
      List<BlockEntry> blockEntries=blob.downloadBlockList(BlockListingFilter.COMMITTED,new BlobRequestOptions(),opContext);
      nextBlockCount+=blockEntries.size();
    }
  }
 catch (  StorageException ex) {
    LOG.debug("Encountered storage exception during setting next Block Count." + " StorageException : {} ErrorCode : {}",ex,ex.getErrorCode());
    throw new IOException(ex);
  }
}
