{
  HashMap<TimelineEntityGroupId,EntityLogFD> logMapFD=logFDs.get(attemptId);
  if (logMapFD != null) {
    EntityLogFD logFD=logMapFD.get(groupId);
    if (logFD != null) {
      try {
        logFD.lock();
        if (serviceStopped) {
          return;
        }
        logFD.writeEntities(entities);
      }
  finally {
        logFD.unlock();
      }
    }
 else {
      createEntityFDandWrite(fs,logPath,objMapper,attemptId,groupId,entities,isAppendSupported,logFDs);
    }
  }
 else {
    createEntityFDandWrite(fs,logPath,objMapper,attemptId,groupId,entities,isAppendSupported,logFDs);
  }
}
