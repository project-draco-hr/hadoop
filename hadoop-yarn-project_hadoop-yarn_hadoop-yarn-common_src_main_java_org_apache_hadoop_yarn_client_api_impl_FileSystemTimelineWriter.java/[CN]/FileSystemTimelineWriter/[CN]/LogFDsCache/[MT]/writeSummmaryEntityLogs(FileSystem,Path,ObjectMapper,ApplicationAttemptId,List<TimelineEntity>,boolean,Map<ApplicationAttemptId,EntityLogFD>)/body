{
  EntityLogFD logFD=null;
  logFD=logFDs.get(attemptId);
  if (logFD != null) {
    try {
      logFD.lock();
      if (serviceStopped) {
        return;
      }
      logFD.writeEntities(entities);
    }
  finally {
      logFD.unlock();
    }
  }
 else {
    createSummaryFDAndWrite(fs,logPath,objMapper,attemptId,entities,isAppendSupported,logFDs);
  }
}
