{
  Path p=new Path("/p");
  DistributedFileSystem fs=cluster.getFileSystem();
  fs.create(p).close();
  fs.mkdirs(new Path("/23"));
  AclEntry e=new AclEntry.Builder().setName("foo").setPermission(FsAction.READ_EXECUTE).setScope(AclEntryScope.DEFAULT).setType(AclEntryType.OTHER).build();
  fs.setAcl(p,Lists.newArrayList(e));
  if (persistNamespace) {
    fs.setSafeMode(SafeModeAction.SAFEMODE_ENTER);
    fs.saveNamespace();
    fs.setSafeMode(SafeModeAction.SAFEMODE_LEAVE);
  }
  cluster.restartNameNode();
  cluster.waitActive();
  AclStatus s=cluster.getNamesystem().getAclStatus(p.toString());
  AclEntry[] returned=Lists.newArrayList(s.getEntries()).toArray(new AclEntry[0]);
  Assert.assertArrayEquals(new AclEntry[]{e},returned);
}
