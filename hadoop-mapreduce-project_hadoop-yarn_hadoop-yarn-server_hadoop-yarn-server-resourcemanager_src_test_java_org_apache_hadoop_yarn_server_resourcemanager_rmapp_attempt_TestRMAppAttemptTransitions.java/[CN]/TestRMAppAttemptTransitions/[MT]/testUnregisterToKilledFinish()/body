{
  Container amContainer=allocateApplicationAttempt();
  launchApplicationAttempt(amContainer);
  runApplicationAttempt(amContainer,"host",8042,"oldtrackingurl");
  String trackingUrl="newtrackingurl";
  String diagnostics="Killed by user";
  FinalApplicationStatus finalStatus=FinalApplicationStatus.KILLED;
  applicationAttempt.handle(new RMAppAttemptUnregistrationEvent(applicationAttempt.getAppAttemptId(),trackingUrl,finalStatus,diagnostics));
  testAppAttemptFinishedState(amContainer,finalStatus,trackingUrl,diagnostics);
}
