{
  assumeTrue(Shell.WINDOWS);
  Configuration conf=new Configuration();
  conf.set(YarnConfiguration.NM_WINDOWS_CONTAINER_CPU_LIMIT_ENABLED,"true");
  conf.set(YarnConfiguration.NM_WINDOWS_CONTAINER_MEMORY_LIMIT_ENABLED,"true");
  String[] command=containerExecutor.getRunCommand("echo","group1",null,null,conf,Resource.newInstance(1024,1));
  float yarnProcessors=NodeManagerHardwareUtils.getContainersCores(ResourceCalculatorPlugin.getResourceCalculatorPlugin(null,conf),conf);
  int cpuRate=Math.min(10000,(int)((1 * 10000) / yarnProcessors));
  String[] expected={Shell.WINUTILS,"task","create","-m","1024","-c",String.valueOf(cpuRate),"group1","cmd /c " + "echo"};
  Assert.assertTrue(Arrays.equals(expected,command));
}
