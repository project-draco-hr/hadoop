{
  Container container=new ContainerPBImpl();
  container.setId(ConverterUtils.toContainerId(containerIdStr));
  RMAppAttempt mockAttempt=mock(RMAppAttempt.class);
  when(mockAttempt.getAppAttemptId()).thenReturn(attemptId);
  when(mockAttempt.getMasterContainer()).thenReturn(container);
  when(mockAttempt.getAMRMToken()).thenReturn(appToken);
  when(mockAttempt.getClientTokenMasterKey()).thenReturn(clientTokenMasterKey);
  dispatcher.attemptId=attemptId;
  dispatcher.storedException=null;
  store.storeApplicationAttempt(mockAttempt);
  waitNotify(dispatcher);
  return container.getId();
}
