{
  String httpPolicy=conf.get(DFSConfigKeys.DFS_HTTP_POLICY_KEY,DFSConfigKeys.DFS_HTTP_POLICY_DEFAULT);
  HttpConfig.Policy policy=HttpConfig.Policy.fromString(httpPolicy);
  if (policy == HttpConfig.Policy.HTTP_ONLY) {
    boolean httpsEnabled=conf.getBoolean(DFSConfigKeys.DFS_HTTPS_ENABLE_KEY,DFSConfigKeys.DFS_HTTPS_ENABLE_DEFAULT);
    boolean hadoopSslEnabled=conf.getBoolean(CommonConfigurationKeys.HADOOP_SSL_ENABLED_KEY,CommonConfigurationKeys.HADOOP_SSL_ENABLED_DEFAULT);
    if (hadoopSslEnabled) {
      LOG.warn(CommonConfigurationKeys.HADOOP_SSL_ENABLED_KEY + " is deprecated. Please use " + DFSConfigKeys.DFS_HTTPS_ENABLE_KEY+ ".");
      policy=HttpConfig.Policy.HTTPS_ONLY;
    }
 else     if (httpsEnabled) {
      LOG.warn(DFSConfigKeys.DFS_HTTPS_ENABLE_KEY + " is deprecated. Please use " + DFSConfigKeys.DFS_HTTPS_ENABLE_KEY+ ".");
      policy=HttpConfig.Policy.HTTP_AND_HTTPS;
    }
  }
  conf.set(DFSConfigKeys.DFS_HTTP_POLICY_KEY,policy.name());
  return policy;
}
