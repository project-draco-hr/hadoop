{
  try {
    try {
      ShellCommandExecutor executor=new ShellCommandExecutor(new String[]{"diff","-r","-q","/dev/null","/dev/null"});
      executor.execute();
      if (executor.getExitCode() != 0) {
        LOG.warn("diff -r -q is not working, skipping the test");
        return;
      }
    }
 catch (    Exception e) {
      LOG.warn("diff -r -q is not working, skipping the test",e);
      return;
    }
    ShellCommandExecutor executor=new ShellCommandExecutor(new String[]{"diff","-r","-q",dir1,dir2});
    executor.execute();
    Assert.assertEquals("Job history logs differ, diff returned",0,executor.getExitCode());
  }
 catch (  Exception e) {
    LOG.warn("Exception while diffing: " + e);
    Assert.fail(String.format("Exception while diffing %s and %s. Exception - %s",dir1,dir2,e));
  }
}
