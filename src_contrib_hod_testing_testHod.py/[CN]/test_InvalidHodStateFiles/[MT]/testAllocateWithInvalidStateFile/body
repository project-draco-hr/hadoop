def testAllocateWithInvalidStateFile(self):
    jobid = '1234.hadoop.apache.org'
    stateFile = open(self.statePath, 'w')
    os.chmod(self.statePath, 256)
    self.client._hodRunner__cfg['hod']['operation'] = ('allocate %s %s' % (self.clusterDir, '3'))
    ret = self.client.operation()
    os.chmod(self.statePath, 700)
    stateFile.close()
    os.remove(self.statePath)
    self.assertTrue(self.log.hasMessage((INVALID_STATE_FILE_MSGS[2] % os.path.realpath(self.statePath)), 'critical'))
    self.assertEquals(ret, 1)
