def testAllocateOnDeletedDirectory(self):
    clusterDir = os.path.join(TMP_DIR_PREFIX, 'testAllocateOnDeletedDirectory')
    os.makedirs(clusterDir)
    self.assertTrue(os.path.isdir(clusterDir))
    jobid = '1234.abc.com'
    userState = {clusterDir: jobid, }
    self.__setupClusterState(userState, False)
    self.client._op_allocate(['allocate', clusterDir, '3'])
    self.assertTrue(self.log.hasMessage(("Found a previously allocated cluster at cluster directory '%s'. HOD cannot determine if this cluster can be automatically deallocated. Deallocate the cluster if it is unused." % clusterDir), 'critical'))
    os.rmdir(clusterDir)
