{
  journal.newEpoch(FAKE_NSINFO,1);
  journal.startLogSegment(new RequestInfo("j",1,1),1);
  journal.journal(new RequestInfo("j",1,2),1,2,QJMTestUtil.createTxnData(1,2));
  journal.close();
  journal=new Journal(TEST_LOG_DIR,mockErrorReporter);
  assertEquals(1,journal.getLastPromisedEpoch());
  NewEpochResponseProtoOrBuilder newEpoch=journal.newEpoch(FAKE_NSINFO,2);
  assertEquals(1,newEpoch.getLastSegmentTxId());
}
