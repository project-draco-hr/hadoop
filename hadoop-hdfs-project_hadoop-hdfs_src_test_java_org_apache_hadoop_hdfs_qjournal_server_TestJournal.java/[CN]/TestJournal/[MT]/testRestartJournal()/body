{
  journal.newEpoch(FAKE_NSINFO,1);
  journal.startLogSegment(makeRI(1),1,NameNodeLayoutVersion.CURRENT_LAYOUT_VERSION);
  journal.journal(makeRI(2),1,1,2,QJMTestUtil.createTxnData(1,2));
  String storageString=journal.getStorage().toColonSeparatedString();
  System.err.println("storage string: " + storageString);
  journal.close();
  journal=new Journal(conf,TEST_LOG_DIR,JID,mockErrorReporter);
  assertEquals(storageString,journal.getStorage().toColonSeparatedString());
  assertEquals(1,journal.getLastPromisedEpoch());
  NewEpochResponseProtoOrBuilder newEpoch=journal.newEpoch(FAKE_NSINFO,2);
  assertEquals(1,newEpoch.getLastSegmentTxId());
}
