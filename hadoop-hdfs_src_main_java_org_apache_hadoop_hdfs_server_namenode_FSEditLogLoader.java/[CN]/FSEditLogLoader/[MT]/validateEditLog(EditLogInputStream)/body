{
  long numValid=0;
  long lastPos=0;
  try {
    while (true) {
      lastPos=in.getPosition();
      if (in.readOp() == null) {
        break;
      }
      numValid++;
    }
  }
 catch (  Throwable t) {
    FSImage.LOG.debug("Caught exception after reading " + numValid + " ops from "+ in+ " while determining its valid length.",t);
  }
  return new EditLogValidation(lastPos,numValid);
}
