{
  long cacheUsed=fsd.getCacheUsed();
  while (cacheUsed != expected) {
    cacheUsed=fsd.getCacheUsed();
    Thread.sleep(100);
  }
  long cacheCapacity=fsd.getCacheCapacity();
  long cacheRemaining=fsd.getCacheRemaining();
  assertEquals("Sum of used and remaining cache does not equal total",cacheCapacity,cacheUsed + cacheRemaining);
  assertEquals("Unexpected amount of cache used",expected,cacheUsed);
  return cacheUsed;
}
