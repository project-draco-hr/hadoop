{
  long cacheUsed=fsd.getDnCacheUsed();
  while (cacheUsed != expected) {
    cacheUsed=fsd.getDnCacheUsed();
    Thread.sleep(100);
  }
  assertEquals("Unexpected amount of cache used",expected,cacheUsed);
  return cacheUsed;
}
