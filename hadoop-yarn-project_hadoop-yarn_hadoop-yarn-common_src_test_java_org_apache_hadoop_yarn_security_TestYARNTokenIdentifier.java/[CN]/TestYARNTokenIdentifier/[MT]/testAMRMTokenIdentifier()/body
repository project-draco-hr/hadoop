{
  ApplicationAttemptId appAttemptId=ApplicationAttemptId.newInstance(ApplicationId.newInstance(1,1),1);
  int masterKeyId=1;
  AMRMTokenIdentifier token=new AMRMTokenIdentifier(appAttemptId,masterKeyId);
  AMRMTokenIdentifier anotherToken=new AMRMTokenIdentifier();
  byte[] tokenContent=token.getBytes();
  DataInputBuffer dib=new DataInputBuffer();
  dib.reset(tokenContent,tokenContent.length);
  anotherToken.readFields(dib);
  Assert.assertEquals("Token is not the same after serialization " + "and deserialization.",token,anotherToken);
  Assert.assertEquals("ApplicationAttemptId from proto is not the same with original token",anotherToken.getApplicationAttemptId(),appAttemptId);
  Assert.assertEquals("masterKeyId from proto is not the same with original token",anotherToken.getKeyId(),masterKeyId);
}
