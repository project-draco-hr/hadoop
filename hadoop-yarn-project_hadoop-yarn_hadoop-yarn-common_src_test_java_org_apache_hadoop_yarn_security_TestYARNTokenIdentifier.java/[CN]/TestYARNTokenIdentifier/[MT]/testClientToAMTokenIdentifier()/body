{
  ApplicationAttemptId appAttemptId=ApplicationAttemptId.newInstance(ApplicationId.newInstance(1,1),1);
  String clientName="user";
  ClientToAMTokenIdentifier token=new ClientToAMTokenIdentifier(appAttemptId,clientName);
  ClientToAMTokenIdentifier anotherToken=new ClientToAMTokenIdentifier();
  byte[] tokenContent=token.getBytes();
  DataInputBuffer dib=new DataInputBuffer();
  dib.reset(tokenContent,tokenContent.length);
  anotherToken.readFields(dib);
  Assert.assertEquals("Token is not the same after serialization " + "and deserialization.",token,anotherToken);
  Assert.assertEquals("ApplicationAttemptId from proto is not the same with original token",anotherToken.getApplicationAttemptID(),appAttemptId);
  Assert.assertEquals("clientName from proto is not the same with original token",anotherToken.getClientName(),clientName);
}
