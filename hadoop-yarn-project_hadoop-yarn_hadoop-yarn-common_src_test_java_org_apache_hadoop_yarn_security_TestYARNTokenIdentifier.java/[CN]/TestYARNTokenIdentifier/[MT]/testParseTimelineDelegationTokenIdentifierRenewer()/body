{
  Configuration conf=new YarnConfiguration();
  conf.set(CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTH_TO_LOCAL,"RULE:[2:$1@$0]([nr]m@.*EXAMPLE.COM)s/.*/yarn/");
  HadoopKerberosName.setConfiguration(conf);
  Text owner=new Text("owner");
  Text renewer=new Text("rm/localhost@EXAMPLE.COM");
  Text realUser=new Text("realUser");
  TimelineDelegationTokenIdentifier token=new TimelineDelegationTokenIdentifier(owner,renewer,realUser);
  Assert.assertEquals(new Text("yarn"),token.getRenewer());
}
