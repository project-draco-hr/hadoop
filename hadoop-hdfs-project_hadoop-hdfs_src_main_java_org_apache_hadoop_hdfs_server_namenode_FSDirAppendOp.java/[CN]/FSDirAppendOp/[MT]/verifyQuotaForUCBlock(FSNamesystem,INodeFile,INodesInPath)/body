{
  FSDirectory fsd=fsn.getFSDirectory();
  if (!fsn.isImageLoaded() || fsd.shouldSkipQuotaChecks()) {
    return null;
  }
  if (file.getLastBlock() != null) {
    final QuotaCounts delta=computeQuotaDeltaForUCBlock(fsn,file);
    fsd.readLock();
    try {
      FSDirectory.verifyQuota(iip,iip.length() - 1,delta,null);
      return delta;
    }
  finally {
      fsd.readUnlock();
    }
  }
  return null;
}
