{
  hdfs.mkdirs(sub1);
  hdfs.allowSnapshot(sub1);
  DFSTestUtil.createFile(hdfs,file1,BLOCKSIZE,REPL,SEED);
  hdfs.createSnapshot(sub1,snap1);
  hdfs.rename(file1,file2);
  SnapshotDiffReport diffReport=hdfs.getSnapshotDiffReport(sub1,snap1,"");
  System.out.println("DiffList is " + diffReport.toString());
  List<DiffReportEntry> entries=diffReport.getDiffList();
  assertTrue(entries.size() == 3);
  assertTrue(existsInDiffReport(entries,DiffType.MODIFY,""));
  assertTrue(existsInDiffReport(entries,DiffType.CREATE,file2.getName()));
  assertTrue(existsInDiffReport(entries,DiffType.DELETE,file1.getName()));
}
