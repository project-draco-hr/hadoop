{
  StringBuilder result=new StringBuilder();
  String authority=nestedUri.getAuthority();
  if (authority != null) {
    String[] parts=nestedUri.getAuthority().split("@",2);
    result.append(parts[0]);
    result.append("://");
    if (parts.length == 2) {
      result.append(parts[1]);
    }
  }
  result.append(nestedUri.getPath());
  if (nestedUri.getQuery() != null) {
    result.append("?");
    result.append(nestedUri.getQuery());
  }
  if (nestedUri.getFragment() != null) {
    result.append("#");
    result.append(nestedUri.getFragment());
  }
  return new Path(result.toString());
}
