{
  try {
    IOUtils.closeStream(writer);
    writer=null;
    LOG.info("writer in GraphiteSink is closed!");
  }
 catch (  Throwable e) {
    throw new MetricsException("Error closing writer",e);
  }
 finally {
    if (socket != null && !socket.isClosed()) {
      socket.close();
      socket=null;
      LOG.info("socket in GraphiteSink is closed!");
    }
  }
}
