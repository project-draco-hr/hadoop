{
  Map<String,byte[]> xAttrs=fs.getXAttrs(path);
  assertEquals(expectedXAttrs.size(),xAttrs.size());
  Iterator<Entry<String,byte[]>> i=expectedXAttrs.entrySet().iterator();
  while (i.hasNext()) {
    Entry<String,byte[]> e=i.next();
    String name=e.getKey();
    byte[] value=e.getValue();
    if (value == null) {
      assertTrue(xAttrs.containsKey(name) && xAttrs.get(name) == null);
    }
 else {
      assertArrayEquals(value,xAttrs.get(name));
    }
  }
}
