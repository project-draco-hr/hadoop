{
  eventHandlingThread=new Thread(new Runnable(){
    @Override public void run(){
      JobHistoryEvent event=null;
      while (!stopped && !Thread.currentThread().isInterrupted()) {
        if (eventCounter != 0 && eventCounter % 1000 == 0) {
          eventCounter=0;
          LOG.info("Size of the JobHistory event queue is " + eventQueue.size());
        }
 else {
          eventCounter++;
        }
        try {
          event=eventQueue.take();
        }
 catch (        InterruptedException e) {
          LOG.info("EventQueue take interrupted. Returning");
          return;
        }
synchronized (lock) {
          boolean isInterrupted=Thread.interrupted();
          handleEvent(event);
          if (isInterrupted) {
            LOG.debug("Event handling interrupted");
            Thread.currentThread().interrupt();
          }
        }
      }
    }
  }
,"eventHandlingThread");
  eventHandlingThread.start();
  super.serviceStart();
}
