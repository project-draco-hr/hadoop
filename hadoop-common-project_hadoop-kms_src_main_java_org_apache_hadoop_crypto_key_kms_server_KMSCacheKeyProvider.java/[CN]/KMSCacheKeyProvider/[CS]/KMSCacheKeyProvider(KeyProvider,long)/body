{
  this.provider=prov;
  keyVersionCache=CacheBuilder.newBuilder().expireAfterAccess(timeoutMillis,TimeUnit.MILLISECONDS).build(new CacheLoader<String,KeyVersion>(){
    @Override public KeyVersion load(    String key) throws Exception {
      KeyVersion kv=provider.getKeyVersion(key);
      if (kv == null) {
        throw new KeyNotFoundException();
      }
      return kv;
    }
  }
);
  currentKeyCache=CacheBuilder.newBuilder().expireAfterWrite(1000,TimeUnit.MILLISECONDS).build(new CacheLoader<String,KeyVersion>(){
    @Override public KeyVersion load(    String key) throws Exception {
      KeyVersion kv=provider.getCurrentKey(key);
      if (kv == null) {
        throw new KeyNotFoundException();
      }
      return kv;
    }
  }
);
}
