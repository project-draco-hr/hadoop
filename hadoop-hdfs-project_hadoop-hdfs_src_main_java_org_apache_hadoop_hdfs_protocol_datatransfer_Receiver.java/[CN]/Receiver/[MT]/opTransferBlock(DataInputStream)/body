{
  final OpTransferBlockProto proto=OpTransferBlockProto.parseFrom(vintPrefixed(in));
  final DatanodeInfo[] targets=PBHelper.convert(proto.getTargetsList());
  TraceScope traceScope=continueTraceSpan(proto.getHeader(),proto.getClass().getSimpleName());
  try {
    transferBlock(PBHelper.convert(proto.getHeader().getBaseHeader().getBlock()),PBHelper.convert(proto.getHeader().getBaseHeader().getToken()),proto.getHeader().getClientName(),targets,PBHelper.convertStorageTypes(proto.getTargetStorageTypesList(),targets.length));
  }
  finally {
    if (traceScope != null)     traceScope.close();
  }
}
