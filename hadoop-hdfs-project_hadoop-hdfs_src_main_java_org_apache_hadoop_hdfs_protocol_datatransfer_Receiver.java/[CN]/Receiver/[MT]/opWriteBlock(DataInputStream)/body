{
  final OpWriteBlockProto proto=OpWriteBlockProto.parseFrom(vintPrefixed(in));
  final DatanodeInfo[] targets=PBHelperClient.convert(proto.getTargetsList());
  TraceScope traceScope=continueTraceSpan(proto.getHeader(),proto.getClass().getSimpleName());
  try {
    writeBlock(PBHelperClient.convert(proto.getHeader().getBaseHeader().getBlock()),PBHelperClient.convertStorageType(proto.getStorageType()),PBHelperClient.convert(proto.getHeader().getBaseHeader().getToken()),proto.getHeader().getClientName(),targets,PBHelperClient.convertStorageTypes(proto.getTargetStorageTypesList(),targets.length),PBHelperClient.convert(proto.getSource()),fromProto(proto.getStage()),proto.getPipelineSize(),proto.getMinBytesRcvd(),proto.getMaxBytesRcvd(),proto.getLatestGenerationStamp(),fromProto(proto.getRequestedChecksum()),(proto.hasCachingStrategy() ? getCachingStrategy(proto.getCachingStrategy()) : CachingStrategy.newDefaultStrategy()),(proto.hasAllowLazyPersist() ? proto.getAllowLazyPersist() : false),(proto.hasPinning() ? proto.getPinning() : false),(PBHelperClient.convertBooleanList(proto.getTargetPinningsList())));
  }
  finally {
    if (traceScope != null)     traceScope.close();
  }
}
