{
  Writer output=new FileWriter(outputFile);
  try {
    ObjectMapper mapper=new ObjectMapper();
    ObjectWriter writer=mapper.defaultPrettyPrintingWriter();
    for (    Map.Entry<String,Set<String>> entry : rackNodeMap.entrySet()) {
      Map rack=new LinkedHashMap();
      rack.put("rack",entry.getKey());
      List nodes=new ArrayList();
      for (      String name : entry.getValue()) {
        Map node=new LinkedHashMap();
        node.put("node",name);
        nodes.add(node);
      }
      rack.put("nodes",nodes);
      output.write(writer.writeValueAsString(rack) + EOL);
    }
  }
  finally {
    output.close();
  }
}
