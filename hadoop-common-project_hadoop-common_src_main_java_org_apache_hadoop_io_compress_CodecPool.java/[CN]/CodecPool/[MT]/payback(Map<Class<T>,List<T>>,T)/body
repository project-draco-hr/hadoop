{
  if (codec != null) {
    Class<T> codecClass=ReflectionUtils.getClass(codec);
    List<T> codecList;
synchronized (pool) {
      codecList=pool.get(codecClass);
      if (codecList == null) {
        codecList=new ArrayList<T>();
        pool.put(codecClass,codecList);
      }
    }
synchronized (codecList) {
      codecList.add(codec);
    }
  }
}
