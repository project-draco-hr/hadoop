{
  if (dataBuf == null)   return 0;
  int oldLimit=dataBuf.limit();
  int nRead=Math.min(dataBuf.remaining(),buf.remaining());
  if (nRead == 0)   return 0;
  try {
    dataBuf.limit(dataBuf.position() + nRead);
    buf.put(dataBuf);
  }
  finally {
    dataBuf.limit(oldLimit);
  }
  return nRead;
}
