{
  URI uri=path.toUri();
  String thatScheme=uri.getScheme();
  String thatAuthority=uri.getAuthority();
  if (thatScheme == null) {
    if (thatAuthority == null) {
      if (path.isUriPathAbsolute()) {
        return;
      }
      throw new IllegalArgumentException("relative paths not allowed:" + path);
    }
 else {
      throw new IllegalArgumentException("Path without scheme with non-null autorhrity:" + path);
    }
  }
  String thisScheme=this.getUri().getScheme();
  String thisAuthority=this.getUri().getAuthority();
  if (!thisScheme.equalsIgnoreCase(thatScheme) || (thisAuthority != null && !thisAuthority.equalsIgnoreCase(thatAuthority)) || (thisAuthority == null && thatAuthority != null)) {
    throw new IllegalArgumentException("Wrong FS: " + path + ", expected: "+ this.getUri());
  }
  int thisPort=this.getUri().getPort();
  int thatPort=path.toUri().getPort();
  if (thatPort == -1) {
    thatPort=this.getUriDefaultPort();
  }
  if (thisPort != thatPort) {
    throw new IllegalArgumentException("Wrong FS: " + path + ", expected: "+ this.getUri());
  }
}
