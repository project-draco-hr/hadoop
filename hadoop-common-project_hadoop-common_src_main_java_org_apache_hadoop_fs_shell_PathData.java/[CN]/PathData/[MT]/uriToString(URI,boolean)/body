{
  String scheme=uri.getScheme();
  String decodedRemainder=uri.getSchemeSpecificPart();
  if ((scheme == null) || (inferredSchemeFromPath)) {
    if (Path.isWindowsAbsolutePath(decodedRemainder,true)) {
      decodedRemainder=decodedRemainder.substring(1);
    }
    return decodedRemainder;
  }
 else {
    StringBuilder buffer=new StringBuilder();
    buffer.append(scheme);
    buffer.append(":");
    buffer.append(decodedRemainder);
    return buffer.toString();
  }
}
