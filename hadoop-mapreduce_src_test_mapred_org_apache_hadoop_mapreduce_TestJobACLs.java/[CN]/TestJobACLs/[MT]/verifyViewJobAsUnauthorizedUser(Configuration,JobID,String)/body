{
  UserGroupInformation unauthorizedUGI=UserGroupInformation.createUserForTesting(unauthorizedUser,new String[]{});
  unauthorizedUGI.doAs(new PrivilegedExceptionAction<Object>(){
    @SuppressWarnings("null") @Override public Object run(){
      Job myJob=null;
      try {
        Cluster cluster=new Cluster(myConf);
        myJob=cluster.getJob(jobId);
      }
 catch (      Exception e) {
        fail("Exception .." + e);
      }
      assertNotNull("Job " + jobId + " is not known to the JobTracker!",myJob);
      try {
        myJob.getCounters();
        fail("AccessControlException expected..");
      }
 catch (      IOException ioe) {
        assertTrue(ioe.getMessage().contains(" cannot perform operation " + JobACL.VIEW_JOB));
      }
catch (      InterruptedException e) {
        fail("Exception .. interrupted.." + e);
      }
      try {
        myJob.getTaskReports(TaskType.JOB_SETUP);
        fail("AccessControlException expected..");
      }
 catch (      IOException ioe) {
        assertTrue(ioe.getMessage().contains(" cannot perform operation " + JobACL.VIEW_JOB));
      }
catch (      InterruptedException e) {
        fail("Exception .. interrupted.." + e);
      }
      return null;
    }
  }
);
}
