{
  ClusterMetrics metrics=ClusterMetrics.getMetrics();
switch (initialState) {
case RUNNING:
    metrics.decrNumActiveNodes();
  break;
case UNHEALTHY:
metrics.decrNumUnhealthyNMs();
break;
}
switch (finalState) {
case DECOMMISSIONED:
Set<String> ecludedHosts=context.getNodesListManager().getHostsReader().getExcludedHosts();
if (!ecludedHosts.contains(hostName) && !ecludedHosts.contains(NetUtils.normalizeHostName(hostName))) {
metrics.incrDecommisionedNMs();
}
break;
case LOST:
metrics.incrNumLostNMs();
break;
case REBOOTED:
metrics.incrNumRebootedNMs();
break;
case UNHEALTHY:
metrics.incrNumUnhealthyNMs();
break;
}
}
