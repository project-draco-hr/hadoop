{
  ClusterMetrics metrics=ClusterMetrics.getMetrics();
switch (initialState) {
case UNHEALTHY:
    metrics.decrNumUnhealthyNMs();
  break;
case RUNNING:
metrics.decrNumActiveNodes();
break;
case DECOMMISSIONING:
metrics.decrDecommissioningNMs();
break;
default :
LOG.warn("Unexpcted initial state");
}
switch (finalState) {
case DECOMMISSIONING:
metrics.incrDecommissioningNMs();
break;
case RUNNING:
metrics.incrNumActiveNodes();
break;
default :
LOG.warn("Unexpected final state");
}
}
