{
  if (rmNode.originalTotalCapability != null) {
    rmNode.totalCapability=rmNode.originalTotalCapability;
    rmNode.originalTotalCapability=null;
  }
  LOG.info("Node " + rmNode.nodeId + " in DECOMMISSIONING is "+ "recommissioned back to RUNNING.");
  rmNode.updateMetricsForGracefulDecommission(rmNode.getState(),finalState);
  rmNode.context.getDispatcher().getEventHandler().handle(new NodeResourceUpdateSchedulerEvent(rmNode,ResourceOption.newInstance(rmNode.totalCapability,0)));
}
