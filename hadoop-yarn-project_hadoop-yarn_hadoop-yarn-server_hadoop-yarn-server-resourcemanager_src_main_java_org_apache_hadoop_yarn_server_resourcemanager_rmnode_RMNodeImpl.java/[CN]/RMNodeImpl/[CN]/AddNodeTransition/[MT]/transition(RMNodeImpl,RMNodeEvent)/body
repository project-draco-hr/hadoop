{
  RMNodeStartedEvent startEvent=(RMNodeStartedEvent)event;
  List<NMContainerStatus> containers=null;
  String host=rmNode.nodeId.getHost();
  if (rmNode.context.getInactiveRMNodes().containsKey(host)) {
    RMNode previouRMNode=rmNode.context.getInactiveRMNodes().get(host);
    rmNode.context.getInactiveRMNodes().remove(host);
    rmNode.updateMetricsForRejoinedNode(previouRMNode.getState());
  }
 else {
    ClusterMetrics.getMetrics().incrNumActiveNodes();
    containers=startEvent.getNMContainerStatuses();
  }
  if (null != startEvent.getRunningApplications()) {
    for (    ApplicationId appId : startEvent.getRunningApplications()) {
      handleRunningAppOnNode(rmNode,rmNode.context,appId,rmNode.nodeId);
    }
  }
  rmNode.context.getDispatcher().getEventHandler().handle(new NodeAddedSchedulerEvent(rmNode,containers));
  rmNode.context.getDispatcher().getEventHandler().handle(new NodesListManagerEvent(NodesListManagerEventType.NODE_USABLE,rmNode));
}
