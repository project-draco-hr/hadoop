{
  config.set(DFSConfigKeys.DFS_NAMENODE_NAME_DIR_KEY,Util.fileAsURI(new File(dfsDir,"name")).toString());
  config.set(DFSConfigKeys.DFS_NAMENODE_CHECKPOINT_DIR_KEY,Util.fileAsURI(new File(dfsDir,"namesecondary1")).toString());
  config.setLong(DFSConfigKeys.DFS_BLOCK_SIZE_KEY,blockSize);
  config.set("hadoop.security.auth_to_local","RULE:[2:$1@$0](JobTracker@.*FOO.COM)s/@.*//" + "DEFAULT");
  cluster=new MiniDFSCluster.Builder(config).manageNameDfsDirs(false).build();
  cluster.waitClusterUp();
  cluster.getNamesystem().getDelegationTokenSecretManager().startThreads();
}
