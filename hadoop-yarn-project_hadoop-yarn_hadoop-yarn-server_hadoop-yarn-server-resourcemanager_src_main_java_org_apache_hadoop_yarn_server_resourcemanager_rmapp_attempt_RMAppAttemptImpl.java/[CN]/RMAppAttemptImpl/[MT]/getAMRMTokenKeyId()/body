{
  Integer keyId=this.amrmTokenKeyId;
  if (keyId == null) {
    this.readLock.lock();
    try {
      if (this.amrmToken == null) {
        throw new YarnRuntimeException("Missing AMRM token for " + this.applicationAttemptId);
      }
      keyId=this.amrmToken.decodeIdentifier().getKeyId();
      this.amrmTokenKeyId=keyId;
    }
 catch (    IOException e) {
      throw new YarnRuntimeException("AMRM token decode error for " + this.applicationAttemptId,e);
    }
 finally {
      this.readLock.unlock();
    }
  }
  return keyId;
}
