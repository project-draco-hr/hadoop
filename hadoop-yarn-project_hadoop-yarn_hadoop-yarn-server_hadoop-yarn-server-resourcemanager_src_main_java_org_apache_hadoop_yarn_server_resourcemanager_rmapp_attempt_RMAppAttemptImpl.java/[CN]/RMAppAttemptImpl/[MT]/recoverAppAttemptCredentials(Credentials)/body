{
  if (appAttemptTokens == null) {
    return;
  }
  if (UserGroupInformation.isSecurityEnabled()) {
    byte[] clientTokenMasterKeyBytes=appAttemptTokens.getSecretKey(RMStateStore.AM_CLIENT_TOKEN_MASTER_KEY_NAME);
    clientTokenMasterKey=rmContext.getClientToAMTokenSecretManager().registerMasterKey(applicationAttemptId,clientTokenMasterKeyBytes);
  }
  this.amrmToken=(Token<AMRMTokenIdentifier>)appAttemptTokens.getToken(RMStateStore.AM_RM_TOKEN_SERVICE);
  rmContext.getAMRMTokenSecretManager().addPersistedPassword(this.amrmToken);
}
