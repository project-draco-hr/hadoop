{
  NodeId nodeId=containerFinishedEvent.getNodeId();
  if (containerFinishedEvent.getContainerStatus() != null) {
    if (shouldCountTowardsNodeBlacklisting(containerFinishedEvent.getContainerStatus().getExitStatus())) {
      appAttempt.addAMNodeToBlackList(containerFinishedEvent.getNodeId());
    }
  }
 else {
    LOG.warn("No ContainerStatus in containerFinishedEvent");
  }
  if (!appAttempt.getSubmissionContext().getKeepContainersAcrossApplicationAttempts()) {
    finishedContainersSentToAM.putIfAbsent(nodeId,new ArrayList<ContainerStatus>());
    appAttempt.finishedContainersSentToAM.get(nodeId).add(containerFinishedEvent.getContainerStatus());
    appAttempt.sendFinishedContainersToNM();
  }
 else {
    appAttempt.sendFinishedAMContainerToNM(nodeId,containerFinishedEvent.getContainerStatus().getContainerId());
  }
}
