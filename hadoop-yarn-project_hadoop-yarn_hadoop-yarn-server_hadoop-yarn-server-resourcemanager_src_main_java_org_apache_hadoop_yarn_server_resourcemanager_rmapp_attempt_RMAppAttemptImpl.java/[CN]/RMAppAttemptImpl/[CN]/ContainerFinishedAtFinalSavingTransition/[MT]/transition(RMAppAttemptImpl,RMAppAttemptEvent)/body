{
  RMAppAttemptContainerFinishedEvent containerFinishedEvent=(RMAppAttemptContainerFinishedEvent)event;
  ContainerStatus containerStatus=containerFinishedEvent.getContainerStatus();
  if (appAttempt.masterContainer.getId().equals(containerStatus.getContainerId())) {
    appAttempt.sendAMContainerToNM(appAttempt,containerFinishedEvent);
    if (appAttempt.targetedFinalState.equals(RMAppAttemptState.FAILED) || appAttempt.targetedFinalState.equals(RMAppAttemptState.KILLED)) {
      return;
    }
    appAttempt.rememberTargetTransitions(event,new AMFinishedAfterFinalSavingTransition(appAttempt.eventCausingFinalSaving),RMAppAttemptState.FINISHED);
    return;
  }
  addJustFinishedContainer(appAttempt,containerFinishedEvent);
}
