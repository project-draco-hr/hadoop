{
  RMAppAttemptContainerFinishedEvent containerFinishedEvent=(RMAppAttemptContainerFinishedEvent)event;
  ContainerStatus containerStatus=containerFinishedEvent.getContainerStatus();
  if (appAttempt.masterContainer != null && appAttempt.masterContainer.getId().equals(containerStatus.getContainerId())) {
    appAttempt.sendAMContainerToNM(appAttempt,containerFinishedEvent);
    appAttempt.rememberTargetTransitionsAndStoreState(event,transitionToDo,RMAppAttemptState.FAILED,RMAppAttemptState.FAILED);
    return RMAppAttemptState.FINAL_SAVING;
  }
  addJustFinishedContainer(appAttempt,containerFinishedEvent);
  return this.currentState;
}
