{
  if (!appAttempt.submissionContext.getUnmanagedAM()) {
    appAttempt.eventHandler.handle(new RMAppEvent(event.getApplicationAttemptId().getApplicationId(),RMAppEventType.APP_ACCEPTED));
    ResourceRequest request=BuilderUtils.newResourceRequest(AM_CONTAINER_PRIORITY,ResourceRequest.ANY,appAttempt.submissionContext.getAMContainerSpec().getResource(),1);
    Allocation amContainerAllocation=appAttempt.scheduler.allocate(appAttempt.applicationAttemptId,Collections.singletonList(request),EMPTY_CONTAINER_RELEASE_LIST);
    if (amContainerAllocation != null && amContainerAllocation.getContainers() != null) {
      assert(amContainerAllocation.getContainers().size() == 0);
    }
    return RMAppAttemptState.SCHEDULED;
  }
 else {
    RMStateStore store=appAttempt.rmContext.getStateStore();
    appAttempt.storeAttempt(store);
    return RMAppAttemptState.LAUNCHED_UNMANAGED_SAVING;
  }
}
