{
  if (appAttempt.getSubmissionContext().getUnmanagedAM()) {
    appAttempt.updateInfoOnAMUnregister(event);
    new FinalTransition(RMAppAttemptState.FINISHED).transition(appAttempt,event);
    return RMAppAttemptState.FINISHED;
  }
  appAttempt.rememberTargetTransitionsAndStoreState(event,new FinalStateSavedAfterAMUnregisterTransition(),RMAppAttemptState.FINISHING,RMAppAttemptState.FINISHED);
  ApplicationId applicationId=appAttempt.getAppAttemptId().getApplicationId();
  appAttempt.eventHandler.handle(new RMAppEvent(applicationId,RMAppEventType.ATTEMPT_UNREGISTERED));
  return RMAppAttemptState.FINAL_SAVING;
}
