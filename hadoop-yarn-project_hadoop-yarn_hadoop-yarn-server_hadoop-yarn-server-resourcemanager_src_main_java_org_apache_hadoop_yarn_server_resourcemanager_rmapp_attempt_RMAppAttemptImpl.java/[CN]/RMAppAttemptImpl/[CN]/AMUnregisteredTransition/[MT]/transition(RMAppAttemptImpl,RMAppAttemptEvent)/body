{
  if (appAttempt.getSubmissionContext().getUnmanagedAM()) {
    appAttempt.rememberTargetTransitionsAndStoreState(event,new AMFinishedAfterFinalSavingTransition(event),RMAppAttemptState.FINISHED,RMAppAttemptState.FINISHED);
  }
 else {
    appAttempt.rememberTargetTransitionsAndStoreState(event,new FinalStateSavedAfterAMUnregisterTransition(),RMAppAttemptState.FINISHING,RMAppAttemptState.FINISHED);
  }
  ApplicationId applicationId=appAttempt.getAppAttemptId().getApplicationId();
  appAttempt.eventHandler.handle(new RMAppEvent(applicationId,RMAppEventType.ATTEMPT_UNREGISTERED));
  return;
}
