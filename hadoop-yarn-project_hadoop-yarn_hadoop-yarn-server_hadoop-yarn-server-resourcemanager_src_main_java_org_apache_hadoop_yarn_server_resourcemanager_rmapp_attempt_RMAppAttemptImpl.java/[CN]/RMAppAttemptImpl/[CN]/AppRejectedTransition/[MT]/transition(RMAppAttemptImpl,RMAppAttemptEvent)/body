{
  RMAppAttemptRejectedEvent rejectedEvent=(RMAppAttemptRejectedEvent)event;
  appAttempt.masterService.unregisterAttempt(appAttempt.applicationAttemptId);
  String message=rejectedEvent.getMessage();
  appAttempt.setDiagnostics(message);
  appAttempt.eventHandler.handle(new RMAppRejectedEvent(rejectedEvent.getApplicationAttemptId().getApplicationId(),message));
  appAttempt.removeTokens(appAttempt);
}
