{
  dirDiffMap.put(dir,diff);
  diffMap.put(dir,relativePath);
  for (  INode created : diff.getList(ListType.CREATED)) {
    if (created.isReference()) {
      RenameEntry entry=getEntry(created.getId());
      if (entry.getTargetPath() == null) {
        entry.setTarget(created,relativePath);
      }
    }
  }
  for (  INode deleted : diff.getList(ListType.DELETED)) {
    if (deleted instanceof INodeReference.WithName) {
      RenameEntry entry=getEntry(deleted.getId());
      entry.setSource(deleted,relativePath);
    }
  }
}
