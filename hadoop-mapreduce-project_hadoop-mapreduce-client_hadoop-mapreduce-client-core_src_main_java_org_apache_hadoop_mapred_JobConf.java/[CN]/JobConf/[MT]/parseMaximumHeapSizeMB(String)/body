{
  Matcher m=JAVA_OPTS_XMX_PATTERN.matcher(javaOpts);
  if (m.matches()) {
    int size=Integer.parseInt(m.group(1));
    if (size <= 0) {
      return -1;
    }
    if (m.group(2).isEmpty()) {
      return size / (1024 * 1024);
    }
    char unit=m.group(2).charAt(0);
switch (unit) {
case 'g':
case 'G':
      return size * 1024;
case 'm':
case 'M':
    return size;
case 'k':
case 'K':
  return size / 1024;
}
}
return -1;
}
