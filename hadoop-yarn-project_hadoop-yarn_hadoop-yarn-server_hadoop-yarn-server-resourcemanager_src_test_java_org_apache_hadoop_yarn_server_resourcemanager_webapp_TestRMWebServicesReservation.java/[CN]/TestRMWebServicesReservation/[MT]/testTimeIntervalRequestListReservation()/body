{
  rm.start();
  setupCluster(100);
  long time=clock.getTime() + MINIMUM_RESOURCE_DURATION;
  testSubmissionReservationHelper("reservation/submit",MediaType.APPLICATION_JSON,time,"res_1",1);
  testSubmissionReservationHelper("reservation/submit",MediaType.APPLICATION_JSON,time + MINIMUM_RESOURCE_DURATION,"res_2",2);
  WebResource resource=constructWebResource(LIST_RESERVATION_PATH).queryParam("start-time",Long.toString((long)(time * 0.9))).queryParam("end-time",Long.toString(time + (long)(0.9 * MINIMUM_RESOURCE_DURATION))).queryParam("include-resource-allocations","true").queryParam("queue",DEFAULT_QUEUE);
  JSONObject json=testListReservationHelper(resource);
  if (!this.isAuthenticationEnabled() && json == null) {
    return;
  }
  JSONObject reservations=json.getJSONObject("reservations");
  testRDLHelper(reservations);
  String reservationName=reservations.getJSONObject("reservation-definition").getString("reservation-name");
  assertEquals(reservationName,"res_1");
  rm.stop();
}
