{
  BreakableService svc=new BreakableService();
  Configuration conf=new Configuration();
  conf.set("test.init","t");
  ServiceOperations.init(svc,conf);
  try {
    ServiceOperations.init(svc,new Configuration());
    fail("Expected a failure, got " + svc);
  }
 catch (  IllegalStateException e) {
  }
  assertStateCount(svc,Service.STATE.INITED,1);
  assertServiceConfigurationContains(svc,"test.init");
}
