{
  BreakableService svc=new BreakableService(false,true,false);
  try {
    ServiceOperations.deploy(svc,new Configuration());
    fail("Expected a failure, got " + svc);
  }
 catch (  BreakableService.BrokenLifecycleEvent expected) {
  }
  assertServiceStateInited(svc);
  assertStateCount(svc,Service.STATE.INITED,1);
  assertStateCount(svc,Service.STATE.STARTED,1);
  try {
    ServiceOperations.deploy(svc,new Configuration());
    fail("Expected a failure, got " + svc);
  }
 catch (  IllegalStateException e) {
  }
}
