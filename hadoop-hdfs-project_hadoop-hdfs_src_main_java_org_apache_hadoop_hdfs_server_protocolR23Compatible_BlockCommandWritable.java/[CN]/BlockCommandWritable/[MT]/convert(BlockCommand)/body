{
  if (cmd == null)   return null;
  DatanodeInfo[][] targets=cmd.getTargets();
  DatanodeInfoWritable[][] dinfo=new DatanodeInfoWritable[targets.length][];
  for (int i=0; i < targets.length; i++) {
    dinfo[i]=DatanodeInfoWritable.convertDatanodeInfo(targets[i]);
  }
  return new BlockCommandWritable(cmd.getAction(),cmd.getBlockPoolId(),BlockWritable.convert(cmd.getBlocks()),dinfo);
}
