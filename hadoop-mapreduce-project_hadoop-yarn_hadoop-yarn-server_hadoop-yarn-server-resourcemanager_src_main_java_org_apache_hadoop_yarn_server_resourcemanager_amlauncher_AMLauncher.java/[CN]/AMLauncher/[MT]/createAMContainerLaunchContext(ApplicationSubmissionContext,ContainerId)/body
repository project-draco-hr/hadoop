{
  ContainerLaunchContext container=applicationMasterContext.getAMContainerSpec();
  StringBuilder mergedCommand=new StringBuilder();
  String failCount=Integer.toString(application.getAppAttemptId().getAttemptId());
  List<String> commandList=new ArrayList<String>();
  for (  String str : container.getCommands()) {
    String result=str.replaceFirst(ApplicationConstants.AM_FAIL_COUNT_STRING,failCount);
    mergedCommand.append(result).append(" ");
    commandList.add(result);
  }
  container.setCommands(commandList);
  LOG.info("Command to launch container " + containerID + " : "+ mergedCommand);
  container.setContainerId(containerID);
  container.setUser(applicationMasterContext.getUser());
  setupTokensAndEnv(container);
  return container;
}
