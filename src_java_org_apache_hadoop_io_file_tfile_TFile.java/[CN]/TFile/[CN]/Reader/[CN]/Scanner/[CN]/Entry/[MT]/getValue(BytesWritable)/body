{
  DataInputStream dis=getValueStream();
  int size=0;
  try {
    int remain;
    while ((remain=valueBufferInputStream.getRemain()) > 0) {
      value.setSize(size + remain);
      dis.readFully(value.get(),size,remain);
      size+=remain;
    }
    return value.getSize();
  }
  finally {
    dis.close();
  }
}
