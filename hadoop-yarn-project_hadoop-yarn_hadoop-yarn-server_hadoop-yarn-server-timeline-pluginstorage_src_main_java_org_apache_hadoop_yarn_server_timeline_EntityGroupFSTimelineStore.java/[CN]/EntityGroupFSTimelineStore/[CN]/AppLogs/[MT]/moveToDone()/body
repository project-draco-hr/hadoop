{
  Path doneAppPath=getDoneAppPath(appId);
  if (!doneAppPath.equals(appDirPath)) {
    Path donePathParent=doneAppPath.getParent();
    if (!fs.exists(donePathParent)) {
      fs.mkdirs(donePathParent);
    }
    LOG.debug("Application {} is done, trying to move to done dir {}",appId,doneAppPath);
    if (!fs.rename(appDirPath,doneAppPath)) {
      throw new IOException("Rename " + appDirPath + " to "+ doneAppPath+ " failed");
    }
 else {
      LOG.info("Moved {} to {}",appDirPath,doneAppPath);
    }
    appDirPath=doneAppPath;
  }
}
