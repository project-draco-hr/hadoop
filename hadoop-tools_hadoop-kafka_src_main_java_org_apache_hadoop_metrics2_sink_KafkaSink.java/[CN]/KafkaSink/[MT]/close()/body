{
  try {
    producer.close();
  }
 catch (  RuntimeException e) {
    throw new MetricsException("Error closing producer",e);
  }
 finally {
    producer=null;
  }
}
