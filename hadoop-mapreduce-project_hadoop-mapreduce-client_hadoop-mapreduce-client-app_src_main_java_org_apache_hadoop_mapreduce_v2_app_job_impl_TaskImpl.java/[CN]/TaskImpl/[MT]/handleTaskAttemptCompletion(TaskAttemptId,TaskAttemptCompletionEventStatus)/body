{
  TaskAttempt attempt=attempts.get(attemptId);
  if (attempt.getNodeHttpAddress() != null) {
    TaskAttemptCompletionEvent tce=recordFactory.newRecordInstance(TaskAttemptCompletionEvent.class);
    tce.setEventId(-1);
    String scheme=(encryptedShuffle) ? "https://" : "http://";
    tce.setMapOutputServerAddress(scheme + attempt.getNodeHttpAddress().split(":")[0] + ":"+ attempt.getShufflePort());
    tce.setStatus(status);
    tce.setAttemptId(attempt.getID());
    int runTime=0;
    if (attempt.getFinishTime() != 0 && attempt.getLaunchTime() != 0)     runTime=(int)(attempt.getFinishTime() - attempt.getLaunchTime());
    tce.setAttemptRunTime(runTime);
    eventHandler.handle(new JobTaskAttemptCompletedEvent(tce));
  }
}
