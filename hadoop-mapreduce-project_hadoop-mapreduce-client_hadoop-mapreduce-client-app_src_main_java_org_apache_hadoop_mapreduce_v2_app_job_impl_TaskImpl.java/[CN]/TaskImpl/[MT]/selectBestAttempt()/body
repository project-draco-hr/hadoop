{
  float progress=0f;
  TaskAttempt result=null;
  for (  TaskAttempt at : attempts.values()) {
switch (at.getState()) {
case FAIL_CONTAINER_CLEANUP:
case FAIL_TASK_CLEANUP:
case FAILED:
case KILL_CONTAINER_CLEANUP:
case KILL_TASK_CLEANUP:
case KILLED:
      continue;
  }
  if (result == null) {
    result=at;
  }
  float attemptProgress=at.getProgress();
  if (attemptProgress > progress) {
    result=at;
    progress=attemptProgress;
  }
}
return result;
}
