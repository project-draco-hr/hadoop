{
  if (successfulAttempt != null) {
    return attempts.get(successfulAttempt);
  }
  float progress=0f;
  TaskAttempt result=null;
  for (  TaskAttempt at : attempts.values()) {
switch (at.getState()) {
case FAILED:
case KILLED:
      continue;
  }
  if (result == null) {
    result=at;
  }
  float attemptProgress=at.getProgress();
  if (attemptProgress > progress) {
    result=at;
    progress=attemptProgress;
  }
}
return result;
}
