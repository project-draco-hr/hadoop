{
  TaskAttemptId taskAttemptId=((TaskTAttemptEvent)event).getTaskAttemptID();
  task.handleTaskAttemptCompletion(taskAttemptId,TaskAttemptCompletionEventStatus.KILLED);
  task.finishedAttempts.add(taskAttemptId);
  task.inProgressAttempts.remove(taskAttemptId);
  if (task.successfulAttempt == null) {
    boolean rescheduleNewAttempt=false;
    if (event instanceof TaskTAttemptKilledEvent) {
      rescheduleNewAttempt=((TaskTAttemptKilledEvent)event).getRescheduleAttempt();
    }
    task.addAndScheduleAttempt(Avataar.VIRGIN,rescheduleNewAttempt);
  }
  if ((task.commitAttempt != null) && (task.commitAttempt == taskAttemptId)) {
    task.commitAttempt=null;
  }
}
