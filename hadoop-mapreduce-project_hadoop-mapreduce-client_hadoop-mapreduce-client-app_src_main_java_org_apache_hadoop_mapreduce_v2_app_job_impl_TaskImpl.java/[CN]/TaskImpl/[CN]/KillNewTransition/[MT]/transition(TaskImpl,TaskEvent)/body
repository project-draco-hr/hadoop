{
  if (task.historyTaskStartGenerated) {
    TaskFailedEvent taskFailedEvent=createTaskFailedEvent(task,null,TaskStateInternal.KILLED,null);
    task.eventHandler.handle(new JobHistoryEvent(task.taskId.getJobId(),taskFailedEvent));
  }
 else {
    LOG.debug("Not generating HistoryFinish event since start event not" + " generated for task: " + task.getID());
  }
  task.eventHandler.handle(new JobTaskEvent(task.taskId,getExternalState(TaskStateInternal.KILLED)));
  task.metrics.endWaitingTask(task);
}
