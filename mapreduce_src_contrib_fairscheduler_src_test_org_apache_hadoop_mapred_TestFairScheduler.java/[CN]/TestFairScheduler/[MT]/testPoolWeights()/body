{
  PrintWriter out=new PrintWriter(new FileWriter(ALLOC_FILE));
  out.println("<?xml version=\"1.0\"?>");
  out.println("<allocations>");
  out.println("<pool name=\"poolA\">");
  out.println("<weight>2.0</weight>");
  out.println("</pool>");
  out.println("<pool name=\"poolB\">");
  out.println("<weight>0.5</weight>");
  out.println("</pool>");
  out.println("</allocations>");
  out.close();
  scheduler.getPoolManager().reloadAllocs();
  JobInProgress job1=submitJob(JobStatus.RUNNING,10,10);
  JobInfo info1=scheduler.infos.get(job1);
  JobInProgress job2=submitJob(JobStatus.RUNNING,10,10,"poolA");
  JobInfo info2=scheduler.infos.get(job2);
  JobInProgress job3=submitJob(JobStatus.RUNNING,10,10,"poolB");
  JobInfo info3=scheduler.infos.get(job3);
  advanceTime(10);
  assertEquals(1.14,info1.mapSchedulable.getFairShare(),0.01);
  assertEquals(1.14,info1.reduceSchedulable.getFairShare(),0.01);
  assertEquals(2.28,info2.mapSchedulable.getFairShare(),0.01);
  assertEquals(2.28,info2.reduceSchedulable.getFairShare(),0.01);
  assertEquals(0.57,info3.mapSchedulable.getFairShare(),0.01);
  assertEquals(0.57,info3.reduceSchedulable.getFairShare(),0.01);
  JobInProgress job4=submitJob(JobStatus.RUNNING,10,10,"poolB");
  JobInfo info4=scheduler.infos.get(job4);
  advanceTime(10);
  assertEquals(1.14,info1.mapSchedulable.getFairShare(),0.01);
  assertEquals(1.14,info1.reduceSchedulable.getFairShare(),0.01);
  assertEquals(2.28,info2.mapSchedulable.getFairShare(),0.01);
  assertEquals(2.28,info2.reduceSchedulable.getFairShare(),0.01);
  assertEquals(0.28,info3.mapSchedulable.getFairShare(),0.01);
  assertEquals(0.28,info3.reduceSchedulable.getFairShare(),0.01);
  assertEquals(0.28,info4.mapSchedulable.getFairShare(),0.01);
  assertEquals(0.28,info4.reduceSchedulable.getFairShare(),0.01);
  verifyMetrics();
}
