{
  FileSystem mockFs=mock(FileSystem.class);
  FileSystem fs=new FilterFileSystem(mockFs);
  Path p=new Path("/a");
  when(mockFs.getFileStatus(p)).thenReturn(new FileStatus());
  fs.deleteOnExit(p);
  verify(mockFs).getFileStatus(eq(p));
  fs.close();
  verify(mockFs).delete(eq(p),anyBoolean());
  reset(mockFs);
  when(mockFs.getFileStatus(p)).thenReturn(new FileStatus());
  fs.deleteOnExit(p);
  verify(mockFs).getFileStatus(eq(p));
  reset(mockFs);
  fs.close();
  verify(mockFs).getFileStatus(eq(p));
  verify(mockFs,never()).delete(any(Path.class),anyBoolean());
}
