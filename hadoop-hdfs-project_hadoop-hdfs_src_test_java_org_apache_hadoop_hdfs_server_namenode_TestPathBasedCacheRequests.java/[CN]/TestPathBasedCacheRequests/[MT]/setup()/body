{
  conf=new HdfsConfiguration();
  conf.setInt(DFSConfigKeys.DFS_NAMENODE_LIST_CACHE_POOLS_NUM_RESPONSES,2);
  conf.setInt(DFSConfigKeys.DFS_NAMENODE_LIST_CACHE_DIRECTIVES_NUM_RESPONSES,2);
  cluster=new MiniDFSCluster.Builder(conf).numDataNodes(1).build();
  cluster.waitActive();
  dfs=cluster.getFileSystem();
  proto=cluster.getNameNodeRpc();
  prevCacheManipulator=NativeIO.POSIX.cacheManipulator;
  NativeIO.POSIX.cacheManipulator=new CacheManipulator(){
    @Override public void mlock(    String identifier,    ByteBuffer mmap,    long length) throws IOException {
      LOG.info("mlocking " + identifier);
    }
  }
;
}
