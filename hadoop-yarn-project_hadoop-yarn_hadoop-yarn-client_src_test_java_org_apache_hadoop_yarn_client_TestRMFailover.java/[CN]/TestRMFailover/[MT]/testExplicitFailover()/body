{
  assertTrue("NMs failed to connect to the RM",cluster.waitForNodeManagersToConnect(5000));
  verifyClientConnection();
  getRMAdminService(0).transitionToStandby(req);
  getRMAdminService(1).transitionToActive(req);
  assertEquals("Wrong ResourceManager is active",HAServiceProtocol.HAServiceState.ACTIVE,getRMAdminService(1).getServiceStatus().getState());
  assertTrue("NMs failed to connect to the RM",cluster.waitForNodeManagersToConnect(5000));
  verifyClientConnection();
  getRMAdminService(1).transitionToStandby(req);
  getRMAdminService(0).transitionToActive(req);
  assertEquals("Wrong ResourceManager is active",HAServiceProtocol.HAServiceState.ACTIVE,getRMAdminService(0).getServiceStatus().getState());
  assertTrue("NMs failed to connect to the RM",cluster.waitForNodeManagersToConnect(5000));
  verifyClientConnection();
}
