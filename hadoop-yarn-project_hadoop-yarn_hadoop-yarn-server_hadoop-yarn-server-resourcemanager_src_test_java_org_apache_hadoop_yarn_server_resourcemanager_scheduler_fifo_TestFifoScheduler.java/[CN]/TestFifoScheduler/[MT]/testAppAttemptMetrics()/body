{
  AsyncDispatcher dispatcher=new InlineDispatcher();
  RMContext rmContext=new RMContextImpl(dispatcher,null,null,null,null,null,null,null,null);
  FifoScheduler schedular=new FifoScheduler();
  schedular.reinitialize(new Configuration(),rmContext);
  QueueMetrics metrics=schedular.getRootQueueMetrics();
  int beforeAppsSubmitted=metrics.getAppsSubmitted();
  ApplicationId appId=BuilderUtils.newApplicationId(200,1);
  ApplicationAttemptId appAttemptId=BuilderUtils.newApplicationAttemptId(appId,1);
  SchedulerEvent appEvent=new AppAddedSchedulerEvent(appId,"queue","user");
  schedular.handle(appEvent);
  SchedulerEvent attemptEvent=new AppAttemptAddedSchedulerEvent(appAttemptId,false);
  schedular.handle(attemptEvent);
  appAttemptId=BuilderUtils.newApplicationAttemptId(appId,2);
  SchedulerEvent appEvent2=new AppAddedSchedulerEvent(appAttemptId.getApplicationId(),"queue","user");
  schedular.handle(appEvent2);
  SchedulerEvent attemptEvent2=new AppAttemptAddedSchedulerEvent(appAttemptId,false);
  schedular.handle(attemptEvent2);
  int afterAppsSubmitted=metrics.getAppsSubmitted();
  Assert.assertEquals(1,afterAppsSubmitted - beforeAppsSubmitted);
}
