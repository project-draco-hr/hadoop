{
  PathData savedDst=dst;
  try {
    dst=getTargetPath(src);
    if (dst.exists) {
      if (!dst.stat.isDirectory()) {
        throw new PathIsNotDirectoryException(dst.toString());
      }
    }
 else {
      if (!dst.fs.mkdirs(dst.path)) {
        PathIOException e=new PathIOException(dst.toString());
        e.setOperation("mkdir");
        throw e;
      }
      dst.refreshStatus();
    }
    super.recursePath(src);
    if (dst.stat.isDirectory()) {
      preserveAttributes(src,dst);
    }
  }
  finally {
    dst=savedDst;
  }
}
