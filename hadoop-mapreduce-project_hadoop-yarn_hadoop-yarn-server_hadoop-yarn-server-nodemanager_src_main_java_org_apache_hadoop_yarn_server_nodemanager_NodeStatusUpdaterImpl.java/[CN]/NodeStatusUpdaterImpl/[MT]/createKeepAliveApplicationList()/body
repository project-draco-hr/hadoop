{
  if (!tokenKeepAliveEnabled) {
    return Collections.emptyList();
  }
  List<ApplicationId> appList=new ArrayList<ApplicationId>();
  for (Iterator<Entry<ApplicationId,Long>> i=this.appTokenKeepAliveMap.entrySet().iterator(); i.hasNext(); ) {
    Entry<ApplicationId,Long> e=i.next();
    ApplicationId appId=e.getKey();
    Long nextKeepAlive=e.getValue();
    if (!this.context.getApplications().containsKey(appId)) {
      i.remove();
    }
 else     if (System.currentTimeMillis() > nextKeepAlive) {
      appList.add(appId);
      trackAppForKeepAlive(appId);
    }
  }
  return appList;
}
