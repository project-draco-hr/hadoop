{
  init(res);
  UserGroupInformation callerUgi=getUser(req);
  if (callerUgi == null) {
    String msg="The owner of the posted timeline entities is not set";
    LOG.error(msg);
    throw new ForbiddenException(msg);
  }
  boolean isAsync=async != null && async.trim().equalsIgnoreCase("true");
  try {
    appId=parseApplicationId(appId);
    if (appId == null) {
      return Response.status(Response.Status.BAD_REQUEST).build();
    }
    TimelineCollector collector=getCollector(req,appId);
    if (collector == null) {
      LOG.error("Application: " + appId + " is not found");
      throw new NotFoundException();
    }
    collector.putEntities(entities,callerUgi);
    return Response.ok().build();
  }
 catch (  Exception e) {
    LOG.error("Error putting entities",e);
    throw new WebApplicationException(e,Response.Status.INTERNAL_SERVER_ERROR);
  }
}
