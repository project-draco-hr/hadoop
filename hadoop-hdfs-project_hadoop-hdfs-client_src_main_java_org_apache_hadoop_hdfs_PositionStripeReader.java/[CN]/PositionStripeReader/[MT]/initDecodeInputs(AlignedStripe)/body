{
  int bufLen=(int)alignedStripe.getSpanInBlock();
  int bufCount=dataBlkNum + parityBlkNum;
  codingBuffer=dfsStripedInputStream.getBufferPool().getBuffer(useDirectBuffer(),bufLen * bufCount);
  ByteBuffer buffer;
  for (int i=0; i < decodeInputs.length; i++) {
    buffer=codingBuffer.duplicate();
    decodeInputs[i]=new ECChunk(buffer,i * bufLen,bufLen);
  }
  for (int i=0; i < dataBlkNum; i++) {
    if (alignedStripe.chunks[i] == null) {
      alignedStripe.chunks[i]=new StripingChunk(decodeInputs[i].getBuffer());
    }
  }
}
