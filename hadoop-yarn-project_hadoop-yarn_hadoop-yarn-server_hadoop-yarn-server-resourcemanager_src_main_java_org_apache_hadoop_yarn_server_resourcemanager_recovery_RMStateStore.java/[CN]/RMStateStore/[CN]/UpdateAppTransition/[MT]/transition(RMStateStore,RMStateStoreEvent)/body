{
  if (!(event instanceof RMStateUpdateAppEvent)) {
    LOG.error("Illegal event type: " + event.getClass());
    return;
  }
  ApplicationState appState=((RMStateUpdateAppEvent)event).getAppState();
  ApplicationId appId=appState.getAppId();
  ApplicationStateData appStateData=ApplicationStateData.newInstance(appState);
  LOG.info("Updating info for app: " + appId);
  try {
    store.updateApplicationStateInternal(appId,appStateData);
    store.notifyApplication(new RMAppEvent(appId,RMAppEventType.APP_UPDATE_SAVED));
  }
 catch (  Exception e) {
    LOG.error("Error updating app: " + appId,e);
    store.notifyStoreOperationFailed(e);
  }
}
