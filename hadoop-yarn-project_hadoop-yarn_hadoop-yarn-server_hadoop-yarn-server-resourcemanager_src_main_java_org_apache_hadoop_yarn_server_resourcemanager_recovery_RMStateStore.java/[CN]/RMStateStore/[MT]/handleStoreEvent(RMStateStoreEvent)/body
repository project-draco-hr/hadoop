{
  this.writeLock.lock();
  try {
    if (LOG.isDebugEnabled()) {
      LOG.debug("Processing event of type " + event.getType());
    }
    final RMStateStoreState oldState=getRMStateStoreState();
    this.stateMachine.doTransition(event.getType(),event);
    if (oldState != getRMStateStoreState()) {
      LOG.info("RMStateStore state change from " + oldState + " to "+ getRMStateStoreState());
    }
  }
 catch (  InvalidStateTransitonException e) {
    LOG.error("Can't handle this event at current state",e);
  }
 finally {
    this.writeLock.unlock();
  }
}
