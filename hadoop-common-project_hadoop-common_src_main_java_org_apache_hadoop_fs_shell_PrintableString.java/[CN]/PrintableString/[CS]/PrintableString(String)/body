{
  StringBuilder stringBuilder=new StringBuilder(rawString.length());
  for (int offset=0; offset < rawString.length(); ) {
    int codePoint=rawString.codePointAt(offset);
    offset+=Character.charCount(codePoint);
switch (Character.getType(codePoint)) {
case Character.CONTROL:
case Character.FORMAT:
case Character.PRIVATE_USE:
case Character.SURROGATE:
case Character.UNASSIGNED:
      stringBuilder.append(REPLACEMENT_CHAR);
    break;
default :
  stringBuilder.append(Character.toChars(codePoint));
break;
}
}
printableString=stringBuilder.toString();
}
