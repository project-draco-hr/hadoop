{
  StorageReceivedDeletedBlocksProto.Builder builder=StorageReceivedDeletedBlocksProto.newBuilder().setStorageID(reg.getStorageID());
  if (receivedAndDeletedBlocks != null) {
    for (int i=0; i < receivedAndDeletedBlocks.length; i++) {
      builder.addBlocks(PBHelper.convert(receivedAndDeletedBlocks[i]));
    }
  }
  BlockReceivedAndDeletedRequestProto req=BlockReceivedAndDeletedRequestProto.newBuilder().setRegistration(PBHelper.convert(reg)).setBlockPoolId(poolId).addBlocks(builder.build()).build();
  try {
    rpcProxy.blockReceivedAndDeleted(NULL_CONTROLLER,req);
  }
 catch (  ServiceException se) {
    throw ProtobufHelper.getRemoteException(se);
  }
}
