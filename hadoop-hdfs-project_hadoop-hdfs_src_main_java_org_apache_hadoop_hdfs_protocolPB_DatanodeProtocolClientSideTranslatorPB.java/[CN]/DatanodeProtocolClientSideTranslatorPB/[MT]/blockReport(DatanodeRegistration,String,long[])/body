{
  StorageBlockReportProto.Builder reportBuilder=StorageBlockReportProto.newBuilder().setStorageID(registration.getStorageID());
  if (blocks != null) {
    for (int i=0; i < blocks.length; i++) {
      reportBuilder.addBlocks(blocks[i]);
    }
  }
  BlockReportRequestProto req=BlockReportRequestProto.newBuilder().setRegistration(PBHelper.convert(registration)).setBlockPoolId(poolId).addReports(reportBuilder.build()).build();
  BlockReportResponseProto resp;
  try {
    resp=rpcProxy.blockReport(NULL_CONTROLLER,req);
  }
 catch (  ServiceException se) {
    throw ProtobufHelper.getRemoteException(se);
  }
  return resp.hasCmd() ? PBHelper.convert(resp.getCmd()) : null;
}
