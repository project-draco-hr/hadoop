{
  CacheReportRequestProto.Builder builder=CacheReportRequestProto.newBuilder().setRegistration(PBHelper.convert(registration)).setBlockPoolId(poolId);
  for (int i=0; i < blocks.length; i++) {
    builder.addBlocks(blocks[i]);
  }
  CacheReportResponseProto resp;
  try {
    resp=rpcProxy.cacheReport(NULL_CONTROLLER,builder.build());
  }
 catch (  ServiceException se) {
    throw ProtobufHelper.getRemoteException(se);
  }
  if (resp.hasCmd()) {
    return PBHelper.convert(resp.getCmd());
  }
  return null;
}
