{
  Properties customProperties=new Properties();
  FileInputStream fs=null;
  InputStream is=null;
  try {
    fs=new FileInputStream(log4jPath);
    is=targetClass.getResourceAsStream("/log4j.properties");
    customProperties.load(fs);
    Properties originalProperties=new Properties();
    originalProperties.load(is);
    for (    Entry<Object,Object> entry : customProperties.entrySet()) {
      originalProperties.setProperty(entry.getKey().toString(),entry.getValue().toString());
    }
    LogManager.resetConfiguration();
    PropertyConfigurator.configure(originalProperties);
  }
  finally {
    IOUtils.closeQuietly(is);
    IOUtils.closeQuietly(fs);
  }
}
