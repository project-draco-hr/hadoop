{
  CgroupsLCEResourcesHandler handler=new CgroupsLCEResourcesHandler();
  handler.setConf(new YarnConfiguration());
  handler.initConfig();
  FileUtils.deleteQuietly(cgroupDir);
  Assert.assertFalse(handler.checkAndDeleteCgroup(cgroupDir));
  File tfile=new File(cgroupDir.getAbsolutePath(),"tasks");
  FileOutputStream fos=FileUtils.openOutputStream(tfile);
  File fspy=Mockito.spy(cgroupDir);
  Mockito.stub(fspy.delete()).toReturn(true);
  Assert.assertTrue(handler.checkAndDeleteCgroup(fspy));
  fos.write("1234".getBytes());
  fos.close();
  Assert.assertFalse(handler.checkAndDeleteCgroup(fspy));
  FileUtils.deleteQuietly(cgroupDir);
}
