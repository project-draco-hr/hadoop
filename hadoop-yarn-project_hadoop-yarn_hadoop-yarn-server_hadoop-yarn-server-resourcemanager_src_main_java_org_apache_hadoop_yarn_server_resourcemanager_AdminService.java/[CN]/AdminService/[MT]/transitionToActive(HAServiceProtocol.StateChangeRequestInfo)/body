{
  try {
    refreshAdminAcls(false);
  }
 catch (  YarnException ex) {
    throw new ServiceFailedException("Can not execute refreshAdminAcls",ex);
  }
  UserGroupInformation user=checkAccess("transitionToActive");
  checkHaStateChange(reqInfo);
  try {
    rm.transitionToActive();
  }
 catch (  Exception e) {
    RMAuditLogger.logFailure(user.getShortUserName(),"transitionToActive","","RM","Exception transitioning to active");
    throw new ServiceFailedException("Error when transitioning to Active mode",e);
  }
  try {
    refreshAll();
  }
 catch (  Exception e) {
    LOG.error("RefreshAll failed so firing fatal event",e);
    rmContext.getDispatcher().getEventHandler().handle(new RMFatalEvent(RMFatalEventType.TRANSITION_TO_ACTIVE_FAILED,e));
    throw new ServiceFailedException("Error on refreshAll during transistion to Active",e);
  }
  RMAuditLogger.logSuccess(user.getShortUserName(),"transitionToActive","RM");
}
