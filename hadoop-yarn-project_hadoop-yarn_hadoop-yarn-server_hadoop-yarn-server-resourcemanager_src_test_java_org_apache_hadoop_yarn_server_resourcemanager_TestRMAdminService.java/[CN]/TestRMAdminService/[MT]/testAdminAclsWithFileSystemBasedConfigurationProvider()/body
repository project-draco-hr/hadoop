{
  configuration.set(YarnConfiguration.RM_CONFIGURATION_PROVIDER_CLASS,"org.apache.hadoop.yarn.FileSystemBasedConfigurationProvider");
  try {
    rm=new MockRM(configuration);
    rm.init(configuration);
    rm.start();
    fail("Should throw an exception");
  }
 catch (  Exception ex) {
  }
  uploadDefaultConfiguration();
  try {
    rm=new MockRM(configuration);
    rm.init(configuration);
    rm.start();
  }
 catch (  Exception ex) {
    fail("Should not get any exceptions");
  }
  String aclStringBefore=rm.adminService.getAccessControlList().getAclString().trim();
  YarnConfiguration yarnConf=new YarnConfiguration();
  yarnConf.set(YarnConfiguration.YARN_ADMIN_ACL,"world:anyone:rwcda");
  uploadConfiguration(yarnConf,"yarn-site.xml");
  rm.adminService.refreshAdminAcls(RefreshAdminAclsRequest.newInstance());
  String aclStringAfter=rm.adminService.getAccessControlList().getAclString().trim();
  Assert.assertTrue(!aclStringAfter.equals(aclStringBefore));
  Assert.assertEquals(aclStringAfter,"world:anyone:rwcda");
}
