{
  if (packages == null) {
    getPackages();
  }
  if (!checkSerializationKey(metadata)) {
    return false;
  }
  Class<?> c=getClassFromMetadata(metadata);
  if (c == null) {
    return false;
  }
  return AvroReflectSerializable.class.isAssignableFrom(c) || packages.contains(c.getPackage().getName());
}
