{
  conf=new Configuration();
  conf.setInt(Constants.MAX_ERROR_RETRIES,2);
  conf.set(Constants.PROXY_HOST,"127.0.0.1");
  conf.set(Constants.SECURE_CONNECTIONS,"true");
  try {
    fs=S3ATestUtils.createTestFileSystem(conf);
    fail("Expected a connection error for proxy server");
  }
 catch (  AmazonClientException e) {
    if (!e.getMessage().contains("443")) {
      throw e;
    }
  }
  conf.set(Constants.SECURE_CONNECTIONS,"false");
  try {
    fs=S3ATestUtils.createTestFileSystem(conf);
    fail("Expected a connection error for proxy server");
  }
 catch (  AmazonClientException e) {
    if (!e.getMessage().contains("80")) {
      throw e;
    }
  }
}
