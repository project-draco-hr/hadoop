{
  final Configuration conf=new Configuration();
  final File file=tempDir.newFile("test.jks");
  final URI jks=ProviderUtils.nestURIForLocalJavaKeyStoreProvider(file.toURI());
  conf.set(CredentialProviderFactory.CREDENTIAL_PROVIDER_PATH,jks.toString());
  final CredentialProvider provider=CredentialProviderFactory.getProviders(conf).get(0);
  provider.createCredentialEntry(Constants.ACCESS_KEY,EXAMPLE_ID.toCharArray());
  provider.flush();
  S3AFileSystem s3afs=new S3AFileSystem();
  conf.set(Constants.SECRET_KEY,EXAMPLE_KEY);
  S3AFileSystem.AWSAccessKeys creds=s3afs.getAWSAccessKeys(new URI("s3a://foobar"),conf);
  assertEquals("AccessKey incorrect.",EXAMPLE_ID,creds.getAccessKey());
  assertEquals("SecretKey incorrect.",EXAMPLE_KEY,creds.getAccessSecret());
}
