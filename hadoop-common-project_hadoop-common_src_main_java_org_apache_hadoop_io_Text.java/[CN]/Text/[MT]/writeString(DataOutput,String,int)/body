{
  ByteBuffer bytes=encode(s);
  int length=bytes.limit();
  if (length >= maxLength) {
    throw new IOException("string was too long to write!  Expected " + "less than " + maxLength + " bytes, but got "+ length+ " bytes.");
  }
  WritableUtils.writeVInt(out,length);
  out.write(bytes.array(),0,length);
  return length;
}
