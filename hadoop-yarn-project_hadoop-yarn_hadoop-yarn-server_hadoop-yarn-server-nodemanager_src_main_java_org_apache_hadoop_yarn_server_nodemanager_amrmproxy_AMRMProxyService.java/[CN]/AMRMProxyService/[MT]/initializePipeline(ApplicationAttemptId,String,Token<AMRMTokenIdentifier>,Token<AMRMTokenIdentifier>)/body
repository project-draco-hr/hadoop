{
  RequestInterceptorChainWrapper chainWrapper=null;
synchronized (applPipelineMap) {
    if (applPipelineMap.containsKey(applicationAttemptId.getApplicationId())) {
      LOG.warn("Request to start an already existing appId was received. " + " This can happen if an application failed and a new attempt " + "was created on this machine.  ApplicationId: "+ applicationAttemptId.toString());
      return;
    }
    chainWrapper=new RequestInterceptorChainWrapper();
    this.applPipelineMap.put(applicationAttemptId.getApplicationId(),chainWrapper);
  }
  LOG.info("Initializing request processing pipeline for application. " + " ApplicationId:" + applicationAttemptId + " for the user: "+ user);
  RequestInterceptor interceptorChain=this.createRequestInterceptorChain();
  interceptorChain.init(createApplicationMasterContext(applicationAttemptId,user,amrmToken,localToken));
  chainWrapper.init(interceptorChain,applicationAttemptId);
}
