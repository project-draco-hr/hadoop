{
  Configuration conf=new Configuration();
  HadoopArchiveLogs hal=new HadoopArchiveLogs(conf);
  ApplicationReport app1=createAppReport(1);
  app1.setFinishTime(CLUSTER_TIMESTAMP - 5);
  ApplicationReport app2=createAppReport(2);
  app2.setFinishTime(CLUSTER_TIMESTAMP - 10);
  ApplicationReport app3=createAppReport(3);
  app3.setFinishTime(CLUSTER_TIMESTAMP + 5);
  ApplicationReport app4=createAppReport(4);
  app4.setFinishTime(CLUSTER_TIMESTAMP + 10);
  ApplicationReport app5=createAppReport(5);
  app5.setFinishTime(CLUSTER_TIMESTAMP);
  Assert.assertEquals(0,hal.eligibleApplications.size());
  hal.eligibleApplications.add(app1);
  hal.eligibleApplications.add(app2);
  hal.eligibleApplications.add(app3);
  hal.eligibleApplications.add(app4);
  hal.eligibleApplications.add(app5);
  hal.maxEligible=-1;
  hal.checkMaxEligible();
  Assert.assertEquals(5,hal.eligibleApplications.size());
  hal.maxEligible=4;
  hal.checkMaxEligible();
  Assert.assertEquals(4,hal.eligibleApplications.size());
  Assert.assertFalse(hal.eligibleApplications.contains(app4));
  hal.maxEligible=3;
  hal.checkMaxEligible();
  Assert.assertEquals(3,hal.eligibleApplications.size());
  Assert.assertFalse(hal.eligibleApplications.contains(app3));
  hal.maxEligible=2;
  hal.checkMaxEligible();
  Assert.assertEquals(2,hal.eligibleApplications.size());
  Assert.assertFalse(hal.eligibleApplications.contains(app5));
  hal.maxEligible=1;
  hal.checkMaxEligible();
  Assert.assertEquals(1,hal.eligibleApplications.size());
  Assert.assertFalse(hal.eligibleApplications.contains(app1));
}
