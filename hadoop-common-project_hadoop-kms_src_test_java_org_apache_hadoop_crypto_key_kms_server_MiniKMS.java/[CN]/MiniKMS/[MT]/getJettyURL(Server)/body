{
  boolean ssl=server.getConnectors()[0].getClass() == SslSocketConnectorSecure.class;
  try {
    String scheme=(ssl) ? "https" : "http";
    return new URL(scheme + "://" + server.getConnectors()[0].getHost()+ ":"+ server.getConnectors()[0].getLocalPort());
  }
 catch (  MalformedURLException ex) {
    throw new RuntimeException("It should never happen, " + ex.getMessage(),ex);
  }
}
