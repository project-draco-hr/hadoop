{
  StatisticsData data=threadData.get();
  if (data == null) {
    data=new StatisticsData(new WeakReference<Thread>(Thread.currentThread()));
    threadData.set(data);
synchronized (this) {
      if (allData == null) {
        allData=new LinkedList<StatisticsData>();
      }
      allData.add(data);
    }
  }
  return data;
}
