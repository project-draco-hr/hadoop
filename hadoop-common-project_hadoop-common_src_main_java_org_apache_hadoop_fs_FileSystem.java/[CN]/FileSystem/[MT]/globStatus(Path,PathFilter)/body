{
  String filename=pathPattern.toUri().getPath();
  List<FileStatus> allMatches=null;
  List<String> filePatterns=GlobExpander.expand(filename);
  for (  String filePattern : filePatterns) {
    Path path=new Path(filePattern.isEmpty() ? Path.CUR_DIR : filePattern);
    List<FileStatus> matches=globStatusInternal(path,filter);
    if (matches != null) {
      if (allMatches == null) {
        allMatches=matches;
      }
 else {
        allMatches.addAll(matches);
      }
    }
  }
  FileStatus[] results=null;
  if (allMatches != null) {
    results=allMatches.toArray(new FileStatus[allMatches.size()]);
  }
 else   if (filePatterns.size() > 1) {
    results=new FileStatus[0];
  }
  return results;
}
