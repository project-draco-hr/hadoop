{
  final String serviceName=getCanonicalServiceName();
  if (serviceName != null) {
    final Text service=new Text(serviceName);
    Token<?> token=credentials.getToken(service);
    if (token == null) {
      token=getDelegationToken(renewer);
      if (token != null) {
        tokens.add(token);
        credentials.addToken(service,token);
      }
    }
  }
  final FileSystem[] children=getChildFileSystems();
  if (children != null) {
    for (    final FileSystem fs : children) {
      fs.collectDelegationTokens(renewer,credentials,tokens);
    }
  }
}
