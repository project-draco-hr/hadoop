{
  List<Token<?>> allTokens=getDelegationTokens(renewer);
  List<Token<?>> newTokens=new ArrayList<Token<?>>();
  if (allTokens != null) {
    for (    Token<?> token : allTokens) {
      Token<?> knownToken=credentials.getToken(token.getService());
      if (knownToken == null) {
        newTokens.add(token);
      }
 else {
        newTokens.add(knownToken);
      }
    }
  }
  return newTokens;
}
