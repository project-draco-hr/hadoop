{
  int timeoutSecs=0;
  TaskAttemptReport report=attempt.getReport();
  while (!finalState.equals(report.getTaskAttemptState()) && timeoutSecs++ < 20) {
    System.out.println("TaskAttempt State is : " + report.getTaskAttemptState() + " Waiting for state : "+ finalState+ "   progress : "+ report.getProgress());
    report=attempt.getReport();
    Thread.sleep(500);
  }
  System.out.println("TaskAttempt State is : " + report.getTaskAttemptState());
  Assert.assertEquals("TaskAttempt state is not correct (timedout)",finalState,report.getTaskAttemptState());
}
