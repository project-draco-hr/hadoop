{
  updateConfiguredLeafQueues(queueManager,"queue1");
  updateConfiguredLeafQueues(queueManager,"queue1.queue2");
  assertNull(queueManager.getLeafQueue("queue1",false));
  assertNotNull(queueManager.getLeafQueue("queue1.queue2",false));
  updateConfiguredLeafQueues(queueManager,"queue1");
  assertNull(queueManager.getLeafQueue("queue1.queue2",false));
  assertNotNull(queueManager.getLeafQueue("queue1",false));
  notEmptyQueues.add(queueManager.getLeafQueue("queue1",false));
  updateConfiguredLeafQueues(queueManager,"queue1.queue2");
  assertNull(queueManager.getLeafQueue("queue1.queue2",false));
  assertNotNull(queueManager.getLeafQueue("queue1",false));
  notEmptyQueues.clear();
  updateConfiguredLeafQueues(queueManager,"queue1.queue2");
  notEmptyQueues.add(queueManager.getQueue("root.queue1"));
  updateConfiguredLeafQueues(queueManager,"queue1");
  assertNotNull(queueManager.getLeafQueue("queue1.queue2",false));
  assertNull(queueManager.getLeafQueue("queue1",false));
  updateConfiguredLeafQueues(queueManager,"default.queue3");
  assertNull(queueManager.getLeafQueue("default.queue3",false));
  assertNotNull(queueManager.getLeafQueue("default",false));
}
