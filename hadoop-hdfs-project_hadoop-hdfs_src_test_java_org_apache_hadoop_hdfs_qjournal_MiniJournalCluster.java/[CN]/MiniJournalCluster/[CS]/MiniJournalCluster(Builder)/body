{
  LOG.info("Starting MiniJournalCluster with " + b.numJournalNodes + " journal nodes");
  if (b.baseDir != null) {
    this.baseDir=new File(b.baseDir);
  }
 else {
    this.baseDir=new File(MiniDFSCluster.getBaseDirectory());
  }
  nodes=new JournalNode[b.numJournalNodes];
  ipcAddrs=new InetSocketAddress[b.numJournalNodes];
  httpAddrs=new InetSocketAddress[b.numJournalNodes];
  for (int i=0; i < b.numJournalNodes; i++) {
    if (b.format) {
      File dir=getStorageDir(i);
      LOG.debug("Fully deleting JN directory " + dir);
      FileUtil.fullyDelete(dir);
    }
    nodes[i]=new JournalNode();
    nodes[i].setConf(createConfForNode(b,i));
    nodes[i].start();
    ipcAddrs[i]=nodes[i].getBoundIpcAddress();
    httpAddrs[i]=nodes[i].getBoundHttpAddress();
  }
}
