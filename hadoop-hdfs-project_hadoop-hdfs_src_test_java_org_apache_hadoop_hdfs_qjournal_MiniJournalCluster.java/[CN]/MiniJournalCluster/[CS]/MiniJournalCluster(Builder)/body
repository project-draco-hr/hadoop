{
  LOG.info("Starting MiniJournalCluster with " + b.numJournalNodes + " journal nodes");
  if (b.baseDir != null) {
    this.baseDir=new File(b.baseDir);
  }
 else {
    this.baseDir=new File(MiniDFSCluster.getBaseDirectory());
  }
  nodes=new JNInfo[b.numJournalNodes];
  for (int i=0; i < b.numJournalNodes; i++) {
    if (b.format) {
      File dir=getStorageDir(i);
      LOG.debug("Fully deleting JN directory " + dir);
      FileUtil.fullyDelete(dir);
    }
    JournalNode jn=new JournalNode();
    jn.setConf(createConfForNode(b,i));
    jn.start();
    nodes[i]=new JNInfo(jn);
  }
}
