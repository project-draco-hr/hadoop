{
synchronized (services) {
    AppLevelAggregatorService service=services.get(appId);
    if (service == null) {
      try {
        service=new AppLevelAggregatorService(appId);
        service.init(getConfig());
        service.start();
        services.put(appId,service);
        LOG.info("the application aggregator service for " + appId + " was added");
        return true;
      }
 catch (      Exception e) {
        throw new YarnRuntimeException(e);
      }
    }
 else {
      String msg="the application aggregator service for " + appId + " already exists!";
      LOG.error(msg);
      return false;
    }
  }
}
