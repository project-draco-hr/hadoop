{
  for (  Map.Entry<Block,Queue<ReportedBlockInfo>> entry : queueByBlockId.entrySet()) {
    Queue<ReportedBlockInfo> newQueue=Lists.newLinkedList();
    Queue<ReportedBlockInfo> oldQueue=entry.getValue();
    while (!oldQueue.isEmpty()) {
      ReportedBlockInfo rbi=oldQueue.remove();
      if (!rbi.getStorageInfo().getDatanodeDescriptor().equals(dn)) {
        newQueue.add(rbi);
      }
 else {
        count--;
      }
    }
    queueByBlockId.put(entry.getKey(),newQueue);
  }
}
