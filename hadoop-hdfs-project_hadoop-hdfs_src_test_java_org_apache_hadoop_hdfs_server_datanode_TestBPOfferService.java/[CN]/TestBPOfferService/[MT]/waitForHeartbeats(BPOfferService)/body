{
  final int countAtStart[];
synchronized (heartbeatCounts) {
    countAtStart=Arrays.copyOf(heartbeatCounts,heartbeatCounts.length);
  }
  bpos.triggerHeartbeatForTests();
  GenericTestUtils.waitFor(new Supplier<Boolean>(){
    @Override public Boolean get(){
synchronized (heartbeatCounts) {
        for (int i=0; i < countAtStart.length; i++) {
          if (heartbeatCounts[i] <= countAtStart[i]) {
            return false;
          }
        }
        return true;
      }
    }
  }
,200,10000);
}
