{
  final String fakeBlockPoolId=fakeBlock.getBlockPoolId();
  final ArgumentCaptor<StorageReceivedDeletedBlocks[]> captor=ArgumentCaptor.forClass(StorageReceivedDeletedBlocks[].class);
  GenericTestUtils.waitFor(new Supplier<Boolean>(){
    @Override public Boolean get(){
      try {
        Mockito.verify(mockNN).blockReceivedAndDeleted(Mockito.<DatanodeRegistration>anyObject(),Mockito.eq(fakeBlockPoolId),captor.capture());
        return true;
      }
 catch (      Throwable t) {
        return false;
      }
    }
  }
,100,10000);
  return captor.getValue()[0].getBlocks();
}
