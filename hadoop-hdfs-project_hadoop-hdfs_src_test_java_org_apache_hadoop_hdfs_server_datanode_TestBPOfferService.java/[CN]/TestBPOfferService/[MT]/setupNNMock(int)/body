{
  DatanodeProtocolClientSideTranslatorPB mock=Mockito.mock(DatanodeProtocolClientSideTranslatorPB.class);
  Mockito.doReturn(new NamespaceInfo(1,FAKE_CLUSTERID,FAKE_BPID,0,HdfsConstants.LAYOUT_VERSION)).when(mock).versionRequest();
  Mockito.doReturn(new DatanodeRegistration("fake-node")).when(mock).registerDatanode(Mockito.any(DatanodeRegistration.class));
  Mockito.doAnswer(new HeartbeatAnswer(nnIdx)).when(mock).sendHeartbeat(Mockito.any(DatanodeRegistration.class),Mockito.anyLong(),Mockito.anyLong(),Mockito.anyLong(),Mockito.anyLong(),Mockito.anyInt(),Mockito.anyInt(),Mockito.anyInt());
  mockHaStatuses[nnIdx]=new NNHAStatusHeartbeat(State.STANDBY,0);
  return mock;
}
