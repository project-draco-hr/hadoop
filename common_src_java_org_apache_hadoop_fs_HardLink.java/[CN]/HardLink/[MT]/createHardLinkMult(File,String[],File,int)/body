{
  if (parentDir == null) {
    throw new IOException("invalid arguments to createHardLinkMult: parent directory is null");
  }
  if (linkDir == null) {
    throw new IOException("invalid arguments to createHardLinkMult: link directory is null");
  }
  if (fileBaseNames == null) {
    throw new IOException("invalid arguments to createHardLinkMult: " + "filename list can be empty but not null");
  }
  if (fileBaseNames.length == 0) {
    return 0;
  }
  if (!linkDir.exists()) {
    throw new FileNotFoundException(linkDir + " not found.");
  }
  int callCount=0;
  if (getLinkMultArgLength(parentDir,fileBaseNames,linkDir) > maxLength && fileBaseNames.length > 1) {
    String[] list1=Arrays.copyOf(fileBaseNames,fileBaseNames.length / 2);
    callCount+=createHardLinkMult(parentDir,list1,linkDir,maxLength);
    String[] list2=Arrays.copyOfRange(fileBaseNames,fileBaseNames.length / 2,fileBaseNames.length);
    callCount+=createHardLinkMult(parentDir,list2,linkDir,maxLength);
    return callCount;
  }
 else {
    callCount=1;
  }
  String[] hardLinkCommand=getHardLinkCommand.linkMult(fileBaseNames,linkDir);
  Process process=Runtime.getRuntime().exec(hardLinkCommand,null,parentDir);
  try {
    if (process.waitFor() != 0) {
      String errMsg=new BufferedReader(new InputStreamReader(process.getInputStream())).readLine();
      if (errMsg == null)       errMsg="";
      String inpMsg=new BufferedReader(new InputStreamReader(process.getErrorStream())).readLine();
      if (inpMsg == null)       inpMsg="";
      throw new IOException(errMsg + inpMsg);
    }
  }
 catch (  InterruptedException e) {
    throw new IOException(e);
  }
 finally {
    process.destroy();
  }
  return callCount;
}
