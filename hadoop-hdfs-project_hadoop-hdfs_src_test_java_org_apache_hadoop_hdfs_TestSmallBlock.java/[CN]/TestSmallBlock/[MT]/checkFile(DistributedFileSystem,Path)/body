{
  BlockLocation[] locations=fileSys.getFileBlockLocations(fileSys.getFileStatus(name),0,fileSize);
  assertEquals("Number of blocks",fileSize,locations.length);
  FSDataInputStream stm=fileSys.open(name);
  byte[] expected=new byte[fileSize];
  if (simulatedStorage) {
    LocatedBlocks lbs=fileSys.getClient().getLocatedBlocks(name.toString(),0,fileSize);
    DFSTestUtil.fillExpectedBuf(lbs,expected);
  }
 else {
    Random rand=new Random(seed);
    rand.nextBytes(expected);
  }
  byte[] actual=new byte[fileSize];
  stm.readFully(0,actual);
  checkAndEraseData(actual,0,expected,"Read Sanity Test");
  stm.close();
}
