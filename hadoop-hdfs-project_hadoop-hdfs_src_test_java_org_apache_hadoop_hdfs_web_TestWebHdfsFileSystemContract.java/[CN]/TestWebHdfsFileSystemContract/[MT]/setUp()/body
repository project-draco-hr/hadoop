{
  final String uri=WebHdfsFileSystem.SCHEME + "://" + conf.get(DFSConfigKeys.DFS_NAMENODE_HTTP_ADDRESS_KEY);
  final UserGroupInformation current=UserGroupInformation.getCurrentUser();
  final UserGroupInformation ugi=UserGroupInformation.createUserForTesting(current.getShortUserName() + "x",new String[]{"user"});
  fs=ugi.doAs(new PrivilegedExceptionAction<FileSystem>(){
    @Override public FileSystem run() throws Exception {
      return FileSystem.get(new URI(uri),conf);
    }
  }
);
  defaultWorkingDirectory=fs.getWorkingDirectory().toUri().getPath();
}
