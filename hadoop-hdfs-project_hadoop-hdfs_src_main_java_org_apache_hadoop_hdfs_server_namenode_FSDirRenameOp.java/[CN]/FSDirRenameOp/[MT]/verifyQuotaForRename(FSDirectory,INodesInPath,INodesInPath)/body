{
  if (!fsd.getFSNamesystem().isImageLoaded() || fsd.shouldSkipQuotaChecks()) {
    return;
  }
  int i=0;
  while (src.getINode(i) == dst.getINode(i)) {
    i++;
  }
  final Quota.Counts delta=src.getLastINode().computeQuotaUsage();
  final INode dstINode=dst.getLastINode();
  if (dstINode != null) {
    delta.subtract(dstINode.computeQuotaUsage());
  }
  FSDirectory.verifyQuota(dst,dst.length() - 1,delta.get(Quota.NAMESPACE),delta.get(Quota.DISKSPACE),src.getINode(i - 1));
}
