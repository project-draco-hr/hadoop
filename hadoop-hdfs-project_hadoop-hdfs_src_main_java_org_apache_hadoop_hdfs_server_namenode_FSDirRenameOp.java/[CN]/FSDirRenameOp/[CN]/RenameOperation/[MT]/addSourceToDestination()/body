{
  final INode dstParent=dstIIP.getINode(-2);
  srcChild=srcIIP.getLastINode();
  final byte[] dstChildName=dstIIP.getLastLocalName();
  final INode toDst;
  if (withCount == null) {
    srcChild.setLocalName(dstChildName);
    toDst=srcChild;
  }
 else {
    withCount.getReferredINode().setLocalName(dstChildName);
    int dstSnapshotId=dstIIP.getLatestSnapshotId();
    toDst=new INodeReference.DstReference(dstParent.asDirectory(),withCount,dstSnapshotId);
  }
  return fsd.addLastINodeNoQuotaCheck(dstIIP,toDst);
}
