{
  ByteBufferEncodingState bbeState=new ByteBufferEncodingState(this,inputs,outputs);
  boolean usingDirectBuffer=bbeState.usingDirectBuffer;
  int dataLen=bbeState.encodeLength;
  if (dataLen == 0) {
    return;
  }
  int[] inputPositions=new int[inputs.length];
  for (int i=0; i < inputPositions.length; i++) {
    if (inputs[i] != null) {
      inputPositions[i]=inputs[i].position();
    }
  }
  if (usingDirectBuffer) {
    doEncode(bbeState);
  }
 else {
    ByteArrayEncodingState baeState=bbeState.convertToByteArrayState();
    doEncode(baeState);
  }
  for (int i=0; i < inputs.length; i++) {
    if (inputs[i] != null) {
      inputs[i].position(inputPositions[i] + dataLen);
    }
  }
}
