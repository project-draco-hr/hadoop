{
  if (skipSecurity) {
    return insecureCreateForWrite(f,permissions);
  }
 else {
    try {
      FileDescriptor fd=NativeIO.open(f.getAbsolutePath(),NativeIO.O_WRONLY | NativeIO.O_CREAT | NativeIO.O_EXCL,permissions);
      return new FileOutputStream(fd);
    }
 catch (    NativeIOException nioe) {
      if (nioe.getErrno() == Errno.EEXIST) {
        throw new AlreadyExistsException(nioe);
      }
      throw nioe;
    }
  }
}
