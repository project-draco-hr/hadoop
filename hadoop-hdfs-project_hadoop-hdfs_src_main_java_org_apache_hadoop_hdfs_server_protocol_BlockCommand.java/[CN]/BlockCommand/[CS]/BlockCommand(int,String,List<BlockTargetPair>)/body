{
  super(action);
  this.poolId=poolId;
  blocks=new Block[blocktargetlist.size()];
  targets=new DatanodeInfo[blocks.length][];
  targetStorageTypes=new StorageType[blocks.length][];
  targetStorageIDs=new String[blocks.length][];
  for (int i=0; i < blocks.length; i++) {
    BlockTargetPair p=blocktargetlist.get(i);
    blocks[i]=p.block;
    targets[i]=DatanodeStorageInfo.toDatanodeInfos(p.targets);
    targetStorageTypes[i]=DatanodeStorageInfo.toStorageTypes(p.targets);
    targetStorageIDs[i]=DatanodeStorageInfo.toStorageIDs(p.targets);
  }
}
