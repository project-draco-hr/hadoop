{
  DummyService svc1=new DummyService(HAServiceState.ACTIVE);
  DummyService svc2=new DummyService(HAServiceState.STANDBY);
  NodeFencer fencer=setupFencer(AlwaysSucceedFencer.class.getName());
  AlwaysSucceedFencer.fenceCalled=0;
  FailoverController.failover(svc1,svc1Addr,svc2,svc2Addr,fencer,false,false);
  assertEquals(0,TestNodeFencer.AlwaysSucceedFencer.fenceCalled);
  assertEquals(HAServiceState.STANDBY,svc1.getServiceState());
  assertEquals(HAServiceState.ACTIVE,svc2.getServiceState());
  AlwaysSucceedFencer.fenceCalled=0;
  FailoverController.failover(svc2,svc2Addr,svc1,svc1Addr,fencer,false,false);
  assertEquals(0,TestNodeFencer.AlwaysSucceedFencer.fenceCalled);
  assertEquals(HAServiceState.ACTIVE,svc1.getServiceState());
  assertEquals(HAServiceState.STANDBY,svc2.getServiceState());
}
