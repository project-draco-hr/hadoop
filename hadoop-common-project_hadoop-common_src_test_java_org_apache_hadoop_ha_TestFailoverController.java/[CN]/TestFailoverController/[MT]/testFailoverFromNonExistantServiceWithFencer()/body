{
  HAServiceProtocol svc1=getProtocol("localhost:1234");
  DummyService svc2=new DummyService(HAServiceState.STANDBY);
  NodeFencer fencer=setupFencer(AlwaysSucceedFencer.class.getName());
  try {
    FailoverController.failover(svc1,svc1Addr,svc2,svc2Addr,fencer,false,false);
  }
 catch (  FailoverFailedException ffe) {
    fail("Non-existant active prevented failover");
  }
  assertEquals(HAServiceState.ACTIVE,svc2.getServiceState());
}
