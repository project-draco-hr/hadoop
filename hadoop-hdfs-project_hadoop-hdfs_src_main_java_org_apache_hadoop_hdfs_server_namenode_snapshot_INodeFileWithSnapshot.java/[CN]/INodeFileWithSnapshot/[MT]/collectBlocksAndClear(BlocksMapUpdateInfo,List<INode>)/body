{
  if (isCurrentFileDeleted() && getDiffs().asList().isEmpty()) {
    destroyAndCollectBlocks(info,removedINodes);
    return;
  }
  final long max;
  if (isCurrentFileDeleted()) {
    final FileDiff last=getDiffs().getLast();
    max=last == null ? 0 : last.getFileSize();
  }
 else {
    max=computeFileSize();
  }
  collectBlocksBeyondMax(max,info);
}
