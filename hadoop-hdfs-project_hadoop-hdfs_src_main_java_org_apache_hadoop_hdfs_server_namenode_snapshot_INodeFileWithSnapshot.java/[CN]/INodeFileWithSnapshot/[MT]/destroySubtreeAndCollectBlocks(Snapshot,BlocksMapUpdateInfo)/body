{
  if (snapshot == null) {
    clearReferences();
  }
 else {
    if (diffs.deleteSnapshotDiff(snapshot,collectedBlocks) == null) {
      return 0;
    }
  }
  Util.collectBlocksAndClear(this,collectedBlocks);
  return 1;
}
