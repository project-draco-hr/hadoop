{
  if (snapshot == null) {
    recordModification(prior);
    isCurrentFileDeleted=true;
    Util.collectBlocksAndClear(this,collectedBlocks);
  }
 else {
    return diffs.deleteSnapshotDiff(snapshot,prior,this,collectedBlocks);
  }
  return prior == null ? 1 : 0;
}
