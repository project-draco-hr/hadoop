{
  putEnvIfNotNull(environment,Environment.USER.name(),container.getUser());
  putEnvIfNotNull(environment,Environment.LOGNAME.name(),container.getUser());
  putEnvIfNotNull(environment,Environment.HOME.name(),conf.get(YarnConfiguration.NM_USER_HOME_DIR,YarnConfiguration.DEFAULT_NM_USER_HOME_DIR));
  putEnvIfNotNull(environment,Environment.PWD.name(),pwd.toString());
  putEnvIfNotNull(environment,Environment.HADOOP_CONF_DIR.name(),System.getenv(Environment.HADOOP_CONF_DIR.name()));
  putEnvIfNotNull(environment,ApplicationConstants.LOCAL_DIR_ENV,StringUtils.join(",",appDirs));
  if (!Shell.WINDOWS) {
    environment.put("JVM_PID","$$");
  }
  if (Shell.WINDOWS) {
    String inputClassPath=environment.get(Environment.CLASSPATH.name());
    if (inputClassPath != null && !inputClassPath.isEmpty()) {
      environment.put(Environment.CLASSPATH.name(),FileUtil.createJarWithClassPath(inputClassPath,pwd));
    }
  }
  String[] whitelist=conf.get(YarnConfiguration.NM_ENV_WHITELIST,YarnConfiguration.DEFAULT_NM_ENV_WHITELIST).split(",");
  for (  String whitelistEnvVariable : whitelist) {
    putEnvIfAbsent(environment,whitelistEnvVariable.trim());
  }
  Apps.setEnvFromInputString(environment,conf.get(YarnConfiguration.NM_ADMIN_USER_ENV,YarnConfiguration.DEFAULT_NM_ADMIN_USER_ENV));
}
