{
  Map<ApplicationId,Credentials> map=new HashMap<ApplicationId,Credentials>();
  for (  Map.Entry<ApplicationId,ByteBuffer> entry : systemCredentials.entrySet()) {
    Credentials credentials=new Credentials();
    DataInputByteBuffer buf=new DataInputByteBuffer();
    ByteBuffer buffer=entry.getValue();
    buffer.rewind();
    buf.reset(buffer);
    credentials.readTokenStorageStream(buf);
    map.put(entry.getKey(),credentials);
  }
  if (LOG.isDebugEnabled()) {
    for (    Map.Entry<ApplicationId,Credentials> entry : map.entrySet()) {
      LOG.debug("Retrieved credentials form RM for " + entry.getKey() + ": "+ entry.getValue().getAllTokens());
    }
  }
  return map;
}
