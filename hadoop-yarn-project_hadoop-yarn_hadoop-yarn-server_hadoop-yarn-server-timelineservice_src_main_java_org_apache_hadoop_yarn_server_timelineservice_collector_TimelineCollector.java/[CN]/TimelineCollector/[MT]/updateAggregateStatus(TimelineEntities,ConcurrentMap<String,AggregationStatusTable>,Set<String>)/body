{
  for (  TimelineEntity e : entities.getEntities()) {
    if ((typesToSkip != null && typesToSkip.contains(e.getType())) || e.getMetrics().isEmpty()) {
      continue;
    }
    AggregationStatusTable aggrTable=aggregationGroups.get(e.getType());
    if (aggrTable == null) {
      AggregationStatusTable table=new AggregationStatusTable();
      aggrTable=aggregationGroups.putIfAbsent(e.getType(),table);
      if (aggrTable == null) {
        aggrTable=table;
      }
    }
    aggrTable.update(e);
  }
}
