{
  checkDirectory(dir);
  SimpleDateFormat dateFormat=new SimpleDateFormat("-yyyyMMdd-HHmmssSSS");
  for (; ; ) {
    final File f=new File(dir,prefix + dateFormat.format(new Date(System.currentTimeMillis())) + ".txt");
    if (!f.exists())     return new PrintWriter(new OutputStreamWriter(new FileOutputStream(f),Charsets.UTF_8));
    try {
      Thread.sleep(10);
    }
 catch (    InterruptedException e) {
    }
  }
}
