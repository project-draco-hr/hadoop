{
  RMNodeImpl node=getDecommissioningNode();
  NodeHealthStatus status=NodeHealthStatus.newInstance(false,"sick",System.currentTimeMillis());
  List<ApplicationId> keepAliveApps=new ArrayList<>();
  keepAliveApps.add(BuilderUtils.newApplicationId(1,1));
  NodeStatus nodeStatus=NodeStatus.newInstance(node.getNodeID(),0,null,keepAliveApps,status,null,null,null);
  node.handle(new RMNodeStatusEvent(node.getNodeID(),nodeStatus,null));
  Assert.assertEquals(NodeState.DECOMMISSIONING,node.getState());
  nodeStatus.setKeepAliveApplications(null);
  node.handle(new RMNodeStatusEvent(node.getNodeID(),nodeStatus,null));
  Assert.assertEquals(NodeState.DECOMMISSIONED,node.getState());
}
