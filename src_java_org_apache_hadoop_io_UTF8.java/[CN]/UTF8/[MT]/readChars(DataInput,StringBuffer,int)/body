{
synchronized (OBUF) {
    OBUF.reset();
    OBUF.write(in,nBytes);
    byte[] bytes=OBUF.getData();
    int i=0;
    while (i < nBytes) {
      byte b=bytes[i++];
      if ((b & 0x80) == 0) {
        buffer.append((char)(b & 0x7F));
      }
 else       if ((b & 0xE0) != 0xE0) {
        buffer.append((char)(((b & 0x1F) << 6) | (bytes[i++] & 0x3F)));
      }
 else {
        buffer.append((char)(((b & 0x0F) << 12) | ((bytes[i++] & 0x3F) << 6) | (bytes[i++] & 0x3F)));
      }
    }
  }
}
