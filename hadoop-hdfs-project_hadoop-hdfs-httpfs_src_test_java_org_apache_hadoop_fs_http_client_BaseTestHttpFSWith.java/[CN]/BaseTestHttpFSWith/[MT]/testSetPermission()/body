{
  FileSystem fs=FileSystem.get(getProxiedFSConf());
  Path path=new Path(getProxiedFSTestDir(),"foodir");
  fs.mkdirs(path);
  fs=getHttpFSFileSystem();
  FsPermission permission1=new FsPermission(FsAction.READ_WRITE,FsAction.NONE,FsAction.NONE);
  fs.setPermission(path,permission1);
  fs.close();
  fs=FileSystem.get(getProxiedFSConf());
  FileStatus status1=fs.getFileStatus(path);
  fs.close();
  FsPermission permission2=status1.getPermission();
  assertEquals(permission2,permission1);
  fs=getHttpFSFileSystem();
  permission1=new FsPermission(FsAction.READ_WRITE,FsAction.NONE,FsAction.NONE,true);
  fs.setPermission(path,permission1);
  fs.close();
  fs=FileSystem.get(getProxiedFSConf());
  status1=fs.getFileStatus(path);
  fs.close();
  permission2=status1.getPermission();
  assertTrue(permission2.getStickyBit());
  assertEquals(permission2,permission1);
}
