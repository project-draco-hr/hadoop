{
  if (!isLocalFS()) {
    FileSystem fs=FileSystem.get(getProxiedFSConf());
    fs.mkdirs(getProxiedFSTestDir());
    Path path=new Path(getProxiedFSTestDir(),"foo.txt");
    OutputStream os=fs.create(path);
    os.write(1);
    os.close();
    fs.close();
    fs=getHttpFSFileSystem();
    os=fs.append(new Path(path.toUri().getPath()));
    os.write(2);
    os.close();
    fs.close();
    fs=FileSystem.get(getProxiedFSConf());
    InputStream is=fs.open(path);
    Assert.assertEquals(is.read(),1);
    Assert.assertEquals(is.read(),2);
    Assert.assertEquals(is.read(),-1);
    is.close();
    fs.close();
  }
}
