{
  long runUntil=eventQueue.getLastCheckTime();
  LOG.debug("Running task tracker until simulation time=" + runUntil);
  List<SimulatorEvent> events=taskTracker.init(simulationStartTime);
  eventQueue.addAll(events);
  while (true) {
    SimulatorEvent currentEvent=eventQueue.get();
    long now=currentEvent.getTimeStamp();
    LOG.debug("Number of events to deliver=" + (eventQueue.getSize() + 1) + ", now="+ now);
    if (now > runUntil) {
      break;
    }
    LOG.debug("Calling accept(), event=" + currentEvent + ", now="+ now);
    events=taskTracker.accept(currentEvent);
    LOG.debug("Accept() returned " + events.size() + " new event(s)");
    for (    SimulatorEvent newEvent : events) {
      LOG.debug("New event " + newEvent);
    }
    eventQueue.addAll(events);
    LOG.debug("Done checking and enqueuing new events");
  }
  eventQueue.checkMissingExpected();
  jobTracker.checkMissingHeartbeats();
}
