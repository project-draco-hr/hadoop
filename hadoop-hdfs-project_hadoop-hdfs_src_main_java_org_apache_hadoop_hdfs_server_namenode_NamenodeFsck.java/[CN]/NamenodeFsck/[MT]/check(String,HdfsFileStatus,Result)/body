{
  String path=file.getFullName(parent);
  if (file.isDir()) {
    checkDir(path,res);
    return;
  }
  if (file.isSymlink()) {
    if (showFiles) {
      out.println(path + " <symlink>");
    }
    res.totalSymlinks++;
    return;
  }
  LocatedBlocks blocks=getBlockLocations(path,file);
  if (blocks == null) {
    return;
  }
  collectFileSummary(path,file,res,blocks);
  collectBlocksSummary(parent,file,res,blocks);
}
