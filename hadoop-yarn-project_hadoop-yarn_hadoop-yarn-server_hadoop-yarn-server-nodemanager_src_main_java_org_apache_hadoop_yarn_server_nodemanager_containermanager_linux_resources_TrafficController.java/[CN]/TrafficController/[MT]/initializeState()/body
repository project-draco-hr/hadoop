{
  LOG.info("Initializing tc state.");
  BatchBuilder builder=new BatchBuilder(PrivilegedOperation.OperationType.TC_MODIFY_STATE).addRootQDisc().addCGroupFilter().addClassToRootQDisc(rootBandwidthMbit).addDefaultClass(defaultClassBandwidthMbit,rootBandwidthMbit).addYARNRootClass(yarnBandwidthMbit,yarnBandwidthMbit);
  PrivilegedOperation op=builder.commitBatchToTempFile();
  try {
    privilegedOperationExecutor.executePrivilegedOperation(op,false);
  }
 catch (  PrivilegedOperationException e) {
    LOG.warn("Failed to bootstrap outbound bandwidth configuration");
    throw new ResourceHandlerException("Failed to bootstrap outbound bandwidth configuration",e);
  }
}
