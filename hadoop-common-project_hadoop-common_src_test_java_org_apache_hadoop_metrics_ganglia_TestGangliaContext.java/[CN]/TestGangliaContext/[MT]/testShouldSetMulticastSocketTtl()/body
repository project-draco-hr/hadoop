{
  GangliaContext context=new GangliaContext();
  ContextFactory factory=ContextFactory.getFactory();
  factory.setAttribute("gangliaContext.multicast","true");
  factory.setAttribute("gangliaContext.multicast.ttl","10");
  context.init("gangliaContext",factory);
  MulticastSocket multicastSocket=(MulticastSocket)context.datagramSocket;
  assertEquals("Did not set TTL",multicastSocket.getTimeToLive(),10);
}
