{
  Path workDir=new Path(client.printWorkingDirectory());
  Path absoluteSrc=makeAbsolute(workDir,src);
  Path absoluteDst=makeAbsolute(workDir,dst);
  if (!exists(client,absoluteSrc)) {
    throw new FileNotFoundException("Source path " + src + " does not exist");
  }
  if (isDirectory(absoluteDst)) {
    absoluteDst=new Path(absoluteDst,absoluteSrc.getName());
  }
  if (exists(client,absoluteDst)) {
    throw new FileAlreadyExistsException("Destination path " + dst + " already exists");
  }
  String parentSrc=absoluteSrc.getParent().toUri().toString();
  String parentDst=absoluteDst.getParent().toUri().toString();
  if (isParentOf(absoluteSrc,absoluteDst)) {
    throw new IOException("Cannot rename " + absoluteSrc + " under itself"+ " : "+ absoluteDst);
  }
  if (!parentSrc.equals(parentDst)) {
    throw new IOException("Cannot rename source: " + absoluteSrc + " to "+ absoluteDst+ " -"+ E_SAME_DIRECTORY_ONLY);
  }
  String from=absoluteSrc.getName();
  String to=absoluteDst.getName();
  client.changeWorkingDirectory(parentSrc);
  boolean renamed=client.rename(from,to);
  return renamed;
}
