{
  StopContainerResponse response=recordFactory.newRecordInstance(StopContainerResponse.class);
  ContainerId containerID=request.getContainerId();
  Container container=this.context.getContainers().get(containerID);
  if (container == null) {
    LOG.warn("Trying to stop unknown container " + containerID);
    String userName;
    try {
      userName=UserGroupInformation.getCurrentUser().getUserName();
    }
 catch (    IOException e) {
      LOG.error("Error finding userName",e);
      return response;
    }
    NMAuditLogger.logFailure(userName,AuditConstants.STOP_CONTAINER,"ContainerManagerImpl","Trying to stop unknown container!",containerID.getApplicationAttemptId().getApplicationId(),containerID);
    return response;
  }
  dispatcher.getEventHandler().handle(new ContainerKillEvent(containerID,"Container killed by the ApplicationMaster."));
  NMAuditLogger.logSuccess(container.getUser(),AuditConstants.STOP_CONTAINER,"ContainerManageImpl",containerID.getApplicationAttemptId().getApplicationId(),containerID);
  nodeStatusUpdater.sendOutofBandHeartBeat();
  return response;
}
