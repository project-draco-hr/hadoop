{
  byte[] bytes=new byte[len];
  r.nextBytes(bytes);
  File archiveFile=new File(p.toUri().getPath() + ".jar");
  archiveFile.createNewFile();
  JarOutputStream out=new JarOutputStream(new FileOutputStream(archiveFile));
  out.putNextEntry(new JarEntry(p.getName()));
  out.write(bytes);
  out.closeEntry();
  out.close();
  LocalResource ret=recordFactory.newRecordInstance(LocalResource.class);
  ret.setResource(ConverterUtils.getYarnUrlFromPath(new Path(p.toString() + ".jar")));
  ret.setSize(len);
  ret.setType(LocalResourceType.ARCHIVE);
  ret.setVisibility(vis);
  ret.setTimestamp(files.getFileStatus(new Path(p.toString() + ".jar")).getModificationTime());
  return ret;
}
