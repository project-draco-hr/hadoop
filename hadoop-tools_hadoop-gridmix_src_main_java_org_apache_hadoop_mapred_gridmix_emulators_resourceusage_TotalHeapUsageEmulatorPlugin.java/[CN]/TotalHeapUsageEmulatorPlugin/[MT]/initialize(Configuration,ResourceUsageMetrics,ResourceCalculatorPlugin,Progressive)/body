{
  this.progress=progress;
  targetHeapUsageInMB=metrics.getHeapUsage() / ONE_MB;
  if (targetHeapUsageInMB <= 0) {
    enabled=false;
    return;
  }
 else {
    emulatorCore.initialize(monitor,targetHeapUsageInMB);
    enabled=true;
  }
  emulationInterval=conf.getFloat(HEAP_EMULATION_PROGRESS_INTERVAL,DEFAULT_EMULATION_PROGRESS_INTERVAL);
  minFreeHeapRatio=conf.getFloat(MIN_HEAP_FREE_RATIO,DEFAULT_MIN_FREE_HEAP_RATIO);
  heapLoadRatio=conf.getFloat(HEAP_LOAD_RATIO,DEFAULT_HEAP_LOAD_RATIO);
  prevEmulationProgress=0;
}
