{
  Configuration conf=new HdfsConfiguration();
  conf.set(DFSConfigKeys.DFS_NAMENODE_HTTPS_ADDRESS_KEY,"localhost:0");
  conf.setBoolean(DFSConfigKeys.DFS_XFRAME_OPTION_ENABLED,enabled);
  if (value != null) {
    conf.set(DFSConfigKeys.DFS_XFRAME_OPTION_VALUE,value);
  }
  InetSocketAddress addr=InetSocketAddress.createUnresolved("localhost",0);
  NameNodeHttpServer server=null;
  server=new NameNodeHttpServer(conf,null,addr);
  server.start();
  URL url=getServerURL(server.getHttpServer());
  HttpURLConnection conn=(HttpURLConnection)url.openConnection();
  conn.connect();
  return conn;
}
