{
  if (a == null) {
    throw new NullPointerException("Input array can not be null");
  }
  if (a.length < size) {
    a=(U[])java.lang.reflect.Array.newInstance(a.getClass().getComponentType(),size);
  }
  int currentIndex=0;
  for (int i=0; i < entries.length; i++) {
    LinkedElement<T> current=entries[i];
    while (current != null) {
      a[currentIndex++]=(U)current.element;
      current=current.next;
    }
  }
  return a;
}
