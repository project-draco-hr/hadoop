{
  lock.lock();
  boolean needShutdown=false;
  try {
    this.isDiskBalancerEnabled=false;
    this.currentResult=Result.NO_PLAN;
    if ((this.future != null) && (!this.future.isDone())) {
      this.currentResult=Result.PLAN_CANCELLED;
      this.blockMover.setExitFlag();
      scheduler.shutdown();
      needShutdown=true;
    }
  }
  finally {
    lock.unlock();
  }
  if (needShutdown) {
    shutdownExecutor();
  }
}
