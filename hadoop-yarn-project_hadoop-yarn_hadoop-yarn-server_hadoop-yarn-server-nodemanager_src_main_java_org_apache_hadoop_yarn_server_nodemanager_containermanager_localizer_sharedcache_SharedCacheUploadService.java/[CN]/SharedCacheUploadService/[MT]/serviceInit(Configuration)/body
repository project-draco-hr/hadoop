{
  enabled=conf.getBoolean(YarnConfiguration.SHARED_CACHE_ENABLED,YarnConfiguration.DEFAULT_SHARED_CACHE_ENABLED);
  if (enabled) {
    int threadCount=conf.getInt(YarnConfiguration.SHARED_CACHE_NM_UPLOADER_THREAD_COUNT,YarnConfiguration.DEFAULT_SHARED_CACHE_NM_UPLOADER_THREAD_COUNT);
    uploaderPool=Executors.newFixedThreadPool(threadCount,new ThreadFactoryBuilder().setNameFormat("Shared cache uploader #%d").build());
    scmClient=createSCMClient(conf);
    try {
      fs=FileSystem.get(conf);
      localFs=FileSystem.getLocal(conf);
    }
 catch (    IOException e) {
      LOG.error("Unexpected exception in getting the filesystem",e);
      throw new RuntimeException(e);
    }
  }
  super.serviceInit(conf);
}
