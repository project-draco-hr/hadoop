{
  Configuration conf=new HdfsConfiguration();
  FileSystem.setDefaultUri(conf,"hdfs://foo/");
  assertEquals(DFSUtilClient.getNNAddress(conf).getPort(),HdfsClientConfigKeys.DFS_NAMENODE_RPC_PORT_DEFAULT);
  FileSystem.setDefaultUri(conf,"hdfs://foo:555/");
  assertEquals(DFSUtilClient.getNNAddress(conf).getPort(),555);
  FileSystem.setDefaultUri(conf,"foo");
  assertEquals(DFSUtilClient.getNNAddress(conf).getPort(),HdfsClientConfigKeys.DFS_NAMENODE_RPC_PORT_DEFAULT);
}
