{
  HttpURLConnection conn;
  try {
    AuthenticatedURL authUrl=new AuthenticatedURL(new PseudoAuthenticator(),sslFactory);
    conn=authUrl.openConnection(url,new AuthenticatedURL.Token());
  }
 catch (  AuthenticationException ex) {
    throw new IOException(ex);
  }
  conn.setUseCaches(false);
  conn.setRequestMethod(method);
  if (method.equals(HTTP_POST) || method.equals(HTTP_PUT)) {
    conn.setDoOutput(true);
  }
  conn=configureConnection(conn);
  return conn;
}
