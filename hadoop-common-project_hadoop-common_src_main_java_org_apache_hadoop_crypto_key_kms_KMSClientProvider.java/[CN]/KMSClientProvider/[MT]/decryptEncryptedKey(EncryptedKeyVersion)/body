{
  checkNotNull(encryptedKeyVersion.getEncryptionKeyVersionName(),"versionName");
  checkNotNull(encryptedKeyVersion.getEncryptedKeyIv(),"iv");
  Preconditions.checkArgument(encryptedKeyVersion.getEncryptedKeyVersion().getVersionName().equals(KeyProviderCryptoExtension.EEK),"encryptedKey version name must be '%s', is '%s'",KeyProviderCryptoExtension.EEK,encryptedKeyVersion.getEncryptedKeyVersion().getVersionName());
  checkNotNull(encryptedKeyVersion.getEncryptedKeyVersion(),"encryptedKey");
  Map<String,String> params=new HashMap<String,String>();
  params.put(KMSRESTConstants.EEK_OP,KMSRESTConstants.EEK_DECRYPT);
  Map<String,Object> jsonPayload=new HashMap<String,Object>();
  jsonPayload.put(KMSRESTConstants.NAME_FIELD,encryptedKeyVersion.getEncryptionKeyName());
  jsonPayload.put(KMSRESTConstants.IV_FIELD,Base64.encodeBase64String(encryptedKeyVersion.getEncryptedKeyIv()));
  jsonPayload.put(KMSRESTConstants.MATERIAL_FIELD,Base64.encodeBase64String(encryptedKeyVersion.getEncryptedKeyVersion().getMaterial()));
  URL url=createURL(KMSRESTConstants.KEY_VERSION_RESOURCE,encryptedKeyVersion.getEncryptionKeyVersionName(),KMSRESTConstants.EEK_SUB_RESOURCE,params);
  HttpURLConnection conn=createConnection(url,HTTP_POST);
  conn.setRequestProperty(CONTENT_TYPE,APPLICATION_JSON_MIME);
  Map response=call(conn,jsonPayload,HttpURLConnection.HTTP_OK,Map.class);
  return parseJSONKeyVersion(response);
}
