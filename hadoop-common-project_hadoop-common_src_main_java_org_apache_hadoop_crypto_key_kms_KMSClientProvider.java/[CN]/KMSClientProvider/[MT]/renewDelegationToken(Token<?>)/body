{
  try {
    final String doAsUser=getDoAsUser();
    final DelegationTokenAuthenticatedURL.Token token=generateDelegationToken(dToken);
    final URL url=createURL(null,null,null,null);
    LOG.debug("Renewing delegation token {} with url:{}, as:{}",token,url,doAsUser);
    final DelegationTokenAuthenticatedURL authUrl=new DelegationTokenAuthenticatedURL(configurator);
    return actualUgi.doAs(new PrivilegedExceptionAction<Long>(){
      @Override public Long run() throws Exception {
        return authUrl.renewDelegationToken(url,token,doAsUser);
      }
    }
);
  }
 catch (  Exception ex) {
    if (ex instanceof IOException) {
      throw (IOException)ex;
    }
 else {
      throw new IOException(ex);
    }
  }
}
