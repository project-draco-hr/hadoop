{
switch (getContainerState()) {
case EXITED_WITH_SUCCESS:
    metrics.endRunningContainer();
  metrics.completedContainer();
break;
case EXITED_WITH_FAILURE:
metrics.endRunningContainer();
case LOCALIZATION_FAILED:
metrics.failedContainer();
break;
case CONTAINER_CLEANEDUP_AFTER_KILL:
metrics.endRunningContainer();
case NEW:
metrics.killedContainer();
}
metrics.releaseContainer(getLaunchContext().getResource());
ContainerId containerID=getContainerID();
EventHandler eventHandler=dispatcher.getEventHandler();
eventHandler.handle(new ApplicationContainerFinishedEvent(containerID));
eventHandler.handle(new ContainerStopMonitoringEvent(containerID));
eventHandler.handle(new LogAggregatorContainerFinishedEvent(containerID,exitCode));
}
