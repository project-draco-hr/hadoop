{
  Configuration conf=new Configuration();
  conf.set(MRJobConfig.MR_JOB_END_NOTIFICATION_URL,"http://nonexistent");
  conf.set(MRJobConfig.MR_JOB_END_NOTIFICATION_MAX_ATTEMPTS,"3");
  conf.set(MRJobConfig.MR_JOB_END_RETRY_ATTEMPTS,"3");
  JobReport jobReport=Mockito.mock(JobReport.class);
  this.notificationCount=0;
  this.setConf(conf);
  this.notify(jobReport);
  Assert.assertEquals("Only 3 retries were expected but was : " + this.notificationCount,this.notificationCount,3);
}
