{
  ActiveNodeInfo proto;
  try {
    proto=ActiveNodeInfo.parseFrom(data);
  }
 catch (  InvalidProtocolBufferException e) {
    throw new RuntimeException("Invalid data in ZK: " + StringUtils.byteToHexString(data));
  }
  NNHAServiceTarget ret=new NNHAServiceTarget(getConf(),proto.getNameserviceId(),proto.getNamenodeId());
  InetSocketAddress addressFromProtobuf=new InetSocketAddress(proto.getHostname(),proto.getPort());
  if (!addressFromProtobuf.equals(ret.getAddress())) {
    throw new RuntimeException("Mismatched address stored in ZK for " + ret + ": Stored protobuf was "+ proto+ ", address from our own "+ "configuration for this NameNode was "+ ret.getAddress());
  }
  ret.setZkfcPort(proto.getZkfcPort());
  return ret;
}
