{
  long rejected=SharedCacheUploaderMetrics.getInstance().getRejectUploads();
  store.addResource("key1","foo.jar");
  SCMUploaderNotifyRequest request=recordFactory.newRecordInstance(SCMUploaderNotifyRequest.class);
  request.setResourceKey("key1");
  request.setFilename("foobar.jar");
  assertFalse(proxy.notify(request).getAccepted());
  Collection<SharedCacheResourceReference> set=store.getResourceReferences("key1");
  assertNotNull(set);
  assertEquals(0,set.size());
  assertEquals("NM upload metrics aren't updated.",1,SharedCacheUploaderMetrics.getInstance().getRejectUploads() - rejected);
}
