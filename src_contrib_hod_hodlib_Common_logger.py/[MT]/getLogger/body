def getLogger(cfg, logName):
    if (cfg['debug'] > 0):
        user = cfg['userid']
        baseLogger = hodLog(logName)
        log = baseLogger.add_logger('main')
        if cfg.has_key('log-dir'):
            serviceId = os.getenv('PBS_JOBID')
            if serviceId:
                logDir = os.path.join(cfg['log-dir'], ('%s.%s' % (user, serviceId)))
            else:
                logDir = os.path.join(cfg['log-dir'], user)
            if (not os.path.exists(logDir)):
                os.mkdir(logDir)
            baseLogger.add_file(logDirectory=logDir, level=cfg['debug'], addToLoggerNames=('main',))
        try:
            if (cfg.has_key('stream') and cfg['stream']):
                baseLogger.add_stream(level=cfg['debug'], addToLoggerNames=('main',))
            if cfg.has_key('syslog-address'):
                baseLogger.add_syslog(cfg['syslog-address'], level=cfg['debug'], addToLoggerNames=('main',))
        except Exception as e:
            log.critical(('%s Logger failed to initialise. Reason : %s' % (logName, e)))
            pass
        return log
