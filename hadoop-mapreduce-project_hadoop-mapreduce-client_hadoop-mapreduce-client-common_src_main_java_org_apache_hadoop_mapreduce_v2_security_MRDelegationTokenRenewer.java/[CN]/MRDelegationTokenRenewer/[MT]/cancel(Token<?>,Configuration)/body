{
  org.apache.hadoop.yarn.api.records.Token dToken=org.apache.hadoop.yarn.api.records.Token.newInstance(token.getIdentifier(),token.getKind().toString(),token.getPassword(),token.getService().toString());
  MRClientProtocol histProxy=instantiateHistoryProxy(conf,SecurityUtil.getTokenServiceAddr(token));
  try {
    CancelDelegationTokenRequest request=Records.newRecord(CancelDelegationTokenRequest.class);
    request.setDelegationToken(dToken);
    histProxy.cancelDelegationToken(request);
  }
  finally {
    stopHistoryProxy(histProxy);
  }
}
