{
  ServiceRecord app=createRecord("app1",PersistencePolicies.APPLICATION,"app",null);
  ServiceRecord container=createRecord("container1",PersistencePolicies.CONTAINER,"container",null);
  operations.bind("/app",app,BindFlags.OVERWRITE);
  operations.bind("/app/container",container,BindFlags.OVERWRITE);
  try {
    int p=purge("/","app1",PersistencePolicies.APPLICATION,RegistryAdminService.PurgePolicy.FailOnChildren);
    fail("expected a failure, got a purge count of " + p);
  }
 catch (  PathIsNotEmptyDirectoryException expected) {
  }
}
