{
  Path dir=new Path(testBaseDir1());
  Path file=new Path(testBaseDir1(),"file");
  Path linkToDir=new Path(testBaseDir2(),"linkToDir");
  Path subDir=new Path(linkToDir,"subDir");
  createAndWriteFile(file);
  fc.createSymlink(dir,linkToDir,false);
  fc.mkdir(subDir,FileContext.DEFAULT_PERM,false);
  try {
    fc.rename(file,subDir);
    fail("Renamed file to a directory");
  }
 catch (  IOException e) {
    assertTrue(unwrapException(e) instanceof IOException);
  }
  assertTrue(exists(fc,file));
}
