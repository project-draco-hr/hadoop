{
  server.setLogSlowRPC(false);
  TestRpcService2 client=getClient2();
  for (int x=0; x < 10000; x++) {
    EmptyRequestProto emptyRequest=EmptyRequestProto.newBuilder().build();
    client.ping2(null,emptyRequest);
  }
  RpcMetrics rpcMetrics=server.getRpcMetrics();
  assertTrue(rpcMetrics.getProcessingSampleCount() > 999L);
  long before=rpcMetrics.getRpcSlowCalls();
  TestProtos.SleepRequestProto sleepRequest=TestProtos.SleepRequestProto.newBuilder().setMilliSeconds(SLEEP_DURATION).build();
  TestProtos.SleepResponseProto Response=client.sleep(null,sleepRequest);
  long after=rpcMetrics.getRpcSlowCalls();
  assertEquals(before,after);
}
