{
  TestRpcService2 client=getClient2();
  for (int x=0; x < 10000; x++) {
    try {
      EmptyRequestProto emptyRequest=EmptyRequestProto.newBuilder().build();
      client.ping2(null,emptyRequest);
    }
 catch (    Exception ex) {
      throw ex;
    }
  }
  RpcMetrics rpcMetrics=server.getRpcMetrics();
  assertTrue(rpcMetrics.getProcessingSampleCount() > 999L);
  long before=rpcMetrics.getRpcSlowCalls();
  TestProtos.SleepRequestProto sleepRequest=TestProtos.SleepRequestProto.newBuilder().setMilliSeconds(SLEEP_DURATION * 3).build();
  TestProtos.SleepResponseProto Response=client.sleep(null,sleepRequest);
  long after=rpcMetrics.getRpcSlowCalls();
  Assert.assertEquals(before + 1L,after);
}
