{
  TestRpcService2 client=getClient2();
  EmptyRequestProto emptyRequest=EmptyRequestProto.newBuilder().build();
  client.ping2(null,emptyRequest);
  EchoRequestProto echoRequest=EchoRequestProto.newBuilder().setMessage("hello").build();
  EchoResponseProto echoResponse=client.echo2(null,echoRequest);
  Assert.assertEquals(echoResponse.getMessage(),"hello");
  MetricsRecordBuilder rpcMetrics=getMetrics(server.getRpcMetrics().name());
  assertCounterGt("RpcQueueTimeNumOps",0L,rpcMetrics);
  assertCounterGt("RpcProcessingTimeNumOps",0L,rpcMetrics);
  MetricsRecordBuilder rpcDetailedMetrics=getMetrics(server.getRpcDetailedMetrics().name());
  assertCounterGt("Echo2NumOps",0L,rpcDetailedMetrics);
}
