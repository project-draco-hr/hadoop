{
  Configuration conf=new Configuration();
  RPC.Server server=startRPCServer(conf);
  BlockingInterface client=getClient(conf,server.getListenerAddress());
  EmptyRequestProto emptyRequest=EmptyRequestProto.newBuilder().build();
  client.ping(null,emptyRequest);
  EchoRequestProto echoRequest=EchoRequestProto.newBuilder().setMessage("hello").build();
  EchoResponseProto echoResponse=client.echo(null,echoRequest);
  Assert.assertEquals(echoResponse.getMessage(),"hello");
  try {
    client.error(null,emptyRequest);
    Assert.fail("Expected exception is not thrown");
  }
 catch (  ServiceException e) {
    RemoteException re=(RemoteException)e.getCause();
    re.printStackTrace();
    RpcServerException rse=(RpcServerException)re.unwrapRemoteException(RpcServerException.class);
    rse.printStackTrace();
  }
}
