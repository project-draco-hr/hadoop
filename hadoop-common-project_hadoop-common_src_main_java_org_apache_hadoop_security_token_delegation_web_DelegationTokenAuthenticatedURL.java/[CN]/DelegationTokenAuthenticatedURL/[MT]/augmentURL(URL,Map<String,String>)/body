{
  if (params != null && params.size() > 0) {
    String urlStr=url.toExternalForm();
    StringBuilder sb=new StringBuilder(urlStr);
    String separator=(urlStr.contains("?")) ? "&" : "?";
    for (    Map.Entry<String,String> param : params.entrySet()) {
      sb.append(separator).append(param.getKey()).append("=").append(param.getValue());
      separator="&";
    }
    url=new URL(sb.toString());
  }
  return url;
}
