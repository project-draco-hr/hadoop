{
  Preconditions.checkNotNull(url,"url");
  Preconditions.checkNotNull(token,"token");
  try {
    token.delegationToken=((KerberosDelegationTokenAuthenticator)getAuthenticator()).getDelegationToken(url,token,renewer,doAsUser);
    return token.delegationToken;
  }
 catch (  IOException ex) {
    token.delegationToken=null;
    throw ex;
  }
}
