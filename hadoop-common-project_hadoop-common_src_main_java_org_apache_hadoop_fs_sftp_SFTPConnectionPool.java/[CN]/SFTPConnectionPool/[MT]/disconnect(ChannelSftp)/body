{
  if (channel != null) {
    boolean closeConnection=false;
synchronized (this) {
      if (liveConnectionCount > maxConnection) {
        --liveConnectionCount;
        con2infoMap.remove(channel);
        closeConnection=true;
      }
    }
    if (closeConnection) {
      if (channel.isConnected()) {
        try {
          Session session=channel.getSession();
          channel.disconnect();
          session.disconnect();
        }
 catch (        JSchException e) {
          throw new IOException(StringUtils.stringifyException(e));
        }
      }
    }
 else {
      returnToPool(channel);
    }
  }
}
