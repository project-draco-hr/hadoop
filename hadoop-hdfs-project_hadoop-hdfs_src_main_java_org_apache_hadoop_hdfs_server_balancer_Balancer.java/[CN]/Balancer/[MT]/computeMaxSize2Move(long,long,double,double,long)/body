{
  final double diff=Math.min(threshold,Math.abs(utilizationDiff));
  long maxSizeToMove=percentage2bytes(diff,capacity);
  if (utilizationDiff < 0) {
    maxSizeToMove=Math.min(remaining,maxSizeToMove);
  }
  return Math.min(max,maxSizeToMove);
}
