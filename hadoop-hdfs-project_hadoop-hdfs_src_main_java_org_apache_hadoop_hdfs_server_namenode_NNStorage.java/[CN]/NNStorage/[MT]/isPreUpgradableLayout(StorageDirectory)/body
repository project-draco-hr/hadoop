{
  if (disablePreUpgradableLayoutCheck) {
    return false;
  }
  File oldImageDir=new File(sd.getRoot(),"image");
  if (!oldImageDir.exists()) {
    return false;
  }
  File oldF=new File(oldImageDir,"fsimage");
  RandomAccessFile oldFile=new RandomAccessFile(oldF,"rws");
  try {
    oldFile.seek(0);
    int oldVersion=oldFile.readInt();
    oldFile.close();
    oldFile=null;
    if (oldVersion < LAST_PRE_UPGRADE_LAYOUT_VERSION)     return false;
  }
  finally {
    IOUtils.cleanup(LOG,oldFile);
  }
  return true;
}
