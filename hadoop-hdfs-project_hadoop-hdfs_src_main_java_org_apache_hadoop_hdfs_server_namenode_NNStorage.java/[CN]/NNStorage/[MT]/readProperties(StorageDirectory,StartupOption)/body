{
  Properties props=readPropertiesFile(sd.getVersionFile());
  if (HdfsServerConstants.RollingUpgradeStartupOption.ROLLBACK.matches(startupOption)) {
    int lv=Integer.parseInt(getProperty(props,sd,"layoutVersion"));
    if (lv > getServiceLayoutVersion()) {
      throw new IncorrectVersionException(getServiceLayoutVersion(),lv,"storage directory " + sd.getRoot().getAbsolutePath());
    }
    props.setProperty("layoutVersion",Integer.toString(HdfsServerConstants.NAMENODE_LAYOUT_VERSION));
  }
  setFieldsFromProperties(props,sd);
}
