{
  super.setFieldsFromProperties(props,sd);
  if (layoutVersion == 0) {
    throw new IOException("NameNode directory " + sd.getRoot() + " is not formatted.");
  }
  if (LayoutVersion.supports(Feature.FEDERATION,layoutVersion)) {
    String sbpid=props.getProperty("blockpoolID");
    setBlockPoolID(sd.getRoot(),sbpid);
  }
  String sDUS, sDUV;
  sDUS=props.getProperty("distributedUpgradeState");
  sDUV=props.getProperty("distributedUpgradeVersion");
  setDistributedUpgradeState(sDUS == null ? false : Boolean.parseBoolean(sDUS),sDUV == null ? getLayoutVersion() : Integer.parseInt(sDUV));
  setDeprecatedPropertiesForUpgrade(props);
}
