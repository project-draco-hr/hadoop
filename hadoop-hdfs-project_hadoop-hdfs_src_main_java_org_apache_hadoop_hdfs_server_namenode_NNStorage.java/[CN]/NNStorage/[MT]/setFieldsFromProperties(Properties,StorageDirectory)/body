{
  super.setFieldsFromProperties(props,sd);
  if (layoutVersion == 0) {
    throw new IOException("NameNode directory " + sd.getRoot() + " is not formatted.");
  }
  if (NameNodeLayoutVersion.supports(LayoutVersion.Feature.FEDERATION,getLayoutVersion())) {
    String sbpid=props.getProperty("blockpoolID");
    setBlockPoolID(sd.getRoot(),sbpid);
  }
  setDeprecatedPropertiesForUpgrade(props);
}
