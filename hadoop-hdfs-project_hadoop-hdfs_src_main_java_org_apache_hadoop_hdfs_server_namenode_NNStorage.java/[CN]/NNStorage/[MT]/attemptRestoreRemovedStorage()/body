{
  if (!restoreFailedStorage || removedStorageDirs.size() == 0)   return;
synchronized (this.restorationLock) {
    LOG.info("NNStorage.attemptRestoreRemovedStorage: check removed(failed) " + "storarge. removedStorages size = " + removedStorageDirs.size());
    for (Iterator<StorageDirectory> it=this.removedStorageDirs.iterator(); it.hasNext(); ) {
      StorageDirectory sd=it.next();
      File root=sd.getRoot();
      LOG.info("currently disabled dir " + root.getAbsolutePath() + "; type="+ sd.getStorageDirType()+ ";canwrite="+ FileUtil.canWrite(root));
      if (root.exists() && FileUtil.canWrite(root)) {
        LOG.info("restoring dir " + sd.getRoot().getAbsolutePath());
        this.addStorageDir(sd);
        this.removedStorageDirs.remove(sd);
      }
    }
  }
}
