{
  UserGroupInformation ugi=HttpUserGroupInformation.get();
  if (ugi != null) {
    String ret="remoteuser=" + req.getRemoteUser() + ":ugi="+ ugi.getShortUserName();
    if (ugi.getAuthenticationMethod() == UserGroupInformation.AuthenticationMethod.PROXY) {
      ret="realugi=" + ugi.getRealUser().getShortUserName() + ":"+ ret;
    }
    resp.setStatus(HttpServletResponse.SC_OK);
    resp.getWriter().write(ret);
  }
 else {
    resp.setStatus(HttpServletResponse.SC_INTERNAL_SERVER_ERROR);
  }
}
