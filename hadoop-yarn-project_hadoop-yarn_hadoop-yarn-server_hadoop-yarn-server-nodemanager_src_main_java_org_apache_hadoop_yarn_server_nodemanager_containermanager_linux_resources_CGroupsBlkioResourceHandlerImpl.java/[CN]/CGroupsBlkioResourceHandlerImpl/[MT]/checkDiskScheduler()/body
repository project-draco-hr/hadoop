{
  String data;
  try {
    byte[] contents=Files.readAllBytes(Paths.get(PARTITIONS_FILE));
    data=new String(contents,"UTF-8").trim();
  }
 catch (  IOException e) {
    String msg="Couldn't read " + PARTITIONS_FILE + "; can't determine disk scheduler type";
    LOG.warn(msg,e);
    return;
  }
  String[] lines=data.split(System.lineSeparator());
  if (lines.length > 0) {
    for (    String line : lines) {
      String[] columns=line.split("\\s+");
      if (columns.length > 4) {
        String partition=columns[4];
        if (partition.startsWith("sd") || partition.startsWith("hd") || partition.startsWith("vd")|| partition.startsWith("xvd")) {
          String schedulerPath="/sys/block/" + partition + "/queue/scheduler";
          File schedulerFile=new File(schedulerPath);
          if (schedulerFile.exists()) {
            try {
              byte[] contents=Files.readAllBytes(Paths.get(schedulerPath));
              String schedulerString=new String(contents,"UTF-8").trim();
              if (!schedulerString.contains("[cfq]")) {
                LOG.warn("Device " + partition + " does not use the CFQ"+ " scheduler; disk isolation using "+ "CGroups will not work on this partition.");
              }
            }
 catch (            IOException ie) {
              LOG.warn("Unable to determine disk scheduler type for partition " + partition,ie);
            }
          }
        }
      }
    }
  }
}
