{
  src.fs.setVerifyChecksum(verifyChecksum);
  if (copyCrc && !(src.fs instanceof ChecksumFileSystem)) {
    displayWarning(src.fs + ": Does not support checksums");
    copyCrc=false;
  }
  if (src.stat.isFile()) {
    copyFileToLocal(src,target);
    if (copyCrc) {
      copyFileToLocal(src.getChecksumFile(),target.getChecksumFile());
    }
  }
 else   if (src.stat.isDirectory()) {
    if (!target.toFile().mkdirs()) {
      throw new PathIOException(target.toString());
    }
  }
 else {
    throw new PathOperationException(src.toString());
  }
}
