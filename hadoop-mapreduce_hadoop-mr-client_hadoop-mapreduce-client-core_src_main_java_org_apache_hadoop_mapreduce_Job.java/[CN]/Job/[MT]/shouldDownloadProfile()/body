{
  String profileParams=getProfileParams();
  if (null == profileParams) {
    return false;
  }
  String[] parts=profileParams.split("[ \\t]+");
  boolean hprofFound=false;
  boolean fileFound=false;
  for (  String p : parts) {
    if (p.startsWith("-agentlib:hprof") || p.startsWith("-Xrunhprof")) {
      hprofFound=true;
      String[] subparts=p.split(",");
      for (      String sub : subparts) {
        if (sub.startsWith("file=") && sub.length() != "file=".length()) {
          fileFound=true;
        }
      }
    }
  }
  return hprofFound && fileFound;
}
