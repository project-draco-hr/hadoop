{
  boolean isFinalized=false;
  if (currentUpgrades == null) {
    FSImage fsimage=namesystem.getFSImage();
    isFinalized=fsimage.isUpgradeFinalized();
    if (isFinalized)     return null;
    return new UpgradeStatusReport(fsimage.getStorage().getLayoutVersion(),(short)101,isFinalized);
  }
  UpgradeObjectNamenode curUO=(UpgradeObjectNamenode)currentUpgrades.first();
  boolean details=false;
switch (action) {
case GET_STATUS:
    break;
case DETAILED_STATUS:
  details=true;
break;
case FORCE_PROCEED:
curUO.forceProceed();
}
return curUO.getUpgradeStatusReport(details);
}
