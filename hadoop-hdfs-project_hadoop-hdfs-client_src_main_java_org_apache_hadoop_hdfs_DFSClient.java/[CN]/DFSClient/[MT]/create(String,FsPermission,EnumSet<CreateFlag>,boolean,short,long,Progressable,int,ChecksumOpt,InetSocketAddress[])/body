{
  checkOpen();
  final FsPermission masked=applyUMask(permission);
  if (LOG.isDebugEnabled()) {
    LOG.debug(src + ": masked=" + masked);
  }
  final DFSOutputStream result=DFSOutputStream.newStreamForCreate(this,src,masked,flag,createParent,replication,blockSize,progress,buffersize,dfsClientConf.createChecksum(checksumOpt),getFavoredNodesStr(favoredNodes));
  beginFileLease(result.getFileId(),result);
  return result;
}
