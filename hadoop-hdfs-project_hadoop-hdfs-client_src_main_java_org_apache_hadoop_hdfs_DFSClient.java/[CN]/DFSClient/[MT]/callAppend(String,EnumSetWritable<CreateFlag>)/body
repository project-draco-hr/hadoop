{
  final long startTime=Time.monotonicNow();
  for (; ; ) {
    try {
      return namenode.append(src,clientName,flag);
    }
 catch (    RemoteException re) {
      if (Time.monotonicNow() - startTime > 5000 || !RetriableException.class.getName().equals(re.getClassName())) {
        throw re;
      }
      try {
        Thread.sleep(500);
      }
 catch (      InterruptedException e) {
        throw DFSUtilClient.toInterruptedIOException("callAppend",e);
      }
    }
  }
}
