{
  checkOpen();
  Preconditions.checkArgument(length >= 0);
  LocatedBlocks blockLocations=getBlockLocations(src,length);
  FileChecksumHelper.FileChecksumComputer maker;
  ErasureCodingPolicy ecPolicy=blockLocations.getErasureCodingPolicy();
  maker=ecPolicy != null ? new FileChecksumHelper.StripedFileNonStripedChecksumComputer(src,length,blockLocations,namenode,this,ecPolicy) : new FileChecksumHelper.ReplicatedFileChecksumComputer(src,length,blockLocations,namenode,this);
  maker.compute();
  return maker.getFileChecksum();
}
