{
  TraceScope scope=Trace.startSpan("decryptEDEK",traceSampler);
  try {
    KeyProvider provider=getKeyProvider();
    if (provider == null) {
      throw new IOException("No KeyProvider is configured, cannot access" + " an encrypted file");
    }
    EncryptedKeyVersion ekv=EncryptedKeyVersion.createForDecryption(feInfo.getKeyName(),feInfo.getEzKeyVersionName(),feInfo.getIV(),feInfo.getEncryptedDataEncryptionKey());
    try {
      KeyProviderCryptoExtension cryptoProvider=KeyProviderCryptoExtension.createKeyProviderCryptoExtension(provider);
      return cryptoProvider.decryptEncryptedKey(ekv);
    }
 catch (    GeneralSecurityException e) {
      throw new IOException(e);
    }
  }
  finally {
    scope.close();
  }
}
