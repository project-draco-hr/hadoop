{
  byte[] localName=FSImageSerialization.readLocalName(in);
  localName=renameReservedComponentOnUpgrade(localName,getLayoutVersion());
  INode inode=loadINode(localName,isSnapshotINode,in,counter);
  if (updateINodeMap && NameNodeLayoutVersion.supports(LayoutVersion.Feature.ADD_INODE_ID,getLayoutVersion())) {
    namesystem.dir.addToInodeMap(inode);
  }
  return inode;
}
