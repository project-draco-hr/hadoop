{
  final int layoutVersion=getLayoutVersion();
  if (!LayoutVersion.supports(Feature.OPTIMIZE_SNAPSHOT_INODES,layoutVersion)) {
    return loadINodeWithLocalName(true,in,false).asFile();
  }
  final byte[] name=FSImageSerialization.readLocalName(in);
  final PermissionStatus permissions=PermissionStatus.read(in);
  final long modificationTime=in.readLong();
  final long accessTime=in.readLong();
  final short replication=namesystem.getBlockManager().adjustReplication(in.readShort());
  final long preferredBlockSize=in.readLong();
  AclFeature aclFeature=permissions.getPermission().getAclBit() ? loadAclFeature(in,layoutVersion) : null;
  return new INodeFileAttributes.SnapshotCopy(name,permissions,aclFeature,modificationTime,accessTime,replication,preferredBlockSize);
}
