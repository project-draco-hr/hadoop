{
  final short repl=1;
  final int corruptBlockNumber=1;
  for (int i=0; i < 2; i++) {
    String fileName="/tmp/testClientReportBadBlock/OneBlockReplica" + i;
    Path filePath=new Path(fileName);
    createAFileWithCorruptedBlockReplicas(filePath,repl,corruptBlockNumber);
    if (i == 0) {
      dfsClientReadFile(filePath);
    }
 else {
      dfsClientReadFileFromPosition(filePath);
    }
    int expectedReplicaCount=1;
    verifyCorruptedBlockCount(filePath,expectedReplicaCount);
    verifyFirstBlockCorrupted(filePath,true);
    verifyFsckBlockCorrupted();
    testFsckListCorruptFilesBlocks(filePath,-1);
  }
}
