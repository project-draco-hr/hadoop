{
  final Map<Class<?>,AccessControlList> newAcls=new IdentityHashMap<Class<?>,AccessControlList>();
  String defaultAcl=conf.get(CommonConfigurationKeys.HADOOP_SECURITY_SERVICE_AUTHORIZATION_DEFAULT_ACL,AccessControlList.WILDCARD_ACL_VALUE);
  Service[] services=provider.getServices();
  if (services != null) {
    for (    Service service : services) {
      AccessControlList acl=new AccessControlList(conf.get(service.getServiceKey(),defaultAcl));
      newAcls.put(service.getProtocol(),acl);
    }
  }
  protocolToAcl=newAcls;
}
