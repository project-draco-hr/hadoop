{
  final Map<Class<?>,AccessControlList[]> newAcls=new IdentityHashMap<Class<?>,AccessControlList[]>();
  String defaultAcl=conf.get(CommonConfigurationKeys.HADOOP_SECURITY_SERVICE_AUTHORIZATION_DEFAULT_ACL,AccessControlList.WILDCARD_ACL_VALUE);
  String defaultBlockedAcl=conf.get(CommonConfigurationKeys.HADOOP_SECURITY_SERVICE_AUTHORIZATION_DEFAULT_BLOCKED_ACL,"");
  Service[] services=provider.getServices();
  if (services != null) {
    for (    Service service : services) {
      AccessControlList acl=new AccessControlList(conf.get(service.getServiceKey(),defaultAcl));
      AccessControlList blockedAcl=new AccessControlList(conf.get(service.getServiceKey() + BLOCKED,defaultBlockedAcl));
      newAcls.put(service.getProtocol(),new AccessControlList[]{acl,blockedAcl});
    }
  }
  protocolToAcls=newAcls;
}
