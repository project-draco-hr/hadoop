{
  TaskAttemptID taskid=null;
  if (nextTaskId < (MAX_TASK_EXECS + maxTaskAttempts + numKilledTasks)) {
    int attemptId=job.getNumRestarts() * NUM_ATTEMPTS_PER_RESTART + nextTaskId;
    taskid=new TaskAttemptID(id,attemptId);
    ++nextTaskId;
  }
 else {
    LOG.warn("Exceeded limit of " + (MAX_TASK_EXECS + maxTaskAttempts) + " (plus "+ numKilledTasks+ " killed)"+ " attempts for the tip '"+ getTIPId()+ "'");
    return null;
  }
  setDispatchTime(taskid,JobTracker.getClock().getTime());
  if (0 == execStartTime) {
    setExecStartTime(lastDispatchTime);
  }
  return addRunningTask(taskid,taskTracker);
}
