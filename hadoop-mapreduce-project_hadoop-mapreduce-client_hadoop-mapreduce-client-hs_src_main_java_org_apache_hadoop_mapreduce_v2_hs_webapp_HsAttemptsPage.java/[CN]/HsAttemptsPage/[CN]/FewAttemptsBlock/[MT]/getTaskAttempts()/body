{
  List<TaskAttempt> fewTaskAttemps=new ArrayList<TaskAttempt>();
  String taskTypeStr=$(TASK_TYPE);
  TaskType taskType=MRApps.taskType(taskTypeStr);
  String attemptStateStr=$(ATTEMPT_STATE);
  TaskAttemptStateUI neededState=MRApps.taskAttemptState(attemptStateStr);
  Job j=app.getJob();
  Map<TaskId,Task> tasks=j.getTasks(taskType);
  for (  Task task : tasks.values()) {
    Map<TaskAttemptId,TaskAttempt> attempts=task.getAttempts();
    for (    TaskAttempt attempt : attempts.values()) {
      if (neededState.correspondsTo(attempt.getState())) {
        fewTaskAttemps.add(attempt);
      }
    }
  }
  return fewTaskAttemps;
}
