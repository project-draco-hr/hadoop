{
  Iterator<Container> it=allocatedContainers.iterator();
  LOG.info("Got allocated containers " + allocatedContainers.size());
  containersAllocated+=allocatedContainers.size();
  while (it.hasNext()) {
    Container allocated=it.next();
    LOG.info("Assigning container " + allocated);
    ContainerRequest assigned=assign(allocated);
    if (assigned != null) {
      decContainerReq(assigned);
      eventHandler.handle(new TaskAttemptContainerAssignedEvent(assigned.attemptID,allocated));
      assignedRequests.add(allocated.getId(),assigned.attemptID);
      LOG.info("Assigned container (" + allocated + ") "+ " to task "+ assigned.attemptID+ " on node "+ allocated.getNodeId().toString());
    }
 else {
      LOG.info("Releasing unassigned and invalid container " + allocated + ". RM has gone crazy, someone go look!"+ " Hey RM, if you are so rich, go donate to non-profits!");
      containersReleased++;
      release(allocated.getId());
    }
  }
}
