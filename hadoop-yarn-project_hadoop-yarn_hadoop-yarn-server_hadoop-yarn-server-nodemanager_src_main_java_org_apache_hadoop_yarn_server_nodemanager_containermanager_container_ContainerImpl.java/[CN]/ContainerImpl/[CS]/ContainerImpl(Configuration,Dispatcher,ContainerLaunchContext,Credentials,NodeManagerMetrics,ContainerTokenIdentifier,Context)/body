{
  this.daemonConf=conf;
  this.dispatcher=dispatcher;
  this.stateStore=context.getNMStateStore();
  this.launchContext=launchContext;
  this.containerTokenIdentifier=containerTokenIdentifier;
  this.containerId=containerTokenIdentifier.getContainerID();
  this.resource=containerTokenIdentifier.getResource();
  this.diagnostics=new StringBuilder();
  this.credentials=creds;
  this.metrics=metrics;
  user=containerTokenIdentifier.getApplicationSubmitter();
  ReadWriteLock readWriteLock=new ReentrantReadWriteLock();
  this.readLock=readWriteLock.readLock();
  this.writeLock=readWriteLock.writeLock();
  this.context=context;
  stateMachine=stateMachineFactory.make(this);
}
