{
  this.daemonConf=conf;
  this.dispatcher=dispatcher;
  this.launchContext=launchContext;
  this.container=container;
  this.diagnostics=new StringBuilder();
  this.credentials=creds;
  this.metrics=metrics;
  user=identifier.getApplicationSubmitter();
  ReadWriteLock readWriteLock=new ReentrantReadWriteLock();
  this.readLock=readWriteLock.readLock();
  this.writeLock=readWriteLock.writeLock();
  stateMachine=stateMachineFactory.make(this);
}
