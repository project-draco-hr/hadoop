{
  container.metrics.releaseContainer(container.resource);
  if (container.containerMetrics != null) {
    container.containerMetrics.recordFinishTimeAndExitCode(clock.getTime(),container.exitCode);
    container.containerMetrics.finished();
  }
  container.sendFinishedEvents();
  if (container.getCurrentState() != org.apache.hadoop.yarn.api.records.ContainerState.NEW) {
    container.dispatcher.getEventHandler().handle(new AuxServicesEvent(AuxServicesEventType.CONTAINER_STOP,container));
  }
  container.context.getNodeStatusUpdater().sendOutofBandHeartBeat();
}
