{
  publishSystemMetricsForV2=conf.getBoolean(YarnConfiguration.TIMELINE_SERVICE_ENABLED,YarnConfiguration.DEFAULT_TIMELINE_SERVICE_ENABLED) && conf.getBoolean(YarnConfiguration.SYSTEM_METRICS_PUBLISHER_ENABLED,YarnConfiguration.DEFAULT_SYSTEM_METRICS_PUBLISHER_ENABLED);
  if (publishSystemMetricsForV2) {
    LOG.info("RMTimelineCollector has been configured to publish" + " System Metrics in ATS V2");
    dispatcher=new AsyncDispatcher();
    dispatcher.register(SystemMetricsEventType.class,new ForwardingEventHandler());
  }
 else {
    LOG.warn("RMTimelineCollector has not been configured to publish" + " System Metrics in ATS V2");
  }
  super.serviceInit(conf);
}
