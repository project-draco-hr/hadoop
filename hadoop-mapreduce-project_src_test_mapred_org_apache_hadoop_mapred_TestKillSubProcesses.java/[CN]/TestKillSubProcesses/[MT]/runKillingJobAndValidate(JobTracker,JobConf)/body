{
  conf.setJobName("testkilljobsubprocesses");
  conf.setMapperClass(KillingMapperWithChildren.class);
  RunningJob job=runJobAndSetProcessHandle(jt,conf);
  job.killJob();
  while (job.cleanupProgress() == 0.0f) {
    try {
      Thread.sleep(100);
    }
 catch (    InterruptedException ie) {
      LOG.warn("sleep is interrupted:" + ie);
      break;
    }
  }
  validateKillingSubprocesses(job,conf);
  assertEquals(job.getJobState(),JobStatus.KILLED);
}
