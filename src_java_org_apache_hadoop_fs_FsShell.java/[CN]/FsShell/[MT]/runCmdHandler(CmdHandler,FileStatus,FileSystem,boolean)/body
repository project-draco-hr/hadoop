{
  int errors=0;
  handler.run(stat,srcFs);
  if (recursive && stat.isDirectory() && handler.okToContinue()) {
    FileStatus[] files=shellListStatus(handler.getName(),srcFs,stat);
    if (files == null) {
      return 1;
    }
    for (    FileStatus file : files) {
      errors+=runCmdHandler(handler,file,srcFs,recursive);
    }
  }
  return errors;
}
