{
  CommandFormat c=new CommandFormat("setrep",2,2,"R","w");
  String dst=null;
  short rep=0;
  try {
    List<String> parameters=c.parse(cmd,pos);
    rep=Short.parseShort(parameters.get(0));
    dst=parameters.get(1);
  }
 catch (  NumberFormatException nfe) {
    System.err.println("Illegal replication, a positive integer expected");
    throw nfe;
  }
catch (  IllegalArgumentException iae) {
    System.err.println("Usage: java FsShell " + SETREP_SHORT_USAGE);
    throw iae;
  }
  if (rep < 1) {
    System.err.println("Cannot set replication to: " + rep);
    throw new IllegalArgumentException("replication must be >= 1");
  }
  List<Path> waitList=c.getOpt("w") ? new ArrayList<Path>() : null;
  setReplication(rep,dst,c.getOpt("R"),waitList);
  if (waitList != null) {
    waitForReplication(waitList,rep);
  }
}
