{
  if (!srcFs.getFileStatus(src).isDir()) {
    setFileReplication(src,srcFs,newRep,waitingList);
    return;
  }
  FileStatus items[]=srcFs.listStatus(src);
  if (items == null) {
    throw new IOException("Could not get listing for " + src);
  }
 else {
    for (int i=0; i < items.length; i++) {
      if (!items[i].isDir()) {
        setFileReplication(items[i].getPath(),srcFs,newRep,waitingList);
      }
 else       if (recursive) {
        setReplication(newRep,srcFs,items[i].getPath(),recursive,waitingList);
      }
    }
  }
}
