{
  if (slot != null) {
    boolean stale=!slot.isValid();
    if (LOG.isTraceEnabled()) {
      LOG.trace(this + ": checked shared memory segment.  isStale=" + stale);
    }
    return stale;
  }
 else {
    long deltaMs=Time.monotonicNow() - creationTimeMs;
    long staleThresholdMs=cache.getStaleThresholdMs();
    if (deltaMs > staleThresholdMs) {
      if (LOG.isTraceEnabled()) {
        LOG.trace(this + " is stale because it's " + deltaMs+ " ms old, and staleThresholdMs = "+ staleThresholdMs);
      }
      return true;
    }
 else {
      if (LOG.isTraceEnabled()) {
        LOG.trace(this + " is not stale because it's only " + deltaMs+ " ms old, and staleThresholdMs = "+ staleThresholdMs);
      }
      return false;
    }
  }
}
