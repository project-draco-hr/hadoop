{
  List<AclEntry> aclSpec=Lists.newArrayList(aclEntry(ACCESS,USER,READ_WRITE),aclEntry(ACCESS,USER,"foo",READ),aclEntry(ACCESS,GROUP,READ),aclEntry(ACCESS,OTHER,NONE));
  fcView.setAcl(mountOnNn1,aclSpec);
  AclEntry[] expected=new AclEntry[]{aclEntry(ACCESS,USER,"foo",READ),aclEntry(ACCESS,GROUP,READ)};
  assertArrayEquals(expected,aclEntryArray(fcView.getAclStatus(mountOnNn1)));
  assertArrayEquals(expected,aclEntryArray(fc.getAclStatus(targetTestRoot)));
  aclSpec=Lists.newArrayList(aclEntry(DEFAULT,USER,"foo",READ));
  fcView.modifyAclEntries(mountOnNn1,aclSpec);
  expected=new AclEntry[]{aclEntry(ACCESS,USER,"foo",READ),aclEntry(ACCESS,GROUP,READ),aclEntry(DEFAULT,USER,READ_WRITE),aclEntry(DEFAULT,USER,"foo",READ),aclEntry(DEFAULT,GROUP,READ),aclEntry(DEFAULT,MASK,READ),aclEntry(DEFAULT,OTHER,NONE)};
  assertArrayEquals(expected,aclEntryArray(fcView.getAclStatus(mountOnNn1)));
  fcView.removeDefaultAcl(mountOnNn1);
  expected=new AclEntry[]{aclEntry(ACCESS,USER,"foo",READ),aclEntry(ACCESS,GROUP,READ)};
  assertArrayEquals(expected,aclEntryArray(fcView.getAclStatus(mountOnNn1)));
  assertArrayEquals(expected,aclEntryArray(fc.getAclStatus(targetTestRoot)));
  assertEquals(0,fcView.getAclStatus(mountOnNn2).getEntries().size());
  assertEquals(0,fc2.getAclStatus(targetTestRoot2).getEntries().size());
  fcView.removeAcl(mountOnNn1);
  assertEquals(0,fcView.getAclStatus(mountOnNn1).getEntries().size());
  assertEquals(0,fc.getAclStatus(targetTestRoot).getEntries().size());
  aclSpec=Lists.newArrayList(aclEntry(ACCESS,USER,"bar",READ));
  fcView.modifyAclEntries(mountOnNn2,aclSpec);
  expected=new AclEntry[]{aclEntry(ACCESS,USER,"bar",READ),aclEntry(ACCESS,GROUP,READ_EXECUTE)};
  assertArrayEquals(expected,aclEntryArray(fcView.getAclStatus(mountOnNn2)));
  assertArrayEquals(expected,aclEntryArray(fc2.getAclStatus(targetTestRoot2)));
  fcView.removeAclEntries(mountOnNn2,Lists.newArrayList(aclEntry(ACCESS,USER,"bar",READ)));
  expected=new AclEntry[]{aclEntry(ACCESS,GROUP,READ_EXECUTE)};
  assertArrayEquals(expected,aclEntryArray(fc2.getAclStatus(targetTestRoot2)));
  fcView.removeAcl(mountOnNn2);
  assertEquals(0,fcView.getAclStatus(mountOnNn2).getEntries().size());
  assertEquals(0,fc2.getAclStatus(targetTestRoot2).getEntries().size());
}
