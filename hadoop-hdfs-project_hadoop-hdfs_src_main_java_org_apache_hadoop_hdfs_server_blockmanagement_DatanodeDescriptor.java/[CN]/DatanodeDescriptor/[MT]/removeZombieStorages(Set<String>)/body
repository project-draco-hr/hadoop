{
  List<DatanodeStorageInfo> zombies=null;
synchronized (storageMap) {
    Iterator<Map.Entry<String,DatanodeStorageInfo>> iter=storageMap.entrySet().iterator();
    while (iter.hasNext()) {
      Map.Entry<String,DatanodeStorageInfo> entry=iter.next();
      DatanodeStorageInfo storageInfo=entry.getValue();
      if (!storageIDsInBlockReport.contains(storageInfo.getStorageID())) {
        iter.remove();
        if (zombies == null) {
          zombies=new LinkedList<>();
        }
        zombies.add(storageInfo);
      }
    }
  }
  return zombies == null ? EMPTY_STORAGE_INFO_LIST : zombies;
}
