{
synchronized (storageMap) {
    final Collection<DatanodeStorageInfo> storages=storageMap.values();
    return storages.toArray(new DatanodeStorageInfo[storages.size()]);
  }
}
