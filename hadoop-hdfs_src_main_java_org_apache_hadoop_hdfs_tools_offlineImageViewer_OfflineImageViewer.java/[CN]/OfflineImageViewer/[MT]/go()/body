{
  DataInputStream in=null;
  try {
    in=new DataInputStream(new BufferedInputStream(new FileInputStream(new File(inputFile))));
    int imageVersionFile=findImageVersion(in);
    ImageLoader fsip=ImageLoader.LoaderFactory.getLoader(imageVersionFile);
    if (fsip == null)     throw new IOException("No image processor to read version " + imageVersionFile + " is available.");
    fsip.loadImage(in,processor,skipBlocks);
  }
  finally {
    if (in != null)     in.close();
  }
}
