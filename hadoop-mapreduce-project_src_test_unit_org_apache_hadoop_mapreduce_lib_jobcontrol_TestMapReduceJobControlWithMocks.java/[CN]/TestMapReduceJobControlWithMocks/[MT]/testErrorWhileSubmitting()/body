{
  JobControl jobControl=new JobControl("Test");
  Job mockJob=mock(Job.class);
  ControlledJob job1=new ControlledJob(mockJob,null);
  when(mockJob.getConfiguration()).thenReturn(new Configuration());
  doThrow(new IncompatibleClassChangeError("This is a test")).when(mockJob).submit();
  jobControl.addJob(job1);
  runJobControl(jobControl);
  try {
    assertEquals("Success list",0,jobControl.getSuccessfulJobList().size());
    assertEquals("Failed list",1,jobControl.getFailedJobList().size());
    assertTrue(job1.getJobState() == ControlledJob.State.FAILED);
  }
  finally {
    jobControl.stop();
  }
}
