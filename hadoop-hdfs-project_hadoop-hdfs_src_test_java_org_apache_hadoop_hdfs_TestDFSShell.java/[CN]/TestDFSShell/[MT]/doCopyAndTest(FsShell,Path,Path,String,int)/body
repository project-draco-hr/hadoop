{
  final Path target=new Path(dest,"targetfile" + counter.getAndIncrement());
  final String[] argv=cpArgs == null ? new String[]{"-cp",src.toUri().toString(),target.toUri().toString()} : new String[]{"-cp",cpArgs,src.toUri().toString(),target.toUri().toString()};
  final int ret=ToolRunner.run(shell,argv);
  assertEquals("cp -p is not working",expectedExitCode,ret);
  return target;
}
