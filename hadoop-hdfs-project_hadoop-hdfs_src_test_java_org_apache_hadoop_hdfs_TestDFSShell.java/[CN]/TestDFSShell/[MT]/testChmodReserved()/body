{
  Configuration conf=new HdfsConfiguration();
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(2).build();
  FileSystem fs=cluster.getFileSystem();
  PrintStream syserr=System.err;
  final ByteArrayOutputStream baos=new ByteArrayOutputStream();
  PrintStream ps=new PrintStream(baos);
  System.setErr(ps);
  FsShell shell=new FsShell();
  shell.setConf(conf);
  runCmd(shell,"-chmod","777","/.reserved");
  assertTrue(baos.toString().contains("Invalid path name /.reserved"));
  System.setErr(syserr);
  cluster.shutdown();
}
