{
synchronized (fds) {
    for (    ReplicaInfo b : FsDatasetTestUtil.getReplicas(fds,bpid)) {
      File f=b.getBlockFile();
      File mf=b.getMetaFile();
      if (f.exists() && f.length() != 0 && mf.exists()) {
        FileOutputStream s=new FileOutputStream(f);
        FileChannel channel=s.getChannel();
        channel.truncate(0);
        LOG.info("Truncated block file " + f.getAbsolutePath());
        return b.getBlockId();
      }
    }
  }
  return 0;
}
