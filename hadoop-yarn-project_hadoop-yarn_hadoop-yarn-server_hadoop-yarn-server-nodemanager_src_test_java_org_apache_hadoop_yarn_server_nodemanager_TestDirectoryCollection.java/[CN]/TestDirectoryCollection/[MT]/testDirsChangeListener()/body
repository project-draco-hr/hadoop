{
  DirsChangeListenerTest listener1=new DirsChangeListenerTest();
  DirsChangeListenerTest listener2=new DirsChangeListenerTest();
  DirsChangeListenerTest listener3=new DirsChangeListenerTest();
  String dirA=new File(testDir,"dirA").getPath();
  String[] dirs={dirA};
  DirectoryCollection dc=new DirectoryCollection(dirs,0.0F);
  Assert.assertEquals(1,dc.getGoodDirs().size());
  Assert.assertEquals(listener1.num,0);
  Assert.assertEquals(listener2.num,0);
  Assert.assertEquals(listener3.num,0);
  dc.registerDirsChangeListener(listener1);
  dc.registerDirsChangeListener(listener2);
  dc.registerDirsChangeListener(listener3);
  Assert.assertEquals(listener1.num,1);
  Assert.assertEquals(listener2.num,1);
  Assert.assertEquals(listener3.num,1);
  dc.deregisterDirsChangeListener(listener3);
  dc.checkDirs();
  Assert.assertEquals(0,dc.getGoodDirs().size());
  Assert.assertEquals(listener1.num,2);
  Assert.assertEquals(listener2.num,2);
  Assert.assertEquals(listener3.num,1);
  dc.deregisterDirsChangeListener(listener2);
  dc.setDiskUtilizationPercentageCutoff(100.0F);
  dc.checkDirs();
  Assert.assertEquals(1,dc.getGoodDirs().size());
  Assert.assertEquals(listener1.num,3);
  Assert.assertEquals(listener2.num,2);
  Assert.assertEquals(listener3.num,1);
}
