{
  String envValue=System.getenv(envName).trim();
  if ("append".equals(mode)) {
    if (envValue == null || !envValue.contains(File.pathSeparator)) {
      throw new RuntimeException("Missing env variable");
    }
 else {
      String parts[]=envValue.split(File.pathSeparator);
      if (!parts[parts.length - 1].equals(expValue)) {
        throw new RuntimeException("Wrong env variable in append mode");
      }
    }
  }
 else {
    if (envValue == null || !envValue.equals(expValue)) {
      throw new RuntimeException("Wrong env variable in noappend mode");
    }
  }
}
