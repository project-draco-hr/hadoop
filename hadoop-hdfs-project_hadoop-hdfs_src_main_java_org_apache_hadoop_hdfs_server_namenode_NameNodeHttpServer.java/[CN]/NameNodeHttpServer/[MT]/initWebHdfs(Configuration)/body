{
  if (WebHdfsFileSystem.isEnabled(conf,HttpServer2.LOG)) {
    UserParam.setUserPattern(conf.get(DFSConfigKeys.DFS_WEBHDFS_USER_PATTERN_KEY,DFSConfigKeys.DFS_WEBHDFS_USER_PATTERN_DEFAULT));
    final String className=conf.get(DFSConfigKeys.DFS_WEBHDFS_AUTHENTICATION_FILTER_KEY,DFSConfigKeys.DFS_WEBHDFS_AUTHENTICATION_FILTER_DEFAULT);
    final String name=className;
    final String pathSpec=WebHdfsFileSystem.PATH_PREFIX + "/*";
    Map<String,String> params=getAuthFilterParams(conf);
    HttpServer2.defineFilter(httpServer.getWebAppContext(),name,className,params,new String[]{pathSpec});
    HttpServer2.LOG.info("Added filter '" + name + "' (class="+ className+ ")");
    httpServer.addJerseyResourcePackage(NamenodeWebHdfsMethods.class.getPackage().getName() + ";" + Param.class.getPackage().getName(),pathSpec);
  }
}
