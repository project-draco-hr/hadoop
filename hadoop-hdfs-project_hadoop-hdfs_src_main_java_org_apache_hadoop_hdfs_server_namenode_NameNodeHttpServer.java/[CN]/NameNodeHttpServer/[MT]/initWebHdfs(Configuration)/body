{
  if (WebHdfsFileSystem.isEnabled(conf,HttpServer2.LOG)) {
    UserParam.setUserPattern(conf.get(DFSConfigKeys.DFS_WEBHDFS_USER_PATTERN_KEY,DFSConfigKeys.DFS_WEBHDFS_USER_PATTERN_DEFAULT));
    final String name="SPNEGO";
    final String classname=AuthFilter.class.getName();
    final String pathSpec=WebHdfsFileSystem.PATH_PREFIX + "/*";
    Map<String,String> params=getAuthFilterParams(conf);
    HttpServer2.defineFilter(httpServer.getWebAppContext(),name,classname,params,new String[]{pathSpec});
    HttpServer2.LOG.info("Added filter '" + name + "' (class="+ classname+ ")");
    httpServer.addJerseyResourcePackage(NamenodeWebHdfsMethods.class.getPackage().getName() + ";" + Param.class.getPackage().getName(),pathSpec);
  }
}
