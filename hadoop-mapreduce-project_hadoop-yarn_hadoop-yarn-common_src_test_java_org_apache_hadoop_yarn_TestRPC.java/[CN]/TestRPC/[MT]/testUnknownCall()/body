{
  Configuration conf=new Configuration();
  conf.set(YarnConfiguration.IPC_RPC_IMPL,HadoopYarnProtoRPC.class.getName());
  YarnRPC rpc=YarnRPC.create(conf);
  String bindAddr="localhost:0";
  InetSocketAddress addr=NetUtils.createSocketAddr(bindAddr);
  Server server=rpc.getServer(ContainerManager.class,new DummyContainerManager(),addr,conf,null,1);
  server.start();
  ClientRMProtocol proxy=(ClientRMProtocol)rpc.getProxy(ClientRMProtocol.class,NetUtils.createSocketAddr("localhost:" + server.getPort()),conf);
  try {
    proxy.getNewApplicationId(Records.newRecord(GetNewApplicationIdRequest.class));
    Assert.fail("Excepted RPC call to fail with unknown method.");
  }
 catch (  YarnRemoteException e) {
    Assert.assertEquals("Unknown method getNewApplicationId called on " + "org.apache.hadoop.yarn.proto.ClientRMProtocol" + "$ClientRMProtocolService$BlockingInterface protocol.",e.getMessage());
  }
}
