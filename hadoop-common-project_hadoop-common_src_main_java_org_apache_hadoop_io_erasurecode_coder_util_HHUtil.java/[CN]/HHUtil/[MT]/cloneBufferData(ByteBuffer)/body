{
  ByteBuffer destBuffer;
  byte[] bytesArr=new byte[srcBuffer.remaining()];
  srcBuffer.mark();
  srcBuffer.get(bytesArr);
  srcBuffer.reset();
  if (!srcBuffer.isDirect()) {
    destBuffer=ByteBuffer.wrap(bytesArr);
  }
 else {
    destBuffer=ByteBuffer.allocateDirect(srcBuffer.remaining());
    destBuffer.put(bytesArr);
    destBuffer.flip();
  }
  return destBuffer;
}
