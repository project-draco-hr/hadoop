{
  FSDataInputStream in=fs.open(srcPath);
  ByteBuffer result=ByteBuffer.allocate(fileLength);
  int readLen=0;
  int ret;
  do {
    ret=in.read(buf);
    if (ret > 0) {
      readLen+=ret;
      buf.flip();
      result.put(buf);
      buf.clear();
    }
  }
 while (ret >= 0);
  readLen=readLen >= 0 ? readLen : 0;
  Assert.assertEquals("The length of file should be the same to write size",fileLength,readLen);
  Assert.assertArrayEquals(expected,result.array());
  in.close();
}
