{
  final int numNewVolumes=3;
  final int numExistingVolumes=dataset.getVolumes().size();
  final int totalVolumes=numNewVolumes + numExistingVolumes;
  List<StorageLocation> newLocations=new ArrayList<StorageLocation>();
  for (int i=0; i < numNewVolumes; i++) {
    String path=BASE_DIR + "/newData" + i;
    newLocations.add(StorageLocation.parse(path));
    when(storage.getStorageDir(numExistingVolumes + i)).thenReturn(createStorageDirectory(new File(path)));
  }
  when(storage.getNumStorageDirs()).thenReturn(totalVolumes);
  dataset.addVolumes(newLocations);
  assertEquals(totalVolumes,dataset.getVolumes().size());
  assertEquals(totalVolumes,dataset.storageMap.size());
  for (int i=0; i < numNewVolumes; i++) {
    assertEquals(newLocations.get(i).getFile().getPath(),dataset.getVolumes().get(numExistingVolumes + i).getBasePath());
  }
}
