{
  cluster=new MiniDFSCluster.Builder(CONF).numDataNodes(2).build();
  cluster.waitClusterUp();
  fHdfs=cluster.getFileSystem();
  defaultWorkingDirectory=fHdfs.makeQualified(new Path("/user/" + UserGroupInformation.getCurrentUser().getShortUserName()));
  fHdfs.mkdirs(defaultWorkingDirectory);
  Configuration conf=ViewFileSystemTestSetup.createConfig();
  ConfigUtil.addLink(conf,"/vfstmp",new URI(fHdfs.getUri() + "/hdfstmp"));
  ConfigUtil.addLink(conf,"/tmp",new URI(fHdfs.getUri() + "/tmp"));
  vfs=FileSystem.get(FsConstants.VIEWFS_URI,conf);
  assertEquals(ViewFileSystem.class,vfs.getClass());
}
