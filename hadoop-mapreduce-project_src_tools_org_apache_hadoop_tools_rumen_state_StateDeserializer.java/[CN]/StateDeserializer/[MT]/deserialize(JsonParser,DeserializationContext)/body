{
  ObjectMapper mapper=(ObjectMapper)parser.getCodec();
  ObjectNode statePairObject=(ObjectNode)mapper.readTree(parser);
  Class<?> stateClass=null;
  try {
    stateClass=Class.forName(statePairObject.get("className").getTextValue().trim());
  }
 catch (  ClassNotFoundException cnfe) {
    throw new RuntimeException("Invalid classname!",cnfe);
  }
  String stateJsonString=statePairObject.get("state").toString();
  State state=(State)mapper.readValue(stateJsonString,stateClass);
  return new StatePair(state);
}
