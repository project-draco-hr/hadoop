{
  BufferedInputStream bufferedIn=null;
  if (super.in != null) {
    bufferedIn=new BufferedInputStream(super.in);
    bufferedIn.mark(HEADER_LEN);
    byte[] headerBytes=new byte[HEADER_LEN];
    int actualRead=bufferedIn.read(headerBytes,0,HEADER_LEN);
    if (actualRead != -1) {
      String header=new String(headerBytes);
      if (header.compareTo(HEADER) != 0) {
        bufferedIn.reset();
      }
    }
  }
  if (bufferedIn == null) {
    throw new IOException("Failed to read bzip2 stream.");
  }
  return bufferedIn;
}
