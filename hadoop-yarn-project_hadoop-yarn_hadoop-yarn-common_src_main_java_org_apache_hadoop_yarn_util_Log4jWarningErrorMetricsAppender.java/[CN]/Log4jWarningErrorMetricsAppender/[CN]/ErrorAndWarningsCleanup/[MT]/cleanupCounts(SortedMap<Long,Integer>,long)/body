{
synchronized (lock) {
    Iterator<Map.Entry<Long,Integer>> it=map.entrySet().iterator();
    while (it.hasNext()) {
      Map.Entry<Long,Integer> element=it.next();
      if (element.getKey() < cutoff) {
        it.remove();
      }
    }
  }
}
