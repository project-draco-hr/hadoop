{
  Thread threadCommitting=jobCommitThread;
  if (threadCommitting != null && threadCommitting.isAlive()) {
    LOG.info("Cancelling commit");
    threadCommitting.interrupt();
    long now=context.getClock().getTime();
    long timeoutTimestamp=now + commitThreadCancelTimeoutMs;
    try {
      while (jobCommitThread == threadCommitting && now > timeoutTimestamp) {
        wait(now - timeoutTimestamp);
        now=context.getClock().getTime();
      }
    }
 catch (    InterruptedException e) {
    }
  }
}
