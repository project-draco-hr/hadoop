{
  PrintStream oldErrPrintStream=System.err;
  ByteArrayOutputStream dataErr=new ByteArrayOutputStream();
  System.setErr(new PrintStream(dataErr));
  try {
    when(admin.refreshQueues(any(RefreshQueuesRequest.class))).thenThrow(new IOException("test exception"));
    String[] args={"-refreshQueues"};
    assertEquals(-1,rmAdminCLI.run(args));
    verify(admin).refreshQueues(any(RefreshQueuesRequest.class));
    assertTrue(dataErr.toString().contains("refreshQueues: test exception"));
  }
  finally {
    System.setErr(oldErrPrintStream);
  }
}
