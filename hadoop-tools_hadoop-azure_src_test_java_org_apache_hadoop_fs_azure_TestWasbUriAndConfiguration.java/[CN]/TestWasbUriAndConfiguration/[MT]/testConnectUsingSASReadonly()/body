{
  testAccount=AzureBlobStorageTestAccount.create("",EnumSet.of(CreateOptions.UseSas,CreateOptions.CreateContainer,CreateOptions.Readonly));
  assumeNotNull(testAccount);
  final String blobKey="blobForReadonly";
  CloudBlobContainer container=testAccount.getRealContainer();
  CloudBlockBlob blob=container.getBlockBlobReference(blobKey);
  ByteArrayInputStream inputStream=new ByteArrayInputStream(new byte[]{1,2,3});
  blob.upload(inputStream,3);
  inputStream.close();
  Path filePath=new Path("/" + blobKey);
  FileSystem fs=testAccount.getFileSystem();
  assertTrue(fs.exists(filePath));
  byte[] obtained=new byte[3];
  DataInputStream obtainedInputStream=fs.open(filePath);
  obtainedInputStream.readFully(obtained);
  obtainedInputStream.close();
  assertEquals(3,obtained[2]);
}
