{
  NamenodeRegistration nnReg=namenode.register(registration);
  String msg=null;
  if (nnReg == null) {
    msg="Registration rejected by " + nnAddress;
  }
 else   if (!nnReg.isRole(NamenodeRole.NAMENODE)) {
    msg=" Name-node " + nnAddress + " is not active";
  }
  if (msg != null) {
    LOG.error(msg);
    throw new IOException(msg);
  }
}
