{
  if (!current.isJournalAllowed) {
    throw new IOException("Cannot journal in " + current + " state.");
  }
}
