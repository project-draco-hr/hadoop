{
  final INodeFile inodeOfCurrentFile=getINodeFile(currentFile);
  for (  BlockInfo b : inodeOfCurrentFile.getBlocks()) {
    assertEquals(expectedBlockRep,b.getReplication());
  }
  for (  Path ss : snapshotRepMap.keySet()) {
    final INodesInPath iip=fsdir.getINodesInPath(ss.toString(),true);
    final INodeFile ssInode=iip.getLastINode().asFile();
    for (    BlockInfo b : ssInode.getBlocks()) {
      assertEquals(expectedBlockRep,b.getReplication());
    }
    assertEquals(snapshotRepMap.get(ss).shortValue(),ssInode.getFileReplication(iip.getPathSnapshotId()));
  }
}
