{
  final StorageReceivedDeletedBlocks[] reports=generateIBRs();
  if (reports.length == 0) {
    return;
  }
  boolean success=false;
  final long startTime=monotonicNow();
  try {
    namenode.blockReceivedAndDeleted(registration,bpid,reports);
    success=true;
  }
  finally {
    metrics.addIncrementalBlockReport(monotonicNow() - startTime);
    if (!success) {
      putMissing(reports);
    }
  }
}
