{
  final T fs=weakFs.get();
  final boolean b=fs != null;
  if (b) {
synchronized (fs) {
      try {
        fs.getRenewToken().renew(fs.getConf());
      }
 catch (      IOException ie) {
        try {
          Token<?>[] tokens=fs.addDelegationTokens(null,null);
          if (tokens.length == 0) {
            throw new IOException("addDelegationTokens returned no tokens");
          }
          fs.setDelegationToken(tokens[0]);
        }
 catch (        IOException ie2) {
          throw new IOException("Can't renew or get new delegation token ",ie);
        }
      }
    }
  }
  return b;
}
