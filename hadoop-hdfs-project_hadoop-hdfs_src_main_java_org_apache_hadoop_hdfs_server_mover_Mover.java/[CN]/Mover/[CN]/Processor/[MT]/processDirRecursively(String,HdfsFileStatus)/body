{
  String fullPath=status.getFullName(parent);
  if (status.isSymlink()) {
    return;
  }
 else   if (status.isDir()) {
    if (!fullPath.endsWith(Path.SEPARATOR)) {
      fullPath=fullPath + Path.SEPARATOR;
    }
    processChildrenList(fullPath);
    if (snapshottableDirs.contains(fullPath)) {
      final String dirSnapshot=fullPath + HdfsConstants.DOT_SNAPSHOT_DIR;
      processChildrenList(dirSnapshot);
    }
  }
 else {
    try {
      if (isSnapshotPathInCurrent(fullPath)) {
        return;
      }
    }
 catch (    IOException e) {
      LOG.warn("Failed to check the status of " + parent + ". Ignore it and continue.",e);
      return;
    }
    processFile(parent,(HdfsLocatedFileStatus)status);
  }
}
