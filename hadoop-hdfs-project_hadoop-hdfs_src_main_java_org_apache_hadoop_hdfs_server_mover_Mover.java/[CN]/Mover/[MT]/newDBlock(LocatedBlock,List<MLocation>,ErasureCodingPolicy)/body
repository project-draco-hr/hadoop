{
  Block blk=lb.getBlock().getLocalBlock();
  DBlock db;
  if (lb.isStriped()) {
    LocatedStripedBlock lsb=(LocatedStripedBlock)lb;
    byte[] indices=new byte[lsb.getBlockIndices().length];
    for (int i=0; i < indices.length; i++) {
      indices[i]=(byte)lsb.getBlockIndices()[i];
    }
    db=new DBlockStriped(blk,indices,(short)ecPolicy.getNumDataUnits());
  }
 else {
    db=new DBlock(blk);
  }
  for (  MLocation ml : locations) {
    StorageGroup source=storages.getSource(ml);
    if (source != null) {
      db.addLocation(source);
    }
  }
  return db;
}
