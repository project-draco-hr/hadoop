{
  return new ContainerAllocator(){
    private int containerCount;
    @Override public void handle(    ContainerAllocatorEvent event){
      ContainerId cId=recordFactory.newRecordInstance(ContainerId.class);
      cId.setApplicationAttemptId(getContext().getApplicationAttemptId());
      cId.setId(containerCount++);
      Container container=recordFactory.newRecordInstance(Container.class);
      container.setId(cId);
      container.setNodeId(recordFactory.newRecordInstance(NodeId.class));
      container.getNodeId().setHost("dummy");
      container.getNodeId().setPort(1234);
      container.setContainerToken(null);
      container.setNodeHttpAddress("localhost:9999");
      getContext().getEventHandler().handle(new TaskAttemptContainerAssignedEvent(event.getAttemptID(),container));
    }
  }
;
}
