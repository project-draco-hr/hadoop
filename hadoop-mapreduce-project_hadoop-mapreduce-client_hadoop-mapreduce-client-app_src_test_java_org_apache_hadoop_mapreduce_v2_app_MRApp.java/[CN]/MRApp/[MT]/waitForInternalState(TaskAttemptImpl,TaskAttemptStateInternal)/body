{
  int timeoutSecs=0;
  TaskAttemptReport report=attempt.getReport();
  TaskAttemptStateInternal iState=attempt.getInternalState();
  while (!finalState.equals(iState) && timeoutSecs++ < 20) {
    System.out.println("TaskAttempt Internal State is : " + iState + " Waiting for Internal state : "+ finalState+ "   progress : "+ report.getProgress());
    Thread.sleep(500);
    report=attempt.getReport();
    iState=attempt.getInternalState();
  }
  System.out.println("TaskAttempt Internal State is : " + iState);
  Assert.assertEquals("TaskAttempt Internal state is not correct (timedout)",finalState,iState);
}
