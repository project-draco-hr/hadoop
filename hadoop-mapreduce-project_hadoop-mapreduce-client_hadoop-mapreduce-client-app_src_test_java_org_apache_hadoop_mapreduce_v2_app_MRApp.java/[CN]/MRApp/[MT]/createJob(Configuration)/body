{
  UserGroupInformation currentUser=null;
  try {
    currentUser=UserGroupInformation.getCurrentUser();
  }
 catch (  IOException e) {
    throw new YarnException(e);
  }
  Job newJob=new TestJob(conf,getAppID(),getDispatcher().getEventHandler(),getTaskAttemptListener(),getContext().getClock(),currentUser.getUserName());
  ((AppContext)getContext()).getAllJobs().put(newJob.getID(),newJob);
  getDispatcher().register(JobFinishEvent.Type.class,new EventHandler<JobFinishEvent>(){
    @Override public void handle(    JobFinishEvent event){
      stop();
    }
  }
);
  return newJob;
}
