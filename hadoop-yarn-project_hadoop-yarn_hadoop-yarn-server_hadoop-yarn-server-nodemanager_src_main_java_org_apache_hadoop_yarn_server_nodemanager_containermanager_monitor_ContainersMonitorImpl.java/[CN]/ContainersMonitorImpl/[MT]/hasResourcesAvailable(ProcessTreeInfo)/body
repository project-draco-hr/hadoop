{
synchronized (this.containersAllocation) {
    if (this.containersAllocation.getPhysicalMemory() + (int)(pti.getPmemLimit() >> 20) > (int)(getPmemAllocatedForContainers() >> 20)) {
      return false;
    }
    if (isVmemCheckEnabled() && this.containersAllocation.getVirtualMemory() + (int)(pti.getVmemLimit() >> 20) > (int)(getVmemAllocatedForContainers() >> 20)) {
      return false;
    }
    if (this.containersAllocation.getCPU() + allocatedCpuUsage(pti) > 1.0f) {
      return false;
    }
  }
  return true;
}
