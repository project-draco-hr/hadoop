{
  List<StorageDirectory> sds=Lists.newArrayList();
  for (  String dirSpec : editsDirSpecs) {
    List<String> files=Lists.newArrayList();
    String[] logSpecs=dirSpec.split("\\|");
    for (    String logSpec : logSpecs) {
      Matcher m=Pattern.compile("\\[(\\d+),(\\d+)?\\]").matcher(logSpec);
      assertTrue("bad spec: " + logSpec,m.matches());
      if (m.group(2) == null) {
        files.add(NNStorage.getInProgressEditsFileName(Long.valueOf(m.group(1))));
      }
 else {
        files.add(NNStorage.getFinalizedEditsFileName(Long.valueOf(m.group(1)),Long.valueOf(m.group(2))));
      }
    }
    sds.add(FSImageTestUtil.mockStorageDirectory(NameNodeDirType.EDITS,false,files.toArray(new String[0])));
  }
  NNStorage storage=Mockito.mock(NNStorage.class);
  Mockito.doReturn(sds).when(storage).dirIterable(NameNodeDirType.EDITS);
  return storage;
}
