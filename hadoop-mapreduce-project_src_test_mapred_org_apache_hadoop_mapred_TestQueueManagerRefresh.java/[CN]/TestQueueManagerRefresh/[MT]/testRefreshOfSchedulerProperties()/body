{
  JobQueueInfo[] queues=getSimpleQueueHierarchy();
  for (  JobQueueInfo jqi : queues) {
    Properties props=new Properties();
    props.setProperty("testing.property","testing.value." + jqi.getQueueName());
    jqi.setProperties(props);
  }
  writeQueueConfigurationFile(QUEUES_CONFIG_FILE_PATH,new JobQueueInfo[]{queues[0]});
  QueueManager qManager=new QueueManager();
  MyTaskScheduler myScheduler=new MyTaskScheduler();
  qManager.refreshQueues(null,myScheduler.new MyQueueRefresher());
  Map<String,Properties> schedProps=myScheduler.getSchedulerProperties();
  for (  JobQueueInfo jqi : queues) {
    String expectedVal="testing.value." + jqi.getQueueName();
    Properties qProperties=schedProps.get(jqi.getQueueName());
    assertNotNull("Properties should not be null for the SchedulerQueue " + jqi.getQueueName(),qProperties);
    String observedVal=qProperties.getProperty("testing.property");
    assertEquals("Properties for the SchedulerQueue " + jqi.getQueueName() + " are not reloaded properly!",expectedVal,observedVal);
  }
}
