{
  if (conf.get(YarnConfiguration.APPLICATION_HISTORY_STORE) == null || conf.get(YarnConfiguration.APPLICATION_HISTORY_STORE).length() == 0) {
    return new ApplicationHistoryManagerOnTimelineStore(timelineDataManager,aclsManager);
  }
 else {
    LOG.warn("The filesystem based application history store is deprecated.");
    return new ApplicationHistoryManagerImpl();
  }
}
