{
  String bindAddress=WebAppUtils.getAHSWebAppURLWithoutScheme(getConfig());
  LOG.info("Instantiating AHSWebApp at " + bindAddress);
  try {
    webApp=WebApps.$for("applicationhistory",ApplicationHistoryClientService.class,ahsClientService,"ws").with(getConfig()).withHttpSpnegoPrincipalKey(YarnConfiguration.TIMELINE_SERVICE_WEBAPP_SPNEGO_USER_NAME_KEY).withHttpSpnegoKeytabKey(YarnConfiguration.TIMELINE_SERVICE_WEBAPP_SPNEGO_KEYTAB_FILE_KEY).at(bindAddress).start(new AHSWebApp(historyManager,timelineStore));
  }
 catch (  Exception e) {
    String msg="AHSWebApp failed to start.";
    LOG.error(msg,e);
    throw new YarnRuntimeException(msg,e);
  }
}
