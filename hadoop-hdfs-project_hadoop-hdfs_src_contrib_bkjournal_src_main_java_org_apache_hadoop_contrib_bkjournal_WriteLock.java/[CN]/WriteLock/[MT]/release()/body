{
  try {
    if (lockCount.decrementAndGet() <= 0) {
      if (lockCount.get() < 0) {
        LOG.warn("Unbalanced lock handling somewhere, lockCount down to " + lockCount.get());
      }
synchronized (this) {
        if (lockCount.get() <= 0) {
          if (LOG.isTraceEnabled()) {
            LOG.trace("releasing lock " + myznode);
          }
          if (myznode != null) {
            zkc.delete(myznode,-1);
            myznode=null;
          }
        }
      }
    }
  }
 catch (  Exception e) {
    throw new IOException("Exception accessing Zookeeper",e);
  }
}
