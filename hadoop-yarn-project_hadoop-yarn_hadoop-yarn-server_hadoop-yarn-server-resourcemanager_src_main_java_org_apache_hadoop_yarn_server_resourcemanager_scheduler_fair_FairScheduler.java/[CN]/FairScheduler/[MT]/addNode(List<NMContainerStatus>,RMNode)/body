{
  FSSchedulerNode schedulerNode=new FSSchedulerNode(node,usePortForNodeName);
  nodes.put(node.getNodeID(),schedulerNode);
  String rackName=node.getRackName() == null ? "NULL" : node.getRackName();
  if (nodesPerRack.containsKey(rackName)) {
    nodesPerRack.put(rackName,nodesPerRack.get(rackName) + 1);
  }
 else {
    nodesPerRack.put(rackName,1);
  }
  Resources.addTo(clusterResource,node.getTotalCapability());
  updateMaximumAllocation(schedulerNode,true);
  triggerUpdate();
  queueMgr.getRootQueue().setSteadyFairShare(clusterResource);
  queueMgr.getRootQueue().recomputeSteadyShares();
  LOG.info("Added node " + node.getNodeAddress() + " cluster capacity: "+ clusterResource);
  recoverContainersOnNode(containerReports,node);
  updateRootQueueMetrics();
}
