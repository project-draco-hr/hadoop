{
  ShortCircuitSharedMemorySegment.this.refCount.reference();
  Slot slot=null;
  try {
    final int numSlots=length / BYTES_PER_SLOT;
    for (int i=0; i < numSlots; i++) {
      long address=this.baseAddress + (i * BYTES_PER_SLOT);
      if (allocateSlot(address)) {
        slot=new Slot(address);
        break;
      }
    }
  }
  finally {
    if (slot == null) {
      if (refCount.unreference()) {
        free();
      }
    }
  }
  return slot;
}
