{
  if (!isACLsEnable) {
    return true;
  }
  if (scheduler instanceof CapacityScheduler) {
    CSQueue queue=((CapacityScheduler)scheduler).getQueue(app.getQueue());
    if (queue == null) {
      LOG.error("Queue " + app.getQueue() + " does not exist for "+ app.getApplicationId());
      return true;
    }
    return authorizer.checkPermission(new AccessRequest(queue.getPrivilegedEntity(),callerUGI,SchedulerUtils.toAccessType(acl),app.getApplicationId().toString(),app.getName(),remoteAddress,forwardedAddresses));
  }
 else {
    return scheduler.checkAccess(callerUGI,acl,app.getQueue());
  }
}
