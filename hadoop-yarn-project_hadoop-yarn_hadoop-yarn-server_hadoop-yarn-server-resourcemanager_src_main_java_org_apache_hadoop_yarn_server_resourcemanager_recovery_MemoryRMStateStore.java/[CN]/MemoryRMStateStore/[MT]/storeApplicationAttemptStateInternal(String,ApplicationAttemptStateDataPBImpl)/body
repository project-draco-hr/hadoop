{
  ApplicationAttemptId attemptId=ConverterUtils.toApplicationAttemptId(attemptIdStr);
  Credentials credentials=null;
  if (attemptStateData.getAppAttemptTokens() != null) {
    DataInputByteBuffer dibb=new DataInputByteBuffer();
    credentials=new Credentials();
    dibb.reset(attemptStateData.getAppAttemptTokens());
    credentials.readTokenStorageStream(dibb);
  }
  ApplicationAttemptState attemptState=new ApplicationAttemptState(attemptId,attemptStateData.getMasterContainer(),credentials,attemptStateData.getStartTime());
  ApplicationState appState=state.getApplicationState().get(attemptState.getAttemptId().getApplicationId());
  if (appState == null) {
    throw new YarnRuntimeException("Application doesn't exist");
  }
  appState.attempts.put(attemptState.getAttemptId(),attemptState);
}
