{
  ApplicationState updatedAppState=new ApplicationState(appStateData.getSubmitTime(),appStateData.getStartTime(),appStateData.getApplicationSubmissionContext(),appStateData.getUser(),appStateData.getState(),appStateData.getDiagnostics(),appStateData.getFinishTime());
  LOG.info("Updating final state " + appStateData.getState() + " for app: "+ appId);
  ApplicationId applicationId=updatedAppState.getAppId();
  if (state.appState.get(applicationId) != null) {
    updatedAppState.attempts.putAll(state.appState.get(applicationId).attempts);
  }
  state.appState.put(applicationId,updatedAppState);
}
