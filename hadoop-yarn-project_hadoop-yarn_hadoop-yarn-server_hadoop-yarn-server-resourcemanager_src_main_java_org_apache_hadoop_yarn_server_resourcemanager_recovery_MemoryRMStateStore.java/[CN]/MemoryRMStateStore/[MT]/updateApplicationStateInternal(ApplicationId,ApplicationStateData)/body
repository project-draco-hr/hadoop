{
  ApplicationState updatedAppState=new ApplicationState(appStateData.getSubmitTime(),appStateData.getStartTime(),appStateData.getApplicationSubmissionContext(),appStateData.getUser(),appStateData.getState(),appStateData.getDiagnostics(),appStateData.getFinishTime());
  LOG.info("Updating final state " + appStateData.getState() + " for app: "+ appId);
  if (state.appState.get(appId) != null) {
    updatedAppState.attempts.putAll(state.appState.get(appId).attempts);
  }
  state.appState.put(appId,updatedAppState);
}
