{
  if (currentShouldExist) {
    for (int i=0; i < baseDirs.length; i++) {
      assertEquals(UpgradeUtilities.checksumContents(DATA_NODE,new File(baseDirs[i],"current")),UpgradeUtilities.checksumMasterDataNodeContents());
    }
  }
  if (previousShouldExist) {
    for (int i=0; i < baseDirs.length; i++) {
      assertTrue(new File(baseDirs[i],"previous").isDirectory());
      assertEquals(UpgradeUtilities.checksumContents(DATA_NODE,new File(baseDirs[i],"previous")),UpgradeUtilities.checksumMasterDataNodeContents());
    }
  }
}
