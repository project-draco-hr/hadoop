{
  conf=new YarnConfiguration();
  conf.setBoolean(YarnConfiguration.TIMELINE_SERVICE_ENABLED,true);
  conf.setClass(YarnConfiguration.TIMELINE_SERVICE_STORE,MemoryTimelineStore.class,TimelineStore.class);
  conf.set(YarnConfiguration.YARN_HTTP_POLICY_KEY,"HTTPS_ONLY");
  conf.setFloat(YarnConfiguration.TIMELINE_SERVICE_VERSION,1.0f);
  File base=new File(BASEDIR);
  FileUtil.fullyDelete(base);
  base.mkdirs();
  keystoresDir=new File(BASEDIR).getAbsolutePath();
  sslConfDir=KeyStoreTestUtil.getClasspathDir(TestTimelineWebServicesWithSSL.class);
  KeyStoreTestUtil.setupSSLConfig(keystoresDir,sslConfDir,conf,false);
  conf.addResource("ssl-server.xml");
  conf.addResource("ssl-client.xml");
  timelineServer=new ApplicationHistoryServer();
  timelineServer.init(conf);
  timelineServer.start();
  store=timelineServer.getTimelineStore();
}
