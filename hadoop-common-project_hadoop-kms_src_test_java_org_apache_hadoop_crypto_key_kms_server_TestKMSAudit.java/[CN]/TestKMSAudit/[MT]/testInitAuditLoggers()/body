{
  List<KMSAuditLogger> loggers=(List<KMSAuditLogger>)Whitebox.getInternalState(kmsAudit,"auditLoggers");
  Assert.assertEquals(1,loggers.size());
  Assert.assertEquals(SimpleKMSAuditLogger.class,loggers.get(0).getClass());
  final Configuration conf=new Configuration();
  conf.set(KMSConfiguration.KMS_AUDIT_LOGGER_KEY,SimpleKMSAuditLogger.class.getName() + ", " + SimpleKMSAuditLogger.class.getName());
  final KMSAudit audit=new KMSAudit(conf);
  loggers=(List<KMSAuditLogger>)Whitebox.getInternalState(audit,"auditLoggers");
  Assert.assertEquals(1,loggers.size());
  Assert.assertEquals(SimpleKMSAuditLogger.class,loggers.get(0).getClass());
  conf.set(KMSConfiguration.KMS_AUDIT_LOGGER_KEY,SimpleKMSAuditLogger.class.getName() + ",unknown");
  try {
    new KMSAudit(conf);
    Assert.fail("loggers configured but invalid, init should fail.");
  }
 catch (  Exception ex) {
    GenericTestUtils.assertExceptionContains(KMSConfiguration.KMS_AUDIT_LOGGER_KEY,ex);
  }
}
