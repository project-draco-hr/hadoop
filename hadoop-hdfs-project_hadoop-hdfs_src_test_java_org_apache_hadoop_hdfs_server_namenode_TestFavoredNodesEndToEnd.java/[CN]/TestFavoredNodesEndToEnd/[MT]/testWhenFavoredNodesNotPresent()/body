{
  Random rand=new Random(System.currentTimeMillis());
  InetSocketAddress arbitraryAddrs[]=new InetSocketAddress[3];
  for (int i=0; i < 3; i++) {
    arbitraryAddrs[i]=getArbitraryLocalHostAddr();
  }
  Path p=new Path("/filename-foo-bar");
  FSDataOutputStream out=dfs.create(p,FsPermission.getDefault(),true,4096,(short)3,(long)4096,null,arbitraryAddrs);
  out.write(SOME_BYTES);
  out.close();
  BlockLocation[] locations=dfs.getClient().getBlockLocations(p.toUri().getPath(),0,Long.MAX_VALUE);
  assertTrue(locations.length == 1 && locations[0].getHosts().length == 3);
}
