{
  Preconditions.checkArgument(b.triplets != null,"BlockInfo is not initialized");
  Preconditions.checkArgument(b.triplets.length % 3 == 0,"Malformed BlockInfo");
  for (int idx=b.getCapacity() - 1; idx >= 0; idx--) {
    if (b.getDatanode(idx) != null) {
      return idx + 1;
    }
  }
  return 0;
}
