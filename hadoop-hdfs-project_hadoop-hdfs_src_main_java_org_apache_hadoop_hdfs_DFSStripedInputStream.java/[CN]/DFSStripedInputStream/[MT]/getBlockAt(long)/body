{
  LocatedBlock lb=getBlockGroupAt(blkStartOffset);
  int idx=(int)((blkStartOffset - lb.getStartOffset()) % (dataBlkNum + parityBlkNum));
  LocatedStripedBlock lsb=(LocatedStripedBlock)lb;
  int i=0;
  for (; i < lsb.getBlockIndices().length; i++) {
    if (lsb.getBlockIndices()[i] == idx) {
      break;
    }
  }
  if (DFSClient.LOG.isDebugEnabled()) {
    DFSClient.LOG.debug("getBlockAt for striped blocks, offset=" + blkStartOffset + ". Obtained block "+ lb+ ", idx="+ idx);
  }
  return StripedBlockUtil.constructInternalBlock(lsb,i,cellSize,dataBlkNum,idx);
}
