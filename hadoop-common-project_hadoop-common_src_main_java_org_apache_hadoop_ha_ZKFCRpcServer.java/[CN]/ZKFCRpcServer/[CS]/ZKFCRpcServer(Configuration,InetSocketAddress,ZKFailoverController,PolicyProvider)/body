{
  this.zkfc=zkfc;
  RPC.setProtocolEngine(conf,ZKFCProtocolPB.class,ProtobufRpcEngine.class);
  ZKFCProtocolServerSideTranslatorPB translator=new ZKFCProtocolServerSideTranslatorPB(this);
  BlockingService service=ZKFCProtocolService.newReflectiveBlockingService(translator);
  this.server=new RPC.Builder(conf).setProtocol(ZKFCProtocolPB.class).setInstance(service).setBindAddress(bindAddr.getHostName()).setPort(bindAddr.getPort()).setNumHandlers(HANDLER_COUNT).setVerbose(false).build();
  if (conf.getBoolean(CommonConfigurationKeys.HADOOP_SECURITY_AUTHORIZATION,false)) {
    server.refreshServiceAcl(conf,policy);
  }
}
