{
  this.zkfc=zkfc;
  RPC.setProtocolEngine(conf,ZKFCProtocolPB.class,ProtobufRpcEngine.class);
  ZKFCProtocolServerSideTranslatorPB translator=new ZKFCProtocolServerSideTranslatorPB(this);
  BlockingService service=ZKFCProtocolService.newReflectiveBlockingService(translator);
  this.server=RPC.getServer(ZKFCProtocolPB.class,service,bindAddr.getHostName(),bindAddr.getPort(),HANDLER_COUNT,false,conf,null);
  if (conf.getBoolean(CommonConfigurationKeys.HADOOP_SECURITY_AUTHORIZATION,false)) {
    server.refreshServiceAcl(conf,policy);
  }
}
