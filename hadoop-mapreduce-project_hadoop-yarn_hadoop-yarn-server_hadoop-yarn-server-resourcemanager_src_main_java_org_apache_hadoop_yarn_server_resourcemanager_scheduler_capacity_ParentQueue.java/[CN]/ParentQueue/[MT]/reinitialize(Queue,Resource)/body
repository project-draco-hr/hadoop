{
  if (!(queue instanceof ParentQueue) || !queue.getQueuePath().equals(getQueuePath())) {
    throw new IOException("Trying to reinitialize " + getQueuePath() + " from "+ queue.getQueuePath());
  }
  ParentQueue parentQueue=(ParentQueue)queue;
  Map<String,Queue> currentChildQueues=getQueues(childQueues);
  Map<String,Queue> newChildQueues=getQueues(parentQueue.childQueues);
  for (  Map.Entry<String,Queue> e : newChildQueues.entrySet()) {
    String newChildQueueName=e.getKey();
    Queue newChildQueue=e.getValue();
    Queue childQueue=currentChildQueues.get(newChildQueueName);
    if (childQueue != null) {
      childQueue.reinitialize(newChildQueue,clusterResource);
      LOG.info(getQueueName() + ": re-configured queue: " + childQueue);
    }
 else {
      currentChildQueues.put(newChildQueueName,newChildQueue);
      LOG.info(getQueueName() + ": added new child queue: " + newChildQueue);
    }
  }
  childQueues.clear();
  childQueues.addAll(currentChildQueues.values());
  setupQueueConfigs(parentQueue.capacity,parentQueue.absoluteCapacity,parentQueue.maximumCapacity,parentQueue.absoluteMaxCapacity,parentQueue.state,parentQueue.acls);
  updateResource(clusterResource);
}
