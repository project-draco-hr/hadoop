{
  Resource assigned=Resources.createResource(0);
  while (canAssign(node)) {
    if (LOG.isDebugEnabled()) {
      LOG.debug("Trying to assign containers to child-queue of " + getQueueName());
    }
    if (!assignToQueue(clusterResource)) {
      break;
    }
    Resource assignedToChild=assignContainersToChildQueues(clusterResource,node);
    if (Resources.greaterThan(assignedToChild,Resources.none())) {
      allocateResource(clusterResource,assignedToChild);
      Resources.addTo(assigned,assignedToChild);
      LOG.info("assignedContainer" + " queue=" + getQueueName() + " util="+ getUtilization()+ " used="+ usedResources+ " cluster="+ clusterResource);
    }
 else {
      break;
    }
    if (LOG.isDebugEnabled()) {
      LOG.debug("ParentQ=" + getQueueName() + " assignedSoFarInThisIteration="+ assigned+ " utilization="+ getUtilization());
    }
    if (!rootQueue) {
      break;
    }
  }
  return assigned;
}
