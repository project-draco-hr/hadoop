{
  final ApplicationId appId=ApplicationId.newInstance(0,1);
  ApplicationReport app;
  if (callerUGI == null) {
    app=historyManager.getApplication(appId);
  }
 else {
    app=callerUGI.doAs(new PrivilegedExceptionAction<ApplicationReport>(){
      @Override public ApplicationReport run() throws Exception {
        return historyManager.getApplication(appId);
      }
    }
);
  }
  Assert.assertNotNull(app);
  Assert.assertEquals(appId,app.getApplicationId());
  Assert.assertEquals("test app",app.getName());
  Assert.assertEquals("test app type",app.getApplicationType());
  Assert.assertEquals("user1",app.getUser());
  Assert.assertEquals("test queue",app.getQueue());
  Assert.assertEquals(Integer.MAX_VALUE + 2L,app.getStartTime());
  Assert.assertEquals(Integer.MAX_VALUE + 3L,app.getFinishTime());
  Assert.assertTrue(Math.abs(app.getProgress() - 1.0F) < 0.0001);
  if (callerUGI != null && callerUGI.getShortUserName().equals("user3")) {
    Assert.assertEquals(ApplicationAttemptId.newInstance(appId,-1),app.getCurrentApplicationAttemptId());
    Assert.assertEquals(null,app.getHost());
    Assert.assertEquals(-1,app.getRpcPort());
    Assert.assertEquals(null,app.getTrackingUrl());
    Assert.assertEquals(null,app.getOriginalTrackingUrl());
    Assert.assertEquals(null,app.getDiagnostics());
  }
 else {
    Assert.assertEquals(ApplicationAttemptId.newInstance(appId,1),app.getCurrentApplicationAttemptId());
    Assert.assertEquals("test host",app.getHost());
    Assert.assertEquals(-100,app.getRpcPort());
    Assert.assertEquals("test tracking url",app.getTrackingUrl());
    Assert.assertEquals("test original tracking url",app.getOriginalTrackingUrl());
    Assert.assertEquals("test diagnostics info",app.getDiagnostics());
  }
  Assert.assertEquals(FinalApplicationStatus.UNDEFINED,app.getFinalApplicationStatus());
  Assert.assertEquals(YarnApplicationState.FINISHED,app.getYarnApplicationState());
}
