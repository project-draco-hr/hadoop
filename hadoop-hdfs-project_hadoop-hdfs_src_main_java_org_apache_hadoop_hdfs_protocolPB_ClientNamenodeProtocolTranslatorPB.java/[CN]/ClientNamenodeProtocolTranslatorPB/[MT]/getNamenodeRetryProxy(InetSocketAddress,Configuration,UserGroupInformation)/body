{
  RPC.setProtocolEngine(conf,ClientNamenodeProtocolPB.class,ProtobufRpcEngine.class);
  ClientNamenodeProtocolPB proxy=RPC.getProxy(ClientNamenodeProtocolPB.class,RPC.getProtocolVersion(ClientNamenodeProtocolPB.class),nameNodeAddr,ugi,conf,NetUtils.getSocketFactory(conf,ClientNamenodeProtocolPB.class));
  return DFSUtil.createNameNodeProxyWithRetries(proxy);
}
