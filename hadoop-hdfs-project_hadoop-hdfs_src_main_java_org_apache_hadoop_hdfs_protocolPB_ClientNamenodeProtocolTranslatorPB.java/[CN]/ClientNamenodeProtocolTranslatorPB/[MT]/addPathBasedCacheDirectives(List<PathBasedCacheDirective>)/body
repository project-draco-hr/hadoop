{
  try {
    AddPathBasedCacheDirectivesRequestProto.Builder builder=AddPathBasedCacheDirectivesRequestProto.newBuilder();
    for (    PathBasedCacheDirective directive : directives) {
      builder.addElements(PathBasedCacheDirectiveProto.newBuilder().setPath(directive.getPath()).setPool(directive.getPool()).build());
    }
    AddPathBasedCacheDirectivesResponseProto result=rpcProxy.addPathBasedCacheDirectives(null,builder.build());
    int resultsCount=result.getResultsCount();
    ArrayList<Fallible<PathBasedCacheDescriptor>> results=new ArrayList<Fallible<PathBasedCacheDescriptor>>(resultsCount);
    for (int i=0; i < resultsCount; i++) {
      PathBasedCacheDirective directive=directives.get(i);
      long code=result.getResults(i);
      if (code > 0) {
        results.add(new Fallible<PathBasedCacheDescriptor>(new PathBasedCacheDescriptor(code,directive.getPath(),directive.getPool())));
      }
 else {
        results.add(new Fallible<PathBasedCacheDescriptor>(addPathBasedCacheDirectivesError(code,directive)));
      }
    }
    return results;
  }
 catch (  ServiceException e) {
    throw ProtobufHelper.getRemoteException(e);
  }
}
