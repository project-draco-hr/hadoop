{
  try {
    AddPathCacheDirectivesRequestProto.Builder builder=AddPathCacheDirectivesRequestProto.newBuilder();
    for (    PathCacheDirective directive : directives) {
      builder.addElements(PathCacheDirectiveProto.newBuilder().setPath(directive.getPath()).setPool(PBHelper.convert(new CachePool(directive.getPoolId()))).build());
    }
    AddPathCacheDirectivesResponseProto result=rpcProxy.addPathCacheDirectives(null,builder.build());
    int resultsCount=result.getResultsCount();
    ArrayList<Fallible<PathCacheEntry>> results=new ArrayList<Fallible<PathCacheEntry>>(resultsCount);
    for (int i=0; i < resultsCount; i++) {
      PathCacheDirective directive=directives.get(i);
      long code=result.getResults(i);
      if (code > 0) {
        results.add(new Fallible<PathCacheEntry>(new PathCacheEntry(code,directive)));
      }
 else {
        results.add(new Fallible<PathCacheEntry>(addPathCacheDirectivesError(code,directive)));
      }
    }
    return results;
  }
 catch (  ServiceException e) {
    throw ProtobufHelper.getRemoteException(e);
  }
}
