{
  ApplicationAttemptId attemptId=getContext().getApplicationAttemptId();
  Token<AMRMTokenIdentifier> token=rm.getRMContext().getRMApps().get(attemptId.getApplicationId()).getRMAppAttempt(attemptId).getAMRMToken();
  try {
    UserGroupInformation ugi=UserGroupInformation.getCurrentUser();
    ugi.addTokenIdentifier(token.decodeIdentifier());
  }
 catch (  IOException e) {
    throw new YarnRuntimeException(e);
  }
  super.register();
}
