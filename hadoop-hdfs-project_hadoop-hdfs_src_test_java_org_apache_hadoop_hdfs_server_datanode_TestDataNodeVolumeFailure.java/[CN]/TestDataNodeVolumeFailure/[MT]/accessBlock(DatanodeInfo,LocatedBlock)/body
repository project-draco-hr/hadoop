{
  InetSocketAddress targetAddr=null;
  Socket s=null;
  ExtendedBlock block=lblock.getBlock();
  targetAddr=NetUtils.createSocketAddr(datanode.getXferAddr());
  s=NetUtils.getDefaultSocketFactory(conf).createSocket();
  s.connect(targetAddr,HdfsServerConstants.READ_TIMEOUT);
  s.setSoTimeout(HdfsServerConstants.READ_TIMEOUT);
  String file=BlockReaderFactory.getFileName(targetAddr,"test-blockpoolid",block.getBlockId());
  BlockReader blockReader=BlockReaderFactory.newBlockReader(new DFSClient.Conf(conf),file,block,lblock.getBlockToken(),0,-1,true,"TestDataNodeVolumeFailure",TcpPeerServer.peerFromSocket(s),datanode,null,null,null,false,CachingStrategy.newDefaultStrategy());
  blockReader.close();
}
