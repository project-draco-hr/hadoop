{
  InetSocketAddress targetAddr=null;
  Socket s=null;
  ExtendedBlock block=lblock.getBlock();
  targetAddr=NetUtils.createSocketAddr(datanode.getXferAddr());
  s=NetUtils.getDefaultSocketFactory(conf).createSocket();
  s.connect(targetAddr,HdfsServerConstants.READ_TIMEOUT);
  s.setSoTimeout(HdfsServerConstants.READ_TIMEOUT);
  BlockReader blockReader=BlockReaderFactory.newBlockReader(new BlockReaderFactory.Params(new Conf(conf)).setFile(BlockReaderFactory.getFileName(targetAddr,"test-blockpoolid",block.getBlockId())).setBlock(block).setBlockToken(lblock.getBlockToken()).setSocket(s));
  blockReader.close();
}
