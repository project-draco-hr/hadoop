{
  long start=Time.now();
  while (true) {
    try {
      HostPort hpobj=parseHostPortList(hp).get(0);
      String result=send4LetterWord(hpobj.host,hpobj.port,"stat");
      if (result.startsWith("Zookeeper version:") && !result.contains("READ-ONLY")) {
        return true;
      }
    }
 catch (    IOException e) {
      LOG.info("server " + hp + " not up "+ e);
    }
    if (Time.now() > start + timeout) {
      break;
    }
    try {
      Thread.sleep(250);
    }
 catch (    InterruptedException e) {
    }
  }
  return false;
}
