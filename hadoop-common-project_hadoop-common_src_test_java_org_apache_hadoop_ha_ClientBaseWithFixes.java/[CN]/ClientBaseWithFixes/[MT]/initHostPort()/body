{
  BASETEST.mkdirs();
  int port;
  for (; ; ) {
    port=PortAssignment.unique();
    FileLock lock=null;
    portNumLockFile=null;
    try {
      try {
        portNumFile=new File(BASETEST,port + ".lock");
        portNumLockFile=new RandomAccessFile(portNumFile,"rw");
        try {
          lock=portNumLockFile.getChannel().tryLock();
        }
 catch (        OverlappingFileLockException e) {
          continue;
        }
      }
  finally {
        if (lock != null)         break;
        if (portNumLockFile != null)         portNumLockFile.close();
      }
    }
 catch (    IOException e) {
      throw new RuntimeException(e);
    }
  }
  return "127.0.0.1:" + port;
}
