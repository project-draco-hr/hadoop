{
  final DatanodeDescriptor node=getDatanode(nodeID.getStorageID());
  if (node == null)   return null;
  if (!node.getXferAddr().equals(nodeID.getXferAddr())) {
    final UnregisteredNodeException e=new UnregisteredNodeException(nodeID,node);
    NameNode.stateChangeLog.fatal("BLOCK* NameSystem.getDatanode: " + e.getLocalizedMessage());
    throw e;
  }
  return node;
}
