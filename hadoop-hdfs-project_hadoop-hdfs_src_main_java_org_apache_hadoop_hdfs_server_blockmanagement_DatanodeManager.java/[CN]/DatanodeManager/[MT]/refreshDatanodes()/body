{
  final Map<String,DatanodeDescriptor> copy;
synchronized (this) {
    copy=new HashMap<>(datanodeMap);
  }
  for (  DatanodeDescriptor node : copy.values()) {
    if (!hostFileManager.isIncluded(node)) {
      node.setDisallowed(true);
    }
 else {
      if (hostFileManager.isExcluded(node)) {
        decomManager.startDecommission(node);
      }
 else {
        decomManager.stopDecommission(node);
      }
    }
  }
}
