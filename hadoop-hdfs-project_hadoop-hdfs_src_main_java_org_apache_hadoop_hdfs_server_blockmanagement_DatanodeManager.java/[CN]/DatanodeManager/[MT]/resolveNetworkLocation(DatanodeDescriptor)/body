{
  List<String> names=new ArrayList<String>(1);
  if (dnsToSwitchMapping instanceof CachedDNSToSwitchMapping) {
    names.add(node.getIpAddr());
  }
 else {
    String hostName=node.getHostName();
    int colon=hostName.indexOf(":");
    hostName=(colon == -1) ? hostName : hostName.substring(0,colon);
    names.add(hostName);
  }
  List<String> rName=dnsToSwitchMapping.resolve(names);
  String networkLocation;
  if (rName == null) {
    LOG.error("The resolve call returned null! Using " + NetworkTopology.DEFAULT_RACK + " for host "+ names);
    networkLocation=NetworkTopology.DEFAULT_RACK;
  }
 else {
    networkLocation=rName.get(0);
  }
  node.setNetworkLocation(networkLocation);
}
