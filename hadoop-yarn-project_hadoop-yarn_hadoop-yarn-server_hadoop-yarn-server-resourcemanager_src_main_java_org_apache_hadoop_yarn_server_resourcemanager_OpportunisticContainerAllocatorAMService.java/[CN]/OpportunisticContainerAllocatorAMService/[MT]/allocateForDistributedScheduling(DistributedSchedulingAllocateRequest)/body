{
  List<Container> distAllocContainers=request.getAllocatedContainers();
  handleNewContainers(distAllocContainers,true);
  AllocateResponse response=allocate(request.getAllocateRequest());
  DistributedSchedulingAllocateResponse dsResp=recordFactory.newRecordInstance(DistributedSchedulingAllocateResponse.class);
  dsResp.setAllocateResponse(response);
  dsResp.setNodesForScheduling(getLeastLoadedNodes());
  return dsResp;
}
