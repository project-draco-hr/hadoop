{
  NodeManagerMetrics metrics=NodeManagerMetrics.create();
  Resource total=Records.newRecord(Resource.class);
  total.setMemory(8 * GiB);
  total.setVirtualCores(16);
  Resource resource=Records.newRecord(Resource.class);
  resource.setMemory(512);
  resource.setVirtualCores(2);
  metrics.addResource(total);
  for (int i=10; i-- > 0; ) {
    metrics.launchedContainer();
    metrics.allocateContainer(resource);
  }
  metrics.initingContainer();
  metrics.endInitingContainer();
  metrics.runningContainer();
  metrics.endRunningContainer();
  metrics.completedContainer();
  metrics.releaseContainer(resource);
  metrics.failedContainer();
  metrics.releaseContainer(resource);
  metrics.killedContainer();
  metrics.releaseContainer(resource);
  metrics.initingContainer();
  metrics.runningContainer();
  metrics.addContainerLaunchDuration(1);
  checkMetrics(10,1,1,1,1,1,4,7,4,14,2);
}
