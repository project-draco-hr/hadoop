{
  if (symlink.length() != 0) {
    return new INodeSymlink(id,symlink,modificationTime,atime,permissions);
  }
 else   if (blocks == null && numBlocks < 0) {
    INodeDirectory dir=null;
    if (nsQuota >= 0 || dsQuota >= 0) {
      dir=new INodeDirectoryWithQuota(id,permissions,modificationTime,nsQuota,dsQuota);
    }
 else {
      dir=new INodeDirectory(id,permissions,modificationTime);
    }
    return snapshottable ? new INodeDirectorySnapshottable(dir) : (withSnapshot ? new INodeDirectoryWithSnapshot(dir) : dir);
  }
  INodeFile fileNode=new INodeFile(id,permissions,blocks,replication,modificationTime,atime,preferredBlockSize);
  return withLink ? new INodeFileWithSnapshot(fileNode,null) : fileNode;
}
