{
  computeContentSummary(snapshotId,summary);
  final ContentCounts counts=summary.getCounts();
  final ContentCounts snapshotCounts=summary.getSnapshotCounts();
  final QuotaCounts q=getQuotaCounts();
  return new ContentSummary.Builder().length(counts.getLength()).fileCount(counts.getFileCount() + counts.getSymlinkCount()).directoryCount(counts.getDirectoryCount()).quota(q.getNameSpace()).spaceConsumed(counts.getStoragespace()).spaceQuota(q.getStorageSpace()).typeConsumed(counts.getTypeSpaces()).typeQuota(q.getTypeSpaces().asArray()).snapshotLength(snapshotCounts.getLength()).snapshotFileCount(snapshotCounts.getFileCount()).snapshotDirectoryCount(snapshotCounts.getDirectoryCount()).snapshotSpaceConsumed(snapshotCounts.getStoragespace()).build();
}
