{
  if (latestSnapshotId == Snapshot.CURRENT_STATE_ID) {
    return false;
  }
  if (parent != null && parent.isReference()) {
    return true;
  }
  final INodeDirectory parentDir=getParent();
  if (parentDir == null) {
    return true;
  }
  if (!parentDir.isInLatestSnapshot(latestSnapshotId)) {
    return false;
  }
  final INode child=parentDir.getChild(getLocalNameBytes(),latestSnapshotId);
  if (this == child) {
    return true;
  }
  if (child == null || !(child.isReference())) {
    return false;
  }
  return this == child.asReference().getReferredINode();
}
