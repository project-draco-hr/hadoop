{
  startUpCluster(true,-1);
  final String METHOD_NAME=GenericTestUtils.getMethodName();
  Path path=new Path("/" + METHOD_NAME + ".dat");
  makeTestFile(path,BLOCK_SIZE,true);
  LocatedBlocks locatedBlocks=ensureFileReplicasOnStorageType(path,RAM_DISK);
  Thread.sleep(6 * LAZY_WRITER_INTERVAL_SEC * 1000);
  client.delete(path.toString(),false);
  Assert.assertFalse(fs.exists(path));
  assertThat(verifyDeletedBlocks(locatedBlocks),is(true));
  verifyRamDiskJMXMetric("RamDiskBlocksLazyPersisted",1);
  verifyRamDiskJMXMetric("RamDiskBytesLazyPersisted",BLOCK_SIZE);
}
