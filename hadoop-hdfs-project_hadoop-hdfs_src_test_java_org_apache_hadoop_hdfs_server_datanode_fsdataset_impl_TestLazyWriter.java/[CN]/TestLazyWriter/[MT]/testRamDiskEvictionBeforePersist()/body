{
  getClusterBuilder().setRamDiskReplicaCapacity(1).build();
  final String METHOD_NAME=GenericTestUtils.getMethodName();
  Path path1=new Path("/" + METHOD_NAME + ".01.dat");
  Path path2=new Path("/" + METHOD_NAME + ".02.dat");
  final int SEED=0XFADED;
  FsDatasetTestUtil.stopLazyWriter(cluster.getDataNodes().get(0));
  makeRandomTestFile(path1,BLOCK_SIZE,true,SEED);
  ensureFileReplicasOnStorageType(path1,RAM_DISK);
  makeTestFile(path2,BLOCK_SIZE,true);
  ensureFileReplicasOnStorageType(path1,RAM_DISK);
  ensureFileReplicasOnStorageType(path2,DEFAULT);
  assert(fs.exists(path1));
  assert(fs.exists(path2));
  assertTrue(verifyReadRandomFile(path1,BLOCK_SIZE,SEED));
}
