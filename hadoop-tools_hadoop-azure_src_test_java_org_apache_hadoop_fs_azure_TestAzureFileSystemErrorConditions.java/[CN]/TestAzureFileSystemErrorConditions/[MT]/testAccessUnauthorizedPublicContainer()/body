{
  Configuration conf=new Configuration();
  AzureBlobStorageTestAccount.addWasbToConfiguration(conf);
  Path noAccessPath=new Path("wasb://nonExistentContainer@hopefullyNonExistentAccount/someFile");
  NativeAzureFileSystem.suppressRetryPolicy();
  try {
    FileSystem.get(noAccessPath.toUri(),conf).open(noAccessPath);
    assertTrue("Should've thrown.",false);
  }
 catch (  AzureException ex) {
    assertTrue("Unexpected message in exception " + ex,ex.getMessage().contains("Unable to access container nonExistentContainer in account" + " hopefullyNonExistentAccount"));
  }
 finally {
    NativeAzureFileSystem.resumeRetryPolicy();
  }
}
