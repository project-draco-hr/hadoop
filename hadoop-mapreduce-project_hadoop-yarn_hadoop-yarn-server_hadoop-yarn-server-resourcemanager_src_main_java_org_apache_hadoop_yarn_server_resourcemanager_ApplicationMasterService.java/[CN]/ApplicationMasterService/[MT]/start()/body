{
  Configuration conf=getConfig();
  YarnRPC rpc=YarnRPC.create(conf);
  String bindAddressStr=conf.get(YarnConfiguration.RM_SCHEDULER_ADDRESS,YarnConfiguration.DEFAULT_RM_SCHEDULER_ADDRESS);
  InetSocketAddress masterServiceAddress=NetUtils.createSocketAddr(bindAddressStr,YarnConfiguration.DEFAULT_RM_SCHEDULER_PORT,YarnConfiguration.RM_SCHEDULER_ADDRESS);
  this.server=rpc.getServer(AMRMProtocol.class,this,masterServiceAddress,conf,this.rmContext.getApplicationTokenSecretManager(),conf.getInt(YarnConfiguration.RM_SCHEDULER_CLIENT_THREAD_COUNT,YarnConfiguration.DEFAULT_RM_SCHEDULER_CLIENT_THREAD_COUNT));
  if (conf.getBoolean(CommonConfigurationKeysPublic.HADOOP_SECURITY_AUTHORIZATION,false)) {
    refreshServiceAcls(conf,new RMPolicyProvider());
  }
  this.server.start();
  this.bindAddress=NetUtils.createSocketAddr(masterServiceAddress.getHostName(),this.server.getPort());
  super.start();
}
