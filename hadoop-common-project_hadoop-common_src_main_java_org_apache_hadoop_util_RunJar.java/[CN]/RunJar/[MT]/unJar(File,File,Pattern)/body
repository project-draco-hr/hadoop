{
  try (JarFile jar=new JarFile(jarFile)){
    int numOfFailedLastModifiedSet=0;
    Enumeration<JarEntry> entries=jar.entries();
    while (entries.hasMoreElements()) {
      final JarEntry entry=entries.nextElement();
      if (!entry.isDirectory() && unpackRegex.matcher(entry.getName()).matches()) {
        try (InputStream in=jar.getInputStream(entry)){
          File file=new File(toDir,entry.getName());
          ensureDirectory(file.getParentFile());
          try (OutputStream out=new FileOutputStream(file)){
            IOUtils.copyBytes(in,out,BUFFER_SIZE);
          }
           if (!file.setLastModified(entry.getTime())) {
            numOfFailedLastModifiedSet++;
          }
        }
       }
    }
    if (numOfFailedLastModifiedSet > 0) {
      LOG.warn("Could not set last modfied time for {} file(s)",numOfFailedLastModifiedSet);
    }
  }
 }
