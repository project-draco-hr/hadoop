{
  AppsInfo allApps=new AppsInfo();
  for (  Entry<ApplicationId,Application> entry : this.nmContext.getApplications().entrySet()) {
    AppInfo appInfo=new AppInfo(entry.getValue());
    if (stateQuery != null && !stateQuery.isEmpty()) {
      ApplicationState state=ApplicationState.valueOf(stateQuery);
      if (!appInfo.getState().equalsIgnoreCase(stateQuery)) {
        continue;
      }
    }
    if (userQuery != null && !userQuery.isEmpty()) {
      if (!appInfo.getUser().toString().equals(userQuery)) {
        continue;
      }
    }
    allApps.add(appInfo);
  }
  return allApps;
}
