{
  String applicationAttemptIdStr="appattempt_1317529182569_0004_000001";
  String containerIdStr="container_1317529182569_0004_000001_1";
  String stagingDir="/tmp/staging";
  String userName="TestAppMasterUser";
  ApplicationAttemptId applicationAttemptId=ConverterUtils.toApplicationAttemptId(applicationAttemptIdStr);
  ContainerId containerId=ConverterUtils.toContainerId(containerIdStr);
  MRAppMasterTest appMaster=new MRAppMasterTest(applicationAttemptId,containerId,"host",-1,System.currentTimeMillis());
  YarnConfiguration conf=new YarnConfiguration();
  conf.set(MRJobConfig.MR_AM_STAGING_DIR,stagingDir);
  MRAppMaster.initAndStartAppMaster(appMaster,conf,userName);
  Assert.assertEquals(stagingDir + Path.SEPARATOR + userName+ Path.SEPARATOR+ ".staging",appMaster.stagingDirPath.toString());
}
