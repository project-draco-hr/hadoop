{
  String applicationAttemptIdStr="appattempt_1317529182569_0004_000001";
  String containerIdStr="container_1317529182569_0004_000001_1";
  String userName="TestAppMasterUser";
  ApplicationAttemptId applicationAttemptId=ConverterUtils.toApplicationAttemptId(applicationAttemptIdStr);
  ContainerId containerId=ConverterUtils.toContainerId(containerIdStr);
  MRAppMasterTest appMaster=new MRAppMasterTest(applicationAttemptId,containerId,"host",-1,-1,System.currentTimeMillis(),MRJobConfig.DEFAULT_MR_AM_MAX_ATTEMPTS);
  JobConf conf=new JobConf();
  conf.set(MRJobConfig.MR_AM_STAGING_DIR,stagingDir);
  MRAppMaster.initAndStartAppMaster(appMaster,conf,userName);
  Path userPath=new Path(stagingDir,userName);
  Path userStagingPath=new Path(userPath,".staging");
  assertEquals(userStagingPath.toString(),appMaster.stagingDirPath.toString());
}
