{
  try {
    if (outFd != null && offsetInBlock > lastCacheManagementOffset + CACHE_DROP_LAG_BYTES) {
      if (syncBehindWrites) {
        NativeIO.POSIX.syncFileRangeIfPossible(outFd,lastCacheManagementOffset,offsetInBlock - lastCacheManagementOffset,NativeIO.POSIX.SYNC_FILE_RANGE_WRITE);
      }
      long dropPos=lastCacheManagementOffset - CACHE_DROP_LAG_BYTES;
      if (dropPos > 0 && dropCacheBehindWrites) {
        NativeIO.POSIX.posixFadviseIfPossible(block.getBlockName(),outFd,0,dropPos,NativeIO.POSIX.POSIX_FADV_DONTNEED);
      }
      lastCacheManagementOffset=offsetInBlock;
    }
  }
 catch (  Throwable t) {
    LOG.warn("Error managing cache for writer of block " + block,t);
  }
}
