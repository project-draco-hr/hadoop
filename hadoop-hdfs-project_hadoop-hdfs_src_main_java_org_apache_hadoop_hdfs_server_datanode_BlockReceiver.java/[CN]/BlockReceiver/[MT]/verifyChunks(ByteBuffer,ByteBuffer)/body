{
  try {
    clientChecksum.verifyChunkedSums(dataBuf,checksumBuf,clientname,0);
  }
 catch (  ChecksumException ce) {
    PacketHeader header=packetReceiver.getHeader();
    String specificOffset="specific offsets are:" + " offsetInBlock = " + header.getOffsetInBlock() + " offsetInPacket = "+ ce.getPos();
    LOG.warn("Checksum error in block " + block + " from "+ inAddr+ ", "+ specificOffset,ce);
    if (srcDataNode != null && isDatanode) {
      try {
        LOG.info("report corrupt " + block + " from datanode "+ srcDataNode+ " to namenode");
        datanode.reportRemoteBadBlock(srcDataNode,block);
      }
 catch (      IOException e) {
        LOG.warn("Failed to report bad " + block + " from datanode "+ srcDataNode+ " to namenode");
      }
    }
    throw new IOException("Unexpected checksum mismatch while writing " + block + " from "+ inAddr);
  }
}
