{
  init(res);
  UserGroupInformation callerUgi=getUser(req);
  if (callerUgi == null) {
    String msg="The owner of the posted timeline entities is not set";
    LOG.error(msg);
    throw new ForbiddenException(msg);
  }
  try {
    AppLevelAggregatorService service=getAggregatorService(req);
    if (service == null) {
      LOG.error("Application not found");
      throw new NotFoundException();
    }
    return service.postEntities(entities,callerUgi);
  }
 catch (  Exception e) {
    LOG.error("Error putting entities",e);
    throw new WebApplicationException(e,Response.Status.INTERNAL_SERVER_ERROR);
  }
}
