{
  this.jn=jn;
  InetSocketAddress addr=getAddress(conf);
  RPC.setProtocolEngine(conf,QJournalProtocolPB.class,ProtobufRpcEngine.class);
  QJournalProtocolServerSideTranslatorPB translator=new QJournalProtocolServerSideTranslatorPB(this);
  BlockingService service=QJournalProtocolService.newReflectiveBlockingService(translator);
  this.server=RPC.getServer(QJournalProtocolPB.class,service,addr.getHostName(),addr.getPort(),HANDLER_COUNT,false,conf,null);
}
