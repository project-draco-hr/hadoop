{
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).build();
  try {
    cluster.waitActive();
    NamenodeProtocols nn=cluster.getNameNodeRpc();
    DFSClient client=new DFSClient(null,nn,conf,null);
    assertEquals(client.getConf().getBlockWriteLocateFollowingInitialDelayMs(),400);
    conf.setInt(DFSConfigKeys.DFS_CLIENT_BLOCK_WRITE_LOCATEFOLLOWINGBLOCK_INITIAL_DELAY_KEY,1000);
    client=new DFSClient(null,nn,conf,null);
    assertEquals(client.getConf().getBlockWriteLocateFollowingInitialDelayMs(),1000);
  }
  finally {
    cluster.shutdown();
  }
}
