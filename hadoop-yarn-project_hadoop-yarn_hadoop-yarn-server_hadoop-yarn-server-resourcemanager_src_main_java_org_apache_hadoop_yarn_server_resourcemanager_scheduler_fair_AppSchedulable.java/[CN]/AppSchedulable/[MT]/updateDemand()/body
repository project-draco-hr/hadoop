{
  demand=Resources.createResource(0);
  Resources.addTo(demand,app.getCurrentConsumption());
synchronized (app) {
    for (    Priority p : app.getPriorities()) {
      for (      ResourceRequest r : app.getResourceRequests(p).values()) {
        Resource total=Resources.multiply(r.getCapability(),r.getNumContainers());
        Resources.addTo(demand,total);
      }
    }
  }
}
