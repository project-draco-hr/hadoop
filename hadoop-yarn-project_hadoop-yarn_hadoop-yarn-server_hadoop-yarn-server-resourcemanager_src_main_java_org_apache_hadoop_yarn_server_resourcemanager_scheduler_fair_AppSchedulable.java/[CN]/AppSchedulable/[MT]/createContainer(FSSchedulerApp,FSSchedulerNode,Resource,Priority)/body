{
  NodeId nodeId=node.getRMNode().getNodeID();
  ContainerId containerId=BuilderUtils.newContainerId(application.getApplicationAttemptId(),application.getNewContainerId());
  ContainerToken containerToken=null;
  if (UserGroupInformation.isSecurityEnabled()) {
    containerToken=containerTokenSecretManager.createContainerToken(containerId,nodeId,application.getUser(),capability);
    if (containerToken == null) {
      return null;
    }
  }
  Container container=BuilderUtils.newContainer(containerId,nodeId,node.getRMNode().getHttpAddress(),capability,priority,containerToken);
  return container;
}
