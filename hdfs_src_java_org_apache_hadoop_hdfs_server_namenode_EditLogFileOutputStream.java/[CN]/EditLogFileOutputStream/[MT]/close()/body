{
  int bufSize=bufCurrent.size();
  if (bufSize != 0) {
    throw new IOException("FSEditStream has " + bufSize + " bytes still to be flushed and cannot "+ "be closed.");
  }
  bufCurrent.close();
  bufReady.close();
  fc.truncate(fc.position());
  fp.close();
  bufCurrent=bufReady=null;
}
