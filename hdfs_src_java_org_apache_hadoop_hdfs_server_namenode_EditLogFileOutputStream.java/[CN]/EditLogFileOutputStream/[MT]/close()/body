{
  try {
    if (doubleBuf != null) {
      doubleBuf.close();
      doubleBuf=null;
    }
    if (fc != null && fc.isOpen()) {
      fc.truncate(fc.position());
      fc.close();
      fc=null;
    }
    if (fp != null) {
      fp.close();
      fp=null;
    }
  }
  finally {
    IOUtils.cleanup(FSNamesystem.LOG,fc,fp);
    doubleBuf=null;
    fc=null;
    fp=null;
  }
}
