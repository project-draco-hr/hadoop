{
  Configuration conf=new YarnConfiguration();
  conf.setBoolean(YarnConfiguration.APPLICATION_HISTORY_ENABLED,true);
  YarnClient mockYarnClient=createMockYarnClient(YarnApplicationState.FINISHED,UserGroupInformation.getCurrentUser().getShortUserName());
  LogsCLI cli=spy(new LogsCLIForTest(mockYarnClient));
  List<JSONObject> list=Arrays.asList(new JSONObject());
  doReturn(list).when(cli).getAMContainerInfoForRMWebService(any(Configuration.class),any(String.class));
  cli.setConf(conf);
  int exitCode=cli.run(new String[]{"-applicationId","application_1465862913885_0027","-am","1000"});
  assertTrue(exitCode == -1);
  assertTrue(sysErrStream.toString().contains("exceeds the number of AM containers"));
}
