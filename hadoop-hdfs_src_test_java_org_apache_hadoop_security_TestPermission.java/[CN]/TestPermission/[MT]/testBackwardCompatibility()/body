{
  FsPermission perm=new FsPermission((short)18);
  Configuration conf=new Configuration();
  FsPermission.setUMask(conf,perm);
  assertEquals(18,FsPermission.getUMask(conf).toShort());
  perm=new FsPermission((short)18);
  conf=new Configuration();
  conf.set(FsPermission.DEPRECATED_UMASK_LABEL,"18");
  assertEquals(18,FsPermission.getUMask(conf).toShort());
  conf=new Configuration();
  conf.set(FsPermission.DEPRECATED_UMASK_LABEL,"18");
  conf.set(FsPermission.UMASK_LABEL,"000");
  assertEquals(18,FsPermission.getUMask(conf).toShort());
  conf=new Configuration();
  conf.set(FsPermission.UMASK_LABEL,"022");
  assertEquals(18,FsPermission.getUMask(conf).toShort());
}
