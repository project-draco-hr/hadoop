{
  String srcs=FSDirectory.normalizePath(src);
  fsd.readLock();
  try {
    if (srcs.endsWith(HdfsConstants.SEPARATOR_DOT_SNAPSHOT_DIR)) {
      return getFileInfo4DotSnapshot(fsd,srcs);
    }
    final INodesInPath inodesInPath=fsd.getINodesInPath(srcs,resolveLink);
    final INode[] inodes=inodesInPath.getINodes();
    final INode i=inodes[inodes.length - 1];
    byte policyId=includeStoragePolicy && i != null && !i.isSymlink() ? i.getStoragePolicyID() : BlockStoragePolicySuite.ID_UNSPECIFIED;
    return i == null ? null : createFileStatus(fsd,HdfsFileStatus.EMPTY_NAME,i,policyId,inodesInPath.getPathSnapshotId(),isRawPath,inodesInPath);
  }
  finally {
    fsd.readUnlock();
  }
}
