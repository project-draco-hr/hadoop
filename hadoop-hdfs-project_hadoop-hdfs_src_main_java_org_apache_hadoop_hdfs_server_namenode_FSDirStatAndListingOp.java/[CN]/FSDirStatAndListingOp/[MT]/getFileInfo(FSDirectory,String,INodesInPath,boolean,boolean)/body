{
  fsd.readLock();
  try {
    final INode node=iip.getLastINode();
    if (node == null) {
      return null;
    }
    byte policyId=includeStoragePolicy && !node.isSymlink() ? node.getStoragePolicyID() : HdfsConstants.BLOCK_STORAGE_POLICY_ID_UNSPECIFIED;
    INodeAttributes nodeAttrs=getINodeAttributes(fsd,path,HdfsFileStatus.EMPTY_NAME,node,iip.getPathSnapshotId());
    return createFileStatus(fsd,HdfsFileStatus.EMPTY_NAME,nodeAttrs,policyId,iip.getPathSnapshotId(),isRawPath,iip);
  }
  finally {
    fsd.readUnlock();
  }
}
