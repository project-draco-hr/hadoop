{
  Configuration conf=getConfig();
  String bindAddress=WebAppUtils.getWebAppBindURL(conf,YarnConfiguration.TIMELINE_SERVICE_BIND_HOST,WebAppUtils.getTimelineReaderWebAppURL(conf));
  LOG.info("Instantiating TimelineReaderWebApp at " + bindAddress);
  try {
    HttpServer2.Builder builder=new HttpServer2.Builder().setName("timeline").setConf(conf).addEndpoint(URI.create("http://" + bindAddress));
    readerWebServer=builder.build();
    Map<String,String> options=new HashMap<>();
    String username=conf.get(HADOOP_HTTP_STATIC_USER,DEFAULT_HADOOP_HTTP_STATIC_USER);
    options.put(HADOOP_HTTP_STATIC_USER,username);
    HttpServer2.defineFilter(readerWebServer.getWebAppContext(),"static_user_filter_timeline",StaticUserWebFilter.StaticUserFilter.class.getName(),options,new String[]{"/*"});
    readerWebServer.addJerseyResourcePackage(TimelineReaderWebServices.class.getPackage().getName() + ";" + GenericExceptionHandler.class.getPackage().getName()+ ";"+ YarnJacksonJaxbJsonProvider.class.getPackage().getName(),"/*");
    readerWebServer.setAttribute(TIMELINE_READER_MANAGER_ATTR,timelineReaderManager);
    readerWebServer.start();
  }
 catch (  Exception e) {
    String msg="TimelineReaderWebApp failed to start.";
    LOG.error(msg,e);
    throw new YarnRuntimeException(msg,e);
  }
}
