{
  Document dom;
  DocumentBuilderFactory builder=DocumentBuilderFactory.newInstance();
  try {
    DocumentBuilder db=builder.newDocumentBuilder();
    dom=db.parse(fileInputStream);
    Element doc=dom.getDocumentElement();
    NodeList nodes=doc.getElementsByTagName("host");
    for (int i=0; i < nodes.getLength(); i++) {
      Node node=nodes.item(i);
      if (node.getNodeType() == Node.ELEMENT_NODE) {
        Element e=(Element)node;
        String v=readFirstTagValue(e,"name");
        String[] hosts=StringUtils.getTrimmedStrings(v);
        String str=readFirstTagValue(e,"timeout");
        Integer timeout=(str == null) ? null : Integer.parseInt(str);
        for (        String host : hosts) {
          map.put(host,timeout);
          LOG.info("Adding a node \"" + host + "\" to the list of "+ type+ " hosts from "+ filename);
        }
      }
    }
  }
 catch (  IOException|SAXException|ParserConfigurationException e) {
    LOG.fatal("error parsing " + filename,e);
    throw new RuntimeException(e);
  }
 finally {
    fileInputStream.close();
  }
}
