{
  LOG.info("Refreshing hosts (include/exclude) list");
  this.writeLock.lock();
  try {
    updateFileNames(includeFiles,excludeFiles);
    Set<String> newIncludes=new HashSet<String>();
    Map<String,Integer> newExcludes=new HashMap<String,Integer>();
    boolean switchIncludes=false;
    boolean switchExcludes=false;
    if (includeFiles != null && !includeFiles.isEmpty()) {
      readFileToSet("included",includeFiles,newIncludes);
      switchIncludes=true;
    }
    if (excludeFiles != null && !excludeFiles.isEmpty()) {
      readFileToMap("excluded",excludeFiles,newExcludes);
      switchExcludes=true;
    }
    if (switchIncludes) {
      includes=newIncludes;
    }
    if (switchExcludes) {
      excludes=newExcludes;
    }
  }
  finally {
    this.writeLock.unlock();
  }
}
