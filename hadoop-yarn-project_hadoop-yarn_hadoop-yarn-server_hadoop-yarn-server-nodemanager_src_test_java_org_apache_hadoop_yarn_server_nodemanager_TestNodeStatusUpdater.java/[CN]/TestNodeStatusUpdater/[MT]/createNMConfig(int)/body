{
  YarnConfiguration conf=new YarnConfiguration();
  String localhostAddress=null;
  try {
    localhostAddress=InetAddress.getByName("localhost").getCanonicalHostName();
  }
 catch (  UnknownHostException e) {
    Assert.fail("Unable to get localhost address: " + e.getMessage());
  }
  conf.setInt(YarnConfiguration.NM_PMEM_MB,5 * 1024);
  conf.set(YarnConfiguration.NM_ADDRESS,localhostAddress + ":" + port);
  conf.set(YarnConfiguration.NM_LOCALIZER_ADDRESS,localhostAddress + ":" + ServerSocketUtil.getPort(49160,10));
  conf.set(YarnConfiguration.NM_LOG_DIRS,logsDir.getAbsolutePath());
  conf.set(YarnConfiguration.NM_REMOTE_APP_LOG_DIR,remoteLogsDir.getAbsolutePath());
  conf.set(YarnConfiguration.NM_LOCAL_DIRS,nmLocalDir.getAbsolutePath());
  conf.setLong(YarnConfiguration.NM_LOG_RETAIN_SECONDS,1);
  return conf;
}
