{
  Arrays.sort(parameters,NAME_CMP);
  final StringBuilder b=new StringBuilder();
  try {
    for (    Param<?,?> p : parameters) {
      if (p.getValue() != null) {
        b.append(separator).append(URLEncoder.encode(p.getName(),"UTF-8") + "=" + URLEncoder.encode(p.getValueString(),"UTF-8"));
      }
    }
  }
 catch (  UnsupportedEncodingException e) {
    throw new RuntimeException(e);
  }
  return b.toString();
}
