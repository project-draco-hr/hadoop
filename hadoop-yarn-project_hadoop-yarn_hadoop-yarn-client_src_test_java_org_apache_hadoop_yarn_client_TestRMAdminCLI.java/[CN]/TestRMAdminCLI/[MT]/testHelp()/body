{
  PrintStream oldOutPrintStream=System.out;
  PrintStream oldErrPrintStream=System.err;
  ByteArrayOutputStream dataOut=new ByteArrayOutputStream();
  ByteArrayOutputStream dataErr=new ByteArrayOutputStream();
  System.setOut(new PrintStream(dataOut));
  System.setErr(new PrintStream(dataErr));
  try {
    String[] args={"-help"};
    assertEquals(0,rmAdminCLI.run(args));
    oldOutPrintStream.println(dataOut);
    assertTrue(dataOut.toString().contains("rmadmin is the command to execute YARN administrative commands."));
    assertTrue(dataOut.toString().contains("yarn rmadmin [-refreshQueues] [-refreshNodes] [-refreshSuper" + "UserGroupsConfiguration] [-refreshUserToGroupsMappings] " + "[-refreshAdminAcls] [-refreshServiceAcl] [-getGroup"+ " [username]] [-help [cmd]] [-transitionToActive <serviceId>]"+ " [-transitionToStandby <serviceId>] [-failover [--forcefence] "+ "[--forceactive] <serviceId> <serviceId>] "+ "[-getServiceState <serviceId>] [-checkHealth <serviceId>]"));
    assertTrue(dataOut.toString().contains("-refreshQueues: Reload the queues' acls, states and scheduler " + "specific properties."));
    assertTrue(dataOut.toString().contains("-refreshNodes: Refresh the hosts information at the " + "ResourceManager."));
    assertTrue(dataOut.toString().contains("-refreshUserToGroupsMappings: Refresh user-to-groups mappings"));
    assertTrue(dataOut.toString().contains("-refreshSuperUserGroupsConfiguration: Refresh superuser proxy" + " groups mappings"));
    assertTrue(dataOut.toString().contains("-refreshAdminAcls: Refresh acls for administration of " + "ResourceManager"));
    assertTrue(dataOut.toString().contains("-refreshServiceAcl: Reload the service-level authorization" + " policy file"));
    assertTrue(dataOut.toString().contains("-help [cmd]: Displays help for the given command or all " + "commands if none"));
    testError(new String[]{"-help","-refreshQueues"},"Usage: java RMAdmin [-refreshQueues]",dataErr,0);
    testError(new String[]{"-help","-refreshNodes"},"Usage: java RMAdmin [-refreshNodes]",dataErr,0);
    testError(new String[]{"-help","-refreshUserToGroupsMappings"},"Usage: java RMAdmin [-refreshUserToGroupsMappings]",dataErr,0);
    testError(new String[]{"-help","-refreshSuperUserGroupsConfiguration"},"Usage: java RMAdmin [-refreshSuperUserGroupsConfiguration]",dataErr,0);
    testError(new String[]{"-help","-refreshAdminAcls"},"Usage: java RMAdmin [-refreshAdminAcls]",dataErr,0);
    testError(new String[]{"-help","-refreshServiceAcl"},"Usage: java RMAdmin [-refreshServiceAcl]",dataErr,0);
    testError(new String[]{"-help","-getGroups"},"Usage: java RMAdmin [-getGroups [username]]",dataErr,0);
    testError(new String[]{"-help","-transitionToActive"},"Usage: java RMAdmin [-transitionToActive <serviceId>]",dataErr,0);
    testError(new String[]{"-help","-transitionToStandby"},"Usage: java RMAdmin [-transitionToStandby <serviceId>]",dataErr,0);
    testError(new String[]{"-help","-getServiceState"},"Usage: java RMAdmin [-getServiceState <serviceId>]",dataErr,0);
    testError(new String[]{"-help","-checkHealth"},"Usage: java RMAdmin [-checkHealth <serviceId>]",dataErr,0);
    testError(new String[]{"-help","-failover"},"Usage: java RMAdmin " + "[-failover [--forcefence] [--forceactive] " + "<serviceId> <serviceId>]",dataErr,0);
    testError(new String[]{"-help","-badParameter"},"Usage: java RMAdmin",dataErr,0);
    testError(new String[]{"-badParameter"},"badParameter: Unknown command",dataErr,-1);
  }
  finally {
    System.setOut(oldOutPrintStream);
    System.setErr(oldErrPrintStream);
  }
}
