{
  final int size=in.readInt();
  if (size >= 0) {
    v.visitEnclosingElement(ImageElement.SNAPSHOT_FILE_DIFFS,ImageElement.NUM_SNAPSHOT_FILE_DIFF,size);
    String snapshot=FSImageSerialization.readString(in);
    v.visit(ImageElement.SNAPSHOT_DIFF_SNAPSHOTROOT,snapshot);
    v.visit(ImageElement.SNAPSHOT_FILE_SIZE,in.readLong());
    if (in.readBoolean()) {
      v.visitEnclosingElement(ImageElement.SNAPSHOT_DIFF_SNAPSHOTINODE);
      processINode(in,v,true,currentINodeName,true);
      v.leaveEnclosingElement();
    }
    v.leaveEnclosingElement();
  }
}
