{
  assertTrue("Mock queue should have been constructed",mockQueueConstructions > 0);
  assertTrue("Puts are routed through MockQueue",canPutInMockQueue());
  int lastMockQueueConstructions=mockQueueConstructions;
  DFSAdmin admin=new DFSAdmin(config);
  String[] args=new String[]{"-refreshCallQueue"};
  int exitCode=admin.run(args);
  assertEquals("DFSAdmin should return 0",0,exitCode);
  assertEquals("Mock queue should have no additional constructions",lastMockQueueConstructions,mockQueueConstructions);
  try {
    assertFalse("Puts are routed through LBQ instead of MockQueue",canPutInMockQueue());
  }
 catch (  IOException ioe) {
    fail("Could not put into queue at all");
  }
}
