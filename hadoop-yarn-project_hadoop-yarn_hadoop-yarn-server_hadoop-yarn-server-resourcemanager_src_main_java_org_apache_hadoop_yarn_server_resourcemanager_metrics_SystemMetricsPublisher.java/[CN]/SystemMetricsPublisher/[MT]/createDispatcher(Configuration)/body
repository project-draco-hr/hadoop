{
  MultiThreadedDispatcher dispatcher=new MultiThreadedDispatcher(conf.getInt(YarnConfiguration.RM_SYSTEM_METRICS_PUBLISHER_DISPATCHER_POOL_SIZE,YarnConfiguration.DEFAULT_RM_SYSTEM_METRICS_PUBLISHER_DISPATCHER_POOL_SIZE));
  dispatcher.setDrainEventsOnStop();
  return dispatcher;
}
