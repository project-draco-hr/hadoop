{
  if (conf.getBoolean(YarnConfiguration.RM_SYSTEM_METRICS_PUBLISHER_ENABLED,YarnConfiguration.DEFAULT_RM_SYSTEM_METRICS_PUBLISHER_ENABLED)) {
    return new TimelineServiceV1Publisher();
  }
 else   if (conf.getBoolean(YarnConfiguration.SYSTEM_METRICS_PUBLISHER_ENABLED,YarnConfiguration.DEFAULT_SYSTEM_METRICS_PUBLISHER_ENABLED)) {
    return new TimelineServiceV2Publisher(rmContext);
  }
  return null;
}
