{
  publishSystemMetrics=conf.getBoolean(YarnConfiguration.TIMELINE_SERVICE_ENABLED,YarnConfiguration.DEFAULT_TIMELINE_SERVICE_ENABLED);
  if (publishSystemMetrics) {
    TimelineServicePublisher timelineServicePublisher=getTimelineServicePublisher(conf);
    if (timelineServicePublisher != null) {
      addService(timelineServicePublisher);
      timelineServicePublisher.init(conf);
      dispatcher=createDispatcher(timelineServicePublisher);
      publishContainerMetrics=timelineServicePublisher.publishRMContainerMetrics();
      dispatcher.register(SystemMetricsEventType.class,timelineServicePublisher.getEventHandler());
      addIfService(dispatcher);
    }
 else {
      LOG.info("TimelineServicePublisher is not configured");
      publishSystemMetrics=false;
    }
    LOG.info("YARN system metrics publishing service is enabled");
  }
 else {
    LOG.info("YARN system metrics publishing service is not enabled");
  }
  super.serviceInit(conf);
}
