{
  if (publishSystemMetrics) {
    ContainerId container=(appAttempt.getMasterContainer() == null) ? null : appAttempt.getMasterContainer().getId();
    dispatcher.getEventHandler().handle(new AppAttemptFinishedEvent(appAttempt.getAppAttemptId(),appAttempt.getTrackingUrl(),appAttempt.getOriginalTrackingUrl(),appAttempt.getDiagnostics(),app.getFinalApplicationStatus(),RMServerUtils.createApplicationAttemptState(appAttemtpState),finishedTime,container));
  }
}
