{
  Preconditions.checkArgument(this.permission != null || permArg != null,"Permission bits are not available to calculate effective permission");
  if (this.permission != null) {
    permArg=this.permission;
  }
  if ((entry.getName() != null || entry.getType() == AclEntryType.GROUP)) {
    if (entry.getScope() == AclEntryScope.ACCESS) {
      FsAction entryPerm=entry.getPermission();
      return entryPerm.and(permArg.getGroupAction());
    }
 else {
      Preconditions.checkArgument(this.entries.contains(entry) && this.entries.size() >= 3,"Passed default ACL entry not found in the list of ACLs");
      FsAction defaultMask=this.entries.get(this.entries.size() - 2).getPermission();
      FsAction entryPerm=entry.getPermission();
      return entryPerm.and(defaultMask);
    }
  }
 else {
    return entry.getPermission();
  }
}
