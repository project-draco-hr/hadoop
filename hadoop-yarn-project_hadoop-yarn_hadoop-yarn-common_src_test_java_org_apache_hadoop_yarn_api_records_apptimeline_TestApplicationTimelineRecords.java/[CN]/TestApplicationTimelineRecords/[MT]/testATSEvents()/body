{
  ATSEvents events=new ATSEvents();
  for (int j=0; j < 2; ++j) {
    ATSEvents.ATSEventsOfOneEntity partEvents=new ATSEvents.ATSEventsOfOneEntity();
    partEvents.setEntityId("entity id " + j);
    partEvents.setEntityType("entity type " + j);
    for (int i=0; i < 2; ++i) {
      ATSEvent event=new ATSEvent();
      event.setTimestamp(System.currentTimeMillis());
      event.setEventType("event type " + i);
      event.addEventInfo("key1","val1");
      event.addEventInfo("key2","val2");
      partEvents.addEvent(event);
    }
    events.addEvent(partEvents);
  }
  Assert.assertEquals(2,events.getAllEvents().size());
  ATSEvents.ATSEventsOfOneEntity partEvents1=events.getAllEvents().get(0);
  Assert.assertEquals("entity id 0",partEvents1.getEntityId());
  Assert.assertEquals("entity type 0",partEvents1.getEntityType());
  Assert.assertEquals(2,partEvents1.getEvents().size());
  ATSEvent event11=partEvents1.getEvents().get(0);
  Assert.assertEquals("event type 0",event11.getEventType());
  Assert.assertEquals(2,event11.getEventInfo().size());
  ATSEvent event12=partEvents1.getEvents().get(1);
  Assert.assertEquals("event type 1",event12.getEventType());
  Assert.assertEquals(2,event12.getEventInfo().size());
  ATSEvents.ATSEventsOfOneEntity partEvents2=events.getAllEvents().get(1);
  Assert.assertEquals("entity id 1",partEvents2.getEntityId());
  Assert.assertEquals("entity type 1",partEvents2.getEntityType());
  Assert.assertEquals(2,partEvents2.getEvents().size());
  ATSEvent event21=partEvents2.getEvents().get(0);
  Assert.assertEquals("event type 0",event21.getEventType());
  Assert.assertEquals(2,event21.getEventInfo().size());
  ATSEvent event22=partEvents2.getEvents().get(1);
  Assert.assertEquals("event type 1",event22.getEventType());
  Assert.assertEquals(2,event22.getEventInfo().size());
}
