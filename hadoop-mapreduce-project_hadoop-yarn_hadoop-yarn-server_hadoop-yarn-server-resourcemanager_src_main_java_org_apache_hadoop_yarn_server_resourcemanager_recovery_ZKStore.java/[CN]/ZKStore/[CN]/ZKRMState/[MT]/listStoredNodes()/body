{
  List<NodeReport> nodes=new ArrayList<NodeReport>();
  Stat stat=new Stat();
  try {
    List<String> children=zkClient.getChildren(NODES,false);
    for (    String child : children) {
      byte[] data=zkClient.getData(NODES + child,false,stat);
      NodeReportPBImpl nmImpl=new NodeReportPBImpl(NodeReportProto.parseFrom(data));
      nodes.add(nmImpl);
    }
  }
 catch (  InterruptedException ie) {
    LOG.info("Interrupted",ie);
    throw new InterruptedIOException("Interrupted");
  }
catch (  KeeperException ke) {
    LOG.error("Failed to list nodes",ke);
    throw convertToIOException(ke);
  }
  return nodes;
}
