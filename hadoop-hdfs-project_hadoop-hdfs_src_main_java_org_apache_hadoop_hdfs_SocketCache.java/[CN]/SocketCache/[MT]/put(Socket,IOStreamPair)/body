{
  Preconditions.checkNotNull(sock);
  SocketAndStreams s=new SocketAndStreams(sock,ioStreams);
  if (capacity <= 0) {
    s.close();
    return;
  }
  startExpiryDaemon();
  SocketAddress remoteAddr=sock.getRemoteSocketAddress();
  if (remoteAddr == null) {
    LOG.warn("Cannot cache (unconnected) socket with no remote address: " + sock);
    IOUtils.closeSocket(sock);
    return;
  }
  if (capacity == multimap.size()) {
    evictOldest();
  }
  multimap.put(remoteAddr,s);
}
