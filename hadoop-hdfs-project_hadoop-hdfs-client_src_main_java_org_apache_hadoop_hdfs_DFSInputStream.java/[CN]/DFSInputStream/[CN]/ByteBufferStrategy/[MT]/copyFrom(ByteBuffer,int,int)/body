{
  ByteBuffer writeSlice=src.duplicate();
  int remaining=Math.min(buf.remaining(),writeSlice.remaining());
  writeSlice.limit(writeSlice.position() + remaining);
  buf.put(writeSlice);
  return remaining;
}
