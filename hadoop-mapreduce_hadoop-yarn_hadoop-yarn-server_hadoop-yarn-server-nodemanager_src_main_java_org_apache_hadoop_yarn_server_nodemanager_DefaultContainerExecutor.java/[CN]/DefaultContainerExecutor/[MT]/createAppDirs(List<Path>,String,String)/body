{
  boolean initAppDirStatus=false;
  FsPermission appperms=new FsPermission(APPDIR_PERM);
  for (  Path localDir : localDirs) {
    Path fullAppDir=getApplicationDir(localDir,user,appId);
    if (lfs.util().exists(fullAppDir)) {
      lfs.delete(fullAppDir,true);
    }
    try {
      lfs.mkdir(fullAppDir,appperms,true);
      initAppDirStatus=true;
    }
 catch (    IOException e) {
      LOG.warn("Unable to create app directory " + fullAppDir.toString(),e);
    }
  }
  if (!initAppDirStatus) {
    throw new IOException("Not able to initialize app directories " + "in any of the configured local directories for app " + appId.toString());
  }
}
