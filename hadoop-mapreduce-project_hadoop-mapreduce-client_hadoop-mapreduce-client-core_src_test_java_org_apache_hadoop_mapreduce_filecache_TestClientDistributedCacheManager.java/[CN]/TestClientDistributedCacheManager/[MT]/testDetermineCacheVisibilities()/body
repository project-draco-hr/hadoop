{
  fs.setWorkingDirectory(TEST_VISIBILITY_CHILD_DIR);
  fs.setPermission(TEST_VISIBILITY_CHILD_DIR,new FsPermission((short)00777));
  fs.setPermission(TEST_VISIBILITY_PARENT_DIR,new FsPermission((short)00700));
  Job job=Job.getInstance(conf);
  Path relativePath=new Path("thirdCachefile");
  job.addCacheFile(relativePath.toUri());
  Configuration jobConf=job.getConfiguration();
  Map<URI,FileStatus> statCache=new HashMap<URI,FileStatus>();
  ClientDistributedCacheManager.determineCacheVisibilities(jobConf,statCache);
  Assert.assertFalse(jobConf.getBoolean(MRJobConfig.CACHE_FILE_VISIBILITIES,true));
}
