{
  Path workingdir=new Path(TEST_VISIBILITY_DIR);
  fs.setWorkingDirectory(workingdir);
  fs.setPermission(workingdir,new FsPermission((short)00777));
  fs.setPermission(new Path(TEST_ROOT_DIR),new FsPermission((short)00700));
  Job job=Job.getInstance(conf);
  Path relativePath=new Path("thirdCachefile");
  job.addCacheFile(relativePath.toUri());
  Configuration jobConf=job.getConfiguration();
  Map<URI,FileStatus> statCache=new HashMap<URI,FileStatus>();
  ClientDistributedCacheManager.determineCacheVisibilities(jobConf,statCache);
  Assert.assertFalse(jobConf.getBoolean(MRJobConfig.CACHE_FILE_VISIBILITIES,true));
}
