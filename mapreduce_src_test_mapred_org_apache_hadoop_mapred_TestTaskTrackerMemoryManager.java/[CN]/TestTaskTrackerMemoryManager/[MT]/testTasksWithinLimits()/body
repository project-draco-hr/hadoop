{
  if (!isProcfsBasedTreeAvailable()) {
    return;
  }
  long PER_TASK_LIMIT=2 * 1024L;
  JobConf fConf=new JobConf();
  fConf.setLong(MRConfig.MAPMEMORY_MB,2 * 1024L);
  fConf.setLong(MRConfig.REDUCEMEMORY_MB,2 * 1024L);
  fConf.setLong(TTConfig.TT_RESERVED_PHYSCIALMEMORY_MB,1L);
  startCluster(new JobConf());
  JobConf conf=new JobConf(miniMRCluster.createJobConf());
  conf.setMemoryForMapTask(PER_TASK_LIMIT);
  conf.setMemoryForReduceTask(PER_TASK_LIMIT);
  conf.setLong(MRJobConfig.MAP_MEMORY_PHYSICAL_MB,PER_TASK_LIMIT);
  conf.setLong(MRJobConfig.REDUCE_MEMORY_PHYSICAL_MB,PER_TASK_LIMIT);
  runAndCheckSuccessfulJob(conf);
}
