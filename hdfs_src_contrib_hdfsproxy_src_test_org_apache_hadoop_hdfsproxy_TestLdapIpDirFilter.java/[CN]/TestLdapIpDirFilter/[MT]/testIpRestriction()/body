{
  LdapIpDirFilter filter=new LdapIpDirFilter();
  String baseName="ou=proxyroles,dc=mycompany,dc=com";
  DummyLdapContext dlc=new DummyLdapContext();
  filter.initialize(baseName,dlc);
  request.setRemoteIPAddress("127.0.0.2");
  request.removeAttribute("org.apache.hadoop.hdfsproxy.authorized.userID");
  FilterChain mockFilterChain=new DummyFilterChain();
  filter.doFilter(request,response,mockFilterChain);
  assertNull(request.getAttribute("org.apache.hadoop.hdfsproxy.authorized.userID"));
}
