{
  try {
    int ret=p.waitFor();
    if (ret != 0) {
      dumpInputStream(p.getErrorStream());
    }
    if (expectPass) {
      assertEquals(0,ret);
    }
 else {
      assertTrue(ret != 0);
    }
  }
 catch (  InterruptedException ie) {
    fail("Process interrupted: " + ie.getMessage());
  }
}
