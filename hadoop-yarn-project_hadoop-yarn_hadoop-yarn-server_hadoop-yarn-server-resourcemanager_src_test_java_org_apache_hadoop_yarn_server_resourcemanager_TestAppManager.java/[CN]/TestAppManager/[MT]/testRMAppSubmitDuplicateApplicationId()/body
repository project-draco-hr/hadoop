{
  ApplicationId appId=MockApps.newAppID(0);
  asContext.setApplicationId(appId);
  RMApp appOrig=rmContext.getRMApps().get(appId);
  Assert.assertTrue("app name matches but shouldn't","testApp1" != appOrig.getName());
  try {
    appMonitor.submitApplication(asContext);
    Assert.fail("Exception is expected when applicationId is duplicate.");
  }
 catch (  YarnRemoteException e) {
    Assert.assertTrue("The thrown exception is not the expectd one.",e.getMessage().contains("Cannot add a duplicate!"));
  }
  RMApp app=rmContext.getRMApps().get(appId);
  Assert.assertNotNull("app is null",app);
  Assert.assertEquals("app id doesn't match",appId,app.getApplicationId());
  Assert.assertEquals("app state doesn't match",RMAppState.FINISHED,app.getState());
}
