{
  RMApp app=mock(RMAppImpl.class);
  when(app.getApplicationId()).thenReturn(ApplicationId.newInstance(100L,1));
  when(app.getName()).thenReturn("Multiline\n\n\r\rAppName");
  when(app.getUser()).thenReturn("Multiline\n\n\r\rUserName");
  when(app.getQueue()).thenReturn("Multiline\n\n\r\rQueueName");
  when(app.getState()).thenReturn(RMAppState.RUNNING);
  when(app.getApplicationType()).thenReturn("MAPREDUCE");
  RMAppMetrics metrics=new RMAppMetrics(Resource.newInstance(1234,56),10,1,16384,64);
  when(app.getRMAppMetrics()).thenReturn(metrics);
  RMAppManager.ApplicationSummary.SummaryBuilder summary=new RMAppManager.ApplicationSummary().createAppSummary(app);
  String msg=summary.toString();
  LOG.info("summary: " + msg);
  Assert.assertFalse(msg.contains("\n"));
  Assert.assertFalse(msg.contains("\r"));
  String escaped="\\n\\n\\r\\r";
  Assert.assertTrue(msg.contains("Multiline" + escaped + "AppName"));
  Assert.assertTrue(msg.contains("Multiline" + escaped + "UserName"));
  Assert.assertTrue(msg.contains("Multiline" + escaped + "QueueName"));
  Assert.assertTrue(msg.contains("memorySeconds=16384"));
  Assert.assertTrue(msg.contains("vcoreSeconds=64"));
  Assert.assertTrue(msg.contains("preemptedAMContainers=1"));
  Assert.assertTrue(msg.contains("preemptedNonAMContainers=10"));
  Assert.assertTrue(msg.contains("preemptedResources=<memory:1234\\, vCores:56>"));
  Assert.assertTrue(msg.contains("applicationType=MAPREDUCE"));
}
