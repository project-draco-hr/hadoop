{
  List<JournalAndStream> badJAS=Lists.newLinkedList();
  for (  JournalAndStream jas : journals) {
    try {
      closure.apply(jas);
    }
 catch (    Throwable t) {
      LOG.error("Error: " + status + " failed for (journal "+ jas+ ")",t);
      badJAS.add(jas);
    }
  }
  disableAndReportErrorOnJournals(badJAS);
  if (badJAS.size() >= journals.size()) {
    LOG.error("Error: " + status + " failed for all journals");
    throw new IOException(status + " failed on all the journals");
  }
}
