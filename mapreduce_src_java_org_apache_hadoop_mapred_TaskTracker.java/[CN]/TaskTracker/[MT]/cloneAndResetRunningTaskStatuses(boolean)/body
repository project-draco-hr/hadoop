{
  List<TaskStatus> result=new ArrayList<TaskStatus>(runningTasks.size());
  for (  TaskInProgress tip : runningTasks.values()) {
    TaskStatus status=tip.getStatus();
    status.setIncludeCounters(sendCounters);
    if (status.getRunState() != TaskStatus.State.RUNNING) {
      status.setIncludeCounters(true);
    }
    result.add((TaskStatus)status.clone());
    status.clearStatus();
  }
  return result;
}
