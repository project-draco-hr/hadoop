{
  mgr.addToCluserNodeLabels(toSet(" p1","p2"));
  mgr.addLabelsToNode(ImmutableMap.of(toNodeId("n1"),toSet("p1 ","p2")));
  assertMapEquals(mgr.getNodeLabels(),ImmutableMap.of(toNodeId("n1"),toSet("p1","p2")));
  mgr.replaceLabelsOnNode(ImmutableMap.of(toNodeId("n1"),toSet(" p2")));
  assertMapEquals(mgr.getNodeLabels(),ImmutableMap.of(toNodeId("n1"),toSet("p2")));
  mgr.removeLabelsFromNode(ImmutableMap.of(toNodeId("n1"),toSet("  p2 ")));
  Assert.assertTrue(mgr.getNodeLabels().isEmpty());
}
