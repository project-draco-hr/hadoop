{
  UserGroupInformation ugi;
  try {
    ugi=UserGroupInformation.getCurrentUser();
  }
 catch (  IOException e) {
    String msg="Error when getting the current user";
    LOG.error(msg,e);
    throw new YarnRuntimeException(msg,e);
  }
  TimelineDelegationTokenSelector tokenSelector=new TimelineDelegationTokenSelector();
  return tokenSelector.selectToken(service,ugi.getCredentials().getAllTokens());
}
