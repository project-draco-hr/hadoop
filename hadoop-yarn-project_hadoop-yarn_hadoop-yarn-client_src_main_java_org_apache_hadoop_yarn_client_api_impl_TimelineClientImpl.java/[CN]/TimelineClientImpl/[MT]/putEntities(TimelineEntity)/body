{
  TimelineEntities entitiesContainer=new TimelineEntities();
  entitiesContainer.addEntities(Arrays.asList(entities));
  ClientResponse resp=doPostingEntities(entitiesContainer);
  if (resp.getClientResponseStatus() != ClientResponse.Status.OK) {
    String msg="Failed to get the response from the timeline server.";
    LOG.error(msg);
    if (LOG.isDebugEnabled()) {
      String output=resp.getEntity(String.class);
      LOG.debug("HTTP error code: " + resp.getStatus() + " Server response : \n"+ output);
    }
    throw new YarnException(msg);
  }
  return resp.getEntity(TimelinePutResponse.class);
}
