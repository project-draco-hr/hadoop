{
  if (rmContext.getHAServiceState() == HAServiceProtocol.HAServiceState.ACTIVE) {
    LOG.info("Already in active state");
    return;
  }
  LOG.info("Transitioning to active state");
  this.rmLoginUGI.doAs(new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      try {
        startActiveServices();
        return null;
      }
 catch (      Exception e) {
        resetDispatcher();
        createAndInitActiveServices();
        throw e;
      }
    }
  }
);
  rmContext.setHAServiceState(HAServiceProtocol.HAServiceState.ACTIVE);
  LOG.info("Transitioned to active state");
}
