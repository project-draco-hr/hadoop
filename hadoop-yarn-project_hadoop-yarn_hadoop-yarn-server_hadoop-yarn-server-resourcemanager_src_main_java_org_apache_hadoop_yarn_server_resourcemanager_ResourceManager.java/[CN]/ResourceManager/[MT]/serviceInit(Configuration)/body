{
  validateConfigs(conf);
  this.conf=conf;
  this.rmContext=new RMContextImpl();
  this.configurationProvider=ConfigurationProviderFactory.getConfigurationProvider(conf);
  this.configurationProvider.init(this.conf);
  rmContext.setConfigurationProvider(configurationProvider);
  if (!(this.configurationProvider instanceof LocalConfigurationProvider)) {
    this.conf=this.configurationProvider.getConfiguration(this.conf,YarnConfiguration.YARN_SITE_XML_FILE);
    this.conf=this.configurationProvider.getConfiguration(this.conf,YarnConfiguration.CORE_SITE_CONFIGURATION_FILE);
    Groups.getUserToGroupsMappingServiceWithLoadedConfiguration(this.conf).refresh();
  }
  rmDispatcher=setupDispatcher();
  addIfService(rmDispatcher);
  rmContext.setDispatcher(rmDispatcher);
  adminService=createAdminService();
  addService(adminService);
  rmContext.setRMAdminService(adminService);
  this.rmContext.setHAEnabled(HAUtil.isHAEnabled(conf));
  if (this.rmContext.isHAEnabled()) {
    HAUtil.verifyAndSetConfiguration(conf);
  }
  createAndInitActiveServices();
  webAppAddress=WebAppUtils.getRMWebAppURLWithoutScheme(conf);
  super.serviceInit(conf);
}
