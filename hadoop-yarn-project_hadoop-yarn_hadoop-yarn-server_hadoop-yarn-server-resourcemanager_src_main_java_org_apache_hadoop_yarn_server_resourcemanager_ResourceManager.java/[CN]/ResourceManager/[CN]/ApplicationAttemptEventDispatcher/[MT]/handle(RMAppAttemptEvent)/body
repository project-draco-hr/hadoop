{
  ApplicationAttemptId appAttemptID=event.getApplicationAttemptId();
  ApplicationId appAttemptId=appAttemptID.getApplicationId();
  RMApp rmApp=this.rmContext.getRMApps().get(appAttemptId);
  if (rmApp != null) {
    RMAppAttempt rmAppAttempt=rmApp.getRMAppAttempt(appAttemptID);
    if (rmAppAttempt != null) {
      try {
        rmAppAttempt.handle(event);
      }
 catch (      Throwable t) {
        LOG.error("Error in handling event type " + event.getType() + " for applicationAttempt "+ appAttemptId,t);
      }
    }
 else     if (rmApp.getApplicationSubmissionContext() != null && rmApp.getApplicationSubmissionContext().getKeepContainersAcrossApplicationAttempts() && event.getType() == RMAppAttemptEventType.CONTAINER_FINISHED) {
      RMAppAttempt previousFailedAttempt=rmApp.getAppAttempts().values().iterator().next();
      if (previousFailedAttempt != null) {
        try {
          LOG.debug("Event " + event.getType() + " handled by "+ previousFailedAttempt);
          previousFailedAttempt.handle(event);
        }
 catch (        Throwable t) {
          LOG.error("Error in handling event type " + event.getType() + " for applicationAttempt "+ appAttemptId+ " with "+ previousFailedAttempt,t);
        }
      }
 else {
        LOG.error("Event " + event.getType() + " not handled, because previousFailedAttempt is null");
      }
    }
  }
}
