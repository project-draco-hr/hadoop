{
  ApplicationCLI cli=createAndGetAppCLI();
  ApplicationId applicationId=BuilderUtils.newApplicationId(1234,5);
  ApplicationReport newApplicationReport=BuilderUtils.newApplicationReport(applicationId,BuilderUtils.newApplicationAttemptId(applicationId,1),"user","queue","appname","host",124,null,YarnApplicationState.FINISHED,"diagnostics","url",0,0,FinalApplicationStatus.SUCCEEDED,null,"N/A",0.53789f,"YARN");
  List<ApplicationReport> applicationReports=new ArrayList<ApplicationReport>();
  applicationReports.add(newApplicationReport);
  when(client.getApplicationList()).thenReturn(applicationReports);
  int result=cli.run(new String[]{"-list"});
  assertEquals(0,result);
  verify(client).getApplicationList();
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  PrintWriter pw=new PrintWriter(baos);
  pw.println("Total Applications:1");
  pw.print("                Application-Id\t    Application-Name");
  pw.print("\t    Application-Type");
  pw.print("\t      User\t     Queue\t             State\t       ");
  pw.print("Final-State\t       Progress");
  pw.println("\t                       Tracking-URL");
  pw.print("         application_1234_0005\t             ");
  pw.print("appname\t                YARN\t      user\t     ");
  pw.print("queue\t          FINISHED\t         ");
  pw.print("SUCCEEDED\t         53.79%");
  pw.println("\t                                N/A");
  pw.close();
  String appsReportStr=baos.toString("UTF-8");
  Assert.assertEquals(appsReportStr,sysOutStream.toString());
  verify(sysOut,times(1)).write(any(byte[].class),anyInt(),anyInt());
}
