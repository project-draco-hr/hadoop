{
  ApplicationCLI cli=createAndGetAppCLI();
  ApplicationId applicationId=BuilderUtils.newApplicationId(1234,5);
  ApplicationReport newApplicationReport=BuilderUtils.newApplicationReport(applicationId,BuilderUtils.newApplicationAttemptId(applicationId,1),"user","queue","appname","host",124,null,YarnApplicationState.FINISHED,"diagnostics","url",0,0,FinalApplicationStatus.SUCCEEDED,null,"N/A");
  List<ApplicationReport> applicationReports=new ArrayList<ApplicationReport>();
  applicationReports.add(newApplicationReport);
  when(client.getApplicationList()).thenReturn(applicationReports);
  int result=cli.run(new String[]{"-list"});
  assertEquals(0,result);
  verify(client).getApplicationList();
  StringBuffer appsReportStrBuf=new StringBuffer();
  appsReportStrBuf.append("Total Applications:1\n");
  appsReportStrBuf.append("                Application-Id\t    Application-Name" + "\t      User\t     Queue\t             State\t       " + "Final-State\t                       Tracking-URL\n");
  appsReportStrBuf.append("         application_1234_0005\t             " + "appname\t      user\t     queue\t          FINISHED\t         " + "SUCCEEDED\t                                N/A\n");
  Assert.assertEquals(appsReportStrBuf.toString(),sysOutStream.toString());
  verify(sysOut,times(1)).write(any(byte[].class),anyInt(),anyInt());
}
