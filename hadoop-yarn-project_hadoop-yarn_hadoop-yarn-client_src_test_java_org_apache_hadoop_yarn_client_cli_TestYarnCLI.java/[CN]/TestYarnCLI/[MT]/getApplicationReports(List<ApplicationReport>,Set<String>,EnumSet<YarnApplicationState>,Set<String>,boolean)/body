{
  List<ApplicationReport> appReports=new ArrayList<ApplicationReport>();
  if (allStates) {
    for (    YarnApplicationState state : YarnApplicationState.values()) {
      appStates.add(state);
    }
  }
  for (  ApplicationReport appReport : applicationReports) {
    if (appTypes != null && !appTypes.isEmpty()) {
      if (!appTypes.contains(appReport.getApplicationType())) {
        continue;
      }
    }
    if (appStates != null && !appStates.isEmpty()) {
      if (!appStates.contains(appReport.getYarnApplicationState())) {
        continue;
      }
    }
    if (appTags != null && !appTags.isEmpty()) {
      Set<String> tags=appReport.getApplicationTags();
      if (tags == null || tags.isEmpty()) {
        continue;
      }
      boolean match=false;
      for (      String appTag : appTags) {
        if (tags.contains(appTag)) {
          match=true;
          break;
        }
      }
      if (!match) {
        continue;
      }
    }
    appReports.add(appReport);
  }
  return appReports;
}
