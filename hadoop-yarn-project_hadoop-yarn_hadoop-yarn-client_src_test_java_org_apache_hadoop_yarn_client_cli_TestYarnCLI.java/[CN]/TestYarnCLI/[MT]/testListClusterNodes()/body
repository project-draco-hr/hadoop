{
  NodeCLI cli=new NodeCLI();
  when(client.getNodeReports(NodeState.RUNNING)).thenReturn(getNodeReports(3));
  cli.setClient(client);
  cli.setSysOutPrintStream(sysOut);
  int result=cli.run(new String[]{"-list"});
  assertEquals(0,result);
  verify(client).getNodeReports(NodeState.RUNNING);
  ByteArrayOutputStream baos=new ByteArrayOutputStream();
  PrintWriter pw=new PrintWriter(baos);
  pw.println("Total Nodes:3");
  pw.print("         Node-Id\tNode-State\tNode-Http-Address\t");
  pw.println("Running-Containers");
  pw.print("         host0:0\t   RUNNING\t       host1:8888");
  pw.println("\t                 0");
  pw.print("         host1:0\t   RUNNING\t       host1:8888");
  pw.println("\t                 0");
  pw.print("         host2:0\t   RUNNING\t       host1:8888");
  pw.println("\t                 0");
  pw.close();
  String nodesReportStr=baos.toString("UTF-8");
  Assert.assertEquals(nodesReportStr,sysOutStream.toString());
  verify(sysOut,times(1)).write(any(byte[].class),anyInt(),anyInt());
}
