{
  thread.preventCheckpointsFor(PREVENT_AFTER_CANCEL_MS);
synchronized (cancelLock) {
    if (canceler != null) {
      canceler.cancel(msg);
    }
  }
}
