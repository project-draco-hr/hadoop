{
  PlatformUI.getWorkbench().getProgressService().busyCursorWhile(new IRunnableWithProgress(){
    public void run(    IProgressMonitor monitor) throws InvocationTargetException {
      int work=0;
      for (      File file : files)       work+=computeUploadWork(file);
      monitor.beginTask("Uploading files to distributed file system",work);
      for (      File file : files) {
        try {
          folder.upload(monitor,file);
        }
 catch (        IOException ioe) {
          ioe.printStackTrace();
          MessageDialog.openError(null,"Upload files to distributed file system","Upload failed.\n" + ioe);
        }
      }
      monitor.done();
      folder.doRefresh();
    }
  }
);
}
