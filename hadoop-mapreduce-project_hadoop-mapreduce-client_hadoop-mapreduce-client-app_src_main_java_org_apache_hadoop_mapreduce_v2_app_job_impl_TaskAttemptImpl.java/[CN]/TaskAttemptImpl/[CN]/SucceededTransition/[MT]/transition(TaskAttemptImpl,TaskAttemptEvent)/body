{
  taskAttempt.setFinishTime();
  long slotMillis=computeSlotMillis(taskAttempt);
  TaskId taskId=taskAttempt.attemptId.getTaskId();
  JobCounterUpdateEvent jce=new JobCounterUpdateEvent(taskId.getJobId());
  jce.addCounterUpdate(taskId.getTaskType() == TaskType.MAP ? JobCounter.SLOTS_MILLIS_MAPS : JobCounter.SLOTS_MILLIS_REDUCES,slotMillis);
  taskAttempt.eventHandler.handle(jce);
  taskAttempt.logAttemptFinishedEvent(TaskAttemptStateInternal.SUCCEEDED);
  taskAttempt.eventHandler.handle(new TaskTAttemptEvent(taskAttempt.attemptId,TaskEventType.T_ATTEMPT_SUCCEEDED));
  taskAttempt.eventHandler.handle(new SpeculatorEvent(taskAttempt.reportedStatus,taskAttempt.clock.getTime()));
}
