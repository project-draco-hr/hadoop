{
  StandardMBean bean;
  String storageName;
  if (storageId == null || storageId.equals("")) {
    storageName="UndefinedStorageId" + rand.nextInt();
  }
 else {
    storageName=storageId;
  }
  try {
    bean=new StandardMBean(this,FSDatasetMBean.class);
    mbeanName=MBeans.register("DataNode","FSDatasetState-" + storageName,bean);
  }
 catch (  NotCompliantMBeanException e) {
    DataNode.LOG.warn("Error registering FSDatasetState MBean",e);
  }
  DataNode.LOG.info("Registered FSDatasetState MBean");
}
