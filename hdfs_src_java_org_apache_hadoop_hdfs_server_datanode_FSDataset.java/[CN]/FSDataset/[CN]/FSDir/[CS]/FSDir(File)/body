{
  this.dir=dir;
  this.children=null;
  if (!dir.exists()) {
    if (!dir.mkdirs()) {
      throw new IOException("Mkdirs failed to create " + dir.toString());
    }
  }
 else {
    File[] files=FileUtil.listFiles(dir);
    int numChildren=0;
    for (int idx=0; idx < files.length; idx++) {
      if (files[idx].isDirectory()) {
        numChildren++;
      }
 else       if (Block.isBlockFilename(files[idx])) {
        numBlocks++;
      }
    }
    if (numChildren > 0) {
      children=new FSDir[numChildren];
      int curdir=0;
      for (int idx=0; idx < files.length; idx++) {
        if (files[idx].isDirectory()) {
          children[curdir]=new FSDir(files[idx]);
          curdir++;
        }
      }
    }
  }
}
