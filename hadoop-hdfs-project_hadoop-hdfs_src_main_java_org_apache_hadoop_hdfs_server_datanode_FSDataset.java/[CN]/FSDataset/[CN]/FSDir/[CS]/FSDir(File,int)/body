{
  this.dir=dir;
  this.maxBlocksPerDir=maxBlocksPerDir;
  this.children=null;
  if (!dir.exists()) {
    if (!dir.mkdirs()) {
      throw new IOException("Mkdirs failed to create " + dir.toString());
    }
  }
 else {
    File[] files=FileUtil.listFiles(dir);
    List<FSDir> dirList=new ArrayList<FSDir>();
    for (int idx=0; idx < files.length; idx++) {
      if (files[idx].isDirectory()) {
        dirList.add(new FSDir(files[idx],maxBlocksPerDir));
      }
 else       if (Block.isBlockFilename(files[idx])) {
        numBlocks++;
      }
    }
    if (dirList.size() > 0) {
      children=dirList.toArray(new FSDir[dirList.size()]);
    }
  }
}
