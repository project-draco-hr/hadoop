{
  dfsClient.checkOpen();
  checkClosed();
  if (getStreamer().streamerClosed()) {
    return blockReplication;
  }
  DatanodeInfo[] currentNodes=getStreamer().getNodes();
  if (currentNodes == null) {
    return blockReplication;
  }
  return currentNodes.length;
}
