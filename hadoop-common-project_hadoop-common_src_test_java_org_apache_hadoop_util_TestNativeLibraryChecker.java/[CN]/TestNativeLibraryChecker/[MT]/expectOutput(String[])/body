{
  ExitUtil.disableSystemExit();
  ByteArrayOutputStream outContent=new ByteArrayOutputStream();
  PrintStream originalPs=System.out;
  System.setOut(new PrintStream(outContent));
  try {
    NativeLibraryChecker.main(args);
  }
 catch (  ExitException e) {
    ExitUtil.resetFirstExitException();
  }
 finally {
    if (Shell.WINDOWS) {
      assertEquals(outContent.toString().indexOf("winutils: true") != -1,true);
    }
    if (NativeCodeLoader.isNativeCodeLoaded()) {
      assertEquals(outContent.toString().indexOf("hadoop:  true") != -1,true);
    }
    System.setOut(originalPs);
  }
}
