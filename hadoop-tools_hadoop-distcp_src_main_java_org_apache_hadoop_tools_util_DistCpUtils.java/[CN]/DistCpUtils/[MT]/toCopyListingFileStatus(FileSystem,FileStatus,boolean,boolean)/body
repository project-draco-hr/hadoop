{
  CopyListingFileStatus copyListingFileStatus=new CopyListingFileStatus(fileStatus);
  if (preserveAcls) {
    FsPermission perm=fileStatus.getPermission();
    if (perm.getAclBit()) {
      List<AclEntry> aclEntries=fileSystem.getAclStatus(fileStatus.getPath()).getEntries();
      copyListingFileStatus.setAclEntries(aclEntries);
    }
  }
  if (preserveXAttrs) {
    Map<String,byte[]> xAttrs=fileSystem.getXAttrs(fileStatus.getPath());
    copyListingFileStatus.setXAttrs(xAttrs);
  }
  return copyListingFileStatus;
}
