{
  LOG.info("Starting testDisableCache()");
  DFSTestUtil.readFile(fs,testFile);
  assertEquals(1,((DistributedFileSystem)fs).dfs.socketCache.size());
  Configuration confWithoutCache=new Configuration(fs.getConf());
  confWithoutCache.setInt(DFSConfigKeys.DFS_CLIENT_SOCKET_CACHE_CAPACITY_KEY,0);
  FileSystem fsWithoutCache=FileSystem.newInstance(confWithoutCache);
  try {
    DFSTestUtil.readFile(fsWithoutCache,testFile);
    assertEquals(0,((DistributedFileSystem)fsWithoutCache).dfs.socketCache.size());
  }
  finally {
    fsWithoutCache.close();
  }
}
