{
  if (writer != null && writer != Thread.currentThread() && writer.isAlive()) {
    writer.interrupt();
    try {
      writer.join();
    }
 catch (    InterruptedException e) {
      throw new IOException("Waiting for writer thread is interrupted.");
    }
  }
}
