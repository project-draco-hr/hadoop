{
  Path workDir=getDefaultWorkingDirectory();
  Assert.assertEquals(workDir,fc.getWorkingDirectory());
  fc.setWorkingDirectory(new Path("."));
  Assert.assertEquals(workDir,fc.getWorkingDirectory());
  fc.setWorkingDirectory(new Path(".."));
  Assert.assertEquals(workDir.getParent(),fc.getWorkingDirectory());
  Path relativeDir=new Path("existingDir1");
  Path absoluteDir=new Path(workDir.getParent(),"existingDir1");
  fc.mkdir(absoluteDir,FileContext.DEFAULT_PERM,true);
  fc.setWorkingDirectory(relativeDir);
  Assert.assertEquals(absoluteDir,fc.getWorkingDirectory());
  absoluteDir=getTestRootPath("test/existingDir2");
  fc.mkdir(absoluteDir,FileContext.DEFAULT_PERM,true);
  fc.setWorkingDirectory(absoluteDir);
  Assert.assertEquals(absoluteDir,fc.getWorkingDirectory());
  Path absolutePath=new Path(absoluteDir,"foo");
  fc.create(absolutePath,EnumSet.of(CreateFlag.CREATE)).close();
  fc.open(new Path("foo")).close();
  absoluteDir=getTestRootPath("nonexistingPath");
  try {
    fc.setWorkingDirectory(absoluteDir);
    Assert.fail("cd to non existing dir should have failed");
  }
 catch (  Exception e) {
  }
  absoluteDir=new Path("file:///tmp/existingDir");
  fc.mkdir(absoluteDir,FileContext.DEFAULT_PERM,true);
  fc.setWorkingDirectory(absoluteDir);
  Assert.assertEquals(absoluteDir,fc.getWorkingDirectory());
}
