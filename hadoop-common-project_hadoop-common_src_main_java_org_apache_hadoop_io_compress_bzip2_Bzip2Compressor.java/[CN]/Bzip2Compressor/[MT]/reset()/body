{
  checkStream();
  end(stream);
  stream=init(blockSize,workFactor);
  finish=false;
  finished=false;
  uncompressedDirectBuf.rewind();
  uncompressedDirectBufOff=uncompressedDirectBufLen=0;
  keepUncompressedBuf=false;
  compressedDirectBuf.limit(directBufferSize);
  compressedDirectBuf.position(directBufferSize);
  userBufOff=userBufLen=0;
}
