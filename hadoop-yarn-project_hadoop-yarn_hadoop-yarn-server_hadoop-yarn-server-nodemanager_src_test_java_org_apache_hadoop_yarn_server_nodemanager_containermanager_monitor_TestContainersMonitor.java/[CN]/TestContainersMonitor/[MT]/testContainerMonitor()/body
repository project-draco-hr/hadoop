{
  conf.setBoolean(YarnConfiguration.NM_VMEM_CHECK_ENABLED,false);
  conf.setBoolean(YarnConfiguration.NM_PMEM_CHECK_ENABLED,false);
  containerManager.start();
  ContainerLaunchContext context=recordFactory.newRecordInstance(ContainerLaunchContext.class);
  context.setCommands(Arrays.asList("sleep 6"));
  ContainerId cId=createContainerId(1705);
  StartContainerRequest scRequest=StartContainerRequest.newInstance(context,createContainerToken(cId,DUMMY_RM_IDENTIFIER,this.context.getNodeId(),user,this.context.getContainerTokenSecretManager()));
  StartContainersRequest allRequests=StartContainersRequest.newInstance(Arrays.asList(scRequest));
  containerManager.startContainers(allRequests);
  BaseContainerManagerTest.waitForContainerState(containerManager,cId,ContainerState.RUNNING);
  Thread.sleep(2000);
  GenericTestUtils.waitFor(new Supplier<Boolean>(){
    public Boolean get(){
      try {
        return containerManager.getContainerStatuses(GetContainerStatusesRequest.newInstance(Arrays.asList(cId))).getContainerStatuses().get(0).getHost() != null;
      }
 catch (      Exception e) {
        return false;
      }
    }
  }
,300,10000);
}
