{
  DFSClient dfsClient=Mockito.mock(DFSClient.class);
  Nfs3FileAttributes attr=new Nfs3FileAttributes();
  HdfsDataOutputStream fos=Mockito.mock(HdfsDataOutputStream.class);
  OpenFileCtx ctx=new OpenFileCtx(fos,attr,"/dumpFilePath",dfsClient,new IdUserGroup(new NfsConfiguration()),true);
  Mockito.when(fos.getPos()).thenReturn((long)2);
  COMMIT_STATUS status=ctx.checkCommitInternal(5,null,1,attr,false);
  Assert.assertTrue(status == COMMIT_STATUS.COMMIT_FINISHED);
  Mockito.when(fos.getPos()).thenReturn((long)10);
  status=ctx.checkCommitInternal(5,null,1,attr,false);
  Assert.assertTrue(status == COMMIT_STATUS.COMMIT_DO_SYNC);
}
