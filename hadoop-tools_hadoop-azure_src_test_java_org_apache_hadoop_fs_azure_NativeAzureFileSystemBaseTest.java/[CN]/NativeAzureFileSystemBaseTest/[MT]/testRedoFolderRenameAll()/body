{
{
    FileFolder original=new FileFolder("folderToRename");
    original.add("innerFile").add("innerFile2");
    FileFolder partialSrc=original.copy();
    FileFolder partialDst=original.copy();
    partialDst.setName("renamedFolder");
    partialSrc.setPresent(0,false);
    partialDst.setPresent(1,false);
    testRenameRedoFolderSituation(original,partialSrc,partialDst);
  }
{
    FileFolder original=new FileFolder("folderToRename");
    original.add("file1").add("file2").add("file3");
    FileFolder partialSrc=original.copy();
    FileFolder partialDst=original.copy();
    partialDst.setName("renamedFolder");
    partialSrc.setPresent(1,false);
    partialDst.setPresent(2,false);
    testRenameRedoFolderSituation(original,partialSrc,partialDst);
  }
{
    final int SIZE=5;
    assertTrue(SIZE >= 3);
    FileFolder original=new FileFolder("folderToRename");
    for (int i=0; i < SIZE; i++) {
      original.add("file" + Integer.toString(i));
    }
    FileFolder partialSrc=original.copy();
    FileFolder partialDst=original.copy();
    partialDst.setName("renamedFolder");
    for (int i=0; i < SIZE; i++) {
      partialSrc.setPresent(i,i >= SIZE / 2);
      partialDst.setPresent(i,i <= SIZE / 2);
    }
    testRenameRedoFolderSituation(original,partialSrc,partialDst);
  }
{
    FileFolder original=new FileFolder("folderToRename");
    FileFolder nested=new FileFolder("nestedFolder");
    nested.add("a").add("b").add("c");
    original.add(nested).add("p").add("q");
    FileFolder partialSrc=original.copy();
    FileFolder partialDst=original.copy();
    partialDst.setName("renamedFolder");
    partialSrc.getMember(0).setPresent(0,false);
    partialDst.getMember(0).setPresent(1,false);
    partialDst.getMember(0).setPresent(2,false);
    testRenameRedoFolderSituation(original,partialSrc,partialDst);
  }
}
