{
  Path testFile=new Path("deep/file/creation/test");
  FsPermission permission=FsPermission.createImmutable((short)644);
  createEmptyFile(testFile,permission);
  assertTrue(fs.exists(testFile));
  assertTrue(fs.exists(new Path("deep")));
  assertTrue(fs.exists(new Path("deep/file/creation")));
  FileStatus ret=fs.getFileStatus(new Path("deep/file"));
  assertTrue(ret.isDirectory());
  assertEqualsIgnoreStickyBit(permission,ret.getPermission());
  assertTrue(fs.delete(new Path("deep"),true));
  assertFalse(fs.exists(testFile));
}
