{
  Constructor<?> constructor=cache.get(clazz);
  if (constructor == null) {
    Class<?> pbClazz=null;
    try {
      pbClazz=localConf.getClassByName(getPBImplClassName(clazz));
    }
 catch (    ClassNotFoundException e) {
      throw new YarnException("Failed to load class: [" + getPBImplClassName(clazz) + "]",e);
    }
    try {
      constructor=pbClazz.getConstructor();
      constructor.setAccessible(true);
      cache.putIfAbsent(clazz,constructor);
    }
 catch (    NoSuchMethodException e) {
      throw new YarnException("Could not find 0 argument constructor",e);
    }
  }
  try {
    Object retObject=constructor.newInstance();
    return (T)retObject;
  }
 catch (  InvocationTargetException e) {
    throw new YarnException(e);
  }
catch (  IllegalAccessException e) {
    throw new YarnException(e);
  }
catch (  InstantiationException e) {
    throw new YarnException(e);
  }
}
