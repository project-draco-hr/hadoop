{
  dispatcher=new InlineDispatcher();
  ++startCount;
  conf=new JobConf();
  taskAttemptListener=mock(TaskAttemptListener.class);
  committer=mock(OutputCommitter.class);
  jobToken=(Token<JobTokenIdentifier>)mock(Token.class);
  remoteJobConfFile=mock(Path.class);
  credentials=null;
  clock=new SystemClock();
  metrics=mock(MRAppMetrics.class);
  dataLocations=new String[1];
  appId=Records.newRecord(ApplicationId.class);
  appId.setClusterTimestamp(System.currentTimeMillis());
  appId.setId(1);
  jobId=Records.newRecord(JobId.class);
  jobId.setId(1);
  jobId.setAppId(appId);
  appContext=mock(AppContext.class);
  taskSplitMetaInfo=mock(TaskSplitMetaInfo.class);
  when(taskSplitMetaInfo.getLocations()).thenReturn(dataLocations);
  taskAttempts=new ArrayList<MockTaskAttemptImpl>();
  mockTask=new MockTaskImpl(jobId,partition,dispatcher.getEventHandler(),remoteJobConfFile,conf,taskAttemptListener,committer,jobToken,credentials,clock,completedTasksFromPreviousRun,startCount,metrics,appContext);
}
