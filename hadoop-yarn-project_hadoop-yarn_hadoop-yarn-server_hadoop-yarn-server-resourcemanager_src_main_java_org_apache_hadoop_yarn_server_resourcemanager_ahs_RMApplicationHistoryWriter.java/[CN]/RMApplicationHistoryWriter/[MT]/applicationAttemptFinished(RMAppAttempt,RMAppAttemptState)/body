{
  if (historyServiceEnabled) {
    dispatcher.getEventHandler().handle(new WritingApplicationAttemptFinishEvent(appAttempt.getAppAttemptId(),ApplicationAttemptFinishData.newInstance(appAttempt.getAppAttemptId(),appAttempt.getDiagnostics().toString(),appAttempt.getTrackingUrl(),appAttempt.getFinalApplicationStatus(),RMServerUtils.createApplicationAttemptState(finalState))));
  }
}
