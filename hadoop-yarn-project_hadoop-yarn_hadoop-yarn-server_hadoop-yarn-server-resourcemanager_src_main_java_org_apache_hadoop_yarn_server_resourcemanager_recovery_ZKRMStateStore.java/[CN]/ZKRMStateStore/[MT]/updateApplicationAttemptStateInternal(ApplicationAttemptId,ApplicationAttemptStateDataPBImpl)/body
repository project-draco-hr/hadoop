{
  String appIdStr=appAttemptId.getApplicationId().toString();
  String appAttemptIdStr=appAttemptId.toString();
  String appDirPath=getNodePath(rmAppRoot,appIdStr);
  String nodeUpdatePath=getNodePath(appDirPath,appAttemptIdStr);
  if (LOG.isDebugEnabled()) {
    LOG.debug("Storing final state info for attempt: " + appAttemptIdStr + " at: "+ nodeUpdatePath);
  }
  byte[] attemptStateData=attemptStateDataPB.getProto().toByteArray();
  if (zkClient.exists(nodeUpdatePath,true) != null) {
    setDataWithRetries(nodeUpdatePath,attemptStateData,-1);
  }
 else {
    createWithRetries(nodeUpdatePath,attemptStateData,zkAcl,CreateMode.PERSISTENT);
    LOG.info(appAttemptId + " znode didn't exist. Created a new znode to" + " update the application attempt state.");
  }
}
