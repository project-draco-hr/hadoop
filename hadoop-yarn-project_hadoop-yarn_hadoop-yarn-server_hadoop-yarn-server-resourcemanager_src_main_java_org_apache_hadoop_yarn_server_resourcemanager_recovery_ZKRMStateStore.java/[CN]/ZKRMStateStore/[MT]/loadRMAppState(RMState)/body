{
  List<String> childNodes=getChildrenWithRetries(rmAppRoot,true);
  for (  String childNodeName : childNodes) {
    String childNodePath=getNodePath(rmAppRoot,childNodeName);
    byte[] childData=getDataWithRetries(childNodePath,true);
    if (childNodeName.startsWith(ApplicationId.appIdStrPrefix)) {
      if (LOG.isDebugEnabled()) {
        LOG.debug("Loading application from znode: " + childNodeName);
      }
      ApplicationId appId=ConverterUtils.toApplicationId(childNodeName);
      ApplicationStateDataPBImpl appStateData=new ApplicationStateDataPBImpl(ApplicationStateDataProto.parseFrom(childData));
      ApplicationState appState=new ApplicationState(appStateData.getSubmitTime(),appStateData.getStartTime(),appStateData.getApplicationSubmissionContext(),appStateData.getUser(),appStateData.getState(),appStateData.getDiagnostics(),appStateData.getFinishTime());
      if (!appId.equals(appState.context.getApplicationId())) {
        throw new YarnRuntimeException("The child node name is different " + "from the application id");
      }
      rmState.appState.put(appId,appState);
      loadApplicationAttemptState(appState,appId);
    }
 else {
      LOG.info("Unknown child node with name: " + childNodeName);
    }
  }
}
