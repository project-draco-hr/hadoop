{
  int numBlocks=in.readInt();
  Block[] blocks=new Block[numBlocks];
  for (int i=0; i < numBlocks; i++) {
    Block blk=new Block();
    if (logVersion <= -14) {
      blk.readFields(in);
    }
 else {
      BlockTwo oldblk=new BlockTwo();
      oldblk.readFields(in);
      blk.set(oldblk.blkid,oldblk.len,GenerationStamp.GRANDFATHER_GENERATION_STAMP);
    }
    blocks[i]=blk;
  }
  return blocks;
}
