{
  if (storage != null) {
    storage.createStorageID(datanode.getPort());
    this.storageId=storage.getStorageID();
  }
 else {
    this.storageId="unknownStorageId" + new Random().nextInt();
  }
  registerMBean(storageId);
  this.storage=new SimulatedStorage(conf.getLong(CONFIG_PROPERTY_CAPACITY,DEFAULT_CAPACITY));
}
