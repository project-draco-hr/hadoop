{
  ArrayList<BlockInfoContiguous> blocks=new ArrayList<>();
  long createdSize=0;
  while (createdSize < size) {
    long blockSize=Math.min(BLOCKSIZE,size - createdSize);
    BlockInfoContiguous bi=newBlock(blockSize,replication);
    blocks.add(bi);
    createdSize+=BLOCKSIZE;
  }
  PermissionStatus perm=new PermissionStatus("foo","bar",FsPermission.createImmutable((short)0x1ff));
  return new INodeFile(++nextMockINodeId,new byte[0],perm,0,0,blocks.toArray(new BlockInfoContiguous[blocks.size()]),replication,BLOCKSIZE);
}
