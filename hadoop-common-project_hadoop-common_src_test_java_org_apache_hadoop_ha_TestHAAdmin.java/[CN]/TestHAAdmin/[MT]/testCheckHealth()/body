{
  assertEquals(0,runTool("-checkHealth","foo:1234"));
  Mockito.verify(mockProtocol).monitorHealth();
  Mockito.doThrow(new HealthCheckFailedException("fake health check failure")).when(mockProtocol).monitorHealth();
  assertEquals(-1,runTool("-checkHealth","foo:1234"));
  assertOutputContains("Health check failed: fake health check failure");
}
