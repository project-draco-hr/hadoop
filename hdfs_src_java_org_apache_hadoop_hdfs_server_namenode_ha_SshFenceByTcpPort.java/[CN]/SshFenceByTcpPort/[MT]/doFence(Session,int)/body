{
  try {
    LOG.info("Looking for process running on port " + nnPort);
    int rc=execCommand(session,"PATH=$PATH:/sbin:/usr/sbin fuser -v -k -n tcp " + nnPort);
    if (rc == 0) {
      LOG.info("Successfully killed process that was " + "listening on port " + nnPort);
      return true;
    }
 else     if (rc == 1) {
      LOG.info("Indeterminate response from trying to kill NameNode. " + "Verifying whether it is running using nc...");
      rc=execCommand(session,"nc -z localhost 8020");
      if (rc == 0) {
        LOG.warn("Unable to fence NN - it is running but we cannot kill it");
        return false;
      }
 else {
        LOG.info("Verified that the NN is down.");
        return true;
      }
    }
 else {
    }
    LOG.info("rc: " + rc);
    return rc == 0;
  }
 catch (  InterruptedException e) {
    LOG.warn("Interrupted while trying to fence via ssh",e);
    return false;
  }
catch (  IOException e) {
    LOG.warn("Unknown failure while trying to fence via ssh",e);
    return false;
  }
}
