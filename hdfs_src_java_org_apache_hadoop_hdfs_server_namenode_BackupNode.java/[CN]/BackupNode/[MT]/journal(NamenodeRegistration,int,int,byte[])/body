{
  verifyRequest(nnReg);
  if (!nnRpcAddress.equals(nnReg.getAddress()))   throw new IOException("Journal request from unexpected name-node: " + nnReg.getAddress() + " expecting "+ nnRpcAddress);
  BackupImage bnImage=(BackupImage)getFSImage();
switch (jAction) {
case (int)JA_IS_ALIVE:
    return;
case (int)JA_JOURNAL:
  bnImage.journal(length,args);
return;
case (int)JA_JSPOOL_START:
bnImage.startJournalSpool(nnReg);
return;
case (int)JA_CHECKPOINT_TIME:
bnImage.setCheckpointTime(length,args);
setRegistration();
return;
default :
throw new IOException("Unexpected journal action: " + jAction);
}
}
