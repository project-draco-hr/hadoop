{
  if (!transmitResult.compareAndSet(BKException.Code.OK,BKException.Code.OK)) {
    throw new IOException("Trying to write to an errored stream;" + " Error code : (" + transmitResult.get() + ") "+ BKException.getMessage(transmitResult.get()));
  }
  if (bufCurrent.getLength() > 0) {
    byte[] entry=Arrays.copyOf(bufCurrent.getData(),bufCurrent.getLength());
    lh.asyncAddEntry(entry,this,null);
    bufCurrent.reset();
    outstandingRequests.incrementAndGet();
  }
}
