{
  MockRM rm=setUpMove(config);
  String queueName="a1";
  String userName="user_0";
  ResourceScheduler scheduler=rm.getRMContext().getScheduler();
  LeafQueue queueA=(LeafQueue)((CapacityScheduler)scheduler).getQueue(queueName);
  Resource amResourceLimit=queueA.getAMResourceLimit();
  Resource amResource=Resource.newInstance(amResourceLimit.getMemory() + 1,amResourceLimit.getVirtualCores() + 1);
  rm.submitApp(amResource.getMemory(),"app-1",userName,null,queueName);
  rm.submitApp(amResource.getMemory(),"app-1",userName,null,queueName);
  Assert.assertEquals("PendingApplications should be 1",1,queueA.getNumPendingApplications());
  Assert.assertEquals("Active applications should be 1",1,queueA.getNumActiveApplications());
  Assert.assertEquals("User PendingApplications should be 1",1,queueA.getUser(userName).getPendingApplications());
  Assert.assertEquals("User Active applications should be 1",1,queueA.getUser(userName).getActiveApplications());
  rm.stop();
}
