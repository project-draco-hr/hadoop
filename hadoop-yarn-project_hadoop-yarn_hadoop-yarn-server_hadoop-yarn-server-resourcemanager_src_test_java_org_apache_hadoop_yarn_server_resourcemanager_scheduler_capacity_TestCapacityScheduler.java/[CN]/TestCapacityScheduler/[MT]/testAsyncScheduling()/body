{
  Configuration conf=new Configuration();
  conf.setClass(YarnConfiguration.RM_SCHEDULER,CapacityScheduler.class,ResourceScheduler.class);
  MockRM rm=new MockRM(conf);
  rm.start();
  CapacityScheduler cs=(CapacityScheduler)rm.getResourceScheduler();
  final int NODES=100;
  for (int i=0; i < NODES; ++i) {
    String host="192.168.1." + i;
    RMNode node=MockNodes.newNodeInfo(0,MockNodes.newResource(4 * GB),1,host);
    cs.handle(new NodeAddedSchedulerEvent(node));
  }
  for (int i=0; i < NODES; ++i) {
    CapacityScheduler.schedule(cs);
  }
}
