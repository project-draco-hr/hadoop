{
  CapacitySchedulerConfiguration conf=new CapacitySchedulerConfiguration();
  setupQueueConfiguration(conf);
  conf.setClass(YarnConfiguration.RM_SCHEDULER,CapacityScheduler.class,ResourceScheduler.class);
  MockRM rm=new MockRM(conf);
  @SuppressWarnings("unchecked") AbstractYarnScheduler<SchedulerApplicationAttempt,SchedulerNode> cs=(AbstractYarnScheduler<SchedulerApplicationAttempt,SchedulerNode>)rm.getResourceScheduler();
  SchedulerApplication<SchedulerApplicationAttempt> app=TestSchedulerUtils.verifyAppAddedAndRemovedFromScheduler(cs.getSchedulerApplications(),cs,"a1");
  Assert.assertEquals("a1",app.getQueue().getQueueName());
}
