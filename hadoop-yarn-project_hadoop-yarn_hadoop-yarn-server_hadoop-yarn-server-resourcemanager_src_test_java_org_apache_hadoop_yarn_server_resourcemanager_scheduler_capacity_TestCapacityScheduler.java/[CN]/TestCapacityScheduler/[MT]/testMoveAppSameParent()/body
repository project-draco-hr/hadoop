{
  MockRM rm=setUpMove();
  AbstractYarnScheduler scheduler=(AbstractYarnScheduler)rm.getResourceScheduler();
  RMApp app=rm.submitApp(GB,"test-move-1","user_0",null,"a1");
  ApplicationAttemptId appAttemptId=rm.getApplicationReport(app.getApplicationId()).getCurrentApplicationAttemptId();
  List<ApplicationAttemptId> appsInA1=scheduler.getAppsInQueue("a1");
  assertEquals(1,appsInA1.size());
  String queue=scheduler.getApplicationAttempt(appsInA1.get(0)).getQueue().getQueueName();
  Assert.assertTrue(queue.equals("a1"));
  List<ApplicationAttemptId> appsInA=scheduler.getAppsInQueue("a");
  assertTrue(appsInA.contains(appAttemptId));
  assertEquals(1,appsInA.size());
  List<ApplicationAttemptId> appsInRoot=scheduler.getAppsInQueue("root");
  assertTrue(appsInRoot.contains(appAttemptId));
  assertEquals(1,appsInRoot.size());
  List<ApplicationAttemptId> appsInA2=scheduler.getAppsInQueue("a2");
  assertTrue(appsInA2.isEmpty());
  scheduler.moveApplication(app.getApplicationId(),"a2");
  appsInA2=scheduler.getAppsInQueue("a2");
  assertEquals(1,appsInA2.size());
  queue=scheduler.getApplicationAttempt(appsInA2.get(0)).getQueue().getQueueName();
  Assert.assertTrue(queue.equals("a2"));
  appsInA1=scheduler.getAppsInQueue("a1");
  assertTrue(appsInA1.isEmpty());
  appsInA=scheduler.getAppsInQueue("a");
  assertEquals(1,appsInA.size());
  appsInRoot=scheduler.getAppsInQueue("root");
  assertTrue(appsInRoot.contains(appAttemptId));
  assertEquals(1,appsInRoot.size());
  rm.stop();
}
