{
  while (!done) {
    if (LOG.isDebugEnabled()) {
      LOG.debug("_06: checking for the limit " + test.getLastQueued() + " and "+ MAX);
    }
    if (test.getLastQueued() >= MAX) {
      if (LOG.isDebugEnabled()) {
        LOG.debug("FI: Resume packets acking");
      }
      test.setSuspend(false);
      done=true;
    }
    if (!done)     try {
      if (LOG.isDebugEnabled()) {
        LOG.debug("_06: MAX isn't reached yet. Current=" + test.getLastQueued());
      }
      sleep(100);
    }
 catch (    InterruptedException e) {
    }
  }
  assertTrue("Shouldn't be able to send more than 81 packet",test.getLastQueued() <= 81);
  try {
    if (LOG.isDebugEnabled()) {
      LOG.debug("_06: shutting down the cluster");
    }
    if (cluster != null)     shutDownCluster();
  }
 catch (  Exception e) {
    e.printStackTrace();
  }
  if (LOG.isDebugEnabled()) {
    LOG.debug("End QueueChecker thread");
  }
}
