{
  if (ranges == null || ranges.size() != 1) {
    response.setContentLength(0);
    int status=HttpServletResponse.SC_REQUESTED_RANGE_NOT_SATISFIABLE;
    response.setStatus(status);
    response.setHeader("Content-Range",InclusiveByteRange.to416HeaderRangeString(contentLength));
  }
 else {
    InclusiveByteRange singleSatisfiableRange=(InclusiveByteRange)ranges.get(0);
    long singleLength=singleSatisfiableRange.getSize(contentLength);
    response.setStatus(HttpServletResponse.SC_PARTIAL_CONTENT);
    response.setHeader("Content-Range",singleSatisfiableRange.toHeaderRangeString(contentLength));
    System.out.println("first: " + singleSatisfiableRange.getFirst(contentLength));
    System.out.println("singleLength: " + singleLength);
    StreamFile.writeTo(in,os,singleSatisfiableRange.getFirst(contentLength),singleLength);
  }
}
