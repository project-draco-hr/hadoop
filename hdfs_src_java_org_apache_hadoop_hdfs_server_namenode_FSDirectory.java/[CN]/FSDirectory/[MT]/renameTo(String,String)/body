{
  if (NameNode.stateChangeLog.isDebugEnabled()) {
    NameNode.stateChangeLog.debug("DIR* FSDirectory.renameTo: " + src + " to "+ dst);
  }
  waitForReady();
  long now=now();
  writeLock();
  try {
    if (!unprotectedRenameTo(src,dst,now))     return false;
  }
  finally {
    writeUnlock();
  }
  fsImage.getEditLog().logRename(src,dst,now);
  return true;
}
