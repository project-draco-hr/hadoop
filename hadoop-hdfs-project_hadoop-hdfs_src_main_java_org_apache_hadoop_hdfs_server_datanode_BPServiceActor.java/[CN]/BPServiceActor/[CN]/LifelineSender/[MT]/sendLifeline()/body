{
  StorageReport[] reports=dn.getFSDataset().getStorageReports(bpos.getBlockPoolId());
  if (LOG.isDebugEnabled()) {
    LOG.debug("Sending lifeline with " + reports.length + " storage "+ " reports from service actor: "+ BPServiceActor.this);
  }
  VolumeFailureSummary volumeFailureSummary=dn.getFSDataset().getVolumeFailureSummary();
  int numFailedVolumes=volumeFailureSummary != null ? volumeFailureSummary.getFailedStorageLocations().length : 0;
  lifelineNamenode.sendLifeline(bpRegistration,reports,dn.getFSDataset().getCacheCapacity(),dn.getFSDataset().getCacheUsed(),dn.getXmitsInProgress(),dn.getXceiverCount(),numFailedVolumes,volumeFailureSummary);
}
