{
  Path workDir;
  try {
    workDir=new Path(client.pwd());
  }
 catch (  SftpException e) {
    throw new IOException(e);
  }
  Path absolute=makeAbsolute(workDir,file);
  FileStatus fileStat=getFileStatus(client,absolute);
  if (!fileStat.isDirectory()) {
    return new FileStatus[]{fileStat};
  }
  Vector<LsEntry> sftpFiles;
  try {
    sftpFiles=(Vector<LsEntry>)client.ls(absolute.toUri().getPath());
  }
 catch (  SftpException e) {
    throw new IOException(e);
  }
  ArrayList<FileStatus> fileStats=new ArrayList<FileStatus>();
  for (int i=0; i < sftpFiles.size(); i++) {
    LsEntry entry=sftpFiles.get(i);
    String fname=entry.getFilename();
    if (!".".equalsIgnoreCase(fname) && !"..".equalsIgnoreCase(fname)) {
      fileStats.add(getFileStatus(client,entry,absolute));
    }
  }
  return fileStats.toArray(new FileStatus[fileStats.size()]);
}
