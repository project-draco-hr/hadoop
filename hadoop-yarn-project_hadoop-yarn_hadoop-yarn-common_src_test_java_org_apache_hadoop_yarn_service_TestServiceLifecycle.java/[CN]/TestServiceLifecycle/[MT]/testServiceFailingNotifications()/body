{
  BreakableService svc=new BreakableService(false,false,false);
  BreakableStateChangeListener listener=new BreakableStateChangeListener();
  listener.setFailingState(Service.STATE.STARTED);
  svc.registerServiceListener(listener);
  svc.init(new Configuration());
  assertEventCount(listener,1);
  svc.start();
  assertEventCount(listener,2);
  assertEquals(1,listener.getFailureCount());
  svc.stop();
  assertEventCount(listener,3);
  assertEquals(1,listener.getFailureCount());
  svc.stop();
}
