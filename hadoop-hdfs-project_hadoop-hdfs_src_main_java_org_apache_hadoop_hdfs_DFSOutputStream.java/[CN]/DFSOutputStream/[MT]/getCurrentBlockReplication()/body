{
  dfsClient.checkOpen();
  checkClosed();
  if (streamer.streamerClosed()) {
    return blockReplication;
  }
  DatanodeInfo[] currentNodes=streamer.getNodes();
  if (currentNodes == null) {
    return blockReplication;
  }
  return currentNodes.length;
}
