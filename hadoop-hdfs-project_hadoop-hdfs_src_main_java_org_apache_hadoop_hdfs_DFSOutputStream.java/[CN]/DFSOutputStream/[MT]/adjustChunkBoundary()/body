{
  if (streamer.getAppendChunk() && streamer.getBytesCurBlock() % bytesPerChecksum == 0) {
    streamer.setAppendChunk(false);
    resetChecksumBufSize();
  }
  if (!streamer.getAppendChunk()) {
    int psize=Math.min((int)(blockSize - streamer.getBytesCurBlock()),dfsClient.getConf().writePacketSize);
    computePacketChunkSize(psize,bytesPerChecksum);
  }
}
