{
  TraceScope scope=dfsClient.getPathTraceScope("newStreamForAppend",src);
  try {
    final DFSOutputStream out=new DFSOutputStream(dfsClient,src,toNewBlock,progress,lastBlock,stat,checksum);
    if (favoredNodes != null && favoredNodes.length != 0) {
      out.streamer.setFavoredNodes(favoredNodes);
    }
    out.start();
    return out;
  }
  finally {
    scope.close();
  }
}
