{
  final byte[] buf;
  final int bufferSize=PacketHeader.PKT_MAX_HEADER_LEN + packetSize;
  try {
    buf=byteArrayManager.newByteArray(bufferSize);
  }
 catch (  InterruptedException ie) {
    final InterruptedIOException iioe=new InterruptedIOException("seqno=" + seqno);
    iioe.initCause(ie);
    throw iioe;
  }
  return new Packet(buf,chunksPerPkt,offsetInBlock,seqno,getChecksumSize());
}
