{
  Map<String,Set<String>> relations=null;
  if (entityFiltersType == TimelineEntityFiltersType.IS_RELATED_TO) {
    relations=entity.getIsRelatedToEntities();
  }
 else   if (entityFiltersType == TimelineEntityFiltersType.RELATES_TO) {
    relations=entity.getRelatesToEntities();
  }
  if (relations == null) {
    return false;
  }
  Set<String> ids=relations.get(keyValuesFilter.getKey());
  if (ids == null) {
    return false;
  }
  boolean matched=false;
  for (  Object id : keyValuesFilter.getValues()) {
    matched=!(ids.contains(id) ^ keyValuesFilter.getCompareOp() == TimelineCompareOp.EQUAL);
    if (!matched) {
      return false;
    }
  }
  return true;
}
