{
  if (entityFiltersType != TimelineEntityFiltersType.METRIC) {
    return false;
  }
  if (!isIntegralValue(compareFilter.getValue())) {
    throw new IOException("Metric filters has non integral values");
  }
  Map<String,TimelineMetric> metricMap=new HashMap<String,TimelineMetric>();
  for (  TimelineMetric metric : entity.getMetrics()) {
    metricMap.put(metric.getId(),metric);
  }
  TimelineMetric metric=metricMap.get(compareFilter.getKey());
  if (metric == null) {
    return false;
  }
  return compareValues(compareFilter.getCompareOp(),metric.getValuesJAXB().firstEntry().getValue().longValue(),((Number)compareFilter.getValue()).longValue());
}
