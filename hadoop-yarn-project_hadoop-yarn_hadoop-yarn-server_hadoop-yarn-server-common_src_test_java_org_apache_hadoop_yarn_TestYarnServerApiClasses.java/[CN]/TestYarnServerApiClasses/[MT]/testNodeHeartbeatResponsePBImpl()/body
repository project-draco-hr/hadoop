{
  NodeHeartbeatResponsePBImpl original=new NodeHeartbeatResponsePBImpl();
  original.setDiagnosticsMessage("testDiagnosticMessage");
  original.setContainerTokenMasterKey(getMasterKey());
  original.setNMTokenMasterKey(getMasterKey());
  original.setNextHeartBeatInterval(1000);
  original.setNodeAction(NodeAction.NORMAL);
  original.setResponseId(100);
  Map<ApplicationId,String> aggregators=getAggregators();
  original.setAppAggregatorsMap(aggregators);
  NodeHeartbeatResponsePBImpl copy=new NodeHeartbeatResponsePBImpl(original.getProto());
  assertEquals(100,copy.getResponseId());
  assertEquals(NodeAction.NORMAL,copy.getNodeAction());
  assertEquals(1000,copy.getNextHeartBeatInterval());
  assertEquals(1,copy.getContainerTokenMasterKey().getKeyId());
  assertEquals(1,copy.getNMTokenMasterKey().getKeyId());
  assertEquals("testDiagnosticMessage",copy.getDiagnosticsMessage());
  assertEquals(aggregators,copy.getAppAggregatorsMap());
  assertEquals(false,copy.getAreNodeLabelsAcceptedByRM());
}
