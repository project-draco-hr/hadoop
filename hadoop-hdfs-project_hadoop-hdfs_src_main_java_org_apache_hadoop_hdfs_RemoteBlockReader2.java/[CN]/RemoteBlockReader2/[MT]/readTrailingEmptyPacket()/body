{
  if (LOG.isTraceEnabled()) {
    LOG.trace("Reading empty packet at end of read");
  }
  headerBuf.clear();
  readChannelFully(in,headerBuf);
  headerBuf.flip();
  PacketHeader trailer=new PacketHeader();
  trailer.readFields(headerBuf);
  if (!trailer.isLastPacketInBlock() || trailer.getDataLen() != 0) {
    throw new IOException("Expected empty end-of-read packet! Header: " + trailer);
  }
}
