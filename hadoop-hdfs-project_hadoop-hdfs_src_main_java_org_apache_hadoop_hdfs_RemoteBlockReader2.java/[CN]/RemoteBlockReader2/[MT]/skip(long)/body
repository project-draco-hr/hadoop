{
  long skipped=0;
  while (skipped < n) {
    long needToSkip=n - skipped;
    if (curDataSlice == null || curDataSlice.remaining() == 0 && bytesNeededToFinish > 0) {
      readNextPacket();
    }
    if (curDataSlice.remaining() == 0) {
      break;
    }
    int skip=(int)Math.min(curDataSlice.remaining(),needToSkip);
    curDataSlice.position(curDataSlice.position() + skip);
    skipped+=skip;
  }
  return skipped;
}
