{
  if (curPacketBuf == null || curDataSlice.remaining() == 0 && bytesNeededToFinish > 0) {
    readNextPacket();
  }
  if (curDataSlice.remaining() == 0) {
    return -1;
  }
  int nRead=Math.min(curDataSlice.remaining(),len);
  curDataSlice.get(buf,off,nRead);
  return nRead;
}
