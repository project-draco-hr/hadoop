{
  if (this.states != null) {
    maybeInitBuilder();
    builder.clearNodeStates();
    Iterable<NodeStateProto> iterable=new Iterable<NodeStateProto>(){
      @Override public Iterator<NodeStateProto> iterator(){
        return new Iterator<NodeStateProto>(){
          Iterator<NodeState> iter=states.iterator();
          @Override public boolean hasNext(){
            return iter.hasNext();
          }
          @Override public NodeStateProto next(){
            return ProtoUtils.convertToProtoFormat(iter.next());
          }
          @Override public void remove(){
            throw new UnsupportedOperationException();
          }
        }
;
      }
    }
;
    builder.addAllNodeStates(iterable);
  }
}
