{
  if (!isBlockTokenEnabled) {
    return BlockTokenSecretManager.DUMMY_TOKEN;
  }
 else {
    if (!shouldRun) {
      throw new IOException("Can not get access token. BlockKeyUpdater is not running");
    }
    return blockTokenSecretManager.generateToken(null,eb,EnumSet.of(BlockTokenSecretManager.AccessMode.REPLACE,BlockTokenSecretManager.AccessMode.COPY));
  }
}
