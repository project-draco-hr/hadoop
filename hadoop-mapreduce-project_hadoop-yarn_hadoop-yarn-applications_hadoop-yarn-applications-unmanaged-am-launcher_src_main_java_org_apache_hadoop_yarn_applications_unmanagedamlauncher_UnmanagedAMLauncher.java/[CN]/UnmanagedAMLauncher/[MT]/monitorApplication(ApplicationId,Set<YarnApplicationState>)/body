{
  while (true) {
    try {
      Thread.sleep(1000);
    }
 catch (    InterruptedException e) {
      LOG.debug("Thread sleep in monitoring loop interrupted");
    }
    GetApplicationReportRequest reportRequest=Records.newRecord(GetApplicationReportRequest.class);
    reportRequest.setApplicationId(appId);
    GetApplicationReportResponse reportResponse=rmClient.getApplicationReport(reportRequest);
    ApplicationReport report=reportResponse.getApplicationReport();
    LOG.info("Got application report from ASM for" + ", appId=" + appId.getId() + ", appAttemptId="+ report.getCurrentApplicationAttemptId()+ ", clientToken="+ report.getClientToken()+ ", appDiagnostics="+ report.getDiagnostics()+ ", appMasterHost="+ report.getHost()+ ", appQueue="+ report.getQueue()+ ", appMasterRpcPort="+ report.getRpcPort()+ ", appStartTime="+ report.getStartTime()+ ", yarnAppState="+ report.getYarnApplicationState().toString()+ ", distributedFinalState="+ report.getFinalApplicationStatus().toString()+ ", appTrackingUrl="+ report.getTrackingUrl()+ ", appUser="+ report.getUser());
    YarnApplicationState state=report.getYarnApplicationState();
    if (finalState.contains(state)) {
      return report;
    }
  }
}
