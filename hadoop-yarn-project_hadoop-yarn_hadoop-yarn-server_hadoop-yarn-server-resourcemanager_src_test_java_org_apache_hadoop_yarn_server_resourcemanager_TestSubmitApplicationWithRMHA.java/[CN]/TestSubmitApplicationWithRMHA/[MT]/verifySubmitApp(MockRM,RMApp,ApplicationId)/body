{
  int maxWaittingTimes=20;
  int count=0;
  while (true) {
    YarnApplicationState state=rm.getApplicationReport(app.getApplicationId()).getYarnApplicationState();
    if (!state.equals(YarnApplicationState.NEW) && !state.equals(YarnApplicationState.NEW_SAVING)) {
      break;
    }
    if (count > maxWaittingTimes) {
      break;
    }
    Thread.sleep(200);
    count++;
  }
  Assert.assertFalse(rm.getApplicationReport(app.getApplicationId()).getYarnApplicationState() == YarnApplicationState.NEW);
  Assert.assertFalse(rm.getApplicationReport(app.getApplicationId()).getYarnApplicationState() == YarnApplicationState.NEW_SAVING);
  Assert.assertEquals(expectedAppId,app.getApplicationId());
}
