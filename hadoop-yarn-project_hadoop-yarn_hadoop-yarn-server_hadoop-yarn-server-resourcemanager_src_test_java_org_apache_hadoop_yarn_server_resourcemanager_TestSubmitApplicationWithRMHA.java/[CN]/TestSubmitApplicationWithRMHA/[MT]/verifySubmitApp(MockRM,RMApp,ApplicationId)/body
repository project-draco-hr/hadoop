{
  int maxWaittingTimes=20;
  int count=0;
  while (true) {
    YarnApplicationState state=rm.getApplicationReport(app.getApplicationId()).getYarnApplicationState();
    if (!state.equals(YarnApplicationState.NEW) && !state.equals(YarnApplicationState.NEW_SAVING)) {
      break;
    }
    if (count > maxWaittingTimes) {
      break;
    }
    Thread.sleep(200);
    count++;
  }
  YarnApplicationState state=rm.getApplicationReport(app.getApplicationId()).getYarnApplicationState();
  Assert.assertTrue(state == YarnApplicationState.ACCEPTED || state == YarnApplicationState.SUBMITTED);
  Assert.assertEquals(expectedAppId,app.getApplicationId());
}
