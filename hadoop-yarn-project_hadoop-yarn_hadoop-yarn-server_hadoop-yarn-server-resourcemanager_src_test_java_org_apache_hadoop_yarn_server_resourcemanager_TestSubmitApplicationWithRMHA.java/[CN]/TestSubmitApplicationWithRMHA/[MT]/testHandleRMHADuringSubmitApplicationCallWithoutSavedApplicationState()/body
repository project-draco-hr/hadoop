{
  startRMsWithCustomizedRMAppManager();
  RMApp app0=rm1.submitApp(200,"",UserGroupInformation.getCurrentUser().getShortUserName(),null,false,null,configuration.getInt(YarnConfiguration.RM_AM_MAX_ATTEMPTS,YarnConfiguration.DEFAULT_RM_AM_MAX_ATTEMPTS),null,null,false,false);
  explicitFailover();
  Assert.assertFalse(rm2.getRMContext().getRMApps().containsKey(app0.getApplicationId()));
  RMApp app1=rm2.submitApp(200,"",UserGroupInformation.getCurrentUser().getShortUserName(),null,false,null,configuration.getInt(YarnConfiguration.RM_AM_MAX_ATTEMPTS,YarnConfiguration.DEFAULT_RM_AM_MAX_ATTEMPTS),null,null,false,false,true,app0.getApplicationId());
  verifySubmitApp(rm2,app1,app0.getApplicationId());
  Assert.assertTrue(rm2.getRMContext().getRMApps().containsKey(app0.getApplicationId()));
}
