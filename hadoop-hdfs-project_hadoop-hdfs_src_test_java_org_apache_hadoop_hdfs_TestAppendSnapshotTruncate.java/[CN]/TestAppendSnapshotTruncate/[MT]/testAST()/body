{
  final String dirPathString="/dir";
  final Path dir=new Path(dirPathString);
  dfs.mkdirs(dir);
  dfs.allowSnapshot(dir);
  final File localDir=new File(System.getProperty("test.build.data","target/test/data") + dirPathString);
  if (localDir.exists()) {
    FileUtil.fullyDelete(localDir);
  }
  localDir.mkdirs();
  final DirWorker w=new DirWorker(dir,localDir,FILE_WORKER_NUM);
  w.startAllFiles();
  w.start();
  Worker.sleep(TEST_TIME_SECOND * 1000);
  w.stop();
  w.stopAllFiles();
  w.checkEverything();
}
