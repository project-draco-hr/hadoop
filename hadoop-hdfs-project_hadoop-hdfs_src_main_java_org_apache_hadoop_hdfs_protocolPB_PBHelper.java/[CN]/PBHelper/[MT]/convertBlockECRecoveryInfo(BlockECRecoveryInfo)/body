{
  BlockECRecoveryInfoProto.Builder builder=BlockECRecoveryInfoProto.newBuilder();
  builder.setBlock(convert(blockEcRecoveryInfo.getExtendedBlock()));
  DatanodeInfo[] sourceDnInfos=blockEcRecoveryInfo.getSourceDnInfos();
  builder.setSourceDnInfos(convertToDnInfosProto(sourceDnInfos));
  DatanodeInfo[] targetDnInfos=blockEcRecoveryInfo.getTargetDnInfos();
  builder.setTargetDnInfos(convertToDnInfosProto(targetDnInfos));
  String[] targetStorageIDs=blockEcRecoveryInfo.getTargetStorageIDs();
  builder.setTargetStorageUuids(convertStorageIDs(targetStorageIDs));
  StorageType[] targetStorageTypes=blockEcRecoveryInfo.getTargetStorageTypes();
  builder.setTargetStorageTypes(convertStorageTypesProto(targetStorageTypes));
  short[] liveBlockIndices=blockEcRecoveryInfo.getLiveBlockIndices();
  builder.addAllLiveBlockIndices(convertIntArray(liveBlockIndices));
  builder.setEcSchema(convertECSchema(blockEcRecoveryInfo.getECSchema()));
  return builder.build();
}
