{
  BlockWithLocationsProto.Builder builder=BlockWithLocationsProto.newBuilder().setBlock(PBHelperClient.convert(blk.getBlock())).addAllDatanodeUuids(Arrays.asList(blk.getDatanodeUuids())).addAllStorageUuids(Arrays.asList(blk.getStorageIDs())).addAllStorageTypes(PBHelperClient.convertStorageTypes(blk.getStorageTypes()));
  if (blk instanceof StripedBlockWithLocations) {
    StripedBlockWithLocations sblk=(StripedBlockWithLocations)blk;
    builder.setIndices(PBHelperClient.getByteString(sblk.getIndices()));
    builder.setDataBlockNum(sblk.getDataBlockNum());
    builder.setCellSize(sblk.getCellSize());
  }
  return builder.build();
}
