{
  UpgradeCommandProto.Builder builder=UpgradeCommandProto.newBuilder();
  if (comm == null) {
    return builder.setAction(UpgradeCommandProto.Action.UNKNOWN).setVersion(0).setUpgradeStatus(0).build();
  }
  builder.setVersion(comm.getVersion()).setUpgradeStatus(comm.getCurrentStatus());
switch (comm.getAction()) {
case UpgradeCommand.UC_ACTION_REPORT_STATUS:
    builder.setAction(UpgradeCommandProto.Action.REPORT_STATUS);
  break;
case UpgradeCommand.UC_ACTION_START_UPGRADE:
builder.setAction(UpgradeCommandProto.Action.START_UPGRADE);
break;
default :
builder.setAction(UpgradeCommandProto.Action.UNKNOWN);
break;
}
return builder.build();
}
