{
  final List<String> datanodeUuids=b.getDatanodeUuidsList();
  final List<String> storageUuids=b.getStorageUuidsList();
  final List<StorageTypeProto> storageTypes=b.getStorageTypesList();
  BlockWithLocations blk=new BlockWithLocations(convert(b.getBlock()),datanodeUuids.toArray(new String[datanodeUuids.size()]),storageUuids.toArray(new String[storageUuids.size()]),convertStorageTypes(storageTypes,storageUuids.size()));
  if (b.hasIndices()) {
    blk=new StripedBlockWithLocations(blk,b.getIndices().toByteArray(),(short)b.getDataBlockNum());
  }
  return blk;
}
