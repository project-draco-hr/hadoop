{
  if (entry == null) {
    return null;
  }
  ByteString sourcePath=ByteString.copyFrom(entry.getSourcePath() == null ? DFSUtil.EMPTY_BYTES : entry.getSourcePath());
  String modification=entry.getType().getLabel();
  SnapshotDiffReportEntryProto.Builder builder=SnapshotDiffReportEntryProto.newBuilder().setFullpath(sourcePath).setModificationLabel(modification);
  if (entry.getType() == DiffType.RENAME) {
    ByteString targetPath=ByteString.copyFrom(entry.getTargetPath() == null ? DFSUtil.EMPTY_BYTES : entry.getTargetPath());
    builder.setTargetPath(targetPath);
  }
  return builder.build();
}
