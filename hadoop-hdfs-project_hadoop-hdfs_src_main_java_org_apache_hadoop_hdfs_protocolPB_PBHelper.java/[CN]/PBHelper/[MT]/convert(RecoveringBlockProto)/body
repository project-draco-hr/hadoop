{
  LocatedBlock lb=PBHelperClient.convertLocatedBlockProto(b.getBlock());
  RecoveringBlock rBlock;
  if (b.hasTruncateBlock()) {
    rBlock=new RecoveringBlock(lb.getBlock(),lb.getLocations(),PBHelperClient.convert(b.getTruncateBlock()));
  }
 else {
    rBlock=new RecoveringBlock(lb.getBlock(),lb.getLocations(),b.getNewGenStamp());
  }
  if (b.hasEcPolicy()) {
    List<Integer> BlockIndicesList=b.getBlockIndicesList();
    int[] indices=new int[BlockIndicesList.size()];
    for (int i=0; i < BlockIndicesList.size(); i++) {
      indices[i]=BlockIndicesList.get(i).shortValue();
    }
    rBlock=new RecoveringStripedBlock(rBlock,indices,PBHelperClient.convertErasureCodingPolicy(b.getEcPolicy()));
  }
  return rBlock;
}
