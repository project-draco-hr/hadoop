{
  if (b == null)   return null;
  Builder builder=LocatedBlockProto.newBuilder();
  DatanodeInfo[] locs=b.getLocations();
  for (int i=0; i < locs.length; i++) {
    builder.addLocs(i,PBHelper.convert(locs[i]));
  }
  StorageType[] storageTypes=b.getStorageTypes();
  if (storageTypes != null) {
    for (int i=0; i < storageTypes.length; ++i) {
      builder.addStorageTypes(PBHelper.convertStorageType(storageTypes[i]));
    }
  }
  final String[] storageIDs=b.getStorageIDs();
  if (storageIDs != null) {
    builder.addAllStorageIDs(Arrays.asList(b.getStorageIDs()));
  }
  return builder.setB(PBHelper.convert(b.getBlock())).setBlockToken(PBHelper.convert(b.getBlockToken())).setCorrupt(b.isCorrupt()).setOffset(b.getStartOffset()).build();
}
