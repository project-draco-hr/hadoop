{
  ExtendedBlockProto blockProto=blockEcRecoveryInfoProto.getBlock();
  ExtendedBlock block=convert(blockProto);
  DatanodeInfosProto sourceDnInfosProto=blockEcRecoveryInfoProto.getSourceDnInfos();
  DatanodeInfo[] sourceDnInfos=convert(sourceDnInfosProto);
  DatanodeInfosProto targetDnInfosProto=blockEcRecoveryInfoProto.getTargetDnInfos();
  DatanodeInfo[] targetDnInfos=convert(targetDnInfosProto);
  StorageUuidsProto targetStorageUuidsProto=blockEcRecoveryInfoProto.getTargetStorageUuids();
  String[] targetStorageUuids=convert(targetStorageUuidsProto);
  StorageTypesProto targetStorageTypesProto=blockEcRecoveryInfoProto.getTargetStorageTypes();
  StorageType[] convertStorageTypes=convertStorageTypes(targetStorageTypesProto.getStorageTypesList(),targetStorageTypesProto.getStorageTypesList().size());
  List<Integer> liveBlockIndicesList=blockEcRecoveryInfoProto.getLiveBlockIndicesList();
  short[] liveBlkIndices=new short[liveBlockIndicesList.size()];
  for (int i=0; i < liveBlockIndicesList.size(); i++) {
    liveBlkIndices[i]=liveBlockIndicesList.get(i).shortValue();
  }
  return new BlockECRecoveryInfo(block,sourceDnInfos,targetDnInfos,targetStorageUuids,convertStorageTypes,liveBlkIndices);
}
