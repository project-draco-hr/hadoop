{
  ExtendedBlockProto blockProto=blockEcRecoveryInfoProto.getBlock();
  ExtendedBlock block=PBHelperClient.convert(blockProto);
  DatanodeInfosProto sourceDnInfosProto=blockEcRecoveryInfoProto.getSourceDnInfos();
  DatanodeInfo[] sourceDnInfos=PBHelperClient.convert(sourceDnInfosProto);
  DatanodeInfosProto targetDnInfosProto=blockEcRecoveryInfoProto.getTargetDnInfos();
  DatanodeInfo[] targetDnInfos=PBHelperClient.convert(targetDnInfosProto);
  HdfsProtos.StorageUuidsProto targetStorageUuidsProto=blockEcRecoveryInfoProto.getTargetStorageUuids();
  String[] targetStorageUuids=convert(targetStorageUuidsProto);
  StorageTypesProto targetStorageTypesProto=blockEcRecoveryInfoProto.getTargetStorageTypes();
  StorageType[] convertStorageTypes=PBHelperClient.convertStorageTypes(targetStorageTypesProto.getStorageTypesList(),targetStorageTypesProto.getStorageTypesList().size());
  List<Integer> liveBlockIndicesList=blockEcRecoveryInfoProto.getLiveBlockIndicesList();
  short[] liveBlkIndices=new short[liveBlockIndicesList.size()];
  for (int i=0; i < liveBlockIndicesList.size(); i++) {
    liveBlkIndices[i]=liveBlockIndicesList.get(i).shortValue();
  }
  ErasureCodingPolicy ecPolicy=PBHelperClient.convertErasureCodingPolicy(blockEcRecoveryInfoProto.getEcPolicy());
  return new BlockECRecoveryInfo(block,sourceDnInfos,targetDnInfos,targetStorageUuids,convertStorageTypes,liveBlkIndices,ecPolicy);
}
