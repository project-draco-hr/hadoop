{
  X509TrustManager trustManager=null;
  KeyStore ks=KeyStore.getInstance(type);
  lastLoaded=file.lastModified();
  FileInputStream in=new FileInputStream(file);
  try {
    ks.load(in,password.toCharArray());
    LOG.debug("Loaded truststore '" + file + "'");
  }
  finally {
    in.close();
  }
  TrustManagerFactory trustManagerFactory=TrustManagerFactory.getInstance("SunX509");
  trustManagerFactory.init(ks);
  TrustManager[] trustManagers=trustManagerFactory.getTrustManagers();
  for (  TrustManager trustManager1 : trustManagers) {
    if (trustManager1 instanceof X509TrustManager) {
      trustManager=(X509TrustManager)trustManager1;
      break;
    }
  }
  return trustManager;
}
