{
  Configuration conf=new Configuration();
  conf.set("foo.bar","A");
  conf.set("foo.baz","B");
  assertEquals("A",conf.get("foo.bar"));
  assertEquals("B",conf.get("foo.baz"));
  Map<String,String> out=conf.getMap("foo");
  assertEquals("A",out.get("bar"));
  assertEquals("B",out.get("baz"));
  Map<String,String> in=new HashMap<String,String>();
  in.put("yak","123");
  in.put("bop","456");
  conf.setMap("quux",in);
  assertEquals("123",conf.get("quux.yak"));
  out=conf.getMap("quux");
  assertEquals("123",out.get("yak"));
  assertEquals("456",out.get("bop"));
  conf.set("subparam","foo");
  conf.set("mymap.someprop","AAA${subparam}BBB");
  out=conf.getMap("mymap");
  assertEquals("AAAfooBBB",out.get("someprop"));
  Configuration.addDeprecation("oldfoo",new String[]{"newfoo"});
  conf.set("newfoo.a","A");
  conf.set("newfoo.b","B");
  out=conf.getMap("oldfoo");
  assertEquals("A",out.get("a"));
  assertEquals("B",out.get("b"));
}
