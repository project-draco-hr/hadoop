{
  TestSetup setup=new TestSetup(new TestSuite(TestJobTrackerInstrumentation.class)){
    protected void setUp() throws Exception {
      JobConf conf=new JobConf();
      conf.set(JTConfig.JT_IPC_ADDRESS,"localhost:0");
      conf.set(JTConfig.JT_HTTP_ADDRESS,"0.0.0.0:0");
      conf.setInt(JTConfig.JT_MAX_TRACKER_BLACKLISTS,1);
      conf.setClass(JTConfig.JT_TASK_SCHEDULER,FakeTaskScheduler.class,TaskScheduler.class);
      conf.set(JTConfig.JT_INSTRUMENTATION,FakeJobTrackerMetricsInst.class.getName());
      jobTracker=new FakeJobTracker(conf,new FakeClock(),trackers);
      mi=(FakeJobTrackerMetricsInst)jobTracker.getInstrumentation();
      for (      String tracker : trackers) {
        FakeObjectUtilities.establishFirstContact(jobTracker,tracker);
      }
    }
    protected void tearDown() throws Exception {
    }
  }
;
  return setup;
}
