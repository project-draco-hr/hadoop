{
  OutputStream wrappedStream=getWrappedStream();
  if (wrappedStream instanceof CryptoOutputStream) {
    wrappedStream=((CryptoOutputStream)wrappedStream).getWrappedStream();
  }
  return ((DFSOutputStream)wrappedStream).getCurrentBlockReplication();
}
