{
  startUpCluster(REPL_FACTOR,new StorageType[]{RAM_DISK,DEFAULT},-1);
  final String METHOD_NAME=GenericTestUtils.getMethodName();
  Path path=new Path("/" + METHOD_NAME + ".dat");
  makeTestFile(path,BLOCK_SIZE,true);
  LocatedBlocks locatedBlocks=ensureFileReplicasOnStorageType(path,RAM_DISK);
  Thread.sleep(6 * LAZY_WRITER_INTERVAL_SEC * 1000);
  client.delete(path.toString(),false);
  Assert.assertFalse(fs.exists(path));
  triggerBlockReport();
  assertThat(verifyDeletedBlocks(locatedBlocks),is(true));
}
