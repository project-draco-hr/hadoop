{
  startUpCluster(REPL_FACTOR,new StorageType[]{RAM_DISK,DEFAULT},(4 * BLOCK_SIZE - 1));
  final String METHOD_NAME=GenericTestUtils.getMethodName();
  final int NUM_PATHS=6;
  Path paths[]=new Path[NUM_PATHS];
  for (int i=0; i < NUM_PATHS; i++) {
    paths[i]=new Path("/" + METHOD_NAME + "."+ i+ ".dat");
  }
  for (int i=0; i < NUM_PATHS / 2; i++) {
    makeTestFile(paths[i],BLOCK_SIZE,true);
    ensureFileReplicasOnStorageType(paths[i],RAM_DISK);
  }
  Thread.sleep(3 * LAZY_WRITER_INTERVAL_SEC * 1000);
  for (int i=NUM_PATHS / 2; i < NUM_PATHS; i++) {
    makeTestFile(paths[i],BLOCK_SIZE,true);
    ensureFileReplicasOnStorageType(paths[i],RAM_DISK);
    triggerBlockReport();
    ensureFileReplicasOnStorageType(paths[i - NUM_PATHS / 2],DEFAULT);
  }
}
