{
  Map<ApplicationId,String> registeredCollectorsMap=request.getRegisteredCollectors();
  if (registeredCollectorsMap != null && !registeredCollectorsMap.isEmpty()) {
    Map<ApplicationId,RMApp> rmApps=rmContext.getRMApps();
    for (    Map.Entry<ApplicationId,String> entry : registeredCollectorsMap.entrySet()) {
      ApplicationId appId=entry.getKey();
      String collectorAddr=entry.getValue();
      if (collectorAddr != null && !collectorAddr.isEmpty()) {
        RMApp rmApp=rmApps.get(appId);
        if (rmApp == null) {
          LOG.warn("Cannot update collector info because application ID: " + appId + " is not found in RMContext!");
        }
 else {
          String previousCollectorAddr=rmApp.getCollectorAddr();
          if (previousCollectorAddr == null || !previousCollectorAddr.equals(collectorAddr)) {
            RMAppCollectorUpdateEvent event=new RMAppCollectorUpdateEvent(appId,collectorAddr);
            rmContext.getDispatcher().getEventHandler().handle(event);
          }
        }
      }
    }
  }
}
