{
  Map<ApplicationId,String> registeredAggregatorsMap=request.getRegisteredAggregators();
  if (registeredAggregatorsMap != null && !registeredAggregatorsMap.isEmpty()) {
    Map<ApplicationId,RMApp> rmApps=rmContext.getRMApps();
    for (    Map.Entry<ApplicationId,String> entry : registeredAggregatorsMap.entrySet()) {
      ApplicationId appId=entry.getKey();
      String aggregatorAddr=entry.getValue();
      if (aggregatorAddr != null && !aggregatorAddr.isEmpty()) {
        RMApp rmApp=rmApps.get(appId);
        if (rmApp == null) {
          LOG.warn("Cannot update aggregator info because application ID: " + appId + " is not found in RMContext!");
        }
 else {
          String previousAggregatorAddr=rmApp.getAggregatorAddr();
          if (previousAggregatorAddr == null || previousAggregatorAddr != aggregatorAddr) {
            RMAppAggregatorUpdateEvent event=new RMAppAggregatorUpdateEvent(appId,aggregatorAddr);
            rmContext.getDispatcher().getEventHandler().handle(event);
          }
        }
      }
    }
  }
}
