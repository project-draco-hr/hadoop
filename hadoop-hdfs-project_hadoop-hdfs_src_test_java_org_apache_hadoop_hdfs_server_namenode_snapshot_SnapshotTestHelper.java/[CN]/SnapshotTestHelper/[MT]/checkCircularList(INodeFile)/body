{
  for (int i=0; i < nodes.length; i++) {
    FileWithSnapshot next=((FileWithSnapshot)nodes[i]).getNext();
    INodeFile expectedNext=nodes[(i + 1) % nodes.length];
    if (next != expectedNext) {
      final StringBuilder b=new StringBuilder("nodes = [").append(nodes[0].getObjectString());
      for (int j=1; j < nodes.length; j++) {
        b.append(", ").append(nodes[i].getObjectString());
      }
      b.append("]\nbut the circular list of nodes[").append(i).append("] is ").append(Util.circularListString((FileWithSnapshot)nodes[i]));
      throw new AssertionError(b.toString());
    }
  }
}
