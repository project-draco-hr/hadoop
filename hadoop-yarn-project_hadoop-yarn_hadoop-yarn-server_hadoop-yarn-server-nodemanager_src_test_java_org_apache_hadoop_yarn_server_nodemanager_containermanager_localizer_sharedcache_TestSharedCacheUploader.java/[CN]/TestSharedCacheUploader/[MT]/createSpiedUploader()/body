{
  Configuration conf=new Configuration();
  conf.setBoolean(YarnConfiguration.SHARED_CACHE_ENABLED,true);
  LocalResource resource=mock(LocalResource.class);
  Path localPath=mock(Path.class);
  String user="foo";
  SCMUploaderProtocol scmClient=mock(SCMUploaderProtocol.class);
  FileSystem fs=FileSystem.get(conf);
  FileSystem localFs=FileSystem.getLocal(conf);
  return createSpiedUploader(resource,localPath,user,conf,scmClient,fs,localFs);
}
