{
  assertEquals(-1,runTool("-failover","nn1","nn2"));
  conf.set(NodeFencer.CONF_METHODS_KEY,"shell(true)");
  tool.setConf(conf);
  assertEquals(0,runTool("-transitionToActive","nn1"));
  assertEquals(0,runTool("-failover","nn1","nn2"));
  assertEquals(0,runTool("-ns","minidfs-ns","-failover","nn2","nn1"));
  assertEquals(0,runTool("-failover","nn1","nn2","--forcefence"));
  assertEquals(0,runTool("-failover","nn2","nn1","--forceactive"));
  conf.unset(NodeFencer.CONF_METHODS_KEY);
  tool.setConf(conf);
  assertEquals(-1,runTool("-failover","nn1","nn2","--forcefence"));
  conf.set(NodeFencer.CONF_METHODS_KEY,"foobar!");
  tool.setConf(conf);
  assertEquals(-1,runTool("-failover","nn1","nn2","--forcefence"));
  conf.set(NodeFencer.CONF_METHODS_KEY,"shell(true)");
  tool.setConf(conf);
  assertEquals(0,runTool("-failover","--forcefence","nn1","nn2"));
}
