{
  conf.set(NodeFencer.CONF_METHODS_KEY,"shell(true)");
  tool.setConf(conf);
  NameNodeAdapter.enterSafeMode(cluster.getNameNode(0),false);
  assertEquals(-1,runTool("-failover","nn2","nn1"));
  assertTrue("Bad output: " + errOutput,errOutput.contains("is not ready to become active: " + "The NameNode is in safemode"));
}
