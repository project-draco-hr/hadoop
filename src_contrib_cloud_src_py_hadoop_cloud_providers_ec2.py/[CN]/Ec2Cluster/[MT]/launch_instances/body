def launch_instances(self, role, number, image_id, size_id, instance_user_data, **kwargs):
    self._check_role_name(role)
    self._create_groups(role)
    user_data = instance_user_data.read_as_gzip_stream()
    reservation = self.ec2Connection.run_instances(image_id, min_count=number, max_count=number, key_name=kwargs.get('key_name', None), security_groups=self._get_group_names(role), user_data=user_data, instance_type=size_id, placement=kwargs.get('placement', None))
    return [instance.id for instance in reservation.instances]
