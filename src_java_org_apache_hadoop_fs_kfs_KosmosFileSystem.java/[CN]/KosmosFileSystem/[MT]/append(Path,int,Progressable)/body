{
  Path parent=f.getParent();
  if (parent != null && !mkdirs(parent)) {
    throw new IOException("Mkdirs failed to create " + parent);
  }
  Path absolute=makeAbsolute(f);
  String srep=absolute.toUri().getPath();
  return kfsImpl.append(srep,bufferSize,progress);
}
