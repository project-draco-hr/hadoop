{
  MockRM rm1=new MockRM(conf);
  rm1.start();
  MockNM nm1=rm1.registerNode("127.0.0.1:1234",8000);
  MockNM nm2=rm1.registerNode("127.0.0.1:2345",8000);
  Assert.assertNull(getLogAggregationContextFromContainerToken(rm1,nm1,null));
  LogAggregationContext logAggregationContext=LogAggregationContext.newInstance("includePattern","excludePattern","rolledLogsIncludePattern","rolledLogsExcludePattern","policyClass","policyParameters");
  LogAggregationContext returned=getLogAggregationContextFromContainerToken(rm1,nm2,logAggregationContext);
  Assert.assertEquals("includePattern",returned.getIncludePattern());
  Assert.assertEquals("excludePattern",returned.getExcludePattern());
  Assert.assertEquals("rolledLogsIncludePattern",returned.getRolledLogsIncludePattern());
  Assert.assertEquals("rolledLogsExcludePattern",returned.getRolledLogsExcludePattern());
  Assert.assertEquals("policyClass",returned.getLogAggregationPolicyClassName());
  Assert.assertEquals("policyParameters",returned.getLogAggregationPolicyParameters());
  rm1.stop();
}
