{
  String[] groupsArray;
  int length=0;
synchronized (counters) {
    groupsArray=new String[counters.countCounters()];
    int i=0;
    for (    G group : counters) {
      String escapedString=toEscapedCompactString(group);
      groupsArray[i++]=escapedString;
      length+=escapedString.length();
    }
  }
  StringBuilder builder=new StringBuilder(length);
  for (  String group : groupsArray) {
    builder.append(group);
  }
  return builder.toString();
}
