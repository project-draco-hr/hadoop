{
  Configuration conf=getConfig();
  String bindAddress=WebAppUtils.getWebAppBindURL(conf,YarnConfiguration.TIMELINE_SERVICE_BIND_HOST,WebAppUtils.getAHSWebAppURLWithoutScheme(conf));
  LOG.info("Instantiating the per-node aggregator webapp at " + bindAddress);
  try {
    webApp=WebApps.$for("timeline",null,null,"ws").with(conf).at(bindAddress).start(new TimelineServiceWebApp());
  }
 catch (  Exception e) {
    String msg="The per-node aggregator webapp failed to start.";
    LOG.error(msg,e);
    throw new YarnRuntimeException(msg,e);
  }
}
