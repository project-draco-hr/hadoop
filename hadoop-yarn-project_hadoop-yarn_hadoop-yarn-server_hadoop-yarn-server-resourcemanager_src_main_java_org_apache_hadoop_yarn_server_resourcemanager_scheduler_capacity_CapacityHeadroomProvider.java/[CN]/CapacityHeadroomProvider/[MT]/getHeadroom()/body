{
  Resource queueMaxCap;
  Resource clusterResource;
synchronized (queueHeadroomInfo) {
    queueMaxCap=queueHeadroomInfo.getQueueMaxCap();
    clusterResource=queueHeadroomInfo.getClusterResource();
  }
  Resource headroom=queue.getHeadroom(user,queueMaxCap,clusterResource,application,required);
  if (headroom.getMemory() < 0) {
    headroom.setMemory(0);
  }
  return headroom;
}
