{
  long now=System.currentTimeMillis();
  long renewIn;
  if (firstTime) {
    renewIn=now;
  }
 else {
    long expiresIn=(token.expirationDate - now);
    renewIn=now + expiresIn - expiresIn / 10;
  }
  try {
    TimerTask tTask=new RenewalTimerTask(token);
    token.setTimerTask(tTask);
    renewalTimer.schedule(token.timerTask,new Date(renewIn));
  }
 catch (  Exception e) {
    LOG.warn("failed to schedule a task, token will not renew more",e);
  }
}
