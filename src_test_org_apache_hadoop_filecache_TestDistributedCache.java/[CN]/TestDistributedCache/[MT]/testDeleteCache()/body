{
  DistributedCache.getLocalCache(firstCacheFile.toUri(),conf,new Path(TEST_CACHE_BASE_DIR),false,System.currentTimeMillis(),new Path(TEST_ROOT_DIR));
  DistributedCache.releaseCache(firstCacheFile.toUri(),conf);
  DistributedCache.getLocalCache(secondCacheFile.toUri(),conf,new Path(TEST_CACHE_BASE_DIR),false,System.currentTimeMillis(),new Path(TEST_ROOT_DIR));
  FileStatus[] dirStatuses=localfs.listStatus(new Path(TEST_CACHE_BASE_DIR));
  assertTrue("DistributedCache failed deleting old cache when the cache store is full.",dirStatuses.length > 1);
}
