{
  Entry entry;
  int xferPort=datanodeID.getXferPort();
  assert(xferPort > 0);
  String datanodeIpAddr=datanodeID.getIpAddr();
  if (datanodeIpAddr != null) {
    entry=index.get(datanodeIpAddr + ":" + xferPort);
    if (entry != null) {
      return entry;
    }
    entry=index.get(datanodeIpAddr);
    if (entry != null) {
      return entry;
    }
  }
  String registeredHostName=datanodeID.getHostName();
  if (registeredHostName != null) {
    entry=index.get(registeredHostName + ":" + xferPort);
    if (entry != null) {
      return entry;
    }
    entry=index.get(registeredHostName);
    if (entry != null) {
      return entry;
    }
  }
  return null;
}
