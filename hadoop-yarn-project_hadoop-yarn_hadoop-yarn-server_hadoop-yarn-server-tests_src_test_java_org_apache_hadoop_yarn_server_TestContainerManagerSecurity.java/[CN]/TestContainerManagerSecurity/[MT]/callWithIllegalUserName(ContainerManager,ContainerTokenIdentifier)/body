{
  StartContainerRequest request=recordFactory.newRecordInstance(StartContainerRequest.class);
  ContainerLaunchContext context=createContainerLaunchContextForTest(tokenId);
  context.setUser("Saruman");
  Container container=BuilderUtils.newContainer(tokenId.getContainerID(),null,null,BuilderUtils.newResource(tokenId.getResource().getMemory(),tokenId.getResource().getVirtualCores()),null,null,0);
  request.setContainerLaunchContext(context);
  request.setContainer(container);
  try {
    client.startContainer(request);
    fail("Connection initiation with unauthorized " + "access is expected to fail.");
  }
 catch (  YarnRemoteException e) {
    LOG.info("Got exception : ",e);
    Assert.assertTrue(e.getMessage().contains("Unauthorized request to start container. "));
    Assert.assertTrue(e.getMessage().contains("Expected user-name " + tokenId.getApplicationSubmitter() + " but found "+ context.getUser()));
  }
catch (  IOException e) {
    LOG.info("Got IOException: ",e);
    fail("IOException is not expected.");
  }
}
