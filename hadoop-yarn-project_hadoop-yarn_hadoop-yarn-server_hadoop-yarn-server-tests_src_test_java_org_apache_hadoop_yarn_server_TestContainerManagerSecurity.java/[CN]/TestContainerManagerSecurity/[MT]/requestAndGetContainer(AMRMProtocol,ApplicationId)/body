{
  List<ResourceRequest> ask=new ArrayList<ResourceRequest>();
  ask.add(BuilderUtils.newResourceRequest(BuilderUtils.newPriority(0),ResourceRequest.ANY,BuilderUtils.newResource(1024,1),1));
  AllocateRequest allocateRequest=BuilderUtils.newAllocateRequest(BuilderUtils.newApplicationAttemptId(appID,1),0,0F,ask,new ArrayList<ContainerId>());
  List<Container> allocatedContainers=scheduler.allocate(allocateRequest).getAllocatedContainers();
  allocateRequest.setAskList(new ArrayList<ResourceRequest>());
  int waitCounter=0;
  while ((allocatedContainers == null || allocatedContainers.size() == 0) && waitCounter++ != 20) {
    LOG.info("Waiting for container to be allocated..");
    Thread.sleep(1000);
    allocateRequest.setResponseId(allocateRequest.getResponseId() + 1);
    allocatedContainers=scheduler.allocate(allocateRequest).getAllocatedContainers();
  }
  Assert.assertNotNull("Container is not allocted!",allocatedContainers);
  Assert.assertEquals("Didn't get one container!",1,allocatedContainers.size());
  return allocatedContainers.get(0);
}
