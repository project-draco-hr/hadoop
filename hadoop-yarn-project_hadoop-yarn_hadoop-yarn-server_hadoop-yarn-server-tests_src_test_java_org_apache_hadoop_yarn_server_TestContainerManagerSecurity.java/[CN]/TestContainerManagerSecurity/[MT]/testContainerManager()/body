{
  try {
    yarnCluster=new MiniYARNCluster(TestContainerManagerSecurity.class.getName(),1,1,1);
    conf.setLong(YarnConfiguration.RM_AM_EXPIRY_INTERVAL_MS,100000L);
    UserGroupInformation.setConfiguration(conf);
    yarnCluster.init(conf);
    yarnCluster.start();
    testNMTokens(conf);
    testContainerToken(conf);
  }
 catch (  Exception e) {
    e.printStackTrace();
    throw e;
  }
 finally {
    if (yarnCluster != null) {
      yarnCluster.stop();
      yarnCluster=null;
    }
  }
}
