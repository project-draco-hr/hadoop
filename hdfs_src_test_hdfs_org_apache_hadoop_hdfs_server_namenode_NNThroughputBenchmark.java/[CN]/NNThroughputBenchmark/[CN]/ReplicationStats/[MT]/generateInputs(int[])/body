{
  final FSNamesystem namesystem=nameNode.getNamesystem();
  blockReportObject.generateInputs(ignore);
  BlockManagerTestUtil.getReplicationThread(namesystem.getBlockManager()).interrupt();
  try {
    BlockManagerTestUtil.getReplicationThread(namesystem.getBlockManager()).join();
  }
 catch (  InterruptedException ei) {
    return;
  }
  int nrDatanodes=blockReportObject.getNumDatanodes();
  for (int idx=0; idx < nrDatanodes; idx++) {
    blockReportObject.executeOp(idx,0,null);
  }
  decommissionNodes();
  BlockManagerTestUtil.setNodeReplicationLimit(namesystem.getBlockManager(),nodeReplicationLimit);
}
