{
  long et=Time.monotonicNow() + millis;
  while (true) {
    if (minResponses > 0 && countResponses() >= minResponses)     return;
    if (minSuccesses > 0 && countSuccesses() >= minSuccesses)     return;
    if (maxExceptions >= 0 && countExceptions() > maxExceptions)     return;
    long rem=et - Time.monotonicNow();
    if (rem <= 0) {
      throw new TimeoutException();
    }
    wait(rem);
  }
}
