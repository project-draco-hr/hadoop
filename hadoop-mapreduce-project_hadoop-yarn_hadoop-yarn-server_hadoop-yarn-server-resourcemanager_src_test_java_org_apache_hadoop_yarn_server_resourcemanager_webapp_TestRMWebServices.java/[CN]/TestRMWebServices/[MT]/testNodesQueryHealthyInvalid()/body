{
  WebResource r=resource();
  rm.registerNode("h1:1234",5120);
  rm.registerNode("h2:1235",5121);
  try {
    r.path("ws").path("v1").path("cluster").path("nodes").queryParam("healthy","tr").accept("application/json").get(JSONObject.class);
    fail("should have thrown exception querying invalid healthy string");
  }
 catch (  UniformInterfaceException ue) {
    ClientResponse response=ue.getResponse();
    assertEquals(Status.BAD_REQUEST,response.getClientResponseStatus());
    JSONObject msg=response.getEntity(JSONObject.class);
    JSONObject exception=msg.getJSONObject("RemoteException");
    assertEquals("correct number of elements",3,exception.length());
    String message=exception.getString("message");
    String type=exception.getString("exception");
    String classname=exception.getString("javaClassName");
    checkStringMatch("exception message","java.lang.Exception: Error: You must specify either true or false to query on health",message);
    checkStringMatch("exception type","BadRequestException",type);
    checkStringMatch("exception classname","org.apache.hadoop.yarn.webapp.BadRequestException",classname);
  }
 finally {
    rm.stop();
  }
}
