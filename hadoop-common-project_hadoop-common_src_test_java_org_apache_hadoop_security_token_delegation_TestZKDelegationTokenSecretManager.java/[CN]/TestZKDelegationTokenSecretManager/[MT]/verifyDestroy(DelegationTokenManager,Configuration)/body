{
  AbstractDelegationTokenSecretManager sm=tm.getDelegationTokenSecretManager();
  ZKDelegationTokenSecretManager zksm=(ZKDelegationTokenSecretManager)sm;
  ExecutorService es=zksm.getListenerThreadPool();
  tm.destroy();
  Assert.assertTrue(es.isShutdown());
  long timeout=conf.getLong(ZKDelegationTokenSecretManager.ZK_DTSM_ZK_SHUTDOWN_TIMEOUT,ZKDelegationTokenSecretManager.ZK_DTSM_ZK_SHUTDOWN_TIMEOUT_DEFAULT);
  Thread.sleep(timeout * 3);
  Assert.assertTrue(es.isTerminated());
}
