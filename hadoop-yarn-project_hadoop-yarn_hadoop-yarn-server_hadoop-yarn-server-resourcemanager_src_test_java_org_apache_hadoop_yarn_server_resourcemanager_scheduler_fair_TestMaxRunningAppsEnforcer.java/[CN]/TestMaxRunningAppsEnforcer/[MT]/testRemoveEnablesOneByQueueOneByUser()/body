{
  FSLeafQueue leaf1=queueManager.getLeafQueue("root.queue1.leaf1",true);
  FSLeafQueue leaf2=queueManager.getLeafQueue("root.queue1.leaf2",true);
  leaf1.setMaxRunningApps(2);
  userMaxApps.put("user1",1);
  FSAppAttempt app1=addApp(leaf1,"user1");
  addApp(leaf1,"user2");
  addApp(leaf1,"user3");
  addApp(leaf2,"user1");
  assertEquals(2,leaf1.getNumRunnableApps());
  assertEquals(1,leaf1.getNumNonRunnableApps());
  assertEquals(1,leaf2.getNumNonRunnableApps());
  removeApp(app1);
  assertEquals(2,leaf1.getNumRunnableApps());
  assertEquals(1,leaf2.getNumRunnableApps());
  assertEquals(0,leaf1.getNumNonRunnableApps());
  assertEquals(0,leaf2.getNumNonRunnableApps());
}
