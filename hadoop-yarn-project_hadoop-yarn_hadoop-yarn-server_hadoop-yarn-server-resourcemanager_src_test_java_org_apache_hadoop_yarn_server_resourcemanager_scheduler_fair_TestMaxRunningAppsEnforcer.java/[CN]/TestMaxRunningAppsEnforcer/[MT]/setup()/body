{
  Configuration conf=new Configuration();
  clock=new TestFairScheduler.MockClock();
  scheduler=mock(FairScheduler.class);
  when(scheduler.getConf()).thenReturn(new FairSchedulerConfiguration(conf));
  when(scheduler.getClock()).thenReturn(clock);
  AllocationConfiguration allocConf=new AllocationConfiguration(conf);
  when(scheduler.getAllocationConfiguration()).thenReturn(allocConf);
  queueManager=new QueueManager(scheduler);
  queueManager.initialize(conf);
  queueMaxApps=allocConf.queueMaxApps;
  userMaxApps=allocConf.userMaxApps;
  maxAppsEnforcer=new MaxRunningAppsEnforcer(scheduler);
  appNum=0;
  rmContext=mock(RMContext.class);
  when(rmContext.getEpoch()).thenReturn(0L);
}
