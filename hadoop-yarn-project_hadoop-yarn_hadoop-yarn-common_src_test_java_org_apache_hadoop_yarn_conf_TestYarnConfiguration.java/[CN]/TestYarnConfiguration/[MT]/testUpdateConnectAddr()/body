{
  YarnConfiguration conf;
  InetSocketAddress resourceTrackerConnectAddress;
  InetSocketAddress serverAddress;
  conf=new YarnConfiguration();
  conf.set(YarnConfiguration.RM_RESOURCE_TRACKER_ADDRESS,"yo.yo.yo");
  serverAddress=new InetSocketAddress(YarnConfiguration.DEFAULT_RM_RESOURCE_TRACKER_ADDRESS.split(":")[0],Integer.valueOf(YarnConfiguration.DEFAULT_RM_RESOURCE_TRACKER_ADDRESS.split(":")[1]));
  resourceTrackerConnectAddress=conf.updateConnectAddr(YarnConfiguration.RM_BIND_HOST,YarnConfiguration.RM_RESOURCE_TRACKER_ADDRESS,YarnConfiguration.DEFAULT_RM_RESOURCE_TRACKER_ADDRESS,serverAddress);
  assertFalse(resourceTrackerConnectAddress.toString().startsWith("yo.yo.yo"));
  conf=new YarnConfiguration();
  conf.set(YarnConfiguration.RM_RESOURCE_TRACKER_ADDRESS,"yo.yo.yo");
  conf.set(YarnConfiguration.RM_BIND_HOST,"0.0.0.0");
  serverAddress=new InetSocketAddress(YarnConfiguration.DEFAULT_RM_RESOURCE_TRACKER_ADDRESS.split(":")[0],Integer.valueOf(YarnConfiguration.DEFAULT_RM_RESOURCE_TRACKER_ADDRESS.split(":")[1]));
  resourceTrackerConnectAddress=conf.updateConnectAddr(YarnConfiguration.RM_BIND_HOST,YarnConfiguration.RM_RESOURCE_TRACKER_ADDRESS,YarnConfiguration.DEFAULT_RM_RESOURCE_TRACKER_ADDRESS,serverAddress);
  assertTrue(resourceTrackerConnectAddress.toString().startsWith("yo.yo.yo"));
  conf=new YarnConfiguration();
  conf.set(YarnConfiguration.NM_LOCALIZER_ADDRESS,"yo.yo.yo");
  conf.set(YarnConfiguration.NM_BIND_HOST,"0.0.0.0");
  conf.setBoolean(YarnConfiguration.RM_HA_ENABLED,true);
  conf.set(YarnConfiguration.RM_HA_ID,"rm1");
  serverAddress=new InetSocketAddress(YarnConfiguration.DEFAULT_NM_LOCALIZER_ADDRESS.split(":")[0],Integer.valueOf(YarnConfiguration.DEFAULT_NM_LOCALIZER_ADDRESS.split(":")[1]));
  InetSocketAddress localizerAddress=conf.updateConnectAddr(YarnConfiguration.NM_BIND_HOST,YarnConfiguration.NM_LOCALIZER_ADDRESS,YarnConfiguration.DEFAULT_NM_LOCALIZER_ADDRESS,serverAddress);
  assertTrue(localizerAddress.toString().startsWith("yo.yo.yo"));
  assertNull(conf.get(HAUtil.addSuffix(YarnConfiguration.NM_LOCALIZER_ADDRESS,"rm1")));
}
