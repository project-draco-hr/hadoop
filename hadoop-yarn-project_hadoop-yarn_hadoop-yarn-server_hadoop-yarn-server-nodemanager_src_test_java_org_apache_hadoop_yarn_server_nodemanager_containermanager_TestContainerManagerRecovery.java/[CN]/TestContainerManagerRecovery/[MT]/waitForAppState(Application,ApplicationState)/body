{
  final int msecPerSleep=10;
  int msecLeft=5000;
  while (app.getApplicationState() != state && msecLeft > 0) {
    Thread.sleep(msecPerSleep);
    msecLeft-=msecPerSleep;
  }
  assertEquals(state,app.getApplicationState());
}
