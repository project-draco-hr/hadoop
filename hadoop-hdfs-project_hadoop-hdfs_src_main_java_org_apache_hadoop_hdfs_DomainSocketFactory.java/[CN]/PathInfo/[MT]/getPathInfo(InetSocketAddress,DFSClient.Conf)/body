{
  if (conf.domainSocketPath.isEmpty())   return PathInfo.NOT_CONFIGURED;
  if (!conf.domainSocketDataTraffic && (!conf.shortCircuitLocalReads || conf.useLegacyBlockReaderLocal)) {
    return PathInfo.NOT_CONFIGURED;
  }
  if (DomainSocket.getLoadingFailureReason() != null) {
    return PathInfo.NOT_CONFIGURED;
  }
  if (!DFSClient.isLocalAddress(addr))   return PathInfo.NOT_CONFIGURED;
  String escapedPath=DomainSocket.getEffectivePath(conf.domainSocketPath,addr.getPort());
  PathState status=pathMap.getIfPresent(escapedPath);
  if (status == null) {
    return new PathInfo(escapedPath,PathState.VALID);
  }
 else {
    return new PathInfo(escapedPath,status);
  }
}
