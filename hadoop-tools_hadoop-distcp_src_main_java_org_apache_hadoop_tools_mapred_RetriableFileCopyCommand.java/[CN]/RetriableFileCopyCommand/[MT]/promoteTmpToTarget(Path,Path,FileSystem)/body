{
  if ((fs.exists(target) && !fs.delete(target,false)) || (!fs.exists(target.getParent()) && !fs.mkdirs(target.getParent())) || !fs.rename(tmpTarget,target)) {
    throw new IOException("Failed to promote tmp-file:" + tmpTarget + " to: "+ target);
  }
}
