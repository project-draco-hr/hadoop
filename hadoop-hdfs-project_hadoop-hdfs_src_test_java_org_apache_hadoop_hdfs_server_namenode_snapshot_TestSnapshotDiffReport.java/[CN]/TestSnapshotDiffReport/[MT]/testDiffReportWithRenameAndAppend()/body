{
  final Path root=new Path("/");
  final Path foo=new Path(root,"foo");
  DFSTestUtil.createFile(hdfs,foo,BLOCKSIZE,REPLICATION,seed);
  SnapshotTestHelper.createSnapshot(hdfs,root,"s0");
  final Path bar=new Path(root,"bar");
  hdfs.rename(foo,bar);
  DFSTestUtil.appendFile(hdfs,bar,10);
  SnapshotTestHelper.createSnapshot(hdfs,root,"s1");
  verifyDiffReport(root,"s0","s1",new DiffReportEntry(DiffType.MODIFY,DFSUtil.string2Bytes("")),new DiffReportEntry(DiffType.MODIFY,DFSUtil.string2Bytes("foo")),new DiffReportEntry(DiffType.RENAME,DFSUtil.string2Bytes("foo"),DFSUtil.string2Bytes("bar")));
}
