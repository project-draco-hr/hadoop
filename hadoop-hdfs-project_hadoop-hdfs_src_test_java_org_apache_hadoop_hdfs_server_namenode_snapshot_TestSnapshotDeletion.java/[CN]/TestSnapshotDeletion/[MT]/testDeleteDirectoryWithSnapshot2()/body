{
  Path file0=new Path(sub,"file0");
  Path file1=new Path(sub,"file1");
  DFSTestUtil.createFile(hdfs,file0,BLOCKSIZE,REPLICATION,seed);
  DFSTestUtil.createFile(hdfs,file1,BLOCKSIZE,REPLICATION,seed);
  Path subfile1=new Path(subsub,"file0");
  Path subfile2=new Path(subsub,"file1");
  DFSTestUtil.createFile(hdfs,subfile1,BLOCKSIZE,REPLICATION,seed);
  DFSTestUtil.createFile(hdfs,subfile2,BLOCKSIZE,REPLICATION,seed);
  hdfs.allowSnapshot(subsub);
  hdfs.createSnapshot(subsub,"s1");
  exception.expect(RemoteException.class);
  String error=subsub.toString() + " is snapshottable and already has snapshots";
  exception.expectMessage(error);
  hdfs.delete(dir,true);
}
