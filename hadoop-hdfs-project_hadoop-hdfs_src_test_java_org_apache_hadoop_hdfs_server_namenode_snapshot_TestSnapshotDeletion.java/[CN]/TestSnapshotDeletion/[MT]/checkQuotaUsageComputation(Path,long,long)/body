{
  INodeDirectory dirNode=getDir(fsdir,dirPath);
  assertTrue(dirNode.isQuotaSet());
  Quota.Counts q=dirNode.getDirectoryWithQuotaFeature().getSpaceConsumed();
  assertEquals(dirNode.dumpTreeRecursively().toString(),expectedNs,q.get(Quota.NAMESPACE));
  assertEquals(dirNode.dumpTreeRecursively().toString(),expectedDs,q.get(Quota.DISKSPACE));
  Quota.Counts counts=Quota.Counts.newInstance();
  dirNode.computeQuotaUsage(counts,false);
  assertEquals(dirNode.dumpTreeRecursively().toString(),expectedNs,counts.get(Quota.NAMESPACE));
  assertEquals(dirNode.dumpTreeRecursively().toString(),expectedDs,counts.get(Quota.DISKSPACE));
}
