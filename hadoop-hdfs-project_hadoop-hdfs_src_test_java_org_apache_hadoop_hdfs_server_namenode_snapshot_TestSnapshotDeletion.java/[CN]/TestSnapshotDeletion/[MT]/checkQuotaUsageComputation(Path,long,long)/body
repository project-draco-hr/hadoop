{
  INodeDirectory dirNode=getDir(fsdir,dirPath);
  assertTrue(dirNode.isQuotaSet());
  QuotaCounts q=dirNode.getDirectoryWithQuotaFeature().getSpaceConsumed();
  assertEquals(dirNode.dumpTreeRecursively().toString(),expectedNs,q.getNameSpace());
  assertEquals(dirNode.dumpTreeRecursively().toString(),expectedDs,q.getDiskSpace());
  QuotaCounts counts=new QuotaCounts.Builder().build();
  dirNode.computeQuotaUsage(fsdir.getBlockStoragePolicySuite(),counts,false);
  assertEquals(dirNode.dumpTreeRecursively().toString(),expectedNs,counts.getNameSpace());
  assertEquals(dirNode.dumpTreeRecursively().toString(),expectedDs,counts.getDiskSpace());
}
