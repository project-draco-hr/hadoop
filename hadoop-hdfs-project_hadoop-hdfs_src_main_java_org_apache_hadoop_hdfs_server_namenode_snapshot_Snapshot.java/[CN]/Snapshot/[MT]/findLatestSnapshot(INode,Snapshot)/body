{
  Snapshot latest=null;
  for (; inode != null; inode=inode.getParent()) {
    if (inode.isDirectory()) {
      final INodeDirectory dir=inode.asDirectory();
      if (dir instanceof INodeDirectoryWithSnapshot) {
        latest=((INodeDirectoryWithSnapshot)dir).getDiffs().updatePrior(anchor,latest);
      }
    }
  }
  return latest;
}
