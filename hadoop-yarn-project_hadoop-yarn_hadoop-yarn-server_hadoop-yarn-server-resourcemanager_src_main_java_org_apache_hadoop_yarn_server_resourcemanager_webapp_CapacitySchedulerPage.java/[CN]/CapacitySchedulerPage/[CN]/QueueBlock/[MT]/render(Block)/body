{
  ArrayList<CapacitySchedulerQueueInfo> subQueues=(csqinfo.qinfo == null) ? csqinfo.csinfo.getQueues().getQueueInfoList() : csqinfo.qinfo.getQueues().getQueueInfoList();
  UL<Hamlet> ul=html.ul("#pq");
  float used;
  float absCap;
  float absMaxCap;
  float absUsedCap;
  for (  CapacitySchedulerQueueInfo info : subQueues) {
    String nodeLabel=(csqinfo.label == null) ? "" : csqinfo.label;
    if (!nodeLabel.isEmpty() && csqinfo.isExclusiveNodeLabel && !info.getNodeLabels().contains("*")&& !info.getNodeLabels().contains(nodeLabel)) {
      continue;
    }
    PartitionQueueCapacitiesInfo partitionQueueCapsInfo=info.getCapacities().getPartitionQueueCapacitiesInfo(nodeLabel);
    used=partitionQueueCapsInfo.getUsedCapacity() / 100;
    absCap=partitionQueueCapsInfo.getAbsoluteCapacity() / 100;
    absMaxCap=partitionQueueCapsInfo.getAbsoluteMaxCapacity() / 100;
    absUsedCap=partitionQueueCapsInfo.getAbsoluteUsedCapacity() / 100;
    LI<UL<Hamlet>> li=ul.li().a(_Q).$style(width(absMaxCap * Q_MAX_WIDTH)).$title(join("Absolute Capacity:",percent(absCap))).span().$style(join(Q_GIVEN,";font-size:1px;",width(absCap / absMaxCap)))._('.')._().span().$style(join(width(absUsedCap / absMaxCap),";font-size:1px;left:0%;",absUsedCap > absCap ? Q_OVER : Q_UNDER))._('.')._().span(".q","Queue: " + info.getQueuePath().substring(5))._().span().$class("qstats").$style(left(Q_STATS_POS))._(join(percent(used)," used"))._();
    csqinfo.qinfo=info;
    if (info.getQueues() == null) {
      li.ul("#lq").li()._(LeafQueueInfoBlock.class)._()._();
      li.ul("#lq").li()._(QueueUsersInfoBlock.class)._()._();
    }
 else {
      li._(QueueBlock.class);
    }
    li._();
  }
  ul._();
}
