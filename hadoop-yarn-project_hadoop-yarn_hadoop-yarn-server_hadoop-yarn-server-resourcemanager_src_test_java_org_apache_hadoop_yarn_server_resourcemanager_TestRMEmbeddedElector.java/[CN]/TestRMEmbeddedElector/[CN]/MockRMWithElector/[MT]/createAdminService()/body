{
  return new AdminService(MockRMWithElector.this,getRMContext()){
    @Override protected EmbeddedElectorService createEmbeddedElectorService(){
      return new EmbeddedElectorService(getRMContext()){
        @Override public void becomeActive() throws ServiceFailedException {
          try {
            callbackCalled.set(true);
            LOG.info("Callback called. Sleeping now");
            Thread.sleep(delayMs);
            LOG.info("Sleep done");
          }
 catch (          InterruptedException e) {
            e.printStackTrace();
          }
          super.becomeActive();
        }
      }
;
    }
  }
;
}
