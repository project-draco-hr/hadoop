{
  Configuration conf=new Configuration();
  conf.setLong(DFS_NAMENODE_ACCESSTIME_PRECISION_KEY,1L);
  FSEditLog editlog=mock(FSEditLog.class);
  FSImage image=mock(FSImage.class);
  when(image.getEditLog()).thenReturn(editlog);
  final FSNamesystem fsn=new FSNamesystem(conf,image,true);
  final FSDirectory fsd=fsn.getFSDirectory();
  INodesInPath iip=fsd.getINodesInPath("/",true);
  PermissionStatus perm=new PermissionStatus("hdfs","supergroup",FsPermission.createImmutable((short)0x1ff));
  final INodeFile file=new INodeFile(MOCK_INODE_ID,FILE_NAME.getBytes(Charsets.UTF_8),perm,1,1,new BlockInfo[]{},(short)1,DFS_BLOCK_SIZE_DEFAULT);
  fsn.getFSDirectory().addINode(iip,file);
  return fsn;
}
