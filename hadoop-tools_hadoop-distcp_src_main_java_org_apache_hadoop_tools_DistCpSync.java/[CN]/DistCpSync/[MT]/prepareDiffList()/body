{
  DiffInfo[] modifyAndCreateDiffs=getCreateAndModifyDiffs();
  List<DiffInfo> renameDiffsList=diffMap.get(SnapshotDiffReport.DiffType.RENAME);
  DiffInfo[] renameDiffArray=renameDiffsList.toArray(new DiffInfo[renameDiffsList.size()]);
  Arrays.sort(renameDiffArray,DiffInfo.sourceComparator);
  ArrayList<DiffInfo> finalListWithTarget=new ArrayList<>();
  for (  DiffInfo diff : modifyAndCreateDiffs) {
    DiffInfo renameItem=getRenameItem(diff,renameDiffArray);
    if (renameItem == null) {
      diff.target=diff.source;
    }
 else {
      diff.target=getTargetPath(diff.source,renameItem);
    }
    finalListWithTarget.add(diff);
  }
  return finalListWithTarget;
}
