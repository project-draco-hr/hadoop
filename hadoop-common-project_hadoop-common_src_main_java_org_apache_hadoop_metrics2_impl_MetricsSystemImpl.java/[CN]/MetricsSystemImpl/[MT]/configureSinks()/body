{
  sinkConfigs=config.getInstanceConfigs(SINK_KEY);
  int confPeriod=0;
  for (  Entry<String,MetricsConfig> entry : sinkConfigs.entrySet()) {
    MetricsConfig conf=entry.getValue();
    int sinkPeriod=conf.getInt(PERIOD_KEY,PERIOD_DEFAULT);
    confPeriod=confPeriod == 0 ? sinkPeriod : ArithmeticUtils.gcd(confPeriod,sinkPeriod);
    String clsName=conf.getClassName("");
    if (clsName == null)     continue;
    String sinkName=entry.getKey();
    try {
      MetricsSinkAdapter sa=newSink(sinkName,conf.getString(DESC_KEY,sinkName),conf);
      sa.start();
      sinks.put(sinkName,sa);
    }
 catch (    Exception e) {
      LOG.warn("Error creating sink '" + sinkName + "'",e);
    }
  }
  period=confPeriod > 0 ? confPeriod : config.getInt(PERIOD_KEY,PERIOD_DEFAULT);
}
