{
  Resource maxRes=queueMgr.getMaxResources(queue.getName());
  demand=Resources.createResource(0);
  for (  AppSchedulable sched : appScheds) {
    sched.updateDemand();
    Resource toAdd=sched.getDemand();
    if (LOG.isDebugEnabled()) {
      LOG.debug("Counting resource from " + sched.getName() + " "+ toAdd+ "; Total resource consumption for "+ this.getName()+ " now "+ demand);
    }
    demand=Resources.add(demand,toAdd);
    if (Resources.greaterThanOrEqual(demand,maxRes)) {
      demand=maxRes;
      break;
    }
  }
  if (LOG.isDebugEnabled()) {
    LOG.debug("The updated demand for " + this.getName() + " is "+ demand+ "; the max is "+ maxRes);
  }
}
