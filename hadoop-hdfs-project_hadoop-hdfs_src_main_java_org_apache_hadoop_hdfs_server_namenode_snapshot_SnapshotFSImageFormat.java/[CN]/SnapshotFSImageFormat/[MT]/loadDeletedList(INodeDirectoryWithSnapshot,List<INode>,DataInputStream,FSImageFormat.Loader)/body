{
  int deletedSize=in.readInt();
  List<INode> deletedList=new ArrayList<INode>(deletedSize);
  for (int i=0; i < deletedSize; i++) {
    final INode deleted=loader.loadINodeWithLocalName(true,in);
    deletedList.add(deleted);
    deleted.setParent(parent);
    if (deleted instanceof INodeFile && ((INodeFile)deleted).getBlocks() == null) {
      int c=Collections.binarySearch(createdList,deleted.getLocalNameBytes());
      if (c < 0) {
        throw new IOException("Cannot find the INode linked with the INode " + deleted.getLocalName() + " in deleted list while loading FSImage.");
      }
      INodeFile cNode=(INodeFile)createdList.get(c);
      ((INodeFile)deleted).setBlocks(cNode.getBlocks());
    }
  }
  return deletedList;
}
