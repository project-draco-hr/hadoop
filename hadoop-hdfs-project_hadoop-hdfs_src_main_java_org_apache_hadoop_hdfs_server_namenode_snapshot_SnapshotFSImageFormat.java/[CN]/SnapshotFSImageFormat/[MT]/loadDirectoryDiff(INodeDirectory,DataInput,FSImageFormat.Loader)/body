{
  final Snapshot snapshot=loader.getSnapshot(in);
  int childrenSize=in.readInt();
  INodeDirectoryAttributes snapshotINode=loadSnapshotINodeInDirectoryDiff(snapshot,in,loader);
  List<INode> createdList=loadCreatedList(parent,in);
  List<INode> deletedList=loadDeletedList(parent,createdList,in,loader);
  List<DirectoryDiff> diffs=parent.getDiffs().asList();
  DirectoryDiff sdiff=new DirectoryDiff(snapshot.getId(),snapshotINode,diffs.isEmpty() ? null : diffs.get(0),childrenSize,createdList,deletedList,snapshotINode == snapshot.getRoot());
  return sdiff;
}
