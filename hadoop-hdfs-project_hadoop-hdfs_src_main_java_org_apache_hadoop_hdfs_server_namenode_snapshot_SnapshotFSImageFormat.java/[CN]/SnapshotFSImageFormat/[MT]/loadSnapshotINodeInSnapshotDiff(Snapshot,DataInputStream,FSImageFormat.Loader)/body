{
  boolean useRoot=in.readBoolean();
  if (useRoot) {
    return snapshot.getRoot();
  }
 else {
    if (in.readBoolean()) {
      byte[] localName=new byte[in.readShort()];
      in.readFully(localName);
      INodeDirectory snapshotINode=(INodeDirectory)loader.loadINode(in);
      snapshotINode.setLocalName(localName);
      return snapshotINode;
    }
  }
  return null;
}
