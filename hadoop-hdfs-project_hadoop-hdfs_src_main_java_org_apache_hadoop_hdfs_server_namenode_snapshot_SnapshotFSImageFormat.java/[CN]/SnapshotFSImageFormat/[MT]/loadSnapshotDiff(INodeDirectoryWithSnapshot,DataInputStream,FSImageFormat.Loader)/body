{
  int childrenSize=in.readInt();
  Snapshot snapshot=findSnapshot(FSImageSerialization.readString(in),loader.getFSDirectoryInLoading());
  INodeDirectory snapshotINode=loadSnapshotINodeInSnapshotDiff(snapshot,in,loader);
  List<INode> createdList=loadCreatedList(parent,in);
  List<INode> deletedList=loadDeletedList(parent,createdList,in,loader);
  List<DirectoryDiff> diffs=parent.getDiffs().asList();
  DirectoryDiff sdiff=new DirectoryDiff(snapshot,snapshotINode,diffs.isEmpty() ? null : diffs.get(0),childrenSize,createdList,deletedList);
  return sdiff;
}
