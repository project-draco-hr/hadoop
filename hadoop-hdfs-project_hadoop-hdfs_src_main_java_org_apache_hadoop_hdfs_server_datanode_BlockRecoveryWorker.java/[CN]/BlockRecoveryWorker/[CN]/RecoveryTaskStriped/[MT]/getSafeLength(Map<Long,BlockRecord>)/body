{
  final int dataBlkNum=ecPolicy.getNumDataUnits();
  Preconditions.checkArgument(syncBlocks.size() >= dataBlkNum);
  long[] blockLengths=new long[syncBlocks.size()];
  int i=0;
  for (  BlockRecord r : syncBlocks.values()) {
    ReplicaRecoveryInfo rInfo=r.getReplicaRecoveryInfo();
    blockLengths[i++]=rInfo.getNumBytes();
  }
  return StripedBlockUtil.getSafeLength(ecPolicy,blockLengths);
}
