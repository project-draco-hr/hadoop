{
  AsyncDispatcher rmDispatcher=new AsyncDispatcher();
  Configuration conf=new Configuration();
  rmDispatcher=new InlineDispatcher();
  ContainerAllocationExpirer containerAllocationExpirer=mock(ContainerAllocationExpirer.class);
  AMLivelinessMonitor amLivelinessMonitor=mock(AMLivelinessMonitor.class);
  this.rmContext=new RMContextImpl(new MemStore(),rmDispatcher,containerAllocationExpirer,amLivelinessMonitor,null,new ApplicationTokenSecretManager(conf));
  rmDispatcher.register(RMAppAttemptEventType.class,new TestApplicationAttemptEventDispatcher(this.rmContext));
  rmDispatcher.register(RMAppEventType.class,new TestApplicationEventDispatcher(rmContext));
  rmDispatcher.init(conf);
  rmDispatcher.start();
}
