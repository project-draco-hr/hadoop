{
  LOG.info("--- START: testAppRunningFailed ---");
  RMApp application=testCreateAppRunning();
  for (int i=1; i < maxRetries; i++) {
    RMAppEvent event=new RMAppEvent(application.getApplicationId(),RMAppEventType.ATTEMPT_FAILED);
    application.handle(event);
    assertAppState(RMAppState.RUNNING,application);
  }
  RMAppEvent event=new RMAppEvent(application.getApplicationId(),RMAppEventType.ATTEMPT_FAILED);
  application.handle(event);
  assertFailed(application,".*Failing the application.*");
  event=new RMAppEvent(application.getApplicationId(),RMAppEventType.KILL);
  application.handle(event);
  assertFailed(application,".*Failing the application.*");
}
