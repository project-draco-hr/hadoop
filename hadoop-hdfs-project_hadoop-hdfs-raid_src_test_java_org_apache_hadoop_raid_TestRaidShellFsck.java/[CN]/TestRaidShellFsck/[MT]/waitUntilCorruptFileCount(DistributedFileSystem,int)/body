{
  long waitStart=Time.now();
  while (RaidDFSUtil.getCorruptFiles(dfs).length != corruptFiles) {
    try {
      Thread.sleep(1000);
    }
 catch (    InterruptedException ignore) {
    }
    if (Time.now() > waitStart + 20000L) {
      break;
    }
  }
  int corruptFilesFound=RaidDFSUtil.getCorruptFiles(dfs).length;
  if (corruptFilesFound != corruptFiles) {
    throw new IOException("expected " + corruptFiles + " corrupt files but got "+ corruptFilesFound);
  }
}
