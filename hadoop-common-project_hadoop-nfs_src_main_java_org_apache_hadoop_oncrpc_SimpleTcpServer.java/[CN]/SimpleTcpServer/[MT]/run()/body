{
  ChannelFactory factory;
  if (workerCount == 0) {
    factory=new NioServerSocketChannelFactory(Executors.newCachedThreadPool(),Executors.newCachedThreadPool());
  }
 else {
    factory=new NioServerSocketChannelFactory(Executors.newCachedThreadPool(),Executors.newCachedThreadPool(),workerCount);
  }
  ServerBootstrap bootstrap=new ServerBootstrap(factory);
  bootstrap.setPipelineFactory(pipelineFactory);
  bootstrap.setOption("child.tcpNoDelay",true);
  bootstrap.setOption("child.keepAlive",true);
  bootstrap.bind(new InetSocketAddress(port));
  LOG.info("Started listening to TCP requests at port " + port + " for "+ rpcProgram+ " with workerCount "+ workerCount);
}
