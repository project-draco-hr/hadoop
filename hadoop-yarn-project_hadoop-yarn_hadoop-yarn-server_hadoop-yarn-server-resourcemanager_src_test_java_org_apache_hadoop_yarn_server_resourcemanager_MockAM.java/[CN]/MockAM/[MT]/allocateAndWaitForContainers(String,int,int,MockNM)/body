{
  allocate(host,memory,nContainer,null);
  nm.nodeHeartbeat(true);
  List<Container> conts=allocate(new ArrayList<ResourceRequest>(),null).getAllocatedContainers();
  while (conts.size() < nContainer) {
    nm.nodeHeartbeat(true);
    conts.addAll(allocate(new ArrayList<ResourceRequest>(),new ArrayList<ContainerId>()).getAllocatedContainers());
    Thread.sleep(500);
  }
  return conts;
}
