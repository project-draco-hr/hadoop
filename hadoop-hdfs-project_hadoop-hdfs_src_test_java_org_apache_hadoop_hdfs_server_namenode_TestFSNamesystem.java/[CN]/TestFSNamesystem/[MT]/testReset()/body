{
  Configuration conf=new Configuration();
  FSEditLog fsEditLog=Mockito.mock(FSEditLog.class);
  FSImage fsImage=Mockito.mock(FSImage.class);
  Mockito.when(fsImage.getEditLog()).thenReturn(fsEditLog);
  FSNamesystem fsn=new FSNamesystem(conf,fsImage);
  fsn.imageLoadComplete();
  assertTrue(fsn.isImageLoaded());
  fsn.clear();
  assertFalse(fsn.isImageLoaded());
  final INodeDirectory root=(INodeDirectory)fsn.getFSDirectory().getINode("/");
  assertTrue(root.getChildrenList(Snapshot.CURRENT_STATE_ID).isEmpty());
  fsn.imageLoadComplete();
  assertTrue(fsn.isImageLoaded());
}
