{
  Configuration conf=new Configuration();
  FSImage fsImage=Mockito.mock(FSImage.class);
  FSEditLog fsEditLog=Mockito.mock(FSEditLog.class);
  Mockito.when(fsImage.getEditLog()).thenReturn(fsEditLog);
  FSNamesystem fsn=new FSNamesystem(conf,fsImage);
  fsn.leaveSafeMode();
  assertTrue("After leaving safemode FSNamesystem.isInStartupSafeMode still " + "returned true",!fsn.isInStartupSafeMode());
  assertTrue("After leaving safemode FSNamesystem.isInSafeMode still returned" + " true",!fsn.isInSafeMode());
  fsn.enterSafeMode(true);
  assertTrue("After entering safemode due to low resources FSNamesystem." + "isInStartupSafeMode still returned true",!fsn.isInStartupSafeMode());
  assertTrue("After entering safemode due to low resources FSNamesystem." + "isInSafeMode still returned false",fsn.isInSafeMode());
}
