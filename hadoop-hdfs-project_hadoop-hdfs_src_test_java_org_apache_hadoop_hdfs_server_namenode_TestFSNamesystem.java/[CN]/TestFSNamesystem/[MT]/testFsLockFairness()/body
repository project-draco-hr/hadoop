{
  Configuration conf=new Configuration();
  FSEditLog fsEditLog=Mockito.mock(FSEditLog.class);
  FSImage fsImage=Mockito.mock(FSImage.class);
  Mockito.when(fsImage.getEditLog()).thenReturn(fsEditLog);
  conf.setBoolean("dfs.namenode.fslock.fair",true);
  FSNamesystem fsNamesystem=new FSNamesystem(conf,fsImage);
  assertTrue(fsNamesystem.getFsLockForTests().isFair());
  conf.setBoolean("dfs.namenode.fslock.fair",false);
  fsNamesystem=new FSNamesystem(conf,fsImage);
  assertFalse(fsNamesystem.getFsLockForTests().isFair());
}
