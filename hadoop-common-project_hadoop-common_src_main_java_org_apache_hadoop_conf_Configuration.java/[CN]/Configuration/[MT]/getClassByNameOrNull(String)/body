{
  Map<String,Class<?>> map;
synchronized (CACHE_CLASSES) {
    map=CACHE_CLASSES.get(classLoader);
    if (map == null) {
      map=Collections.synchronizedMap(new WeakHashMap<String,Class<?>>());
      CACHE_CLASSES.put(classLoader,map);
    }
  }
  Class<?> clazz=null;
  if (!map.containsKey(name)) {
    try {
      clazz=Class.forName(name,true,classLoader);
    }
 catch (    ClassNotFoundException e) {
      map.put(name,null);
      return null;
    }
    map.put(name,clazz);
  }
 else {
    clazz=map.get(name);
    if (clazz == null) {
      return null;
    }
  }
  return clazz;
}
