{
  Map<String,Class<?>> map;
synchronized (CACHE_CLASSES) {
    map=CACHE_CLASSES.get(classLoader);
    if (map == null) {
      map=Collections.synchronizedMap(new WeakHashMap<String,Class<?>>());
      CACHE_CLASSES.put(classLoader,map);
    }
  }
  Class<?> clazz=map.get(name);
  if (clazz == null) {
    try {
      clazz=Class.forName(name,true,classLoader);
    }
 catch (    ClassNotFoundException e) {
      map.put(name,NEGATIVE_CACHE_SENTINEL);
      return null;
    }
    map.put(name,clazz);
    return clazz;
  }
 else   if (clazz == NEGATIVE_CACHE_SENTINEL) {
    return null;
  }
 else {
    return clazz;
  }
}
