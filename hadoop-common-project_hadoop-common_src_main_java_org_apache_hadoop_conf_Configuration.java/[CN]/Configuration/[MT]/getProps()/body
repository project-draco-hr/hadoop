{
  if (properties == null) {
    properties=new Properties();
    Map<String,String[]> backup=new ConcurrentHashMap<String,String[]>(updatingResource);
    loadResources(properties,resources,quietmode);
    if (overlay != null) {
      properties.putAll(overlay);
      for (      Map.Entry<Object,Object> item : overlay.entrySet()) {
        String key=(String)item.getKey();
        String[] source=backup.get(key);
        if (source != null) {
          updatingResource.put(key,source);
        }
      }
    }
  }
  return properties;
}
