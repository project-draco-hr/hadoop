{
  BufferedReader reader=null;
  String strLine;
  try {
    reader=new BufferedReader(new FileReader(entityFile));
    boolean jobMetricsFoundForAppEntity=false;
    while ((strLine=reader.readLine()) != null) {
      if (strLine.trim().length() > 0) {
        org.apache.hadoop.yarn.api.records.timelineservice.TimelineEntity entity=FileSystemTimelineReaderImpl.getTimelineRecordFromJSON(strLine.trim(),org.apache.hadoop.yarn.api.records.timelineservice.TimelineEntity.class);
        if (eventId == null) {
          if (entity.getEvents().size() == 0) {
            jobMetricsFoundForAppEntity=entity.getMetrics().size() > 0;
            if (jobMetricsFoundForAppEntity) {
              return;
            }
          }
        }
 else {
          for (          TimelineEvent event : entity.getEvents()) {
            if (event.getId().equals(eventId)) {
              assertTrue(entity.getMetrics().size() > 0);
              return;
            }
          }
        }
      }
    }
    fail("Expected event : " + eventId + " not found in the file "+ entityFile);
  }
  finally {
    reader.close();
  }
}
