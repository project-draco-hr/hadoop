{
  if (pos < 0) {
    throw new EOFException(FSExceptionMessages.NEGATIVE_SEEK);
  }
  checkStream();
  try {
    if (pos <= streamOffset && pos >= (streamOffset - outBuffer.remaining())) {
      int forward=(int)(pos - (streamOffset - outBuffer.remaining()));
      if (forward > 0) {
        outBuffer.position(outBuffer.position() + forward);
      }
    }
 else {
      ((Seekable)in).seek(pos);
      resetStreamOffset(pos);
    }
  }
 catch (  ClassCastException e) {
    throw new UnsupportedOperationException("This stream does not support " + "seek.");
  }
}
