{
  File base=new File(BASEDIR);
  FileUtil.fullyDelete(base);
  base.mkdirs();
  conf=new Configuration();
  keystoresDir=new File(BASEDIR).getAbsolutePath();
  sslConfDir=KeyStoreTestUtil.getClasspathDir(TestNameNodeHttpServer.class);
  KeyStoreTestUtil.setupSSLConfig(keystoresDir,sslConfDir,conf,false);
  connectionFactory=URLConnectionFactory.newDefaultURLConnectionFactory(conf);
  conf.set(DFSConfigKeys.DFS_CLIENT_HTTPS_KEYSTORE_RESOURCE_KEY,KeyStoreTestUtil.getClientSSLConfigFileName());
  conf.set(DFSConfigKeys.DFS_SERVER_HTTPS_KEYSTORE_RESOURCE_KEY,KeyStoreTestUtil.getServerSSLConfigFileName());
}
