{
  RMContext mockRmContext=Mockito.spy(new RMContextImpl(null,null,null,null,null,null,new RMContainerTokenSecretManager(conf),new NMTokenSecretManagerInRM(conf),new ClientToAMTokenSecretManagerInRM(),null));
  RMNodeLabelsManager nlm=mock(RMNodeLabelsManager.class);
  when(nlm.getQueueResource(any(String.class),anySetOf(String.class),any(Resource.class))).thenAnswer(new Answer<Resource>(){
    @Override public Resource answer(    InvocationOnMock invocation) throws Throwable {
      Object[] args=invocation.getArguments();
      return (Resource)args[2];
    }
  }
);
  when(nlm.getResourceByLabel(any(String.class),any(Resource.class))).thenAnswer(new Answer<Resource>(){
    @Override public Resource answer(    InvocationOnMock invocation) throws Throwable {
      Object[] args=invocation.getArguments();
      return (Resource)args[1];
    }
  }
);
  mockRmContext.setNodeLabelManager(nlm);
  return mockRmContext;
}
