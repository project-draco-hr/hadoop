{
  String src="/testNamenodeRetryCache/testAppend/src";
  resetCall();
  DFSTestUtil.createFile(filesystem,new Path(src),128,(short)1,0L);
  newCall();
  LastBlockWithStatus b=nnRpc.append(src,"holder",new EnumSetWritable<>(EnumSet.of(CreateFlag.APPEND)));
  Assert.assertEquals(b,nnRpc.append(src,"holder",new EnumSetWritable<>(EnumSet.of(CreateFlag.APPEND))));
  Assert.assertEquals(b,nnRpc.append(src,"holder",new EnumSetWritable<>(EnumSet.of(CreateFlag.APPEND))));
  newCall();
  try {
    nnRpc.append(src,"holder",new EnumSetWritable<>(EnumSet.of(CreateFlag.APPEND)));
    Assert.fail("testAppend - expected exception is not thrown");
  }
 catch (  Exception e) {
  }
}
