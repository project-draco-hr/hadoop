{
  String src="/testNamenodeRetryCache/testAppend/src";
  resetCall();
  DFSTestUtil.createFile(filesystem,new Path(src),128,(short)1,0L);
  newCall();
  LocatedBlock b=namesystem.appendFile(src,"holder","clientMachine");
  Assert.assertEquals(b,namesystem.appendFile(src,"holder","clientMachine"));
  Assert.assertEquals(b,namesystem.appendFile(src,"holder","clientMachine"));
  newCall();
  try {
    namesystem.appendFile(src,"holder","clientMachine");
    Assert.fail("testAppend - expected exception is not thrown");
  }
 catch (  Exception e) {
  }
}
