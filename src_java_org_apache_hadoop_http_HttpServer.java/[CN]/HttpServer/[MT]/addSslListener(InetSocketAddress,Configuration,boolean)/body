{
  if (webServer.isStarted()) {
    throw new IOException("Failed to add ssl listener");
  }
  if (needClientAuth) {
    System.setProperty("javax.net.ssl.trustStore",sslConf.get("ssl.server.truststore.location",""));
    System.setProperty("javax.net.ssl.trustStorePassword",sslConf.get("ssl.server.truststore.password",""));
    System.setProperty("javax.net.ssl.trustStoreType",sslConf.get("ssl.server.truststore.type","jks"));
  }
  SslSocketConnector sslListener=new SslSocketConnector();
  sslListener.setHost(addr.getHostName());
  sslListener.setPort(addr.getPort());
  sslListener.setKeystore(sslConf.get("ssl.server.keystore.location"));
  sslListener.setPassword(sslConf.get("ssl.server.keystore.password",""));
  sslListener.setKeyPassword(sslConf.get("ssl.server.keystore.keypassword",""));
  sslListener.setKeystoreType(sslConf.get("ssl.server.keystore.type","jks"));
  sslListener.setNeedClientAuth(needClientAuth);
  webServer.addConnector(sslListener);
}
