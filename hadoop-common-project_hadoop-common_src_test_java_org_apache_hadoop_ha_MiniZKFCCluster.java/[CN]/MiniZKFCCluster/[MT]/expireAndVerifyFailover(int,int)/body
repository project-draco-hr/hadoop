{
  Preconditions.checkArgument(fromIdx != toIdx);
  getElector(fromIdx).preventSessionReestablishmentForTests();
  try {
    expireActiveLockHolder(fromIdx);
    waitForHAState(fromIdx,HAServiceState.STANDBY);
    waitForHAState(toIdx,HAServiceState.ACTIVE);
  }
  finally {
    getElector(fromIdx).allowSessionReestablishmentForTests();
  }
}
