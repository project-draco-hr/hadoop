{
  final int i=Diff.search(current,inode.getKey());
  current.remove(i);
  if (diff != null) {
    final boolean testUndo=RANDOM.nextInt(UNDO_TEST_P) == 0;
    String before=null;
    if (testUndo) {
      before=diff.toString();
    }
    final UndoInfo<INode> undoInfo=diff.delete(inode);
    if (testUndo) {
      final String after=diff.toString();
      diff.undoDelete(inode,undoInfo);
      assertDiff(before,diff);
      diff.delete(inode);
      assertDiff(after,diff);
    }
  }
}
