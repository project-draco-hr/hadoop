{
  ErasureCoderOptions coderOptions=new ErasureCoderOptions(numDataUnit,numParityUnit);
  String dummyFactName="DummyNoneExistingFactory";
  conf.set(CommonConfigurationKeys.IO_ERASURECODE_CODEC_RS_LEGACY_RAWCODER_KEY,dummyFactName);
  RawErasureEncoder encoder=CodecUtil.createRawEncoder(conf,ErasureCodeConstants.RS_DEFAULT_CODEC_NAME,coderOptions);
  Assert.assertTrue(encoder instanceof RSRawEncoder);
  try {
    CodecUtil.createRawEncoder(conf,ErasureCodeConstants.RS_LEGACY_CODEC_NAME,coderOptions);
    Assert.fail();
  }
 catch (  Exception e) {
    GenericTestUtils.assertExceptionContains("Failed to create raw coder",e);
  }
}
