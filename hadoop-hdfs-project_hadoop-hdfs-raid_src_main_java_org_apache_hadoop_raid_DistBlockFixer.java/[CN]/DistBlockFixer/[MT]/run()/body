{
  while (running) {
    long now=Time.now();
    if (now >= lastCheckTime + blockFixInterval) {
      lastCheckTime=now;
      try {
        checkAndFixBlocks(now);
      }
 catch (      InterruptedException ignore) {
        LOG.info("interrupted");
      }
catch (      Exception e) {
        LOG.error(StringUtils.stringifyException(e));
      }
catch (      Error e) {
        LOG.error(StringUtils.stringifyException(e));
        throw e;
      }
    }
    long sleepPeriod=(lastCheckTime - Time.now()) + blockFixInterval;
    if ((sleepPeriod > 0L) && running) {
      try {
        Thread.sleep(sleepPeriod);
      }
 catch (      InterruptedException ignore) {
        LOG.info("interrupted");
      }
    }
  }
}
