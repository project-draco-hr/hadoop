{
  ApplicationId applicationId=request.getApplicationId();
  UserGroupInformation callerUGI;
  try {
    callerUGI=UserGroupInformation.getCurrentUser();
  }
 catch (  IOException ie) {
    LOG.info("Error getting UGI ",ie);
    throw RPCUtil.getRemoteException(ie);
  }
  RMApp application=this.rmContext.getRMApps().get(applicationId);
  if (application == null) {
    throw new ApplicationNotFoundException("Application with id '" + applicationId + "' doesn't exist in RM.");
  }
  boolean allowAccess=checkAccess(callerUGI,application.getUser(),ApplicationAccessType.VIEW_APP,application);
  ApplicationReport report=application.createAndGetApplicationReport(callerUGI.getUserName(),allowAccess);
  GetApplicationReportResponse response=recordFactory.newRecordInstance(GetApplicationReportResponse.class);
  response.setApplicationReport(report);
  return response;
}
