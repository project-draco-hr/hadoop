{
  if (!addToCheckpointing(txid)) {
    throw new IOException(("FS image is being downloaded from another NN"));
  }
  try {
    saveFSImageInAllDirs(source,NameNodeFile.IMAGE,txid,null);
  }
  finally {
    removeFromCheckpointing(txid);
  }
}
