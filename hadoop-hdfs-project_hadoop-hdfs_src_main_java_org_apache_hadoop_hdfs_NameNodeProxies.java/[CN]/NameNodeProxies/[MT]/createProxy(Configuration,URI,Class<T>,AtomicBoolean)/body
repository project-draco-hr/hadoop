{
  AbstractNNFailoverProxyProvider<T> failoverProxyProvider=NameNodeProxiesClient.createFailoverProxyProvider(conf,nameNodeUri,xface,true,fallbackToSimpleAuth);
  if (failoverProxyProvider == null) {
    return createNonHAProxy(conf,DFSUtilClient.getNNAddress(nameNodeUri),xface,UserGroupInformation.getCurrentUser(),true,fallbackToSimpleAuth);
  }
 else {
    return NameNodeProxiesClient.createHAProxy(conf,nameNodeUri,xface,failoverProxyProvider);
  }
}
