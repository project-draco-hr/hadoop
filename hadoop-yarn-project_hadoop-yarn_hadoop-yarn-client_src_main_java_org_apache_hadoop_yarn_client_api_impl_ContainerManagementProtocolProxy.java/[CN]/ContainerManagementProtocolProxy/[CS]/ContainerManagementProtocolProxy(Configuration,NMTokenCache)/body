{
  this.conf=conf;
  this.nmTokenCache=nmTokenCache;
  maxConnectedNMs=conf.getInt(YarnConfiguration.NM_CLIENT_MAX_NM_PROXIES,YarnConfiguration.DEFAULT_NM_CLIENT_MAX_NM_PROXIES);
  if (maxConnectedNMs < 1) {
    throw new YarnRuntimeException(YarnConfiguration.NM_CLIENT_MAX_NM_PROXIES + " (" + maxConnectedNMs+ ") can not be less than 1.");
  }
  LOG.info(YarnConfiguration.NM_CLIENT_MAX_NM_PROXIES + " : " + maxConnectedNMs);
  cmProxy=new LinkedHashMap<String,ContainerManagementProtocolProxyData>();
  rpc=YarnRPC.create(conf);
}
