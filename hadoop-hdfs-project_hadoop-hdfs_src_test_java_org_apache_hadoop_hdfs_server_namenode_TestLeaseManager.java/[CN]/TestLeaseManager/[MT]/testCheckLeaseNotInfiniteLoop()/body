{
  FSDirectory dir=Mockito.mock(FSDirectory.class);
  FSNamesystem fsn=Mockito.mock(FSNamesystem.class);
  Mockito.when(fsn.isRunning()).thenReturn(true);
  Mockito.when(fsn.hasWriteLock()).thenReturn(true);
  Mockito.when(fsn.getFSDirectory()).thenReturn(dir);
  LeaseManager lm=new LeaseManager(fsn);
  lm.setLeasePeriod(0,0);
  lm.addLease("holder1","src1");
  lm.addLease("holder2","src2");
  lm.addLease("holder3","src3");
  assertEquals(lm.getNumSortedLeases(),3);
  lm.checkLeases();
}
