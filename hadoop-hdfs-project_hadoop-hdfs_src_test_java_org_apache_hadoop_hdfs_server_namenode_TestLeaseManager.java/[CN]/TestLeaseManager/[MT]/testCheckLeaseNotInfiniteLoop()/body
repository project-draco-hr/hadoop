{
  FSDirectory dir=Mockito.mock(FSDirectory.class);
  FSNamesystem fsn=Mockito.mock(FSNamesystem.class);
  Mockito.when(fsn.isRunning()).thenReturn(true);
  Mockito.when(fsn.hasWriteLock()).thenReturn(true);
  Mockito.when(fsn.getFSDirectory()).thenReturn(dir);
  LeaseManager lm=new LeaseManager(fsn);
  lm.setLeasePeriod(0,0);
  lm.addLease("holder1",INodeId.ROOT_INODE_ID + 1);
  lm.addLease("holder2",INodeId.ROOT_INODE_ID + 2);
  lm.addLease("holder3",INodeId.ROOT_INODE_ID + 3);
  assertEquals(lm.countLease(),3);
  lm.checkLeases();
}
