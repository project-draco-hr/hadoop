{
  try {
    this.currentUser=UserGroupInformation.getCurrentUser();
    if (UserGroupInformation.isSecurityEnabled()) {
      Path jobSubmitDir=FileContext.getLocalFSFileContext().makeQualified(new Path(new File(MRJobConfig.JOB_SUBMIT_DIR).getAbsolutePath()));
      Path jobTokenFile=new Path(jobSubmitDir,MRJobConfig.APPLICATION_TOKENS_FILE);
      fsTokens.addAll(Credentials.readTokenStorageFile(jobTokenFile,conf));
      LOG.info("jobSubmitDir=" + jobSubmitDir + " jobTokenFile="+ jobTokenFile);
      for (      Token<? extends TokenIdentifier> tk : fsTokens.getAllTokens()) {
        if (LOG.isDebugEnabled()) {
          LOG.debug("Token of kind " + tk.getKind() + "in current ugi in the AppMaster for service "+ tk.getService());
        }
        currentUser.addToken(tk);
      }
    }
  }
 catch (  IOException e) {
    throw new YarnException(e);
  }
}
