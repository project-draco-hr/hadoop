{
  renewer=(renewer == null) ? ugi.getShortUserName() : renewer;
  String user=ugi.getUserName();
  Text owner=new Text(user);
  Text realUser=null;
  if (ugi.getRealUser() != null) {
    realUser=new Text(ugi.getRealUser().getUserName());
  }
  DelegationTokenIdentifier tokenIdentifier=new DelegationTokenIdentifier(tokenKind,owner,new Text(renewer),realUser);
  return new Token<DelegationTokenIdentifier>(tokenIdentifier,secretManager);
}
