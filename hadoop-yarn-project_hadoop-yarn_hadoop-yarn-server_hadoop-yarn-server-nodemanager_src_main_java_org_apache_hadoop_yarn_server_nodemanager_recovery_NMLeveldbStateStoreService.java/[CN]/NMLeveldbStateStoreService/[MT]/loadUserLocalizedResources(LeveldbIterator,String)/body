{
  RecoveredUserResources userResources=new RecoveredUserResources();
  while (iter.hasNext()) {
    Entry<byte[],byte[]> entry=iter.peekNext();
    String key=asString(entry.getKey());
    if (!key.startsWith(keyPrefix)) {
      break;
    }
    if (key.startsWith(LOCALIZATION_FILECACHE_SUFFIX,keyPrefix.length())) {
      userResources.privateTrackerState=loadResourceTrackerState(iter,keyPrefix + LOCALIZATION_FILECACHE_SUFFIX);
    }
 else     if (key.startsWith(LOCALIZATION_APPCACHE_SUFFIX,keyPrefix.length())) {
      int appIdStartPos=keyPrefix.length() + LOCALIZATION_APPCACHE_SUFFIX.length();
      int appIdEndPos=key.indexOf('/',appIdStartPos);
      if (appIdEndPos < 0) {
        throw new IOException("Unable to determine appID in resource key: " + key);
      }
      ApplicationId appId=ConverterUtils.toApplicationId(key.substring(appIdStartPos,appIdEndPos));
      userResources.appTrackerStates.put(appId,loadResourceTrackerState(iter,key.substring(0,appIdEndPos + 1)));
    }
 else {
      throw new IOException("Unexpected user resource key " + key);
    }
  }
  return userResources;
}
