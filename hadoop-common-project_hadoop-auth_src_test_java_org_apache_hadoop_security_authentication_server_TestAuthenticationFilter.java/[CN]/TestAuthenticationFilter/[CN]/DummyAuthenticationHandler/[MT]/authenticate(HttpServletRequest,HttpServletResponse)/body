{
  AuthenticationToken token=null;
  String param=request.getParameter("authenticated");
  if (param != null && param.equals("true")) {
    token=new AuthenticationToken("u","p","t");
    token.setExpires((expired) ? 0 : System.currentTimeMillis() + TOKEN_VALIDITY_SEC);
  }
 else {
    if (request.getHeader("WWW-Authenticate") == null) {
      response.setHeader("WWW-Authenticate","dummyauth");
    }
 else {
      throw new AuthenticationException("AUTH FAILED");
    }
  }
  return token;
}
