{
  ClientServiceDelegate clientServiceDelegate=getClientServiceDelegate(null,getRMDelegate());
  JobStatus jobStatus=clientServiceDelegate.getJobStatus(oldJobId);
  Assert.assertEquals("N/A",jobStatus.getUsername());
  Assert.assertEquals(JobStatus.State.PREP,jobStatus.getState());
  ResourceMgrDelegate rm=mock(ResourceMgrDelegate.class);
  ApplicationReport applicationReport=getApplicationReport();
  when(rm.getApplicationReport(jobId.getAppId())).thenReturn(applicationReport);
  clientServiceDelegate=getClientServiceDelegate(null,rm);
  jobStatus=clientServiceDelegate.getJobStatus(oldJobId);
  Assert.assertEquals(applicationReport.getUser(),jobStatus.getUsername());
  Assert.assertEquals(JobStatus.State.SUCCEEDED,jobStatus.getState());
}
