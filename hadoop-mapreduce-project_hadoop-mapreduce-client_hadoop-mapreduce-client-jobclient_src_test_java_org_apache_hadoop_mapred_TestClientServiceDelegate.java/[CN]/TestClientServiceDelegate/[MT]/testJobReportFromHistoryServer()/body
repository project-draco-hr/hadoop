{
  MRClientProtocol historyServerProxy=mock(MRClientProtocol.class);
  when(historyServerProxy.getJobReport(getJobReportRequest())).thenReturn(getJobReportResponseFromHistoryServer());
  ResourceMgrDelegate rm=mock(ResourceMgrDelegate.class);
  when(rm.getApplicationReport(TypeConverter.toYarn(oldJobId).getAppId())).thenReturn(null);
  ClientServiceDelegate clientServiceDelegate=getClientServiceDelegate(historyServerProxy,rm);
  JobStatus jobStatus=clientServiceDelegate.getJobStatus(oldJobId);
  Assert.assertNotNull(jobStatus);
  Assert.assertEquals("TestJobFilePath",jobStatus.getJobFile());
  Assert.assertEquals("http://TestTrackingUrl",jobStatus.getTrackingUrl());
  Assert.assertEquals(1.0f,jobStatus.getMapProgress(),0.0f);
  Assert.assertEquals(1.0f,jobStatus.getReduceProgress(),0.0f);
}
