{
  if (!localTarget.isAutoFailoverEnabled()) {
    LOG.fatal("Automatic failover is not enabled for " + localTarget + "."+ " Please ensure that automatic failover is enabled in the "+ "configuration before running the ZK failover controller.");
    return ERR_CODE_AUTO_FAILOVER_NOT_ENABLED;
  }
  loginAsFCUser();
  try {
    return SecurityUtil.doAsLoginUserOrFatal(new PrivilegedAction<Integer>(){
      @Override public Integer run(){
        try {
          return doRun(args);
        }
 catch (        Exception t) {
          throw new RuntimeException(t);
        }
      }
    }
);
  }
 catch (  RuntimeException rte) {
    throw (Exception)rte.getCause();
  }
}
