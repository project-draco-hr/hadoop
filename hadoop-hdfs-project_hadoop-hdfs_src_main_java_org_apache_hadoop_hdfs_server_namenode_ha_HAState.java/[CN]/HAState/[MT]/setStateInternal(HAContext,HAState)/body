{
  context.writeLock();
  try {
    exitState(context);
    context.setState(s);
    s.enterState(context);
  }
  finally {
    context.writeUnlock();
  }
}
