{
  FiCaSchedulerApp app=mock(FiCaSchedulerApp.class);
  ApplicationId appId=ApplicationId.newInstance(TS,id);
  ApplicationAttemptId appAttId=ApplicationAttemptId.newInstance(appId,0);
  when(app.getApplicationId()).thenReturn(appId);
  when(app.getApplicationAttemptId()).thenReturn(appAttId);
  int cAlloc=0;
  Resource unit=Resource.newInstance(gran,0);
  List<RMContainer> cReserved=new ArrayList<RMContainer>();
  for (int i=0; i < reserved; i+=gran) {
    cReserved.add(mockContainer(appAttId,cAlloc,unit,priority.CONTAINER.getValue()));
    ++cAlloc;
  }
  when(app.getReservedContainers()).thenReturn(cReserved);
  List<RMContainer> cLive=new ArrayList<RMContainer>();
  for (int i=0; i < used; i+=gran) {
    if (setAMContainer && i == 0) {
      cLive.add(mockContainer(appAttId,cAlloc,unit,priority.AMCONTAINER.getValue()));
    }
 else     if (setLabeledContainer && i == 1) {
      cLive.add(mockContainer(appAttId,cAlloc,unit,priority.LABELEDCONTAINER.getValue()));
      ++used;
    }
 else {
      cLive.add(mockContainer(appAttId,cAlloc,unit,priority.CONTAINER.getValue()));
    }
    ++cAlloc;
  }
  when(app.getLiveContainers()).thenReturn(cLive);
  return app;
}
