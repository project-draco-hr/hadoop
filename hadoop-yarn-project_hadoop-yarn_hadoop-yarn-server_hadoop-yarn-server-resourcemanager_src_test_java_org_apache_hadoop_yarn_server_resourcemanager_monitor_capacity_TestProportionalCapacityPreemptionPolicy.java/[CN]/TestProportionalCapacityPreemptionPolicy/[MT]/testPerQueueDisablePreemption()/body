{
  int[][] qData=new int[][]{{100,55,25,20},{100,100,100,100},{100,0,54,46},{10,10,0,0},{0,0,0,0},{3,1,1,1},{-1,1,1,1},{3,0,0,0}};
  schedConf.setBoolean(BASE_YARN_RM_PREEMPTION + "root.queueB" + SUFFIX_DISABLE_PREEMPTION,true);
  ProportionalCapacityPreemptionPolicy policy=buildPolicy(qData);
  policy.editSchedule();
  verify(mDisp,times(10)).handle(argThat(new IsPreemptionRequestFor(appC)));
  verify(mDisp,never()).handle(argThat(new IsPreemptionRequestFor(appB)));
  setup();
  ProportionalCapacityPreemptionPolicy policy2=buildPolicy(qData);
  schedConf.setBoolean(BASE_YARN_RM_PREEMPTION + "root.queueB" + SUFFIX_DISABLE_PREEMPTION,false);
  policy2.editSchedule();
  verify(mDisp,times(4)).handle(argThat(new IsPreemptionRequestFor(appB)));
  verify(mDisp,times(6)).handle(argThat(new IsPreemptionRequestFor(appC)));
}
