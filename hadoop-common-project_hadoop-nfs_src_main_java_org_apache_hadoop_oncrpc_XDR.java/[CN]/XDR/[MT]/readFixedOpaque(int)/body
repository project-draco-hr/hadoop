{
  Preconditions.checkState(state == State.READING);
  byte[] r=new byte[size];
  buf.get(r);
  alignPosition();
  return r;
}
