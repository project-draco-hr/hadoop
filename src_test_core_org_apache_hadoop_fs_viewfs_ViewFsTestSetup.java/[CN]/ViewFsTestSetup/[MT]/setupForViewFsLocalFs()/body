{
  FileContext fclocal=FileContext.getLocalFSFileContext();
  Path targetOfTests=FileContextTestHelper.getTestRootPath(fclocal);
  fclocal.delete(targetOfTests,true);
  fclocal.mkdir(targetOfTests,FileContext.DEFAULT_PERM,true);
  String srcTestFirstDir;
  if (FileContextTestHelper.TEST_ROOT_DIR.startsWith("/")) {
    int indexOf2ndSlash=FileContextTestHelper.TEST_ROOT_DIR.indexOf('/',1);
    srcTestFirstDir=FileContextTestHelper.TEST_ROOT_DIR.substring(0,indexOf2ndSlash);
  }
 else {
    srcTestFirstDir="/user";
  }
  Configuration conf=new Configuration();
  ConfigUtil.addLink(conf,srcTestFirstDir,targetOfTests.toUri());
  FileContext fc=FileContext.getFileContext(FsConstants.VIEWFS_URI,conf);
  return fc;
}
