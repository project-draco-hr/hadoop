{
  scheduler.init(conf);
  scheduler.start();
  scheduler.reinitialize(conf,resourceManager.getRMContext());
  assertEquals(1,scheduler.getQueueManager().getLeafQueues().size());
  ApplicationAttemptId appAttemptId=createAppAttemptId(1,1);
  AppAddedSchedulerEvent appAddedEvent=new AppAddedSchedulerEvent(appAttemptId.getApplicationId(),"","user1");
  scheduler.handle(appAddedEvent);
  assertEquals(1,scheduler.getQueueManager().getLeafQueues().size());
  assertNull(scheduler.getSchedulerApp(appAttemptId));
  assertEquals(0,resourceManager.getRMContext().getRMApps().size());
}
