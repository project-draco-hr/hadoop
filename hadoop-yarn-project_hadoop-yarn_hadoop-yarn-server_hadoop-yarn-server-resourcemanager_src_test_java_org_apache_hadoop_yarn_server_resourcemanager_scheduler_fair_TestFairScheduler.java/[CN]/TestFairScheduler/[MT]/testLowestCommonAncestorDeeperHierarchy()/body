{
  scheduler.init(conf);
  scheduler.start();
  scheduler.reinitialize(conf,resourceManager.getRMContext());
  FSQueue aQueue=mock(FSLeafQueue.class);
  FSQueue bQueue=mock(FSLeafQueue.class);
  FSQueue a1Queue=mock(FSLeafQueue.class);
  FSQueue b1Queue=mock(FSLeafQueue.class);
  when(a1Queue.getName()).thenReturn("root.queue1.a.a1");
  when(b1Queue.getName()).thenReturn("root.queue1.b.b1");
  when(aQueue.getChildQueues()).thenReturn(Arrays.asList(a1Queue));
  when(bQueue.getChildQueues()).thenReturn(Arrays.asList(b1Queue));
  QueueManager queueManager=scheduler.getQueueManager();
  FSParentQueue queue1=queueManager.getParentQueue("queue1",true);
  queue1.addChildQueue(aQueue);
  queue1.addChildQueue(bQueue);
  FSQueue ancestorQueue=scheduler.findLowestCommonAncestorQueue(a1Queue,b1Queue);
  assertEquals(ancestorQueue,queue1);
}
