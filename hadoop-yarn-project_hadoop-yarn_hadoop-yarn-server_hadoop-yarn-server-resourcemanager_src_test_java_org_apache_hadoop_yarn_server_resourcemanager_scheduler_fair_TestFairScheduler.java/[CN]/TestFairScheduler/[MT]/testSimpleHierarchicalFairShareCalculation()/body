{
  int capacity=10 * 24;
  RMNode node1=MockNodes.newNodeInfo(1,Resources.createResource(capacity));
  NodeAddedSchedulerEvent nodeEvent1=new NodeAddedSchedulerEvent(node1);
  scheduler.handle(nodeEvent1);
  createSchedulingRequest(10 * 1024,"queue1","user1");
  createSchedulingRequest(10 * 1024,"parent.queue2","user1");
  createSchedulingRequest(10 * 1024,"parent.queue3","user1");
  scheduler.update();
  QueueManager queueManager=scheduler.getQueueManager();
  Collection<FSLeafQueue> queues=queueManager.getLeafQueues();
  assertEquals(4,queues.size());
  FSLeafQueue queue1=queueManager.getLeafQueue("queue1");
  FSLeafQueue queue2=queueManager.getLeafQueue("parent.queue2");
  FSLeafQueue queue3=queueManager.getLeafQueue("parent.queue3");
  assertEquals(capacity / 2,queue1.getFairShare().getMemory());
  assertEquals(capacity / 4,queue2.getFairShare().getMemory());
  assertEquals(capacity / 4,queue3.getFairShare().getMemory());
}
