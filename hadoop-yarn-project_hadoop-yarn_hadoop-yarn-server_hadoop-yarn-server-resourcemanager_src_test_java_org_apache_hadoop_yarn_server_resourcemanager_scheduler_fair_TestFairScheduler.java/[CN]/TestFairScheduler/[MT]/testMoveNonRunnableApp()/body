{
  scheduler.reinitialize(conf,resourceManager.getRMContext());
  QueueManager queueMgr=scheduler.getQueueManager();
  FSLeafQueue oldQueue=queueMgr.getLeafQueue("queue1",true);
  FSLeafQueue targetQueue=queueMgr.getLeafQueue("queue2",true);
  scheduler.getAllocationConfiguration().queueMaxApps.put("root.queue1",0);
  scheduler.getAllocationConfiguration().queueMaxApps.put("root.queue2",0);
  ApplicationAttemptId appAttId=createSchedulingRequest(1024,1,"queue1","user1",3);
  assertEquals(0,oldQueue.getNumRunnableApps());
  scheduler.moveApplication(appAttId.getApplicationId(),"queue2");
  assertEquals(0,oldQueue.getNumRunnableApps());
  assertEquals(0,targetQueue.getNumRunnableApps());
  assertEquals(0,queueMgr.getRootQueue().getNumRunnableApps());
}
