{
  conf.set(FairSchedulerConfiguration.ALLOCATION_FILE,ALLOC_FILE);
  PrintWriter out=new PrintWriter(new FileWriter(ALLOC_FILE));
  out.println("<?xml version=\"1.0\"?>");
  out.println("<allocations>");
  out.println("<queue name=\"queueA\">");
  out.println("<minResources>2048mb,0vcores</minResources>");
  out.println("</queue>");
  out.println("<queue name=\"queueB\">");
  out.println("<minResources>2048mb,0vcores</minResources>");
  out.println("<queue name=\"queueC\">");
  out.println("<minResources>2048mb,0vcores</minResources>");
  out.println("</queue>");
  out.println("<queue name=\"queueD\">");
  out.println("<minResources>2048mb,0vcores</minResources>");
  out.println("</queue>");
  out.println("</queue>");
  out.println("</allocations>");
  out.close();
  scheduler.init(conf);
  scheduler.start();
  scheduler.reinitialize(conf,resourceManager.getRMContext());
  QueueManager queueManager=scheduler.getQueueManager();
  Collection<FSLeafQueue> leafQueues=queueManager.getLeafQueues();
  Assert.assertEquals(4,leafQueues.size());
  Assert.assertNotNull(queueManager.getLeafQueue("queueA",false));
  Assert.assertNotNull(queueManager.getLeafQueue("queueB.queueC",false));
  Assert.assertNotNull(queueManager.getLeafQueue("queueB.queueD",false));
  Assert.assertNotNull(queueManager.getLeafQueue("default",false));
  Assert.assertEquals(4,leafQueues.size());
}
