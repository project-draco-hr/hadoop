{
  conf.set(FairSchedulerConfiguration.USER_AS_DEFAULT_QUEUE,"true");
  scheduler.init(conf);
  scheduler.start();
  scheduler.reinitialize(conf,resourceManager.getRMContext());
  ApplicationAttemptId appAttemptId=createAppAttemptId(1,1);
  createApplicationWithAMResource(appAttemptId,"default","user1",null);
  assertEquals(1,scheduler.getQueueManager().getLeafQueue("user1",true).getRunnableAppSchedulables().size());
  assertEquals(0,scheduler.getQueueManager().getLeafQueue("default",true).getRunnableAppSchedulables().size());
  assertEquals("root.user1",resourceManager.getRMContext().getRMApps().get(appAttemptId.getApplicationId()).getQueue());
}
