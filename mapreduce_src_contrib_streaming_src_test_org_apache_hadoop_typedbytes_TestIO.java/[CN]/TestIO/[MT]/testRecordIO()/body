{
  RecRecord1 r1=new RecRecord1();
  r1.setBoolVal(true);
  r1.setByteVal((byte)0x66);
  r1.setFloatVal(3.145F);
  r1.setDoubleVal(1.5234);
  r1.setIntVal(-4567);
  r1.setLongVal(-2367L);
  r1.setStringVal("random text");
  r1.setBufferVal(new Buffer());
  r1.setVectorVal(new ArrayList<String>());
  r1.setMapVal(new TreeMap<String,String>());
  RecRecord0 r0=new RecRecord0();
  r0.setStringVal("other random text");
  r1.setRecordVal(r0);
  FileOutputStream ostream=new FileOutputStream(tmpfile);
  DataOutputStream dostream=new DataOutputStream(ostream);
  TypedBytesRecordOutput out=TypedBytesRecordOutput.get(dostream);
  r1.serialize(out,"");
  dostream.close();
  ostream.close();
  FileInputStream istream=new FileInputStream(tmpfile);
  DataInputStream distream=new DataInputStream(istream);
  TypedBytesRecordInput in=TypedBytesRecordInput.get(distream);
  RecRecord1 r2=new RecRecord1();
  r2.deserialize(in,"");
  distream.close();
  istream.close();
  assertEquals(r1,r2);
}
