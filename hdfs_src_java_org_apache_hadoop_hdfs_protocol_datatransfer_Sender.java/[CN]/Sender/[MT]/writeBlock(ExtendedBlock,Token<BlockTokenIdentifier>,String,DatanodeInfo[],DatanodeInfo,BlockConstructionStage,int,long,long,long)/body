{
  ClientOperationHeaderProto header=DataTransferProtoUtil.buildClientHeader(blk,clientName,blockToken);
  OpWriteBlockProto.Builder proto=OpWriteBlockProto.newBuilder().setHeader(header).addAllTargets(toProtos(targets,1)).setStage(toProto(stage)).setPipelineSize(pipelineSize).setMinBytesRcvd(minBytesRcvd).setMaxBytesRcvd(maxBytesRcvd).setLatestGenerationStamp(latestGenerationStamp);
  if (source != null) {
    proto.setSource(toProto(source));
  }
  send(out,Op.WRITE_BLOCK,proto.build());
}
