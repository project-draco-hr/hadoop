{
  ClientOperationHeaderProto header=DataTransferProtoUtil.buildClientHeader(blk,client,blockToken);
  OpWriteBlockProto.Builder proto=OpWriteBlockProto.newBuilder().setHeader(header).addAllTargets(toProtos(targets,1)).setStage(toProto(stage)).setPipelineSize(pipelineSize).setMinBytesRcvd(minBytesRcvd).setMaxBytesRcvd(maxBytesRcvd).setLatestGenerationStamp(newGs);
  if (src != null) {
    proto.setSource(toProto(src));
  }
  send(out,Op.WRITE_BLOCK,proto.build());
}
