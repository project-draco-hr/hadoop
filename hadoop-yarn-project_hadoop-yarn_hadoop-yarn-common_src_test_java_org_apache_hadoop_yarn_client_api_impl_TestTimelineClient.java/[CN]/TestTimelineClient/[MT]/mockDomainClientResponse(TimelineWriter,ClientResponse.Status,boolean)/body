{
  ClientResponse response=mock(ClientResponse.class);
  if (hasRuntimeError) {
    doThrow(new ClientHandlerException(new ConnectException())).when(spyTimelineWriter).doPostingObject(any(TimelineDomain.class),any(String.class));
    return response;
  }
  doReturn(response).when(spyTimelineWriter).doPostingObject(any(TimelineDomain.class),any(String.class));
  when(response.getClientResponseStatus()).thenReturn(status);
  return response;
}
