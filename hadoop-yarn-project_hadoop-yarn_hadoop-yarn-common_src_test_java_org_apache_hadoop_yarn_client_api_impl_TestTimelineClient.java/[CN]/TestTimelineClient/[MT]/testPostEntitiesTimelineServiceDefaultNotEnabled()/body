{
  YarnConfiguration conf=new YarnConfiguration();
  conf.unset(YarnConfiguration.TIMELINE_SERVICE_ENABLED);
  TimelineClientImpl client=createTimelineClient(conf);
  mockClientResponse(client,ClientResponse.Status.INTERNAL_SERVER_ERROR,false,false);
  try {
    TimelinePutResponse response=client.putEntities(generateEntity());
    Assert.assertEquals(0,response.getErrors().size());
  }
 catch (  YarnException e) {
    Assert.fail("putEntities should already return before throwing the exception");
  }
}
