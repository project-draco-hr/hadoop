{
  try {
    if (hasToReboot && null != nodeManagerShutdownHook) {
      Runtime.getRuntime().removeShutdownHook(nodeManagerShutdownHook);
    }
    nodeManagerShutdownHook=new CompositeServiceShutdownHook(this);
    Runtime.getRuntime().addShutdownHook(nodeManagerShutdownHook);
    YarnConfiguration conf=new YarnConfiguration();
    this.init(conf);
    this.start();
  }
 catch (  Throwable t) {
    LOG.fatal("Error starting NodeManager",t);
    System.exit(-1);
  }
}
