{
  String[] names=INode.getPathNames(file1.toString());
  byte[][] components=INode.getPathComponents(names);
  INodesInPath nodesInPath=fsdir.rootDir.getExistingPathINodes(components,components.length,false);
  INode[] inodes=nodesInPath.getINodes();
  assertEquals(inodes.length,components.length);
  assertFalse(nodesInPath.isSnapshot());
  assertEquals(nodesInPath.getSnapshotRootIndex(),-1);
  assertEquals(inodes[components.length - 1].getFullPathName(),file1.toString());
  assertEquals(inodes[components.length - 2].getFullPathName(),sub1.toString());
  assertEquals(inodes[components.length - 3].getFullPathName(),dir.toString());
  nodesInPath=fsdir.rootDir.getExistingPathINodes(components,1,false);
  inodes=nodesInPath.getINodes();
  assertEquals(inodes.length,1);
  assertFalse(nodesInPath.isSnapshot());
  assertEquals(nodesInPath.getSnapshotRootIndex(),-1);
  assertEquals(inodes[0].getFullPathName(),file1.toString());
  nodesInPath=fsdir.rootDir.getExistingPathINodes(components,2,false);
  inodes=nodesInPath.getINodes();
  assertEquals(inodes.length,2);
  assertFalse(nodesInPath.isSnapshot());
  assertEquals(nodesInPath.getSnapshotRootIndex(),-1);
  assertEquals(inodes[1].getFullPathName(),file1.toString());
  assertEquals(inodes[0].getFullPathName(),sub1.toString());
}
