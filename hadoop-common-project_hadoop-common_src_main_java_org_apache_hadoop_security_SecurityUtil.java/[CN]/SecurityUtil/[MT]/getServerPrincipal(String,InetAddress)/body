{
  String[] components=getComponents(principalConfig);
  if (components == null || components.length != 3 || !components[1].equals(HOSTNAME_PATTERN)) {
    return principalConfig;
  }
 else {
    if (addr == null) {
      throw new IOException("Can't replace " + HOSTNAME_PATTERN + " pattern since client address is null");
    }
    return replacePattern(components,addr.getCanonicalHostName());
  }
}
