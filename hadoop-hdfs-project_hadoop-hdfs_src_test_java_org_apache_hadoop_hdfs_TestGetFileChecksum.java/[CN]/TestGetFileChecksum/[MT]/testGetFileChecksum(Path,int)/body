{
  final int appendRounds=16;
  FileChecksum[] fc=new FileChecksum[appendRounds + 1];
  DFSTestUtil.createFile(dfs,foo,appendLength,REPLICATION,0L);
  fc[0]=dfs.getFileChecksum(foo);
  for (int i=0; i < appendRounds; i++) {
    DFSTestUtil.appendFile(dfs,foo,appendLength);
    fc[i + 1]=dfs.getFileChecksum(foo);
  }
  for (int i=0; i < appendRounds + 1; i++) {
    FileChecksum checksum=dfs.getFileChecksum(foo,appendLength * (i + 1));
    Assert.assertTrue(checksum.equals(fc[i]));
  }
}
