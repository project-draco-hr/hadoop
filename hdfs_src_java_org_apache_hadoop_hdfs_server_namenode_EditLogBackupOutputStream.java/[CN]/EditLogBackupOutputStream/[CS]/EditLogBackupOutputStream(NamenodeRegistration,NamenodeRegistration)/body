{
  super();
  this.bnRegistration=bnReg;
  this.nnRegistration=nnReg;
  InetSocketAddress bnAddress=NetUtils.createSocketAddr(bnRegistration.getAddress());
  Storage.LOG.info("EditLogBackupOutputStream connects to: " + bnAddress);
  try {
    this.backupNode=(NamenodeProtocol)RPC.getProxy(NamenodeProtocol.class,NamenodeProtocol.versionID,bnAddress,new HdfsConfiguration());
  }
 catch (  IOException e) {
    Storage.LOG.error("Error connecting to: " + bnAddress,e);
    throw e;
  }
  this.bufCurrent=new ArrayList<BufferedOp>();
  this.bufReady=new ArrayList<BufferedOp>();
  this.out=new DataOutputBuffer(DEFAULT_BUFFER_SIZE);
}
