{
  super();
  this.bnRegistration=bnReg;
  this.nnRegistration=nnReg;
  InetSocketAddress bnAddress=NetUtils.createSocketAddr(bnRegistration.getAddress());
  Storage.LOG.info("EditLogBackupOutputStream connects to: " + bnAddress);
  try {
    this.backupNode=RPC.getProxy(JournalProtocol.class,JournalProtocol.versionID,bnAddress,new HdfsConfiguration());
  }
 catch (  IOException e) {
    Storage.LOG.error("Error connecting to: " + bnAddress,e);
    throw e;
  }
  this.doubleBuf=new EditsDoubleBuffer(DEFAULT_BUFFER_SIZE);
  this.out=new DataOutputBuffer(DEFAULT_BUFFER_SIZE);
}
