{
  LOG.info("Starting test testSmallerThanOneStripeWithDecommn");
  int lbsCount=2;
  List<Integer> decommnNodeIndices=new ArrayList<>();
  decommnNodeIndices.add(0);
  decommnNodeIndices.add(2);
  decommnNodeIndices.add(2);
  List<Integer> targetNodeIndices=new ArrayList<>();
  targetNodeIndices.addAll(decommnNodeIndices);
  HashMap<Integer,List<String>> decommissionedNodes=new HashMap<>(lbsCount * decommnNodeIndices.size());
  int dataBlksNum=NUM_DATA_BLOCKS - 2;
  List<LocatedBlock> lbs=createLocatedStripedBlocks(lbsCount,dataBlksNum,NUM_PARITY_BLOCKS,decommnNodeIndices,targetNodeIndices,decommissionedNodes);
  List<HashMap<DatanodeInfo,Byte>> locToIndexList=new ArrayList<>();
  List<HashMap<DatanodeInfo,Token<BlockTokenIdentifier>>> locToTokenList=new ArrayList<>();
  prepareBlockIndexAndTokenList(lbs,locToIndexList,locToTokenList);
  dm.sortLocatedBlocks(null,lbs);
  int blkGrpWidth=dataBlksNum + NUM_PARITY_BLOCKS;
  assertDecommnNodePosition(blkGrpWidth,decommissionedNodes,lbs);
  assertBlockIndexAndTokenPosition(lbs,locToIndexList,locToTokenList);
}
