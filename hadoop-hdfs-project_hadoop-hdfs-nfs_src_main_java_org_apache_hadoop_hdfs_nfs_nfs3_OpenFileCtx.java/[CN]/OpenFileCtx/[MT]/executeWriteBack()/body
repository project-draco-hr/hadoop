{
  Preconditions.checkState(asyncStatus,"The openFileCtx has false async status");
  try {
    while (activeState) {
      WriteCtx toWrite=offerNextToWrite();
      if (toWrite != null) {
        doSingleWrite(toWrite);
        updateLastAccessTime();
      }
 else {
        break;
      }
    }
    if (!activeState && LOG.isDebugEnabled()) {
      LOG.debug("The openFileCtx is not active anymore, fileId: " + latestAttr.getFileId());
    }
  }
  finally {
    asyncStatus=false;
  }
}
