{
  byte[] result=new byte[dataLen];
  int n=readAll(in,result,0,dataLen);
  Assert.assertEquals(dataLen,n);
  byte[] expectedData=new byte[n];
  System.arraycopy(data,0,expectedData,0,n);
  Assert.assertArrayEquals(result,expectedData);
  n=in.read(result,0,dataLen);
  Assert.assertEquals(n,-1);
  in.close();
}
