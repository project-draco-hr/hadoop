{
  OutputStream out=getOutputStream(defaultBufferSize);
  writeData(out);
  InputStream in=getInputStream(defaultBufferSize);
  seekCheck(in,dataLen / 3);
  seekCheck(in,0);
  seekCheck(in,dataLen / 2);
  final long pos=((Seekable)in).getPos();
  try {
    seekCheck(in,-3);
    Assert.fail("Seek to negative offset should fail.");
  }
 catch (  EOFException e) {
    GenericTestUtils.assertExceptionContains(FSExceptionMessages.NEGATIVE_SEEK,e);
  }
  Assert.assertEquals(pos,((Seekable)in).getPos());
  try {
    seekCheck(in,dataLen + 3);
    Assert.fail("Seek after EOF should fail.");
  }
 catch (  IOException e) {
    GenericTestUtils.assertExceptionContains("Cannot seek after EOF",e);
  }
  Assert.assertEquals(pos,((Seekable)in).getPos());
  in.close();
}
