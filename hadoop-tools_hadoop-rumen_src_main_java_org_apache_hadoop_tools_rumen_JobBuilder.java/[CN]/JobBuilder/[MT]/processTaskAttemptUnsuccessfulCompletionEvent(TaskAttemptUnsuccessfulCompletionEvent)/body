{
  ParsedTaskAttempt attempt=getOrMakeTaskAttempt(event.getTaskType(),event.getTaskId().toString(),event.getTaskAttemptId().toString());
  if (attempt == null) {
    return;
  }
  attempt.setResult(getPre21Value(event.getTaskStatus()));
  attempt.setHostName(event.getHostname(),event.getRackName());
  ParsedHost pHost=getAndRecordParsedHost(event.getRackName(),event.getHostname());
  if (pHost != null) {
    attempt.setLocation(pHost.makeLoggedLocation());
  }
  attempt.setFinishTime(event.getFinishTime());
  org.apache.hadoop.mapreduce.jobhistory.JhCounters counters=((TaskAttemptUnsuccessfulCompletion)event.getDatum()).counters;
  attempt.incorporateCounters(counters == null ? EMPTY_COUNTERS : counters);
  attempt.arraySetClockSplits(event.getClockSplits());
  attempt.arraySetCpuUsages(event.getCpuUsages());
  attempt.arraySetVMemKbytes(event.getVMemKbytes());
  attempt.arraySetPhysMemKbytes(event.getPhysMemKbytes());
  TaskAttemptUnsuccessfulCompletion t=(TaskAttemptUnsuccessfulCompletion)(event.getDatum());
  attempt.putDiagnosticInfo(t.error.toString());
}
