{
  if (!NativeCodeLoader.isNativeCodeLoaded()) {
    LOG.info("Not testing netgroups, " + "this test only runs when native code is compiled");
    return;
  }
  String groupMappingClassName=System.getProperty("TestAccessControlListGroupMapping");
  if (groupMappingClassName == null) {
    LOG.info("Not testing netgroups, no group mapping class specified, " + "use -DTestAccessControlListGroupMapping=$className to specify " + "group mapping class (must implement GroupMappingServiceProvider "+ "interface and support netgroups)");
    return;
  }
  LOG.info("Testing netgroups using: " + groupMappingClassName);
  Configuration conf=new Configuration();
  conf.set(CommonConfigurationKeysPublic.HADOOP_SECURITY_GROUP_MAPPING,groupMappingClassName);
  Groups groups=Groups.getUserToGroupsMappingService(conf);
  AccessControlList acl;
  acl=new AccessControlList("ja my");
  acl=new AccessControlList("sinatra ratpack,@lasVegas");
  acl=new AccessControlList(" somegroup,@someNetgroup");
  acl=new AccessControlList("carlPerkins ratpack,@lasVegas");
  acl.addGroup("@memphis");
  validateNetgroups(groups,acl);
  groups.refresh();
  validateNetgroups(groups,acl);
}
