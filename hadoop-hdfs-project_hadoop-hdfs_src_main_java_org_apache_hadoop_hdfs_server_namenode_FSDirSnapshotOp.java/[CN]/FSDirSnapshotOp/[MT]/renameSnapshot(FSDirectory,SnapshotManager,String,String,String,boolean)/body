{
  final INodesInPath iip=fsd.getINodesInPath4Write(path);
  if (fsd.isPermissionEnabled()) {
    FSPermissionChecker pc=fsd.getPermissionChecker();
    fsd.checkOwner(pc,iip);
  }
  verifySnapshotName(fsd,snapshotNewName,path);
  fsd.writeLock();
  try {
    snapshotManager.renameSnapshot(iip,path,snapshotOldName,snapshotNewName);
  }
  finally {
    fsd.writeUnlock();
  }
  fsd.getEditLog().logRenameSnapshot(path,snapshotOldName,snapshotNewName,logRetryCache);
}
