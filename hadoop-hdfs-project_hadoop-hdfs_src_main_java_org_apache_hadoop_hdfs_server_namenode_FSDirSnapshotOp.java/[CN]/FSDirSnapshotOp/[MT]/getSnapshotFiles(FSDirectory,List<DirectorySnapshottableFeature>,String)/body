{
  ArrayList<String> snaps=new ArrayList<>();
  for (  DirectorySnapshottableFeature sf : lsf) {
    final ReadOnlyList<Snapshot> lsnap=sf.getSnapshotList();
    for (    Snapshot s : lsnap) {
      final String dirName=s.getRoot().getRootFullPathName();
      if (!file.startsWith(dirName)) {
        break;
      }
      String snapname=s.getRoot().getFullPathName();
      if (dirName.equals(Path.SEPARATOR)) {
        snapname+=Path.SEPARATOR;
      }
      snapname+=file.substring(file.indexOf(dirName) + dirName.length());
      if (fsd.getFSNamesystem().getFileInfo(snapname,true) != null) {
        snaps.add(snapname);
      }
    }
  }
  return snaps;
}
