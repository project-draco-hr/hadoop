{
  final int clusterMemory=clusterResource.getMemory();
  final int usedMemory=childQueue.getUsedResources().getMemory();
  float queueLimit=0.0f;
  float utilization=0.0f;
  float usedCapacity=0.0f;
  if (clusterMemory > 0) {
    queueLimit=clusterMemory * childQueue.getAbsoluteCapacity();
    final float parentAbsoluteCapacity=(parentQueue == null) ? 1.0f : parentQueue.getAbsoluteCapacity();
    utilization=(usedMemory / queueLimit);
    usedCapacity=(usedMemory / (clusterMemory * parentAbsoluteCapacity));
  }
  childQueue.setUtilization(utilization);
  childQueue.setUsedCapacity(usedCapacity);
  int available=Math.max((roundUp(minimumAllocation,(int)queueLimit) - usedMemory),0);
  childQueue.getMetrics().setAvailableResourcesToQueue(Resources.createResource(available));
}
