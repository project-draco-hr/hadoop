{
  AppContext context=mock(AppContext.class);
  ApplicationId appId=appAttemptId.getApplicationId();
  when(context.getApplicationID()).thenReturn(appId);
  when(context.getApplicationAttemptId()).thenReturn(appAttemptId);
  when(context.getJob(isA(JobId.class))).thenReturn(job);
  when(context.getClusterInfo()).thenReturn(new ClusterInfo(BuilderUtils.newResource(1024),BuilderUtils.newResource(10240)));
  when(context.getEventHandler()).thenReturn(new EventHandler(){
    @Override public void handle(    Event event){
      if (event instanceof TaskAttemptContainerAssignedEvent) {
        events.add((TaskAttemptContainerAssignedEvent)event);
      }
 else       if (event instanceof TaskAttemptKillEvent) {
        taskAttemptKillEvents.add((TaskAttemptKillEvent)event);
      }
 else       if (event instanceof JobUpdatedNodesEvent) {
        jobUpdatedNodeEvents.add((JobUpdatedNodesEvent)event);
      }
    }
  }
);
  return context;
}
