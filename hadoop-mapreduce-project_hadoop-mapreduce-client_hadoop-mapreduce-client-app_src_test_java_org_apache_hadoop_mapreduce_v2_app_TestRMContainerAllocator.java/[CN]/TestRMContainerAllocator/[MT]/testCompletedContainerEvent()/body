{
  RMContainerAllocator allocator=new RMContainerAllocator(mock(ClientService.class),mock(AppContext.class));
  TaskAttemptId attemptId=MRBuilderUtils.newTaskAttemptId(MRBuilderUtils.newTaskId(MRBuilderUtils.newJobId(1,1,1),1,TaskType.MAP),1);
  ContainerId containerId=BuilderUtils.newContainerId(1,1,1,1);
  ContainerStatus status=BuilderUtils.newContainerStatus(containerId,ContainerState.RUNNING,"",0);
  ContainerStatus abortedStatus=BuilderUtils.newContainerStatus(containerId,ContainerState.RUNNING,"",YarnConfiguration.ABORTED_CONTAINER_EXIT_STATUS);
  TaskAttemptEvent event=allocator.createContainerFinishedEvent(status,attemptId);
  Assert.assertEquals(TaskAttemptEventType.TA_CONTAINER_COMPLETED,event.getType());
  TaskAttemptEvent abortedEvent=allocator.createContainerFinishedEvent(abortedStatus,attemptId);
  Assert.assertEquals(TaskAttemptEventType.TA_KILL,abortedEvent.getType());
}
