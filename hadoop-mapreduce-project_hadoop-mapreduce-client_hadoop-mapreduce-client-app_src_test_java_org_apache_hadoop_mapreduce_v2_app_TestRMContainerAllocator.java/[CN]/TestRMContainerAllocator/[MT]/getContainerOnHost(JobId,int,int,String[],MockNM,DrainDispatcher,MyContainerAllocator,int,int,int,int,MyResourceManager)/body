{
  ContainerRequestEvent reqEvent=createReq(jobId,taskAttemptId,memory,hosts);
  allocator.sendRequest(reqEvent);
  List<TaskAttemptContainerAssignedEvent> assigned=allocator.schedule();
  dispatcher.await();
  assertBlacklistAdditionsAndRemovals(expectedAdditions1,expectedRemovals1,rm);
  Assert.assertEquals("No of assignments must be 0",0,assigned.size());
  mockNM.nodeHeartbeat(true);
  dispatcher.await();
  assigned=allocator.schedule();
  dispatcher.await();
  assertBlacklistAdditionsAndRemovals(expectedAdditions2,expectedRemovals2,rm);
  return assigned;
}
