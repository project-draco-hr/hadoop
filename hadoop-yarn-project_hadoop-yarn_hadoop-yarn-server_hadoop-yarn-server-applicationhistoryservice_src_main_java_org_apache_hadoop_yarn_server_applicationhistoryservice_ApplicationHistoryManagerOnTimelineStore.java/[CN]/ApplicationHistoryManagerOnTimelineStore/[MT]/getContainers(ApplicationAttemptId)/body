{
  ApplicationReportExt app=getApplication(appAttemptId.getApplicationId(),ApplicationReportField.USER_AND_ACLS);
  checkAccess(app);
  TimelineEntities entities=timelineDataManager.getEntities(ContainerMetricsConstants.ENTITY_TYPE,new NameValuePair(ContainerMetricsConstants.PARENT_PRIMARIY_FILTER,appAttemptId.toString()),null,null,null,null,null,Long.MAX_VALUE,EnumSet.allOf(Field.class),UserGroupInformation.getLoginUser());
  Map<ContainerId,ContainerReport> containers=new LinkedHashMap<ContainerId,ContainerReport>();
  if (entities != null && entities.getEntities() != null) {
    for (    TimelineEntity entity : entities.getEntities()) {
      ContainerReport container=convertToContainerReport(entity,serverHttpAddress,app.appReport.getUser());
      containers.put(container.getContainerId(),container);
    }
  }
  return containers;
}
