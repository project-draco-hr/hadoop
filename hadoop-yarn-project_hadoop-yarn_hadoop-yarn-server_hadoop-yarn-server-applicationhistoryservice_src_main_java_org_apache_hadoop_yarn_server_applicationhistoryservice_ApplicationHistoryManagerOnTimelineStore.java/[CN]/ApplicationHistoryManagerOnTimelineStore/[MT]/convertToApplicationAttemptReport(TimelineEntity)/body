{
  String host=null;
  int rpcPort=-1;
  ContainerId amContainerId=null;
  String trackingUrl=null;
  String originalTrackingUrl=null;
  String diagnosticsInfo=null;
  YarnApplicationAttemptState state=null;
  List<TimelineEvent> events=entity.getEvents();
  if (events != null) {
    for (    TimelineEvent event : events) {
      if (event.getEventType().equals(AppAttemptMetricsConstants.REGISTERED_EVENT_TYPE)) {
        Map<String,Object> eventInfo=event.getEventInfo();
        if (eventInfo == null) {
          continue;
        }
        if (eventInfo.containsKey(AppAttemptMetricsConstants.HOST_EVENT_INFO)) {
          host=eventInfo.get(AppAttemptMetricsConstants.HOST_EVENT_INFO).toString();
        }
        if (eventInfo.containsKey(AppAttemptMetricsConstants.RPC_PORT_EVENT_INFO)) {
          rpcPort=(Integer)eventInfo.get(AppAttemptMetricsConstants.RPC_PORT_EVENT_INFO);
        }
        if (eventInfo.containsKey(AppAttemptMetricsConstants.MASTER_CONTAINER_EVENT_INFO)) {
          amContainerId=ConverterUtils.toContainerId(eventInfo.get(AppAttemptMetricsConstants.MASTER_CONTAINER_EVENT_INFO).toString());
        }
      }
 else       if (event.getEventType().equals(AppAttemptMetricsConstants.FINISHED_EVENT_TYPE)) {
        Map<String,Object> eventInfo=event.getEventInfo();
        if (eventInfo == null) {
          continue;
        }
        if (eventInfo.containsKey(AppAttemptMetricsConstants.TRACKING_URL_EVENT_INFO)) {
          trackingUrl=eventInfo.get(AppAttemptMetricsConstants.TRACKING_URL_EVENT_INFO).toString();
        }
        if (eventInfo.containsKey(AppAttemptMetricsConstants.ORIGINAL_TRACKING_URL_EVENT_INFO)) {
          originalTrackingUrl=eventInfo.get(AppAttemptMetricsConstants.ORIGINAL_TRACKING_URL_EVENT_INFO).toString();
        }
        if (eventInfo.containsKey(AppAttemptMetricsConstants.DIAGNOSTICS_INFO_EVENT_INFO)) {
          diagnosticsInfo=eventInfo.get(AppAttemptMetricsConstants.DIAGNOSTICS_INFO_EVENT_INFO).toString();
        }
        if (eventInfo.containsKey(AppAttemptMetricsConstants.STATE_EVENT_INFO)) {
          state=YarnApplicationAttemptState.valueOf(eventInfo.get(AppAttemptMetricsConstants.STATE_EVENT_INFO).toString());
        }
      }
    }
  }
  return ApplicationAttemptReport.newInstance(ConverterUtils.toApplicationAttemptId(entity.getEntityId()),host,rpcPort,trackingUrl,originalTrackingUrl,diagnosticsInfo,state,amContainerId);
}
