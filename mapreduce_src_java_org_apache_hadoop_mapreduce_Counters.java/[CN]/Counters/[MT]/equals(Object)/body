{
  if (genericRight instanceof Counters) {
    Iterator<CounterGroup> right=((Counters)genericRight).groups.values().iterator();
    Iterator<CounterGroup> left=groups.values().iterator();
    while (left.hasNext()) {
      if (!right.hasNext() || !left.next().equals(right.next())) {
        return false;
      }
    }
    return !right.hasNext();
  }
  return false;
}
