{
  TestSetup setup=new TestSetup(new TestSuite(TestSpeculativeExecution.class)){
    protected void setUp() throws Exception {
      JobConf conf=new JobConf();
      conf.set(JTConfig.JT_IPC_ADDRESS,"localhost:0");
      conf.set(JTConfig.JT_HTTP_ADDRESS,"0.0.0.0:0");
      conf.set(JTConfig.JT_INSTRUMENTATION,FakeJobTrackerMetricsInst.class.getName());
      jobTracker=new FakeJobTracker(conf,(clock=new SpecFakeClock()),trackers);
      fakeInst=(FakeJobTrackerMetricsInst)jobTracker.getInstrumentation();
      for (      String tracker : trackers) {
        FakeObjectUtilities.establishFirstContact(jobTracker,tracker);
      }
    }
    protected void tearDown() throws Exception {
    }
  }
;
  return setup;
}
