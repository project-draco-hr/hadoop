{
  if (state == StreamState.Initial) {
    validDataHoldingSize=fill(nextFileOffset);
  }
  long dataReloadSize=0;
switch ((int)validDataHoldingSize) {
case -1:
    state=StreamState.StreamEnd;
  return -1;
case 0:
dataReloadSize=fill(nextFileOffset);
if (dataReloadSize <= 0) {
state=StreamState.StreamEnd;
return (int)dataReloadSize;
}
 else {
validDataHoldingSize=dataReloadSize;
}
break;
default :
break;
}
if (bufferOffset >= validDataHoldingSize) {
dataReloadSize=fill(nextFileOffset);
}
if (bufferOffset >= ((dataReloadSize == 0) ? validDataHoldingSize : dataReloadSize)) {
state=StreamState.StreamEnd;
return -1;
}
validDataHoldingSize=((dataReloadSize == 0) ? validDataHoldingSize : dataReloadSize);
state=StreamState.DataCachedInLocalBuffer;
return 0;
}
