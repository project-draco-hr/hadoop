{
  fs.create(path).close();
  fs.setXAttr(path,name1,value1,EnumSet.of(XAttrSetFlag.CREATE));
  fs.setXAttr(path,name2,value2,EnumSet.of(XAttrSetFlag.CREATE));
  HATestUtil.waitForStandbyToCatchUp(nn0,nn1);
  List<XAttr> xAttrs=nn1.getRpcServer().getXAttrs("/file",null);
  assertEquals(2,xAttrs.size());
  cluster.shutdownNameNode(0);
  cluster.shutdownNameNode(0);
  cluster.transitionToActive(1);
  Map<String,byte[]> xattrs=fs.getXAttrs(path);
  Assert.assertEquals(xattrs.size(),2);
  Assert.assertArrayEquals(value1,xattrs.get(name1));
  Assert.assertArrayEquals(value2,xattrs.get(name2));
  fs.delete(path,true);
}
