{
  try {
    Map<Class,Service> map=new LinkedHashMap<Class,Service>();
    Class[] classes=getConfig().getClasses(getPrefixedName(CONF_SERVICES));
    Class[] classesExt=getConfig().getClasses(getPrefixedName(CONF_SERVICES_EXT));
    List<Service> list=new ArrayList<Service>();
    loadServices(classes,list);
    loadServices(classesExt,list);
    for (    Service service : list) {
      if (map.containsKey(service.getInterface())) {
        log.debug("Replacing service [{}] implementation [{}]",service.getInterface(),service.getClass());
      }
      map.put(service.getInterface(),service);
    }
    list=new ArrayList<Service>();
    for (    Map.Entry<Class,Service> entry : map.entrySet()) {
      list.add(entry.getValue());
    }
    return list;
  }
 catch (  RuntimeException ex) {
    throw new ServerException(ServerException.ERROR.S08,ex.getMessage(),ex);
  }
}
