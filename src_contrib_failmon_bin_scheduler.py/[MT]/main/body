def main():
    getJobs('./conf/global.config')
    for job in jobs:
        print 'Configuration: ', job.param, 'every', job.interval, 'seconds'
    globalInterval = listGCD(jobs)
    while True:
        time.sleep(globalInterval)
        params = []
        for job in jobs:
            job.counter -= globalInterval
            if (job.counter <= 0):
                params.append(job.param)
                job.reset()
        if (len(params) == 0):
            continue
        onlyStr = ('--only ' + params[0])
        for i in range(1, len(params)):
            onlyStr += (',' + params[i])
        command = ('bin/failmon.sh ' + onlyStr)
        hosts = open('./conf/hosts.list', 'r')
        threadList = []
        for i in range(0, connections):
            threadList.append(sshThread(i, username, command, failmonDir))
        cur = 0
        for host in hosts:
            threadList[cur].addHost(host.strip().rstrip())
            cur += 1
            if (cur == len(threadList)):
                cur = 0
        for ready in threadList:
            ready.start()
        for ssht in threading.enumerate():
            if (ssht != threading.currentThread()):
                ssht.join()
        if ('upload' in params):
            mergeFiles()
    return
