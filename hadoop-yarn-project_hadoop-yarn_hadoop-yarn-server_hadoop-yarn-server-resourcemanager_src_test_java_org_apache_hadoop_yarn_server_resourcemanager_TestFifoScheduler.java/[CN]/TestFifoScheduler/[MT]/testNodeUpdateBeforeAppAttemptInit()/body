{
  FifoScheduler scheduler=new FifoScheduler();
  MockRM rm=new MockRM(conf);
  scheduler.setRMContext(rm.getRMContext());
  scheduler.init(conf);
  scheduler.start();
  scheduler.reinitialize(conf,rm.getRMContext());
  RMNode node=MockNodes.newNodeInfo(1,Resources.createResource(1024,4),1,"127.0.0.1");
  scheduler.handle(new NodeAddedSchedulerEvent(node));
  ApplicationId appId=ApplicationId.newInstance(0,1);
  scheduler.addApplication(appId,"queue1","user1");
  NodeUpdateSchedulerEvent updateEvent=new NodeUpdateSchedulerEvent(node);
  try {
    scheduler.handle(updateEvent);
  }
 catch (  NullPointerException e) {
    Assert.fail();
  }
  ApplicationAttemptId attId=ApplicationAttemptId.newInstance(appId,1);
  scheduler.addApplicationAttempt(attId,false,true);
  rm.stop();
}
