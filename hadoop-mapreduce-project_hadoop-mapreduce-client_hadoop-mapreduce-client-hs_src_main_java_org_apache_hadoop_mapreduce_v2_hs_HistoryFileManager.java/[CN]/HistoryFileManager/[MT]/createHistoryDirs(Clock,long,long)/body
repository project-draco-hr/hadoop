{
  long start=clock.getTime();
  boolean done=false;
  int counter=0;
  while (!done && ((timeOutMillis == -1) || (clock.getTime() - start < timeOutMillis))) {
    done=tryCreatingHistoryDirs(counter++ % 3 == 0);
    try {
      Thread.sleep(intervalCheckMillis);
    }
 catch (    InterruptedException ex) {
      throw new YarnRuntimeException(ex);
    }
  }
  if (!done) {
    throw new YarnRuntimeException("Timed out '" + timeOutMillis + "ms' waiting for FileSystem to become available");
  }
}
