{
  boolean existsInExistingCache=false;
synchronized (existingDoneSubdirs) {
    if (existingDoneSubdirs.contains(path))     existsInExistingCache=true;
  }
  try {
    doneDirFc.getFileStatus(path);
    if (!existsInExistingCache) {
      existingDoneSubdirs.add(path);
      if (LOG.isDebugEnabled()) {
        LOG.debug("JobHistory.maybeMakeSubdirectory -- We believed " + path + " already existed, but it didn't.");
      }
    }
  }
 catch (  FileNotFoundException fnfE) {
    try {
      FsPermission fsp=new FsPermission(JobHistoryUtils.HISTORY_DONE_DIR_PERMISSION);
      doneDirFc.mkdir(path,fsp,true);
      FileStatus fsStatus=doneDirFc.getFileStatus(path);
      LOG.info("Perms after creating " + fsStatus.getPermission().toShort() + ", Expected: "+ fsp.toShort());
      if (fsStatus.getPermission().toShort() != fsp.toShort()) {
        LOG.info("Explicitly setting permissions to : " + fsp.toShort() + ", "+ fsp);
        doneDirFc.setPermission(path,fsp);
      }
synchronized (existingDoneSubdirs) {
        existingDoneSubdirs.add(path);
      }
    }
 catch (    FileAlreadyExistsException faeE) {
    }
  }
}
