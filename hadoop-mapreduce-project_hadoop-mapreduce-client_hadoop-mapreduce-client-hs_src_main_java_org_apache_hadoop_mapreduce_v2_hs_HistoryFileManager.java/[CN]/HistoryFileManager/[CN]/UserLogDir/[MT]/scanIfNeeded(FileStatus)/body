{
  long newModTime=fs.getModificationTime();
  if (modTime != newModTime || (scanTime / 1000) == (modTime / 1000) || (scanTime / 1000 + 1) == (modTime / 1000)) {
    scanTime=System.currentTimeMillis();
    Path p=fs.getPath();
    try {
      scanIntermediateDirectory(p);
      modTime=newModTime;
    }
 catch (    IOException e) {
      LOG.error("Error while trying to scan the directory " + p,e);
    }
  }
 else {
    if (LOG.isDebugEnabled()) {
      LOG.debug("Scan not needed of " + fs.getPath());
    }
    scanTime=System.currentTimeMillis();
  }
}
