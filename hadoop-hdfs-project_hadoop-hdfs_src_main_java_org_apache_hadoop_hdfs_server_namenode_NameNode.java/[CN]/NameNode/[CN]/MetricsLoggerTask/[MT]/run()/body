{
  if (!MetricsLog.isInfoEnabled() || !hasAppenders(MetricsLog) || OBJECT_NAME == null) {
    return;
  }
  MetricsLog.info(" >> Begin NameNode metrics dump");
  final MBeanServer server=ManagementFactory.getPlatformMBeanServer();
  for (  final ObjectName mbeanName : server.queryNames(OBJECT_NAME,null)) {
    try {
      MBeanInfo mBeanInfo=server.getMBeanInfo(mbeanName);
      final String mBeanNameName=MBeans.getMbeanNameName(mbeanName);
      final Set<String> attributeNames=getFilteredAttributes(mBeanInfo);
      final AttributeList attributes=server.getAttributes(mbeanName,attributeNames.toArray(new String[attributeNames.size()]));
      for (      Object o : attributes) {
        final Attribute attribute=(Attribute)o;
        final Object value=attribute.getValue();
        final String valueStr=(value != null) ? value.toString() : "null";
        MetricsLog.info(mBeanNameName + ":" + attribute.getName()+ "="+ (valueStr.length() < MAX_LOGGED_VALUE_LEN ? valueStr : valueStr.substring(0,MAX_LOGGED_VALUE_LEN) + "..."));
      }
    }
 catch (    Exception e) {
      MetricsLog.error("Failed to get NameNode metrics for mbean " + mbeanName.toString(),e);
    }
  }
  MetricsLog.info(" << End NameNode metrics dump");
}
