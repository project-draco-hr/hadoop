{
  UserGroupInformation.setConfiguration(conf);
  loginAsNameNodeUser(conf);
  NameNode.initMetrics(conf,this.getRole());
  loadNamesystem(conf);
  rpcServer=createRpcServer(conf);
  try {
    validateConfigurationSettings(conf);
  }
 catch (  IOException e) {
    LOG.fatal(e.toString());
    throw e;
  }
  activate(conf);
  LOG.info(getRole() + " up at: " + rpcServer.getRpcAddress());
  if (rpcServer.getServiceRpcAddress() != null) {
    LOG.info(getRole() + " service server is up at: " + rpcServer.getServiceRpcAddress());
  }
}
