{
  for (Iterator<URI> it=dirsToFormat.iterator(); it.hasNext(); ) {
    File curDir=new File(it.next().getPath());
    if (!curDir.exists() || (curDir.isDirectory() && FileUtil.listFiles(curDir).length == 0))     continue;
    if (force) {
      System.err.println("Storage directory exists in " + curDir + ". Formatting anyway.");
      continue;
    }
    if (!interactive) {
      System.err.println("Running in non-interactive mode, and image appears to exist in " + curDir + ". Not formatting.");
      return false;
    }
    if (!confirmPrompt("Re-format filesystem in " + curDir + " ?")) {
      System.err.println("Format aborted in " + curDir);
      return false;
    }
  }
  return true;
}
