{
  boolean eosBefore=eos;
  if (lastChunkLen < 0 && startOffset > firstChunkOffset && len > 0) {
    int toSkip=(int)(startOffset - firstChunkOffset);
    if (super.readAndDiscard(toSkip) != toSkip) {
      throw new IOException("Could not skip required number of bytes");
    }
  }
  int nRead=super.read(buf,off,len);
  if (eos && !eosBefore && nRead >= 0) {
    if (needChecksum()) {
      sendReadResult(peer,Status.CHECKSUM_OK);
    }
 else {
      sendReadResult(peer,Status.SUCCESS);
    }
  }
  return nRead;
}
