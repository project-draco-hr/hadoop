{
  if (dataState != DataState.ALLOW_DUMP) {
    if (LOG.isTraceEnabled()) {
      LOG.trace("No need to dump with status(replied,dataState):" + "(" + replied + ","+ dataState+ ")");
    }
    return 0;
  }
  this.raf=raf;
  dumpFileOffset=dumpOut.getChannel().position();
  dumpOut.write(data,0,count);
  if (LOG.isDebugEnabled()) {
    LOG.debug("After dump, new dumpFileOffset:" + dumpFileOffset);
  }
  data=null;
  dataState=DataState.DUMPED;
  return count;
}
