{
  final List<FsVolumeSpi> volumes=new ArrayList<FsVolumeSpi>();
  volumes.add(Mockito.mock(FsVolumeSpi.class));
  Mockito.when(volumes.get(0).getAvailable()).thenReturn(100L);
  volumes.add(Mockito.mock(FsVolumeSpi.class));
  Mockito.when(volumes.get(1).getAvailable()).thenReturn(200L);
  @SuppressWarnings("unchecked") final RoundRobinVolumesPolicy<FsVolumeSpi> policy=(RoundRobinVolumesPolicy<FsVolumeSpi>)ReflectionUtils.newInstance(RoundRobinVolumesPolicy.class,null);
  Assert.assertEquals(volumes.get(0),policy.chooseVolume(volumes,0));
  Assert.assertEquals(volumes.get(1),policy.chooseVolume(volumes,0));
  Assert.assertEquals(volumes.get(0),policy.chooseVolume(volumes,0));
  Assert.assertEquals(volumes.get(1),policy.chooseVolume(volumes,0));
  Assert.assertEquals(volumes.get(1),policy.chooseVolume(volumes,150));
  try {
    policy.chooseVolume(volumes,Long.MAX_VALUE);
    Assert.fail();
  }
 catch (  IOException e) {
  }
}
