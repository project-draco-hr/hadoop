{
  if (dir instanceof INodeDirectoryWithSnapshot) {
    INodeDirectoryWithSnapshot sdir=(INodeDirectoryWithSnapshot)dir;
    sdir.getDiffs().deleteSnapshotDiff(snapshot,collectedBlocks);
  }
  ReadOnlyList<INode> children=dir.getChildrenList(null);
  for (  INode child : children) {
    if (child instanceof INodeDirectory) {
      deleteDiffsForSnapshot(snapshot,(INodeDirectory)child,collectedBlocks);
    }
  }
}
