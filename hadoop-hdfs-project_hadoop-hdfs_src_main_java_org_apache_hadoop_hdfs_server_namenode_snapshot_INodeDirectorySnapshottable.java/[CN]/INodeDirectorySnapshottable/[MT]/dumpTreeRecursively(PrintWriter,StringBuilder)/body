{
  super.dumpTreeRecursively(out,prefix);
  out.print(prefix);
  out.print(snapshots.size());
  out.print(snapshots.size() <= 1 ? " snapshot of " : " snapshots of ");
  out.println(getLocalName());
  dumpTreeRecursively(out,prefix,new Iterable<INodeDirectoryWithSnapshot>(){
    @Override public Iterator<INodeDirectoryWithSnapshot> iterator(){
      return new Iterator<INodeDirectoryWithSnapshot>(){
        final Iterator<Snapshot> i=snapshots.iterator();
        @Override public boolean hasNext(){
          return i.hasNext();
        }
        @Override public INodeDirectoryWithSnapshot next(){
          return i.next().getRoot();
        }
        @Override public void remove(){
          throw new UnsupportedOperationException();
        }
      }
;
    }
  }
);
}
