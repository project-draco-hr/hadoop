{
  if (latest == null) {
    Preconditions.checkState(getLastSnapshot() == null,"latest == null but getLastSnapshot() != null, this=%s",this);
    return replaceSelf4INodeDirectory(inodeMap);
  }
 else {
    return replaceSelf4INodeDirectoryWithSnapshot(inodeMap).recordModification(latest,null);
  }
}
