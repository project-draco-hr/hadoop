{
  if (latest == null) {
    Preconditions.checkState(getDirectoryWithSnapshotFeature().getLastSnapshot() == null,"latest == null but getLastSnapshot() != null, this=%s",this);
  }
  INodeDirectory dir=replaceSelf4INodeDirectory(inodeMap);
  if (latest != null) {
    dir.recordModification(latest);
  }
  return dir;
}
