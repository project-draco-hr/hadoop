{
  StringBuilder strBuffer=new StringBuilder();
  String fromStr=from == null ? "current directory" : "snapshot " + from.getRoot().getLocalName();
  String toStr=to == null ? "current directory" : "snapshot " + to.getRoot().getLocalName();
  strBuffer.append("Diffence between snapshot " + fromStr + " and "+ toStr+ " under directory "+ snapshotRoot.getFullPathName()+ ":\n");
  if (!diffMap.isEmpty()) {
    for (    Map.Entry<INodeDirectoryWithSnapshot,ChildrenDiff> entry : diffMap.entrySet()) {
      strBuffer.append("M\t" + entry.getKey().getFullPathName() + "\n");
      entry.getValue().printDiff(strBuffer,entry.getKey(),from == null || (to != null && Snapshot.ID_COMPARATOR.compare(from,to) > 0));
    }
  }
  return strBuffer.toString();
}
