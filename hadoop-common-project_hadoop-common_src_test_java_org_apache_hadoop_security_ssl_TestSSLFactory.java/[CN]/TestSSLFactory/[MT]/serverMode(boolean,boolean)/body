{
  Configuration conf=createConfiguration(clientCert,true);
  SSLFactory sslFactory=new SSLFactory(SSLFactory.Mode.SERVER,conf);
  try {
    sslFactory.init();
    Assert.assertNotNull(sslFactory.createSSLServerSocketFactory());
    Assert.assertEquals(clientCert,sslFactory.isClientCertRequired());
    if (socket) {
      sslFactory.createSSLSocketFactory();
    }
 else {
      sslFactory.getHostnameVerifier();
    }
  }
  finally {
    sslFactory.destroy();
  }
}
