{
  Runnable runnable;
  if (result.getHandshakeStatus() == SSLEngineResult.HandshakeStatus.NEED_TASK) {
    while ((runnable=engine.getDelegatedTask()) != null) {
      LOG.info("running delegated task...");
      runnable.run();
    }
    SSLEngineResult.HandshakeStatus hsStatus=engine.getHandshakeStatus();
    if (hsStatus == SSLEngineResult.HandshakeStatus.NEED_TASK) {
      throw new Exception("handshake shouldn't need additional tasks");
    }
  }
}
