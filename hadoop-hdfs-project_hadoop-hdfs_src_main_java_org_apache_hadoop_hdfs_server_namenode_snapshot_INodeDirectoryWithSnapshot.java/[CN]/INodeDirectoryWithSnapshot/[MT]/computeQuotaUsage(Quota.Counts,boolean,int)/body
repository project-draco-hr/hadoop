{
  if ((useCache && isQuotaSet()) || lastSnapshotId == Snapshot.INVALID_ID) {
    return super.computeQuotaUsage(counts,useCache,lastSnapshotId);
  }
  Snapshot lastSnapshot=diffs.getSnapshotById(lastSnapshotId);
  ReadOnlyList<INode> childrenList=getChildrenList(lastSnapshot);
  for (  INode child : childrenList) {
    child.computeQuotaUsage(counts,useCache,lastSnapshotId);
  }
  counts.add(Quota.NAMESPACE,1);
  return counts;
}
