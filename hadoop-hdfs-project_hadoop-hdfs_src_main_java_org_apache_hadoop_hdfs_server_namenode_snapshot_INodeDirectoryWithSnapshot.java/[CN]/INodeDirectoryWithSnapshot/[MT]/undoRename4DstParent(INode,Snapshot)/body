{
  boolean removeDeletedChild=diffs.removeChild(ListType.DELETED,deletedChild);
  final boolean added=addChild(deletedChild,true,removeDeletedChild ? null : latestSnapshot,null);
  if (added && !removeDeletedChild) {
    final Quota.Counts counts=deletedChild.computeQuotaUsage();
    addSpaceConsumed(counts.get(Quota.NAMESPACE),counts.get(Quota.DISKSPACE),false,Snapshot.INVALID_ID);
  }
}
