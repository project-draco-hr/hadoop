{
  Preconditions.checkArgument(!child.isDirectory(),"child is a directory, child=%s",child);
  if (latest == null) {
    return child;
  }
  final DirectoryDiff diff=diffs.checkAndAddLatestSnapshotDiff(latest,this);
  if (diff.getChild(child.getLocalNameBytes(),false,this) != null) {
    return child;
  }
  diff.diff.modify(snapshotCopy,child);
  return child;
}
