{
  final SnapshotDiff last=getLastSnapshotDiff();
  if (last != null && last.snapshot.equals(latest)) {
    return last;
  }
  final int size=getChildrenList(null).size();
  final SnapshotDiff d=addSnapshotDiff(latest,size);
  if (last != null) {
    last.posteriorDiff=d;
  }
  return d;
}
