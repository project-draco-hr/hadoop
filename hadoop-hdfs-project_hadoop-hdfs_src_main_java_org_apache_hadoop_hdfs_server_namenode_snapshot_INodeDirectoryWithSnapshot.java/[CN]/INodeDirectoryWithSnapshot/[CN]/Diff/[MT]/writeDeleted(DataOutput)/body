{
  if (deleted != null) {
    out.writeInt(deleted.size());
    for (    INode node : deleted) {
      if (node.isDirectory()) {
        FSImageSerialization.writeINodeDirectory((INodeDirectory)node,out);
      }
 else {
        int createdIndex=search(created,node);
        if (createdIndex < 0) {
          FSImageSerialization.writeINodeFile((INodeFile)node,out,true);
        }
 else {
          INodeFile cNode=(INodeFile)created.get(createdIndex);
          INodeFile dNode=(INodeFile)node;
          if (cNode.getBlocks() == dNode.getBlocks()) {
            FSImageSerialization.writeINodeFile(dNode,out,false);
          }
 else {
            FSImageSerialization.writeINodeFile(dNode,out,true);
          }
        }
      }
    }
  }
 else {
    out.writeInt(0);
  }
}
