{
  return new ReadOnlyList<INode>(){
    private List<INode> children=null;
    private List<INode> initChildren(){
      if (children == null) {
        final Diff combined=new Diff();
        for (SnapshotDiff d=SnapshotDiff.this; d != null; d=d.posteriorDiff) {
          combined.combinePostDiff(d.diff,null,false);
        }
        children=combined.apply2Current(ReadOnlyList.Util.asList(INodeDirectoryWithSnapshot.this.getChildrenList(null)));
      }
      return children;
    }
    @Override public Iterator<INode> iterator(){
      return initChildren().iterator();
    }
    @Override public boolean isEmpty(){
      return childrenSize == 0;
    }
    @Override public int size(){
      return childrenSize;
    }
    @Override public INode get(    int i){
      return initChildren().get(i);
    }
  }
;
}
