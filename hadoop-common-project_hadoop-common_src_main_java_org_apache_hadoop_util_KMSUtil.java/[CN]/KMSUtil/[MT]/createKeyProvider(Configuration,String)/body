{
  LOG.debug("Creating key provider with config key {}",configKeyName);
  final String providerUriStr=conf.getTrimmed(configKeyName,"");
  if (providerUriStr.isEmpty()) {
    return null;
  }
  final URI providerUri;
  try {
    providerUri=new URI(providerUriStr);
  }
 catch (  URISyntaxException e) {
    throw new IOException(e);
  }
  KeyProvider keyProvider=KeyProviderFactory.get(providerUri,conf);
  if (keyProvider == null) {
    throw new IOException("Could not instantiate KeyProvider from " + configKeyName + " setting of '"+ providerUriStr+ "'");
  }
  if (keyProvider.isTransient()) {
    throw new IOException("KeyProvider " + keyProvider.toString() + " was found but it is a transient provider.");
  }
  return keyProvider;
}
