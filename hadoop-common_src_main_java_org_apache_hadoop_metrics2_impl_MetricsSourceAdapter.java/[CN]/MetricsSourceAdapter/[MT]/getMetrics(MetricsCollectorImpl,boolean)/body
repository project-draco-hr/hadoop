{
  builder.setRecordFilter(recordFilter).setMetricFilter(metricFilter);
synchronized (this) {
    if (lastRecs == null && jmxCacheTS == 0) {
      all=true;
    }
  }
  try {
    source.getMetrics(builder,all);
  }
 catch (  Exception e) {
    LOG.error("Error getting metrics from source " + name,e);
  }
  for (  MetricsRecordBuilderImpl rb : builder) {
    for (    MetricsTag t : injectedTags) {
      rb.add(t);
    }
  }
synchronized (this) {
    lastRecs=builder.getRecords();
    return lastRecs;
  }
}
