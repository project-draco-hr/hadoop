{
  DockerLinuxContainerRuntime runtime=new DockerLinuxContainerRuntime(mockExecutor);
  runtime.initialize(conf);
  env.put("YARN_CONTAINER_RUNTIME_DOCKER_RUN_PRIVILEGED_CONTAINER","invalid-value");
  runtime.launchContainer(builder.build());
  PrivilegedOperation op=capturePrivilegedOperationAndVerifyArgs();
  List<String> args=op.getArguments();
  String dockerCommandFile=args.get(11);
  List<String> dockerCommands=Files.readAllLines(Paths.get(dockerCommandFile),Charset.forName("UTF-8"));
  Assert.assertEquals(1,dockerCommands.size());
  String command=dockerCommands.get(0);
  Assert.assertTrue("Unexpected --privileged in docker run args : " + command,!command.contains("--privileged"));
}
