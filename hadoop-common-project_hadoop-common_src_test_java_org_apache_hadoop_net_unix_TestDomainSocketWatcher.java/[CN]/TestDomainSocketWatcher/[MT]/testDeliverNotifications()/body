{
  DomainSocketWatcher watcher=new DomainSocketWatcher(10000000);
  DomainSocket pair[]=DomainSocket.socketpair();
  final CountDownLatch latch=new CountDownLatch(1);
  watcher.add(pair[1],new DomainSocketWatcher.Handler(){
    @Override public boolean handle(    DomainSocket sock){
      latch.countDown();
      return true;
    }
  }
);
  pair[0].close();
  latch.await();
  watcher.close();
}
