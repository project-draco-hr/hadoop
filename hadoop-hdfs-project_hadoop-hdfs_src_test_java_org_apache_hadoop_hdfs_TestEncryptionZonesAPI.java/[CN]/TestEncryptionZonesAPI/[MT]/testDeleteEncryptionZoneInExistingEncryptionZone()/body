{
  final HdfsAdmin dfsAdmin=new HdfsAdmin(FileSystem.getDefaultUri(conf),conf);
  FileSystem.mkdirs(fs,TEST_PATH,new FsPermission((short)0777));
  dfsAdmin.createEncryptionZone(TEST_PATH,null);
  FileSystem.mkdirs(fs,TEST_PATH_WITH_CHILD,new FsPermission((short)0777));
  try {
    dfsAdmin.deleteEncryptionZone(TEST_PATH_WITH_CHILD);
    fail("EZ in an EZ");
  }
 catch (  IOException e) {
    GenericTestUtils.assertExceptionContains("is not the root of an encryption zone",e);
  }
}
