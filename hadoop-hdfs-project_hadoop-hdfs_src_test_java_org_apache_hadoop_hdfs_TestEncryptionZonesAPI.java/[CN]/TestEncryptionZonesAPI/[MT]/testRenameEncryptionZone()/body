{
  final HdfsAdmin dfsAdmin=new HdfsAdmin(FileSystem.getDefaultUri(conf),conf);
  FileSystem.mkdirs(fs,TEST_PATH_WITH_CHILD,new FsPermission((short)0777));
  dfsAdmin.createEncryptionZone(TEST_PATH_WITH_CHILD,null);
  FileSystem.mkdirs(fs,TEST_PATH_WITH_MULTIPLE_CHILDREN,new FsPermission((short)0777));
  try {
    fs.rename(TEST_PATH_WITH_MULTIPLE_CHILDREN,TEST_PATH);
  }
 catch (  IOException e) {
    GenericTestUtils.assertExceptionContains("/test/foo/baz can't be moved from an encryption zone.",e);
  }
}
