{
  for (Iterator<LocalizerResourceRequestEvent> i=pending.iterator(); i.hasNext(); ) {
    LocalizerResourceRequestEvent evt=i.next();
    LocalizedResource nRsrc=evt.getResource();
    if (ResourceState.LOCALIZED.equals(nRsrc.getState())) {
      i.remove();
      continue;
    }
    if (nRsrc.tryAcquire()) {
      LocalResourceRequest nextRsrc=nRsrc.getRequest();
      LocalResource next=recordFactory.newRecordInstance(LocalResource.class);
      next.setResource(ConverterUtils.getYarnUrlFromPath(nextRsrc.getPath()));
      next.setTimestamp(nextRsrc.getTimestamp());
      next.setType(nextRsrc.getType());
      next.setVisibility(evt.getVisibility());
      scheduled.put(nextRsrc,evt);
      return next;
    }
  }
  return null;
}
