{
  if (item.stat.isDirectory()) {
    throw new PathIsDirectoryException(item.toString());
  }
  long oldLength=item.stat.getLen();
  if (newLength > oldLength) {
    throw new IllegalArgumentException("Cannot truncate to a larger file size. Current size: " + oldLength + ", truncate size: "+ newLength+ ".");
  }
  if (item.fs.truncate(item.path,newLength)) {
    out.println("Truncated " + item + " to length: "+ newLength);
  }
 else   if (waitOpt) {
    waitList.add(item);
  }
 else {
    out.println("Truncating " + item + " to length: "+ newLength+ ". "+ "Wait for block recovery to complete before further updating this "+ "file.");
  }
}
