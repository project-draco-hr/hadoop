{
  while (completedAppsInStateStore > this.maxCompletedAppsInStateStore) {
    ApplicationId removeId=completedApps.get(completedApps.size() - completedAppsInStateStore);
    RMApp removeApp=rmContext.getRMApps().get(removeId);
    LOG.info("Max number of completed apps kept in state store met:" + " maxCompletedAppsInStateStore = " + maxCompletedAppsInStateStore + ", removing app "+ removeApp.getApplicationId()+ " from state store.");
    rmContext.getStateStore().removeApplication(removeApp);
    completedAppsInStateStore--;
  }
  while (completedApps.size() > this.maxCompletedAppsInMemory) {
    ApplicationId removeId=completedApps.remove();
    LOG.info("Application should be expired, max number of completed apps" + " kept in memory met: maxCompletedAppsInMemory = " + this.maxCompletedAppsInMemory + ", removing app "+ removeId+ " from memory: ");
    rmContext.getRMApps().remove(removeId);
    this.applicationACLsManager.removeApplication(removeId);
  }
}
