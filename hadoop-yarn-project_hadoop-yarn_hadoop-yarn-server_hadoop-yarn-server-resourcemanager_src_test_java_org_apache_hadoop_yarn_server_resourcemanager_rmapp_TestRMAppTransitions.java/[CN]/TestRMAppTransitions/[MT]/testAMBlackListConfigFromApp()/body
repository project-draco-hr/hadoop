{
  float disableThreshold=0.9f;
  conf.setBoolean(YarnConfiguration.AM_BLACKLISTING_ENABLED,false);
  ApplicationSubmissionContext submissionContext=new ApplicationSubmissionContextPBImpl();
  submissionContext.setAMBlackListRequest(AMBlackListingRequest.newInstance(true,disableThreshold));
  RMAppImpl application=(RMAppImpl)createNewTestApp(submissionContext);
  Assert.assertTrue(application.isAmBlacklistingEnabled());
  Assert.assertEquals(disableThreshold,application.getAmBlacklistingDisableThreshold(),1e-8);
  float globalThreshold=0.9f;
  conf.setBoolean(YarnConfiguration.AM_BLACKLISTING_ENABLED,true);
  conf.setFloat(YarnConfiguration.AM_BLACKLISTING_DISABLE_THRESHOLD,globalThreshold);
  ApplicationSubmissionContext submissionContext2=new ApplicationSubmissionContextPBImpl();
  submissionContext2.setAMBlackListRequest(AMBlackListingRequest.newInstance(false,disableThreshold));
  RMAppImpl application2=(RMAppImpl)createNewTestApp(submissionContext2);
  Assert.assertFalse(application2.isAmBlacklistingEnabled());
  float invalidDisableThreshold=-0.5f;
  conf.setBoolean(YarnConfiguration.AM_BLACKLISTING_ENABLED,true);
  conf.setFloat(YarnConfiguration.AM_BLACKLISTING_DISABLE_THRESHOLD,globalThreshold);
  ApplicationSubmissionContext submissionContext3=new ApplicationSubmissionContextPBImpl();
  submissionContext3.setAMBlackListRequest(AMBlackListingRequest.newInstance(true,invalidDisableThreshold));
  RMAppImpl application3=(RMAppImpl)createNewTestApp(submissionContext3);
  Assert.assertTrue(application3.isAmBlacklistingEnabled());
  Assert.assertEquals(globalThreshold,application3.getAmBlacklistingDisableThreshold(),1e-8);
  conf.setBoolean(YarnConfiguration.AM_BLACKLISTING_ENABLED,true);
  conf.setFloat(YarnConfiguration.AM_BLACKLISTING_DISABLE_THRESHOLD,globalThreshold);
  ApplicationSubmissionContext submissionContext4=new ApplicationSubmissionContextPBImpl();
  RMAppImpl application4=(RMAppImpl)createNewTestApp(submissionContext4);
  Assert.assertTrue(application4.isAmBlacklistingEnabled());
  Assert.assertEquals(globalThreshold,application4.getAmBlacklistingDisableThreshold(),1e-8);
}
