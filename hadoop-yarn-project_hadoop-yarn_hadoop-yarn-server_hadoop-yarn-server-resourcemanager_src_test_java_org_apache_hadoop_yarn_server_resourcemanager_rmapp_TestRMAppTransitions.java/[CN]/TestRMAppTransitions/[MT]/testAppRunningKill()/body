{
  LOG.info("--- START: testAppRunningKill ---");
  RMApp application=testCreateAppRunning(null);
  RMAppEvent event=new RMAppEvent(application.getApplicationId(),RMAppEventType.KILL);
  application.handle(event);
  rmDispatcher.await();
  assertAppState(RMAppState.FINAL_SAVING,application);
  RMAppEvent finishEvent=new RMAppFinishedAttemptEvent(application.getApplicationId(),null);
  application.handle(finishEvent);
  assertAppState(RMAppState.FINAL_SAVING,application);
  assertKilled(application);
}
