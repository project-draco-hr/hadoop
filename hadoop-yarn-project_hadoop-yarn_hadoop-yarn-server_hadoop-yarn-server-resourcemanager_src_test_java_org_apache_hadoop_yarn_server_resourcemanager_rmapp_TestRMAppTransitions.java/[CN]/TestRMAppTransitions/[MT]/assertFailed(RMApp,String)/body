{
  sendAppUpdateSavedEvent(application);
  assertTimesAtFinish(application);
  assertAppState(RMAppState.FAILED,application);
  assertFinalAppStatus(FinalApplicationStatus.FAILED,application);
  StringBuilder diag=application.getDiagnostics();
  Assert.assertTrue("application diagnostics is not correct",diag.toString().matches(regex));
  assertAppFinalStateSaved(application);
}
