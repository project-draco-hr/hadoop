{
  try {
    GenericTestUtils.waitFor(new Supplier<Boolean>(){
      @Override public Boolean get(){
        try {
          BlockLocation[] blocks=fs.getFileBlockLocations(path,0,10);
          Assert.assertEquals(1,blocks.length);
          return blocks[0].getHosts().length == replicas;
        }
 catch (        IOException e) {
          throw new RuntimeException(e);
        }
      }
    }
,100,60000);
  }
 catch (  TimeoutException te) {
    throw new IOException("Timed out waiting for " + replicas + " replicas "+ "on path "+ path);
  }
}
