{
  List<EntityCacheItem> relatedCacheItems=new ArrayList<>();
  List<TimelineStore> stores=getTimelineStoresForRead(entityId,entityType,relatedCacheItems);
  testCacheReferenced=true;
  try {
    while (!testCanProceed) {
      Thread.sleep(1000);
    }
  }
 catch (  InterruptedException e) {
    fail("Interrupted " + e);
  }
  for (  TimelineStore store : stores) {
    TimelineEntity e=store.getEntity(entityId,entityType,fieldsToRetrieve);
    if (e != null) {
      tryReleaseCacheItems(relatedCacheItems);
      return e;
    }
  }
  tryReleaseCacheItems(relatedCacheItems);
  return null;
}
