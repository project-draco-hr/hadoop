{
  StartupProgress prog=NameNode.getStartupProgress();
  Step step=new Step(StepType.DELEGATION_KEYS,sdPath);
  prog.beginStep(Phase.SAVING_CHECKPOINT,step);
  prog.setTotal(Phase.SAVING_CHECKPOINT,step,currentTokens.size());
  Counter counter=prog.getCounter(Phase.SAVING_CHECKPOINT,step);
  out.writeInt(allKeys.size());
  Iterator<Integer> iter=allKeys.keySet().iterator();
  while (iter.hasNext()) {
    Integer key=iter.next();
    allKeys.get(key).write(out);
    counter.increment();
  }
  prog.endStep(Phase.SAVING_CHECKPOINT,step);
}
