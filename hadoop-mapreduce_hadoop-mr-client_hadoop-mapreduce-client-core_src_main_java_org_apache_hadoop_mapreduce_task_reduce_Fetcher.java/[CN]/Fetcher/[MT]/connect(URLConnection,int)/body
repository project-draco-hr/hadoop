{
  int unit=0;
  if (connectionTimeout < 0) {
    throw new IOException("Invalid timeout " + "[timeout = " + connectionTimeout + " ms]");
  }
 else   if (connectionTimeout > 0) {
    unit=Math.min(UNIT_CONNECT_TIMEOUT,connectionTimeout);
  }
  connection.setConnectTimeout(unit);
  while (true) {
    try {
      connection.connect();
      break;
    }
 catch (    IOException ioe) {
      connectionTimeout-=unit;
      if (connectionTimeout == 0) {
        throw ioe;
      }
      if (connectionTimeout < unit) {
        unit=connectionTimeout;
        connection.setConnectTimeout(unit);
      }
    }
  }
}
