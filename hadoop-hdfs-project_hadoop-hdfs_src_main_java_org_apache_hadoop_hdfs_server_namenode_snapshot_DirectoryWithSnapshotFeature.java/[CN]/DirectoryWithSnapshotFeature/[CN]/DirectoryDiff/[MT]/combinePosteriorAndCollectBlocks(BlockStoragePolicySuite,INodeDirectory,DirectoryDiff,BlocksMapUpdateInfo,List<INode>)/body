{
  final QuotaCounts counts=new QuotaCounts.Builder().build();
  diff.combinePosterior(posterior.diff,new Diff.Processor<INode>(){
    /** 
 * Collect blocks for deleted files. 
 */
    @Override public void process(    INode inode){
      if (inode != null) {
        inode.computeQuotaUsage(bsps,counts,false);
        inode.destroyAndCollectBlocks(bsps,collectedBlocks,removedINodes);
      }
    }
  }
);
  return counts;
}
