{
  for (  DirectoryDiff d : diffs) {
    for (    INode deleted : d.getChildrenDiff().getList(ListType.DELETED)) {
      final byte childPolicyId=deleted.getStoragePolicyIDForQuota(storagePolicyId);
      deleted.computeQuotaUsage(bsps,childPolicyId,counts,false,Snapshot.CURRENT_STATE_ID);
    }
  }
  return counts;
}
