{
  ChildrenDiff diff=diffs.checkAndAddLatestSnapshotDiff(latestSnapshotId,parent).diff;
  int undoInfo=diff.create(inode);
  final boolean added=parent.addChild(inode,setModTime,Snapshot.CURRENT_STATE_ID);
  if (!added) {
    diff.undoCreate(inode,undoInfo);
  }
  return added;
}
