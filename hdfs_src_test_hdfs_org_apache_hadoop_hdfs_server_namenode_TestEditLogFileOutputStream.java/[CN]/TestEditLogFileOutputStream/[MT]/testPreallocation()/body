{
  Configuration conf=new HdfsConfiguration();
  MiniDFSCluster cluster=new MiniDFSCluster.Builder(conf).numDataNodes(0).build();
  File editLog=cluster.getNameNode().getFSImage().getEditLog().getFsEditName();
  assertEquals("Edit log should only be 4 bytes long",4,editLog.length());
  assertEquals("Edit log disk space used should be one block",4096,new DU(editLog,conf).getUsed());
  cluster.getFileSystem().mkdirs(new Path("/tmp"),new FsPermission((short)777));
  assertEquals("Edit log should be 1MB + 4 bytes long",(1024 * 1024) + 4,editLog.length());
  assertTrue("Edit log disk space used should be at least 257 blocks",257 * 4096 <= new DU(editLog,conf).getUsed());
}
