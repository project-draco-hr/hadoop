{
  try {
    Map<String,List<String>> parsedMtab=parseMtab(mtab);
    Map<CGroupController,String> ret=new HashMap<>();
    for (    CGroupController controller : CGroupController.values()) {
      String name=controller.getName();
      String controllerPath=findControllerInMtab(name,parsedMtab);
      if (controllerPath != null) {
        File f=new File(controllerPath + "/" + cGroupPrefix);
        if (FileUtil.canWrite(f)) {
          ret.put(controller,controllerPath);
        }
 else {
          String error=new StringBuffer("Mount point Based on mtab file: ").append(mtab).append(". Controller mount point not writable for: ").append(name).toString();
          LOG.error(error);
          throw new ResourceHandlerException(error);
        }
      }
 else {
        LOG.warn("Controller not mounted but automount disabled: " + name);
      }
    }
    return ret;
  }
 catch (  IOException e) {
    LOG.warn("Failed to initialize controller paths! Exception: " + e);
    throw new ResourceHandlerException("Failed to initialize controller paths!");
  }
}
