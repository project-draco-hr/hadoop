{
  InitReplicaRecoveryRequestProto req=InitReplicaRecoveryRequestProto.newBuilder().setBlock(PBHelper.convert(rBlock)).build();
  InitReplicaRecoveryResponseProto resp;
  try {
    resp=rpcProxy.initReplicaRecovery(NULL_CONTROLLER,req);
  }
 catch (  ServiceException e) {
    throw ProtobufHelper.getRemoteException(e);
  }
  if (!resp.getReplicaFound()) {
    return null;
  }
 else {
    if (!resp.hasBlock() || !resp.hasState()) {
      throw new IOException("Replica was found but missing fields. " + "Req: " + req + "\n"+ "Resp: "+ resp);
    }
  }
  BlockProto b=resp.getBlock();
  return new ReplicaRecoveryInfo(b.getBlockId(),b.getNumBytes(),b.getGenStamp(),PBHelper.convert(resp.getState()));
}
