{
  loadAllTaskAttempts();
  this.report=Records.newRecord(TaskReport.class);
  report.setTaskId(taskId);
  long minLaunchTime=Long.MAX_VALUE;
  for (  TaskAttempt attempt : attempts.values()) {
    minLaunchTime=Math.min(minLaunchTime,attempt.getLaunchTime());
  }
  minLaunchTime=minLaunchTime == Long.MAX_VALUE ? -1 : minLaunchTime;
  report.setStartTime(minLaunchTime);
  report.setFinishTime(taskInfo.getFinishTime());
  report.setTaskState(getState());
  report.setProgress(getProgress());
  Counters counters=getCounters();
  if (counters == null) {
    counters=EMPTY_COUNTERS;
  }
  report.setCounters(TypeConverter.toYarn(counters));
  if (successfulAttempt != null) {
    report.setSuccessfulAttempt(successfulAttempt);
  }
  report.addAllDiagnostics(reportDiagnostics);
  report.addAllRunningAttempts(new ArrayList<TaskAttemptId>(attempts.keySet()));
}
