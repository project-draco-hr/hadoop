{
  loadAllTaskAttempts();
  this.report=Records.newRecord(TaskReport.class);
  report.setTaskId(taskId);
  report.setStartTime(taskInfo.getStartTime());
  report.setFinishTime(taskInfo.getFinishTime());
  report.setTaskState(getState());
  report.setProgress(getProgress());
  Counters counters=getCounters();
  if (counters == null) {
    counters=EMPTY_COUNTERS;
  }
  report.setCounters(TypeConverter.toYarn(counters));
  if (successfulAttempt != null) {
    report.setSuccessfulAttempt(successfulAttempt);
  }
  report.addAllDiagnostics(reportDiagnostics);
  report.addAllRunningAttempts(new ArrayList<TaskAttemptId>(attempts.keySet()));
}
