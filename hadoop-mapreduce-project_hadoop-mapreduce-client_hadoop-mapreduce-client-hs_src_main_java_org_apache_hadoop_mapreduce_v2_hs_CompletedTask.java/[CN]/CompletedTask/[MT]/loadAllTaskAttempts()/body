{
  if (taskAttemptsLoaded.get()) {
    return;
  }
  taskAttemptsLock.lock();
  try {
    if (taskAttemptsLoaded.get()) {
      return;
    }
    for (    TaskAttemptInfo attemptHistory : taskInfo.getAllTaskAttempts().values()) {
      CompletedTaskAttempt attempt=new CompletedTaskAttempt(taskId,attemptHistory);
      reportDiagnostics.addAll(attempt.getDiagnostics());
      attempts.put(attempt.getID(),attempt);
      if (successfulAttempt == null && attemptHistory.getTaskStatus() != null && attemptHistory.getTaskStatus().equals(TaskState.SUCCEEDED.toString())) {
        successfulAttempt=TypeConverter.toYarn(attemptHistory.getAttemptId());
      }
    }
    taskAttemptsLoaded.set(true);
  }
  finally {
    taskAttemptsLock.unlock();
  }
}
