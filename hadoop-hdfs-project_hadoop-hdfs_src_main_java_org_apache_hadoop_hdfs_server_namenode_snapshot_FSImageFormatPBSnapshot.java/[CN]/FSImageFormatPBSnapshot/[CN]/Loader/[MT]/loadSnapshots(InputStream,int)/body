{
  for (int i=0; i < size; i++) {
    SnapshotSection.Snapshot pbs=SnapshotSection.Snapshot.parseDelimitedFrom(in);
    INodeDirectory root=loadINodeDirectory(pbs.getRoot(),parent.getLoaderContext());
    int sid=pbs.getSnapshotId();
    INodeDirectorySnapshottable parent=(INodeDirectorySnapshottable)fsDir.getInode(root.getId()).asDirectory();
    Snapshot snapshot=new Snapshot(sid,root,parent);
    parent.addSnapshot(snapshot);
    snapshotMap.put(sid,snapshot);
  }
}
