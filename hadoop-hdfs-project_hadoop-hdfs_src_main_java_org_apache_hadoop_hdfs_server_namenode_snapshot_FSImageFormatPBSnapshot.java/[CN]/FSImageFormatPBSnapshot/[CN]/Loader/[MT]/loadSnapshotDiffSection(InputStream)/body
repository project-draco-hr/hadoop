{
  while (true) {
    SnapshotDiffSection.DiffEntry entry=SnapshotDiffSection.DiffEntry.parseDelimitedFrom(in);
    if (entry == null) {
      break;
    }
    long inodeId=entry.getInodeId();
    INode inode=fsDir.getInode(inodeId);
    SnapshotDiffSection.DiffEntry.Type type=entry.getType();
switch (type) {
case FILEDIFF:
      loadFileDiffList(in,inode.asFile(),entry.getNumOfDiff());
    break;
case DIRECTORYDIFF:
  loadDirectoryDiffList(in,inode.asDirectory(),entry.getNumOfDiff());
break;
}
}
}
