{
  LocatedBlocks blocks=getBlockLocations(src,offset,length,true,true);
  if (blocks != null) {
    final DatanodeDescriptor client=blockManager.getDatanodeManager().getDatanodeByHost(clientMachine);
    for (    LocatedBlock b : blocks.getLocatedBlocks()) {
      clusterMap.pseudoSortByDistance(client,b.getLocations());
      Arrays.sort(b.getLocations(),DFSUtil.DECOM_COMPARATOR);
    }
  }
  return blocks;
}
