{
  writeLock();
  try {
    DatanodeDescriptor node=getDatanode(nodeID);
    if (node == null || !node.isAlive) {
      NameNode.stateChangeLog.warn("BLOCK* NameSystem.blockReceived: " + block + " is received from dead or unregistered node "+ nodeID.getName());
      throw new IOException("Got blockReceived message from unregistered or dead node " + block);
    }
    if (NameNode.stateChangeLog.isDebugEnabled()) {
      NameNode.stateChangeLog.debug("BLOCK* NameSystem.blockReceived: " + block + " is received from "+ nodeID.getName());
    }
    blockManager.addBlock(node,block,delHint);
  }
  finally {
    writeUnlock();
  }
}
