{
  readLock();
  try {
    ArrayList<DatanodeDescriptor> decommissioningNodes=new ArrayList<DatanodeDescriptor>();
    final List<DatanodeDescriptor> results=getBlockManager().getDatanodeManager().getDatanodeListForReport(DatanodeReportType.LIVE);
    for (Iterator<DatanodeDescriptor> it=results.iterator(); it.hasNext(); ) {
      DatanodeDescriptor node=it.next();
      if (node.isDecommissionInProgress()) {
        decommissioningNodes.add(node);
      }
    }
    return decommissioningNodes;
  }
  finally {
    readUnlock();
  }
}
