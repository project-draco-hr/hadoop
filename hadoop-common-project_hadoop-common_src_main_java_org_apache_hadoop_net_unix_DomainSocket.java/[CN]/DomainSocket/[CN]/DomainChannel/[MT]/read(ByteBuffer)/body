{
  refCount.reference();
  boolean exc=true;
  try {
    int nread=0;
    if (dst.isDirect()) {
      nread=DomainSocket.readByteBufferDirect0(DomainSocket.this.fd,dst,dst.position(),dst.remaining());
    }
 else     if (dst.hasArray()) {
      nread=DomainSocket.readArray0(DomainSocket.this.fd,dst.array(),dst.position() + dst.arrayOffset(),dst.remaining());
    }
 else {
      throw new AssertionError("we don't support " + "using ByteBuffers that aren't either direct or backed by " + "arrays");
    }
    if (nread > 0) {
      dst.position(dst.position() + nread);
    }
    exc=false;
    return nread;
  }
  finally {
    unreference(exc);
  }
}
