{
  Path baseDir=new Path(testBaseDir1());
  Path dir=new Path(baseDir,"dir");
  Path linkToDir=new Path(testBaseDir2(),"linkToDir");
  Path dirViaLink=new Path(linkToDir,"dir");
  Path dirNewViaLink=new Path(linkToDir,"dirNew");
  fc.mkdir(dir,FileContext.DEFAULT_PERM,false);
  fc.createSymlink(baseDir,linkToDir,false);
  assertTrue(exists(fc,dirViaLink));
  fc.rename(dirViaLink,dirNewViaLink);
  assertFalse(exists(fc,dirViaLink));
  assertFalse(exists(fc,dir));
  assertTrue(exists(fc,dirNewViaLink));
}
