{
  List<AppCollectorsMap> newCollectorsList=request.getAppCollectorsList();
  if (newCollectorsList != null && !newCollectorsList.isEmpty()) {
    Map<ApplicationId,String> newCollectorsMap=new HashMap<ApplicationId,String>();
    for (    AppCollectorsMap collector : newCollectorsList) {
      ApplicationId appId=collector.getApplicationId();
      String collectorAddr=collector.getCollectorAddr();
      newCollectorsMap.put(appId,collectorAddr);
      if (YarnConfiguration.systemMetricsPublisherEnabled(context.getConf())) {
        TimelineClient client=context.getApplications().get(appId).getTimelineClient();
        client.setTimelineServiceAddress(collectorAddr);
      }
    }
    ((NodeManager.NMContext)context).addRegisteredCollectors(newCollectorsMap);
  }
  return ReportNewCollectorInfoResponse.newInstance();
}
