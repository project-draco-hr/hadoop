{
  long lastTimeStamp=(lastEvent == null) ? Long.MIN_VALUE : lastEvent.getTimeStamp();
  for (  SimulatorEvent e : events) {
    if (e.getTimeStamp() < lastTimeStamp) {
      throw new IllegalArgumentException("Event happens in the past: " + e.getClass() + "("+ e.getTimeStamp()+ "<"+ lastTimeStamp);
    }
    e.setInternalCount(eventCount++);
  }
  return this.events.addAll(events);
}
