{
  UserGroupInformation currentUser=UserGroupInformation.getCurrentUser();
  LOG.trace("Connecting to ApplicationMaster at: " + serviceAddr);
  realProxy=currentUser.doAs(new PrivilegedAction<MRClientProtocol>(){
    @Override public MRClientProtocol run(){
      Configuration myConf=new Configuration(conf);
      myConf.setClass(YarnConfiguration.YARN_SECURITY_INFO,SchedulerSecurityInfo.class,SecurityInfo.class);
      YarnRPC rpc=YarnRPC.create(myConf);
      return (MRClientProtocol)rpc.getProxy(MRClientProtocol.class,NetUtils.createSocketAddr(serviceAddr),myConf);
    }
  }
);
  LOG.trace("Connected to ApplicationMaster at: " + serviceAddr);
}
