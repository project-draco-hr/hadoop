{
  org.apache.hadoop.mapreduce.v2.api.records.JobId jobID=TypeConverter.toYarn(arg0);
  try {
    GetCountersRequest request=recordFactory.newRecordInstance(GetCountersRequest.class);
    request.setJobId(jobID);
    MRClientProtocol protocol=getProxy(arg0);
    if (protocol == null) {
      return new org.apache.hadoop.mapreduce.Counters();
    }
    return TypeConverter.fromYarn(protocol.getCounters(request).getCounters());
  }
 catch (  YarnRemoteException yre) {
    LOG.warn(RPCUtil.toString(yre));
    throw yre;
  }
catch (  Exception e) {
    LOG.debug("Failing to contact application master",e);
    try {
      GetCountersRequest request=recordFactory.newRecordInstance(GetCountersRequest.class);
      request.setJobId(jobID);
      MRClientProtocol protocol=getRefreshedProxy(arg0);
      if (protocol == null) {
        return new org.apache.hadoop.mapreduce.Counters();
      }
      return TypeConverter.fromYarn(protocol.getCounters(request).getCounters());
    }
 catch (    YarnRemoteException yre) {
      LOG.warn(RPCUtil.toString(yre));
      throw yre;
    }
  }
}
