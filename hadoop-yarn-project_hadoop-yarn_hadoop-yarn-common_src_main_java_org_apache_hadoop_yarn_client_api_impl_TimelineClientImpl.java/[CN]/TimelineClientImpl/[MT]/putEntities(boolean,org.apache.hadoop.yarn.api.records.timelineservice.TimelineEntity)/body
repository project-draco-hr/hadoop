{
  if (!timelineServiceV2) {
    throw new YarnException("v.2 method is invoked on a v.1.x client");
  }
  org.apache.hadoop.yarn.api.records.timelineservice.TimelineEntities entitiesContainer=new org.apache.hadoop.yarn.api.records.timelineservice.TimelineEntities();
  for (  org.apache.hadoop.yarn.api.records.timelineservice.TimelineEntity entity : entities) {
    entitiesContainer.addEntity(entity);
  }
  MultivaluedMap<String,String> params=new MultivaluedMapImpl();
  if (getContextAppId() != null) {
    params.add("appid",getContextAppId().toString());
  }
  if (async) {
    params.add("async",Boolean.TRUE.toString());
  }
  putObjects("entities",params,entitiesContainer);
}
