{
  final SSLSocketFactory sf;
  final HostnameVerifier hv;
  sslFactory=new SSLFactory(SSLFactory.Mode.CLIENT,conf);
  sslFactory.init();
  sf=sslFactory.createSSLSocketFactory();
  hv=sslFactory.getHostnameVerifier();
  return new ConnectionConfigurator(){
    @Override public HttpURLConnection configure(    HttpURLConnection conn) throws IOException {
      if (conn instanceof HttpsURLConnection) {
        HttpsURLConnection c=(HttpsURLConnection)conn;
        c.setSSLSocketFactory(sf);
        c.setHostnameVerifier(hv);
      }
      setTimeouts(conn,timeout);
      return conn;
    }
  }
;
}
