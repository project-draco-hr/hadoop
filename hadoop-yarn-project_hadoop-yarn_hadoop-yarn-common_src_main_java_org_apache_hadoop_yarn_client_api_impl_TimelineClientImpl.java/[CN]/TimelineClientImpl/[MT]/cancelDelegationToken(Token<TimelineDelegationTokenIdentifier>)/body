{
  boolean isProxyAccess=UserGroupInformation.getCurrentUser().getAuthenticationMethod() == UserGroupInformation.AuthenticationMethod.PROXY;
  final String doAsUser=isProxyAccess ? UserGroupInformation.getCurrentUser().getShortUserName() : null;
  PrivilegedExceptionAction<Void> cancelDTAction=new PrivilegedExceptionAction<Void>(){
    @Override public Void run() throws Exception {
      if (!timelineDT.equals(token.getDelegationToken())) {
        token.setDelegationToken((Token)timelineDT);
      }
      DelegationTokenAuthenticatedURL authUrl=new DelegationTokenAuthenticatedURL(authenticator,connConfigurator);
      authUrl.cancelDelegationToken(resURI.toURL(),token,doAsUser);
      return null;
    }
  }
;
  operateDelegationToken(cancelDTAction);
}
