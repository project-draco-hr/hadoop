{
  int leftRetries=maxRetries;
  retried=false;
  while (true) {
    try {
      return op.run();
    }
 catch (    IOException e) {
      if (leftRetries == 0) {
        break;
      }
      if (op.shouldRetryOn(e)) {
        logException(e,leftRetries);
      }
 else {
        throw e;
      }
    }
catch (    RuntimeException e) {
      if (leftRetries == 0) {
        break;
      }
      if (op.shouldRetryOn(e)) {
        logException(e,leftRetries);
      }
 else {
        throw e;
      }
    }
    if (leftRetries > 0) {
      leftRetries--;
    }
    retried=true;
    try {
      Thread.sleep(retryInterval);
    }
 catch (    InterruptedException ie) {
      LOG.warn("Client retry sleep interrupted! ");
    }
  }
  throw new RuntimeException("Failed to connect to timeline server. " + "Connection retries limit exceeded. " + "The posted timeline event may be missing");
}
