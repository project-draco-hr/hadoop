{
  List<Block> blocksToCache=null;
  namesystem.writeLock();
  try {
synchronized (neededCacheBlocks) {
      blocksToCache=neededCacheBlocks.pollAll();
    }
  }
  finally {
    namesystem.writeUnlock();
  }
  computeCachingWorkForBlocks(blocksToCache);
  computeUncacheWork();
}
