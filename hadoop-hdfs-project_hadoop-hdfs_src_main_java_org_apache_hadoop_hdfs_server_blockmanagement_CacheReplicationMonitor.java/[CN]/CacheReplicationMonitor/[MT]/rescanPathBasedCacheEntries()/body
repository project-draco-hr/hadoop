{
  FSDirectory fsDir=namesystem.getFSDirectory();
  for (  PathBasedCacheEntry pce : cacheManager.getEntriesById().values()) {
    scannedDirectives++;
    pce.clearBytesNeeded();
    pce.clearBytesCached();
    pce.clearFilesAffected();
    String path=pce.getPath();
    INode node;
    try {
      node=fsDir.getINode(path);
    }
 catch (    UnresolvedLinkException e) {
      continue;
    }
    if (node == null) {
      if (LOG.isDebugEnabled()) {
        LOG.debug("No inode found at " + path);
      }
    }
 else     if (node.isDirectory()) {
      INodeDirectory dir=node.asDirectory();
      ReadOnlyList<INode> children=dir.getChildrenList(null);
      for (      INode child : children) {
        if (child.isFile()) {
          rescanFile(pce,child.asFile());
        }
      }
    }
 else     if (node.isFile()) {
      rescanFile(pce,node.asFile());
    }
 else {
      if (LOG.isDebugEnabled()) {
        LOG.debug("Ignoring non-directory, non-file inode " + node + " found at "+ path);
      }
    }
  }
}
