{
  URI u=f.getCanonicalFile().toURI();
  if (u.getPath().endsWith("/")) {
    String uriAsString=u.toString();
    try {
      u=new URI(uriAsString.substring(0,uriAsString.length() - 1));
    }
 catch (    URISyntaxException e) {
      throw new IOException(e);
    }
  }
  return u;
}
