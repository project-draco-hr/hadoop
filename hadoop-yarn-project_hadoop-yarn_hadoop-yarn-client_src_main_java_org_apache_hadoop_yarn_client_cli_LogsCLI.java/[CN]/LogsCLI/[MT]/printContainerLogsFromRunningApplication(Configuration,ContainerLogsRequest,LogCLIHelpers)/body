{
  String containerIdStr=request.getContainerId().toString();
  String localDir=request.getOutputLocalDir();
  String nodeHttpAddress=request.getNodeHttpAddress();
  String nodeId=request.getNodeId();
  PrintStream out=logCliHelper.createPrintStream(localDir,nodeId,containerIdStr);
  try {
    List<String> allLogs=getContainerLogFiles(getConf(),containerIdStr,nodeHttpAddress);
    List<String> matchedFiles=getMatchedLogFiles(request,allLogs,true);
    if (matchedFiles.isEmpty()) {
      return;
    }
    ContainerLogsRequest newOptions=new ContainerLogsRequest(request);
    newOptions.setLogTypes(matchedFiles);
    Client webServiceClient=Client.create();
    String containerString="\n\nContainer: " + containerIdStr;
    out.println(containerString);
    out.println(StringUtils.repeat("=",containerString.length()));
    for (    String logFile : newOptions.getLogTypes()) {
      out.println("LogType:" + logFile);
      out.println("Log Upload Time:" + Times.format(System.currentTimeMillis()));
      out.println("Log Contents:");
      try {
        WebResource webResource=webServiceClient.resource(WebAppUtils.getHttpSchemePrefix(conf) + nodeHttpAddress);
        ClientResponse response=webResource.path("ws").path("v1").path("node").path("containerlogs").path(containerIdStr).path(logFile).queryParam("size",Long.toString(request.getBytes())).accept(MediaType.TEXT_PLAIN).get(ClientResponse.class);
        out.println(response.getEntity(String.class));
        out.println("End of LogType:" + logFile);
        out.flush();
      }
 catch (      ClientHandlerException|UniformInterfaceException ex) {
        System.err.println("Can not find the log file:" + logFile + " for the container:"+ containerIdStr+ " in NodeManager:"+ nodeId);
      }
    }
    logCliHelper.dumpAContainersLogsForALogType(newOptions,false);
  }
  finally {
    logCliHelper.closePrintStream(out);
  }
}
