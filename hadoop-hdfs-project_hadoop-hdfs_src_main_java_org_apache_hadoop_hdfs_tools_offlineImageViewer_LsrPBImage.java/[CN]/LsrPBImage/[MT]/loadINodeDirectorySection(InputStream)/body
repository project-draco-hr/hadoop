{
  while (true) {
    INodeDirectorySection.DirEntry e=INodeDirectorySection.DirEntry.parseDelimitedFrom(in);
    if (e == null) {
      break;
    }
    long[] l=new long[e.getChildrenCount() + e.getRefChildrenCount()];
    for (int i=0; i < e.getChildrenCount(); ++i) {
      l[i]=e.getChildren(i);
    }
    for (int i=e.getChildrenCount(); i < l.length; i++) {
      int refId=e.getRefChildren(i - e.getChildrenCount());
      l[i]=refList.get(refId).getReferredId();
    }
    dirmap.put(e.getParent(),l);
  }
}
