{
  INode inode=inodes.get(dirId);
  if (LOG.isTraceEnabled()) {
    LOG.trace("Listing directory id " + dirId + " parent '"+ parent+ "' (INode is "+ inode+ ")");
  }
  listINode(parent.isEmpty() ? "/" : parent,inode);
  long[] children=dirmap.get(dirId);
  if (children == null) {
    return;
  }
  String newParent=parent + inode.getName().toStringUtf8() + "/";
  for (  long cid : children) {
    list(newParent,cid);
  }
}
