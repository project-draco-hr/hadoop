{
  if (inheritPermission) {
    FsPermission p=getFsPermission();
    if (!p.getUserAction().implies(FsAction.WRITE_EXECUTE)) {
      p=new FsPermission(p.getUserAction().or(FsAction.WRITE_EXECUTE),p.getGroupAction(),p.getOtherAction());
    }
    node.setPermission(p);
  }
  if (children == null) {
    children=new ArrayList<INode>(DEFAULT_FILES_PER_DIRECTORY);
  }
  int low=Collections.binarySearch(children,node.name);
  if (low >= 0)   return null;
  node.parent=this;
  children.add(-low - 1,node);
  if (setModTime)   setModificationTime(node.getModificationTime());
  if (node.getGroupName() == null) {
    node.setGroup(getGroupName());
  }
  return node;
}
