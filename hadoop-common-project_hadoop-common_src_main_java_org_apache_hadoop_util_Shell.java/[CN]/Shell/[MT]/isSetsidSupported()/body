{
  if (Shell.WINDOWS) {
    return false;
  }
  ShellCommandExecutor shexec=null;
  boolean setsidSupported=true;
  try {
    String[] args={"setsid","bash","-c","echo $$"};
    shexec=new ShellCommandExecutor(args);
    shexec.execute();
  }
 catch (  IOException ioe) {
    LOG.debug("setsid is not available on this machine. So not using it.");
    setsidSupported=false;
  }
catch (  Error err) {
    if (err.getMessage() != null && err.getMessage().contains("posix_spawn is not " + "a supported process launch mechanism") && (Shell.FREEBSD || Shell.MAC)) {
      LOG.info("Avoiding JDK-8047340 on BSD-based systems.",err);
      setsidSupported=false;
    }
  }
 finally {
    if (LOG.isDebugEnabled()) {
      LOG.debug("setsid exited with exit code " + (shexec != null ? shexec.getExitCode() : "(null executor)"));
    }
  }
  return setsidSupported;
}
